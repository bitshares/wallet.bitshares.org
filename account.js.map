{"version":3,"file":"account.b0efca9fd1aa7be72302.js","sources":["webpack:///account.b0efca9fd1aa7be72302.js"],"sourcesContent":["(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{2020:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(2),o=a.n(s),i=a(35),l=a(2026),c=a(9),u=a.n(c),p=a(5),d=a.n(p),m=a(127),h=a(16),f=a(1),g=a.n(f),b=a(285),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function y(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function E(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),_(t,[{key:\"shouldComponentUpdate\",value:function(e){return!h.a.are_equal_shallow(e.assets,this.props.assets)||e.value!==this.props.value||e.scroll_length!==this.props.scroll_length}},{key:\"render\",value:function(){return this.props.assets.length?r.a.createElement(l.a,{entries:this.props.assets.map((function(e){return e&&e.get(\"symbol\")})).filter((function(e){return!!e})),values:this.props.assets.reduce((function(e,t){return t&&t.get(\"symbol\")&&(e[t.get(\"symbol\")]=t),e}),{}),singleEntry:this.props.assets[0]?r.a.createElement(i.a,{asset:this.props.assets[0].get(\"id\"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange,scroll_length:this.props.scroll_length}):null}}]),t}(r.a.Component);w.propTypes={value:g.a.string,onChange:g.a.func,scroll_length:g.a.number},w=Object(m.a)(w,{asList:!0});var k=function(e){function t(){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),_(t,[{key:\"componentDidMount\",value:function(){this.onAssetChange(this.props.asset)}},{key:\"formatAmount\",value:function(e){return e||(e=\"\"),\"number\"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,\"\")}},{key:\"_onChange\",value:function(e){this.props.onChange&&this.props.onChange({amount:this.getNumericEventValue(e),asset:this.props.asset})}},{key:\"onAssetChange\",value:function(e){this.props.onChange&&this.props.onChange({amount:this.props.amount,asset:e})}},{key:\"render\",value:function(){var e=this.props.error?d.a.translate(this.props.error):this.formatAmount(this.props.amount);return r.a.createElement(\"div\",{className:\"amount-selector\",style:this.props.style},r.a.createElement(\"label\",{className:\"right-label\"},this.props.display_balance),r.a.createElement(o.a,{className:\"left-label\",component:\"label\",content:this.props.label}),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{disabled:this.props.disabled,type:\"text\",value:e||\"\",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,onPaste:this.props.onPaste||this.onPaste.bind(this),onKeyPress:this.onKeyPress.bind(this)}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},this.props.isPrice?r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},r.a.createElement(\"div\",null,this.props.asset.get(\"symbol\"),\"/\",this.props.base)):r.a.createElement(w,{ref:this.props.refCallback,value:this.props.asset.get(\"symbol\"),assets:u.a.List(this.props.assets),onChange:this.onAssetChange.bind(this),scroll_length:this.props.scroll_length}))))}}]),t}(b.a);k.propTypes={label:g.a.string,assets:g.a.array,amount:g.a.any,placeholder:g.a.string,onChange:g.a.func,tabIndex:g.a.number,error:g.a.string,scroll_length:g.a.number},k.defaultProps={disabled:!1,tabIndex:0},k=Object(m.a)(k),t.a=k},2023:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return d}));var n=a(0),r=a.n(n),s=a(1),o=a.n(s),i=a(4),l=a(5),c=a.n(l),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var p=r.a.createRef();function d(e){var t=e.onChange,a=e.value,n=e.placeholder,s=e.maxLength,o=e.style,l=e.className,c=e.name,d=e.autoComplete,m=e.onClear,h=e.type,f=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"onChange\",\"value\",\"placeholder\",\"maxLength\",\"style\",\"className\",\"name\",\"autoComplete\",\"onClear\",\"type\"]);return null==m&&(m=function(){t({target:{value:\"\"}}),p.current.focus()}),r.a.createElement(i.Input,u({ref:p,autoComplete:d,style:o,type:h,className:l+\" search-input\",placeholder:n,maxLength:s,name:c,value:a,onChange:t,addonAfter:r.a.createElement(i.Icon,{type:\"search\"}),suffix:m?r.a.createElement(i.Icon,{onClick:m,type:\"close\",className:a?\"cursor-pointer\":\"hide\"}):r.a.createElement(\"span\",null)},f))}d.propTypes={onChange:o.a.func.isRequired,value:o.a.string,placeholder:o.a.string,style:o.a.object,className:o.a.string,type:o.a.string,name:o.a.string,autoComplete:o.a.string,maxLength:o.a.number,onClear:o.a.func},d.defaultProps={placeholder:c.a.translate(\"exchange.filter\"),style:{width:\"200px\"},className:\"\",type:\"text\",name:\"focus\",autoComplete:\"off\",maxLength:16,onClear:void 0}},2027:function(e,t,a){\"use strict\";a.d(t,\"b\",(function(){return y})),a.d(t,\"a\",(function(){return v}));var n=a(0),r=a.n(n),s=a(1),o=a.n(s),i=a(3),l=a.n(i),c=a(30),u=a(22),p=a(21),d=a(5),m=a.n(d),h=a(885),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function b(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),f(t,[{key:\"render\",value:function(){var e=this.props,t=e.isActive,a=e.index,n=e.changeTab,s=e.title,o=e.className,i=e.updatedTab,c=e.disabled,u=e.subText,p=l()({\"is-active\":t},o);return\"string\"==typeof s&&s.indexOf(\".\")>0&&(s=m.a.translate(s)),this.props.collapsed?(\"string\"==typeof u&&(u=u.trim()),\"span\"===s.type&&(s=s.props.children[2]),r.a.createElement(\"option\",{value:a,\"data-is-link-to\":this.props.isLinkTo},s,i?\"*\":\"\",u&&\" (\",u&&u,u&&\")\")):r.a.createElement(\"li\",{className:p,onClick:c?null:n.bind(this,a,this.props.isLinkTo)},r.a.createElement(\"a\",null,r.a.createElement(\"span\",{className:\"tab-title\"},s,i?\"*\":\"\"),u&&r.a.createElement(\"div\",{className:\"tab-subtext\"},u)))}}]),t}(r.a.Component);v.propTypes={changeTab:o.a.func,isActive:o.a.bool.isRequired,index:o.a.number.isRequired,className:o.a.string,isLinkTo:o.a.string,subText:o.a.oneOfType([o.a.object,o.a.string])},v.defaultProps={isActive:!1,index:0,className:\"\",isLinkTo:\"\",subText:null};var y=function(e){function t(e){g(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},a._setDimensions=a._setDimensions.bind(a),a}return _(t,e),f(t,[{key:\"componentDidMount\",value:function(){this._setDimensions(),window.addEventListener(\"resize\",this._setDimensions,{capture:!1,passive:!0})}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this._setDimensions)}},{key:\"_setDimensions\",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:\"_changeTab\",value:function(e,t){e!==this.state.activeTab&&(\"\"!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.children,n=t.contentClass,s=t.tabsClass,o=t.style,i=t.segmented,c=this.state.width<900&&r.a.Children.count(a)>2,u=null,p=r.a.Children.map(a,(function(t,a){if(!t)return null;if(c&&t.props.disabled)return null;var n=a===e.state.activeTab;return n&&(u=t.props.children),r.a.cloneElement(t,{collapsed:c,isActive:n,changeTab:e._changeTab.bind(e),index:a})})).filter((function(e){return null!==e}));return u||(u=p[0].props.children),r.a.createElement(\"div\",{className:l()(this.props.actionButtons?\"with-buttons\":\"\",this.props.className)},r.a.createElement(\"div\",{className:\"service-selector\"},r.a.createElement(\"ul\",{style:o,className:l()(\"button-group no-margin\",s,{segmented:i})},c?r.a.createElement(\"li\",{style:{paddingLeft:10,paddingRight:10,minWidth:\"15rem\"}},r.a.createElement(\"select\",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:\"bts-select\",onChange:function(t){var a=parseInt(t.target.value,10);e._changeTab(a,t.target[a].attributes[\"data-is-link-to\"].value)}},p)):p,this.props.actionButtons?r.a.createElement(\"li\",{className:\"tabs-action-buttons\"},this.props.actionButtons):null)),r.a.createElement(\"div\",{className:l()(\"tab-content\",n)},u))}}]),t}(r.a.Component);y.propTypes={setting:o.a.string,defaultActiveTab:o.a.number,segmented:o.a.bool},y.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:\"\",style:{}},y=Object(c.a)(y,{listenTo:function(){return[p.a]},getProps:function(){return{viewSettings:p.a.getState().viewSettings}}}),y=Object(h.a)(y)},2036:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(2),o=a.n(s),i=a(6),l=a(44),c=a(48),u=a(5),p=a.n(u),d=a(2026),m=a(35),h=a(9),f=a.n(h),g=a(3),b=a.n(g),_=a(127),v=a(1),y=a.n(v),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function k(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function C(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(){return w(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),E(t,[{key:\"render\",value:function(){return 0!==this.props.assets.length&&this.props.value?r.a.createElement(d.a,{entries:this.props.assets.map((function(e){return e&&e.get(\"symbol\")})).filter((function(e){return!!e})),values:this.props.assets.reduce((function(e,t){return t&&t.get(\"symbol\")&&(e[t.get(\"symbol\")]=t),e}),{}),singleEntry:this.props.assets[0]?r.a.createElement(m.a,{asset:this.props.assets[0].get(\"id\"),amount:0,hide_amount:!0}):null,value:\"\",onChange:this.props.onChange}):null}}]),t}(r.a.Component);O.propTypes={value:y.a.string,onChange:y.a.func},O=Object(_.a)(O,{asList:!0});var S=function(e){function t(){return w(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),E(t,[{key:\"getAsset\",value:function(){return this.props.asset}},{key:\"getError\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=p.a.translate(\"explorer.asset.invalid\",{name:e})),t}},{key:\"getNameType\",value:function(e){return e?i.ChainValidation.is_valid_symbol_error(e,!0)?null:\"symbol\":null}},{key:\"onInputChanged\",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:\"componentDidMount\",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:\"componentWillReceiveProps\",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:\"onFound\",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:\"onAssetSelect\",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get(\"symbol\")))}},{key:\"onAction\",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:\"render\",value:function(){var e=this.props,t=e.disabled,a=e.noLabel,n=this.getError(),s=void 0;t||(this.props.asset?s=this.props.asset.get(\"symbol\"):!n&&this.props.assetInput&&(n=p.a.translate(\"explorer.asset.not_found\",{name:this.props.assetInput})));var i=b()(\"button\",{disabled:!this.props.asset||n||this.props.disableActionButton});return r.a.createElement(\"div\",{className:\"asset-selector\",style:this.props.style},r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"header-area\"},n||a?null:r.a.createElement(\"label\",{className:\"right-label\"},\"  \",r.a.createElement(\"span\",null,s)),r.a.createElement(o.a,{component:\"label\",content:this.props.label})),r.a.createElement(\"div\",{className:\"input-area\"},r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{style:this.props.inputStyle,disabled:this.props.disabled,type:\"text\",value:this.props.assetInput||\"\",placeholder:this.props.placeholder||p.a.translate(\"explorer.assets.symbol\"),ref:\"user_input\",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},this.props.asset?r.a.createElement(O,{ref:this.props.refCallback,value:this.props.asset.get(\"symbol\"),assets:f.a.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?r.a.createElement(\"button\",{className:i,onClick:this.onAction.bind(this)},r.a.createElement(o.a,{content:this.props.action_label})):null)),r.a.createElement(\"div\",{className:\"error-area\",style:{paddingBottom:\"10px\"}},r.a.createElement(\"span\",{style:{wordBreak:\"break-all\"}},n))))}}]),t}(r.a.Component);S.propTypes={label:y.a.string,error:y.a.string,placeholder:y.a.string,onChange:y.a.func,onFound:y.a.func,assetInput:y.a.string,asset:l.a.ChainAsset,tabIndex:y.a.number,disableActionButton:y.a.bool},S.defaultProps={disabled:!1},t.a=Object(c.a)(S)},2044:function(e,t,a){\"use strict\";a.d(t,\"b\",(function(){return P})),a.d(t,\"a\",(function(){return I})),a.d(t,\"c\",(function(){return N})),a.d(t,\"d\",(function(){return x}));var n=a(0),r=a.n(n),s=a(35),o=a(44),i=a(48),l=a(127),c=a(16),u=a(30),p=a(197),d=a(2),m=a.n(d),h=a(5),f=a.n(h),g=a(603),b=a(65),_=a(4),v=a(1),y=a.n(v),E=a(6),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function C(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function O(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function S(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function A(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{return b.a.convertValue(e,t,a,s||p.a.getState().allMarketStats,r||E.ChainStore.getAsset(\"1.3.0\"),n||!0)}catch(e){console.log(e)}},j=function(e){function t(e){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return A(t,e),k(t,[{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if(\"value\"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||!c.a.are_equal_shallow(e.pulsate,this.props.pulsate)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:\"render\",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,o=e.fullPrecision,i=e.coreAsset,l=C(e,[\"amount\",\"toAsset\",\"fromAsset\",\"fullPrecision\",\"coreAsset\"]),c=a.get(\"id\"),u=a.get(\"symbol\"),p=x(t,a,n,o,i);return p||0===p?r.a.createElement(s.a,w({noPrefix:!0,amount:p,asset:c,decimalOffset:-1!==u.indexOf(\"BTC\")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get(\"precision\"):a.get(\"precision\")-2},l)):r.a.createElement(_.Tooltip,{placement:\"bottom\",title:f.a.translate(\"tooltip.no_price\")},r.a.createElement(\"div\",{className:\"tooltip inline-block\",style:{fontSize:\"0.9rem\"}},r.a.createElement(m.a,{content:\"account.no_price\"})))}}]),t}(g.a);j.defaultProps={fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1},j=Object(l.a)(j,{propNames:[\"toAsset\",\"fromAsset\",\"coreAsset\"],defaultProps:{toAsset:\"1.3.0\",coreAsset:\"1.3.0\"}});var P=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,e),k(t,[{key:\"render\",value:function(){var e=this.props,t=e.refCallback,a=C(e,[\"refCallback\"]);return r.a.createElement(j,w({},a,{ref:t}))}}]),t}(r.a.Component);P=Object(u.a)(P,{listenTo:function(){return[p.a]},getProps:function(){return{allMarketStats:p.a.getState().allMarketStats}}});var N=function(e){var t=e.getIn([\"balance\",\"amount\"]);return t||0===t?{asset_id:e.getIn([\"balance\",\"asset_id\"]),amount:Number(e.getIn([\"balance\",\"amount\"]))}:{asset_id:e.get(\"asset_type\"),amount:Number(e.get(\"balance\"))}},I=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,e),k(t,[{key:\"render\",value:function(){var e=this.props,t=e.balance,a=C(e,[\"balance\"]),n=N(t),s=n.amount;this.props.satoshis&&(s=this.props.satoshis);var o=n.asset_id;return isNaN(s)?r.a.createElement(\"span\",null,\"--\"):r.a.createElement(P,w({amount:s,fromAsset:o,noDecimals:!0,fullPrecision:!this.props.satoshis&&this.props.fullPrecision},a))}}]),t}(r.a.Component);I.propTypes={balance:o.a.ChainObject.isRequired,satoshis:y.a.number},I.defaultProps={satoshis:null},I=Object(i.a)(I,{keep_updating:!0})},2073:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(2),o=a.n(s),i=a(16),l=a(48),c=a(44),u=a(56),p=a.n(u),d=a(5),m=a.n(d),h=a(83),f=a(601),g=a(168),b=a(41),_=a(46),v=a(30),y=a(21),E=a(22),w=a(595),k=a.n(w),C=a(4),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function A(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function x(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function j(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=function(e){function t(e){A(this,t);var a=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={inputCoinType:e.inputCoinType||a.props.preferredBridge,outputCoinType:e.outputCoinType,receiveAmount:0,depositLimit:0,sendAmount:0,toAddress:h.a.getLast(e.walletType),withdrawValue:\"\",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},a._validateAddress(a.state.toAddress,e),a.deposit_address_cache=new f.a,a}return j(t,e),S(t,[{key:\"onClose\",value:function(){this.props.hideModal()}},{key:\"componentWillMount\",value:function(){this._getDepositAddress(this.props)}},{key:\"componentDidMount\",value:function(){this._getDepositLimit(this.props),this._estimateOutput(this.props)}},{key:\"componentWillReceiveProps\",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this.setState({inputCoinType:e.inputCoinType,outputCoinType:e.outputCoinType}),this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:\"componentDidUpdate\",value:function(){p.a.rebuild()}},{key:\"shouldComponentUpdate\",value:function(e,t){return this.state.inputCoinType===t.inputCoinType&&this.state.outputCoinType===t.outputCoinType||(this._getDepositLimit(t),this._estimateOutput(t),this._getDepositAddress(t)),e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!i.a.are_equal_shallow(t,this.state)}},{key:\"_getDepositAddress\",value:function(e){this.setState({receive_address:null}),Object(h.l)(this._getDepositObject(e))}},{key:\"_getDepositObject\",value:function(e){var t=this,a=e.inputCoinType,n=e.outputCoinType;return{inputCoinType:a.toLowerCase(),outputCoinType:n.toLowerCase(),outputAddress:this.props.sender.get(\"name\"),url:_.b.BASE,stateCallback:function(e){t.addDepositAddress(a.toLowerCase(),n.toLowerCase(),t.props.sender.get(\"name\"),e)}}}},{key:\"_getDepositLimit\",value:function(e){var t=this,a=e.inputCoinType,n=e.outputCoinType;this.setState({limitLoading:!0}),Object(h.k)(a.toLowerCase(),n.toLowerCase()).then((function(e){t.setState({depositLimit:e.depositLimit,limitLoading:!1})})).catch((function(e){console.log(\"deposit limit error:\",e),t.setState({depositLimit:null,limitLoading:!1})}))}},{key:\"_onAmountChange\",value:function(e,t){var a=t.target.value;switch(new RegExp(/[[:digit:]]/).test(a)||(a=a.replace(/[^0-9.]/g,\"\")),\".\"==a.charAt(0)&&(a=\"0.\"),a.charAt(a.length)!=a.search(\".\")&&a.substr(1),a=i.a.limitByPrecision(a,8),e){case\"input\":this.setState({inputAmount:a},this._estimateOutput.bind(this));break;case\"output\":this.setState({outputAmount:a},this._estimateInput.bind(this))}}},{key:\"_estimateOutput\",value:function(){var e=this,t=this.state,a=t.inputAmount,n=t.inputCoinType,r=t.outputCoinType;this.setState({receiveAmount:0,sendAmount:a}),a&&(this.setState({receiveLoading:!0}),Object(h.c)(a,n.toLowerCase(),r.toLowerCase()).then((function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})})).catch((function(t){console.log(\"receive amount err:\",t),e.setState({receiveLoading:!1,apiError:!0})})))}},{key:\"_estimateInput\",value:function(){var e=this,t=this.state,a=t.outputAmount,n=t.inputCoinType,r=t.outputCoinType;this.setState({receiveAmount:a,sendAmount:0}),a&&(this.setState({receiveLoading:!0}),Object(h.b)(a,n.toLowerCase(),r.toLowerCase()).then((function(t){console.log(t),e.setState({inputAmount:t.inputAmount,sendAmount:i.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})})).catch((function(t){console.log(\"send amount err:\",t),e.setState({receiveLoading:!1,apiError:!0})})))}},{key:\"addDepositAddress\",value:function(e,t,a,n){this.deposit_address_cache.cacheInputAddress(\"blocktrades\",a,e,t,n.address,n.memo),this.setState({receive_address:n})}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(h.m)({walletType:a.walletType,newAddress:e}).then((function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:a})})).catch((function(e){console.error(\"Error when validating address:\",e)}))}},{key:\"_setDepositAsset\",value:function(e){this.setState({inputCoinType:e}),E.a.changeViewSetting({preferredBridge:e})}},{key:\"_renderDeposit\",value:function(){var e=i.a.replaceName(this.props.asset),t=e.name,a=e.prefix,n=this.state,s=n.receive_address,l=n.apiError,c=s&&\"memo\"in s&&s.memo,u=s&&s.address||\"\",p=r.a.createElement(\"div\",{className:\"QR\",style:{textAlign:\"center\"}},r.a.createElement(k.a,{size:140,value:u})),d=Object.keys(this.props.bridges.toJS()),h=this.state.inputCoinType.toUpperCase(),f=(a||\"\")+t,_=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),v=f+\"/\"+h,y=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit);return r.a.createElement(\"div\",{className:\"modal__body\",style:{paddingTop:0}},r.a.createElement(C.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(C.Form.Item,{label:m.a.translate(\"modal.buy.asset\")},r.a.createElement(C.Input,{disabled:!0,value:f})),r.a.createElement(C.Form.Item,{label:m.a.translate(\"modal.buy.bridge\")},r.a.createElement(C.Tooltip,{title:m.a.translate(\"tooltip.bridge_TRADE\")},r.a.createElement(C.Input,{disabled:!0,type:\"text\",defaultValue:\"BLOCKTRADES\"})))),l?r.a.createElement(o.a,{content:\"modal.deposit.address_generation_error\"}):r.a.createElement(\"span\",null,r.a.createElement(\"div\",{className:\"grid-block no-overflow wrap shrink\"},r.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},r.a.createElement(C.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(C.Form.Item,{label:m.a.translate(\"transfer.send\"),validateStatus:y?\"error\":\"\",help:y?m.a.translate(\"gateway.over_limit\"):\"\"},r.a.createElement(C.Input,{value:this.state.sendAmount,onChange:this._onAmountChange.bind(this,\"input\"),addonAfter:r.a.createElement(C.Select,{defaultValue:this.state.inputCoinType.toUpperCase(),value:this.state.inputCoinType.toUpperCase(),style:{width:100},onChange:this._setDepositAsset.bind(this)},d.map((function(e){return r.a.createElement(C.Select.Option,{key:e.toUpperCase()},e.toUpperCase())})))})))),r.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},r.a.createElement(C.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(C.Form.Item,{label:m.a.translate(\"gateway.deposit_limit\")},r.a.createElement(C.Input,{value:this.state.depositLimit,disabled:!0,addonAfter:r.a.createElement(C.Select,{defaultValue:this.state.inputCoinType.toUpperCase(),value:this.state.inputCoinType.toUpperCase(),style:{width:100},disabled:!0,showArrow:!1},d.map((function(e){return r.a.createElement(C.Select.Option,{key:e.toUpperCase()},e.toUpperCase())})))}))))),r.a.createElement(\"div\",{className:\"grid-block no-overflow wrap shrink\"},r.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},r.a.createElement(C.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(C.Form.Item,{label:m.a.translate(\"exchange.receive\")},r.a.createElement(C.Input,{value:this.state.receiveAmount,onChange:this._onAmountChange.bind(this,\"output\"),addonAfter:r.a.createElement(C.Select,{defaultValue:f,value:f,style:{width:100},disabled:!0,showArrow:!1},r.a.createElement(C.Select.Option,{key:f},f))})))),r.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},r.a.createElement(C.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(C.Form.Item,{label:m.a.translate(\"exchange.price\")},r.a.createElement(C.Input,{value:y||isNaN(_)?0:_,disabled:!0,addonAfter:r.a.createElement(C.Select,{defaultValue:v,value:v,style:{width:125},disabled:!0,showArrow:!1},r.a.createElement(C.Select.Option,{key:v},v))}))))),u?r.a.createElement(\"div\",{className:\"container-row\"},c?null:p,r.a.createElement(\"div\",{className:\"grid-block\"},r.a.createElement(\"div\",{className:\"copyIcon\"},r.a.createElement(g.a,{text:u,className:\"copyIcon\"})),r.a.createElement(\"div\",null,r.a.createElement(o.a,{component:\"div\",style:{fontSize:\"0.8rem\",fontWeight:\"bold\",paddingBottom:\"0.3rem\"},content:\"gateway.purchase_notice\",inputAsset:h,outputAsset:f}),r.a.createElement(\"div\",{className:\"modal__highlight\"},u))),c?r.a.createElement(\"div\",{className:\"grid-block\",style:{marginTop:\"10px\"}},r.a.createElement(\"div\",{className:\"copyIcon\"},r.a.createElement(g.a,{text:s.memo,className:\"copyIcon\"})),r.a.createElement(\"div\",null,r.a.createElement(o.a,{unsafe:!0,content:\"gateway.purchase_notice_memo\",component:\"div\",style:{fontSize:\"0.8rem\",fontWeight:\"bold\",paddingBottom:\"0.3rem\"}}),r.a.createElement(\"div\",{className:\"modal__highlight\"},s.memo))):null):r.a.createElement(\"div\",{style:{textAlign:\"center\"}},r.a.createElement(b.a,{type:\"three-bounce\"}))))}},{key:\"render\",value:function(){return this.props.asset?r.a.createElement(\"div\",{className:\"grid-block vertical no-overflow\"},this.props.isDown?r.a.createElement(\"div\",{style:{textAlign:\"center\"}},r.a.createElement(o.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable_TRADE\",component:\"p\"})):this.props.isAvailable?this._renderDeposit():r.a.createElement(\"div\",{style:{textAlign:\"center\"}},r.a.createElement(o.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"p\"}))):null}}]),t}(r.a.Component);P.propTypes={sender:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired},P=Object(l.a)(P);var N=function(e){function t(){return A(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),S(t,[{key:\"render\",value:function(){var e=this.props,t=e.preferredBridge,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"preferredBridge\"]),n=this.props.bridges.get(this.props.preferredBridge);return n||(t=(n=this.props.bridges.first()).inputCoinType),r.a.createElement(P,O({hideModal:this.props.hideModal},a,{preferredBridge:t},n.toJS()))}}]),t}(r.a.Component);N=Object(v.a)(N,{listenTo:function(){return[y.a]},getProps:function(){return{preferredBridge:y.a.getState().viewSettings.get(\"preferredBridge\",\"btc\")}}});var I=function(e){function t(){return A(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),S(t,[{key:\"render\",value:function(){return this.props.bridges?r.a.createElement(C.Modal,{title:m.a.translate(\"modal.buy.title\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:[r.a.createElement(C.Button,{key:\"cancel\",onClick:this.props.hideModal},m.a.translate(\"modal.close\"))]},r.a.createElement(N,O({},this.props,{open:this.props.visible}))):null}}]),t}(r.a.Component);t.a=I},2086:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(9),o=a.n(s),i=a(1),l=a.n(i),c=a(2),u=a.n(c),p=a(97),d=a(102),m=(a(44),a(127)),h=a(82),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),f(t,[{key:\"render\",value:function(){var e=this.props,t=e.base,a=e.quote;if(t.get(\"id\")===a.get(\"id\"))return null;var n=a.get(\"symbol\")+\"_\"+t.get(\"symbol\"),s=r.a.createElement(\"span\",null,r.a.createElement(p.a,{name:a.get(\"symbol\")}),\" /\",\" \",r.a.createElement(p.a,{name:t.get(\"symbol\")}));return r.a.createElement(d.a,{to:\"/market/\"+n,onClick:function(){return h.a.switchMarket()}},s)}}]),t}(r.a.Component),b=g=Object(m.a)(g,{propNames:[\"quote\",\"base\"],defaultProps:{base:\"1.3.0\"}}),_=a(371),v=a(87),y=a(20),E=a(5),w=a.n(E),k=a(6),C=a(593),O=a(15),S=a(40),A=a(112),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function P(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var N=function(e){return function(e){var t=Object(m.a)(e,{propNames:[\"shortBackingAsset\"]});return Object(m.a)((function(e){return r.a.createElement(t,j({},e,{shortBackingAsset:e.asset.getIn([\"bitasset\",\"options\",\"short_backing_asset\"])}))}))}(function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=n=P(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(s))),n.state={worthLessSettlement:void 0},P(n,t)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),x(a,[{key:\"updateFlag\",value:function(){var e=this,t=this.props,a=t.asset,n=t.shortBackingAsset,r=a.get(\"id\"),s=n.get(\"id\"),o=O.Apis.instance().db_api().exec(\"get_order_book\",[s,r,1]).then((function(e){return 0===e.bids.length?0:Number(e.bids[0].price)})),i=null,l=1;a.get(\"bitasset\")&&a.get(\"bitasset\").get(\"settlement_fund\")>0?i=a.get(\"bitasset\").get(\"settlement_price\"):(i=A.a.extractRawFeedPrice(a),l=1-a.get(\"bitasset\").get(\"options\").get(\"force_settlement_offset_percent\")/1e4);var c=new S.i({base:new S.a({asset_id:s,amount:i.getIn([\"quote\",\"amount\"]),preicision:n.get(\"precision\")}),quote:new S.a({asset_id:r,amount:i.getIn([\"base\",\"amount\"]),precision:a.get(\"precision\")})}).toReal()*l;o.then((function(t){return e.setState({worthLessSettlement:t>c,marketPrice:t,settlementPrice:c})}))}},{key:\"componentWillMount\",value:function(){this.updateFlag()}},{key:\"componentDidUpdate\",value:function(){this.updateFlag()}},{key:\"render\",value:function(){var t=this.props,a=this.state,n=a.worthLessSettlement,s=a.marketPrice,o=a.settlementPrice;return r.a.createElement(e,j({},t,{worthLessSettlement:n,marketPrice:s,settlementPrice:o}))}}]),a}(n.PureComponent))},I=a(27),M=a(4),T=a(16),B=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function R(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function D(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function F(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q=N((function(e){var t=e.worthLessSettlement,a=e.asset,n=e.shortBackingAsset,s=e.marketPrice,o=e.settlementPrice;switch(s=T.a.format_number(s,a.get(\"precision\")),o=T.a.format_number(o,a.get(\"precision\")),t){case!0:return r.a.createElement(\"div\",null,r.a.createElement(u.a,{component:\"h2\",content:\"exchange.settle_better_marketprice\"}),r.a.createElement(\"span\",null,r.a.createElement(I.a,{string:\"exchange.worth_less_settlement_warning\",keys:[{value:r.a.createElement(b,{base:a.get(\"id\"),quote:n.get(\"id\")}),arg:\"market_link\"}]}),r.a.createElement(\"br\",null),\"  \",r.a.createElement(u.a,{content:\"exchange.price_market\"}),\":  \",s,r.a.createElement(\"br\",null),\"  \",r.a.createElement(u.a,{content:\"exchange.settle\"}),\":  \",o));case void 0:return r.a.createElement(u.a,{content:\"exchange.checking_for_worth_less_settlement\"});default:return r.a.createElement(\"div\",null,r.a.createElement(u.a,{component:\"h2\",content:\"exchange.settle_better_settleprice\"}),r.a.createElement(\"span\",null,r.a.createElement(I.a,{string:\"exchange.settlement_hint\",keys:[{value:r.a.createElement(b,{base:a.get(\"id\"),quote:n.get(\"id\")}),arg:\"market_link\"},{value:r.a.createElement(p.a,{name:a.get(\"symbol\")}),arg:\"long\"}]}),r.a.createElement(\"br\",null),\"  \",r.a.createElement(u.a,{content:\"exchange.price_market\"}),\":  \",s,r.a.createElement(\"br\",null),\"  \",r.a.createElement(u.a,{content:\"exchange.settle\"}),\":  \",o))}})),L=function(e){function t(){R(this,t);var e=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e.onSubmit=e.onSubmit.bind(e),e}return F(t,e),B(t,[{key:\"componentWillReceiveProps\",value:function(e){e.asset&&this.props.asset&&e.asset.get(\"id\")!==this.props.asset.get(\"id\")&&this.setState({amount:0})}},{key:\"getSettlementInfo\",value:function(){var e=this.props,t=e.getDynamicObject,a=e.asset,n=e.core,r=t(a.get(\"dynamic_asset_data_id\")),s=r&&r.size?r.get(\"current_supply\"):0,o=n&&n.size?n.getIn([\"parameters\",\"maintenance_interval\"]):0,i=a.get(\"bitasset\").toJS(),l=i.force_settled_volume,c=s*(i.options.maximum_force_settlement_volume/1e4);return{maxSettlementVolume:c,remainingVolume:l?c-l:c,maintenanceInterval:o,settlementDelay:i.options.force_settlement_delay_sec}}},{key:\"onAmountChanged\",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:\"onSubmit\",value:function(e){var t=this.state.amount;e.preventDefault(),this.props.hideModal(),t=parseInt(t*Math.pow(10,this.props.asset.get(\"precision\")));var a=v.a.new_transaction();return a.add_type_operation(\"asset_settle\",{fee:{amount:0,asset_id:0},account:this.props.account.get(\"id\"),amount:{amount:t,asset_id:this.props.asset.get(\"id\")}}),y.a.process_transaction(a,null,!0).then((function(e){return!0})).catch((function(e){return console.error(\"asset settle error: \",e),!1}))}},{key:\"_useMaxValue\",value:function(e){this.setState({amount:e/Math.pow(10,this.props.asset.get(\"precision\"))})}},{key:\"render\",value:function(){var e=this.props,t=e.asset,a=e.account,s=this.state.amount;if(!t)return null;var o=t&&t.getIn([\"bitasset\",\"options\"])?t.getIn([\"bitasset\",\"options\"]).toJS():null,i=t.get(\"bitasset\").get(\"settlement_fund\")>0,l=0;i||(l=t.get(\"bitasset\").get(\"options\").get(\"force_settlement_offset_percent\")/100);var c=t.get(\"id\"),p=a.get(\"balances\"),d=T.a.replaceName(t),m=d.name,h=d.prefix,f=(h||\"\")+m,g=null,b=0;p&&p.forEach((function(e){var t=k.ChainStore.getObject(e);if(!t.get(\"balance\"))return null;t.get(\"asset_type\")===c&&(g=e,b=t.get(\"balance\"))}));var v=r.a.createElement(\"span\",null,r.a.createElement(u.a,{content:\"exchange.balance\"}),\": \",g?r.a.createElement(\"span\",{className:\"underline\",onClick:this._useMaxValue.bind(this,b)},r.a.createElement(_.a,{balance:g})):\"0 \"+t.get(\"symbol\")),y=!1;s>b/Math.pow(10,this.props.asset.get(\"precision\"))&&(y=!0);var E=[r.a.createElement(M.Tooltip,{title:y?w.a.translate(\"tooltip.lack_funds\"):null},r.a.createElement(M.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmit,disabled:y},w.a.translate(\"modal.settle.submit\"))),r.a.createElement(M.Button,{key:\"close\",onClick:this.props.hideModal},w.a.translate(\"modal.close\"))],O=this.getSettlementInfo(),S=O.maxSettlementVolume,A=O.remainingVolume,x=O.settlementDelay,j=O.maintenanceInterval,P=i?0:(x+Math.floor(s/S)*j)/3600,N=t.getIn([\"bitasset\",\"is_prediction_market\"]),I=N?r.a.createElement(M.Alert,{message:w.a.translate(\"tooltip.settle_market_prediction\"),type:\"info\",showIcon:!0}):r.a.createElement(r.a.Fragment,null,i?r.a.createElement(M.Alert,{message:w.a.translate(\"exchange.settle_delay_globally_settled\"),type:\"warning\",showIcon:!0}):r.a.createElement(M.Alert,{message:w.a.translate(\"exchange.settle_delay\",{hours:o.force_settlement_delay_sec/3600}),description:P?w.a.translate(\"modal.settle.delay\",{amount:P}):null,type:\"info\",showIcon:!0}),r.a.createElement(q,{asset:c}),r.a.createElement(\"br\",null),i?null:r.a.createElement(u.a,{component:\"div\",content:\"exchange.settle_offset\",offset:l}),r.a.createElement(\"br\",null),r.a.createElement(M.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(C.a,{label:\"modal.settle.amount\",amount:s,onChange:this.onAmountChanged.bind(this),display_balance:v,asset:c,assets:[c],tabIndex:1,style:s>A?{\"margin-bottom\":\"0\"}:{}}),s>A?r.a.createElement(n.Fragment,null,r.a.createElement(u.a,{className:\"facolor-info\",content:\"modal.settle.max_volume\",amount:S,asset:f}),r.a.createElement(\"br\",null),r.a.createElement(u.a,{className:\"facolor-info\",content:\"modal.settle.remaining_volume\",amount:A,asset:f})):null));return r.a.createElement(M.Modal,{title:w.a.translate(\"modal.settle.title\",{asset:f}),visible:this.props.visible,id:this.props.modalId,footer:N?null:E,onCancel:this.props.hideModal,overlay:!0,ref:\"settlement_modal\"},I)}}]),t}(r.a.Component);L.propTypes={asset:l.a.instanceOf(o.a.Map),core:l.a.instanceOf(o.a.Map),account:l.a.instanceOf(o.a.Map)},L.defaultProps={asset:o.a.Map(),core:o.a.Map(),account:o.a.Map()},L=Object(m.a)(L,{propNames:[\"asset\",\"core\"],withDynamic:!0,defaultProps:{core:\"2.0.0\"}});var V=function(e){function t(){return R(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return F(t,e),B(t,[{key:\"render\",value:function(){return r.a.createElement(L,this.props)}}]),t}(r.a.Component);t.a=V},2194:function(e,t,a){\"use strict\";(function(e){var n=a(0),r=a.n(n),s=a(2),o=a.n(s),i=a(44),l=a(48),c=a(16),u=a(5),p=a.n(u),d=a(243),m=a(282),h=a(2020),f=a(4),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var b=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={amount:e.amount,to:e.to,to_id:null,memo:\"\"},t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),g(a,[{key:\"onAmountChanged\",value:function(e){var t=e.amount;this.setState({amount:t})}},{key:\"onToAccountChanged\",value:function(e){var t=e?{to:e.get(\"name\"),to_id:e.get(\"id\")}:{to_id:null};this.setState(t)}},{key:\"onToChanged\",value:function(e){this.setState({to:e,to_id:null})}},{key:\"onSubmit\",value:function(){this.props.hideModal();var t=this.props.asset_to_issue,a=c.a.get_asset_precision(t.get(\"precision\")),n=this.state.amount.toString().replace(/,/g,\"\");n*=a,d.a.issue_asset(this.state.to_id,t.get(\"issuer\"),t.get(\"id\"),n,this.state.memo?new e(this.state.memo,\"utf-8\"):this.state.memo).catch((function(e){console.log(\"issue error caught here:\",e),f.Notification.error({message:p.a.translate(\"notifications.asset_issue_failure\")})})),this.setState({amount:0,to:\"\",to_id:null,memo:\"\"})}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value})}},{key:\"render\",value:function(){var e=this.props.asset_to_issue.get(\"id\"),t=1,a=[r.a.createElement(f.Button,{type:\"primary\",key:\"submit\",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),disabled:!this.state.to_id||!this.state.amount},p.a.translate(\"modal.issue.submit\")),r.a.createElement(f.Button,{key:\"cancel\",onClick:this.props.hideModal},p.a.translate(\"cancel\"))];return r.a.createElement(f.Modal,{title:p.a.translate(\"modal.issue.submit\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:a},r.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},r.a.createElement(\"div\",{className:\"grid-container \"},r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(m.a,{label:\"modal.issue.to\",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(h.a,{label:\"modal.issue.amount\",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(\"label\",null,r.a.createElement(o.a,{component:\"span\",content:\"transfer.memo\"}),\" \",\"(\",r.a.createElement(o.a,{content:\"transfer.optional\"}),\")\"),r.a.createElement(\"textarea\",{rows:\"3\",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})))))}}]),a}(r.a.Component);b.propTypes={asset_to_issue:i.a.ChainAsset.isRequired},t.a=Object(l.a)(b)}).call(this,a(126).Buffer)},2195:function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg==\"},2329:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),s=a(42),o=a(23),i=a(21),l=a(117),c=a(44),u=a(48),p=a(30),d=a(103),m=a(9),h=a.n(m),f=a(597),g=a(2019),b=a(2017),_=a(2018),v=a(2022),y=a(1),E=a.n(y),w=a(102),k=a(2),C=a.n(k),O=a(472),S=a(594),A=a(35),x=a(41),j=a(2194),P=a(112),N=a(127),I=a(2027),M=a(34),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var B=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isIssueAssetModalVisible:!1,create:{symbol:\"\",name:\"\",description:\"\",max_supply:1e15,precision:4},issue:{amount:0,to:\"\",to_id:\"\",asset_id:\"\",symbol:\"\"},errors:{symbol:null},isValid:!1,searchTerm:\"\"},a._searchAccounts=Object(v.a)(a._searchAccounts,150),a.showIssueAssetModal=a.showIssueAssetModal.bind(a),a.hideIssueAssetModal=a.hideIssueAssetModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),T(t,[{key:\"showIssueAssetModal\",value:function(){this.setState({isIssueAssetModalVisible:!0})}},{key:\"hideIssueAssetModal\",value:function(){this.setState({isIssueAssetModalVisible:!1})}},{key:\"_checkAssets\",value:function(e,t){if(!this.props.account.get(\"assets\").size){var a=e.sort((function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0})).last();0===e.size||t?(O.a.getAssetList.defer(\"A\",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(O.a.getAssetList.defer(a.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:\"componentWillReceiveProps\",value:function(e){this._checkAssets(e.assets)}},{key:\"componentWillMount\",value:function(){this._checkAssets(this.props.assets,!0)}},{key:\"_onIssueInput\",value:function(e,t){var a=t.target.id,n=this.state.issue;if(\"to\"===a){this._searchAccounts(t.target.value),n.to=t.target.value;var r=this.props.searchAccounts.findEntry((function(e){return e===t.target.value}));n.to_id=r?r[0]:null}else n[e]=t.target.value;this.setState({issue:n})}},{key:\"_searchAccounts\",value:function(e){s.a.accountSearch(e)}},{key:\"_issueButtonClick\",value:function(e,t,a){a.preventDefault();var n=this.state.issue;n.asset_id=e,n.symbol=t,this.setState({issue:n}),this.showIssueAssetModal()}},{key:\"_editButtonClick\",value:function(e,t,a){a.preventDefault(),this.props.history.push(\"/account/\"+t+\"/update-asset/\"+e)}},{key:\"_createButtonClick\",value:function(e){this.props.history.push(\"/account/\"+e+\"/create-asset\")}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.account_name,s=t.assets,o=t.assetsList,i=!0;if(!a)return r.a.createElement(x.a,{type:\"circle\"});if(a.notFound&&(i=!1),!i)return r.a.createElement(\"div\",{className:\"grid-block\"},r.a.createElement(\"h5\",null,r.a.createElement(C.a,{component:\"h5\",content:\"account.errors.not_found\",name:n})));o.length&&(s=s.clear(),o.forEach((function(e){e&&(s=s.set(e.get(\"id\"),e.toJS()))})));var l=s.filter((function(e){return e.issuer===a.get(\"id\")})).sort((function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)})).map((function(t){var a=P.a.parseDescription(t.options.description),s=a.short_name?a.short_name:a.main;s.length>100&&(s=s.substr(0,100)+\"...\");var o=e.props.getDynamicObject(t.dynamic_asset_data_id);return r.a.createElement(\"tr\",{key:t.symbol},r.a.createElement(\"td\",{style:{textAlign:\"left\"}},r.a.createElement(w.a,{to:\"/asset/\"+t.symbol},t.symbol)),r.a.createElement(\"td\",{style:{textAlign:\"left\"}},\"bitasset\"in t?t.bitasset.is_prediction_market?r.a.createElement(C.a,{content:\"account.user_issued_assets.pm\"}):r.a.createElement(C.a,{content:\"account.user_issued_assets.mpa\"}):\"User Issued Asset\"),r.a.createElement(\"td\",{style:{textAlign:\"right\"}},o?r.a.createElement(A.a,{hide_asset:!0,amount:parseInt(o.get(\"current_supply\"),10),asset:t.id}):null),r.a.createElement(\"td\",{style:{textAlign:\"right\"}},r.a.createElement(A.a,{hide_asset:!0,amount:parseInt(t.options.max_supply,10),asset:t.id})),r.a.createElement(\"td\",null,t.bitasset_data_id?null:r.a.createElement(\"a\",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol)},r.a.createElement(M.a,{name:\"cross-circle\",className:\"rotate45\"}))),r.a.createElement(\"td\",null,r.a.createElement(\"a\",{onClick:e._editButtonClick.bind(e,t.symbol,n)},r.a.createElement(M.a,{name:\"dashboard\"}))))})).toArray();return r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(I.b,{segmented:!1,setting:\"issuedAssetsTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},r.a.createElement(I.a,{title:\"account.user_issued_assets.issued_assets\"},r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(\"table\",{className:\"table dashboard-table\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",{style:{textAlign:\"left\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.symbol\"})),r.a.createElement(\"th\",{style:{textAlign:\"left\"}},r.a.createElement(C.a,{content:\"explorer.asset.summary.asset_type\"})),r.a.createElement(C.a,{component:\"th\",content:\"markets.supply\",style:{textAlign:\"right\"}}),r.a.createElement(\"th\",{style:{textAlign:\"right\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.max_supply\"})),r.a.createElement(\"th\",{style:{textAlign:\"center\"}},r.a.createElement(C.a,{content:\"transaction.trxTypes.asset_issue\"})),r.a.createElement(\"th\",{style:{textAlign:\"center\"}},r.a.createElement(C.a,{content:\"transaction.trxTypes.asset_update\"})))),r.a.createElement(\"tbody\",null,l))),r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(\"button\",{className:\"button\",onClick:this._createButtonClick.bind(this,n)},r.a.createElement(C.a,{content:\"transaction.trxTypes.asset_create\"})))))),r.a.createElement(j.a,{visible:this.state.isIssueAssetModalVisible,hideModal:this.hideIssueAssetModal,showModal:this.showIssueAssetModal,asset_to_issue:this.state.issue.asset_id})))}}]),t}(r.a.Component);B.defaultProps={symbol:\"\",name:\"\",description:\"\",max_supply:0,precision:0},B.propTypes={symbol:E.a.string.isRequired},B=Object(N.a)(B,{propNames:[\"assetsList\"],asList:!0,withDynamic:!0});var R=Object(p.a)(B,{listenTo:function(){return[S.a]},getProps:function(e){var t=Object(m.Map)(),a=Object(m.List)();return e.account.get(\"assets\",[]).size?e.account.get(\"assets\",[]).forEach((function(e){a=a.push(e)})):t=S.a.getState().assets,{assets:t,assetsList:a}}}),D=a(3),F=a.n(D),q=a(592),L=a(16),V=a(6),U=a(5),W=a.n(U),z=a(2036),J=a(174),K=a.n(J),G=a(2020),Q=a(193),Z=a.n(Q),H=a(212),Y=a(4),X=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function $(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ee(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function te(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ae=new K.a(Z.a.GRAPHENE_MAX_SHARE_SUPPLY),ne=function(e){function t(e){$(this,t);var a=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={backingAsset:e.backingAsset.get(\"symbol\"),error:null},a}return te(t,e),X(t,[{key:\"_onInputBackingAsset\",value:function(e){this.props.disableBackingAssetChange?this.props.disabledBackingAssetChangeCallback():this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:\"_onFoundBackingAsset\",value:function(e){if(e){var t=e.get(\"bitasset\")&&V.ChainStore.getAsset(e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"])),a=t&&t.get(\"bitasset\")&&V.ChainStore.getAsset(t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]));a&&\"1.3.0\"!==a?(this.setState({error:W.a.translate(\"account.user_issued_assets.error_too_deep\")}),this.props.onUpdate(\"invalid\",!0)):e.getIn([\"bitasset\",\"is_prediction_market\"])?(this.setState({error:W.a.translate(\"account.user_issued_assets.error_invalid\")}),this.props.onUpdate(\"invalid\",!0)):this.props.isPredictionMarket&&e.get(\"precision\")!==parseInt(this.props.assetPrecision,10)?(this.setState({error:W.a.translate(\"account.user_issued_assets.error_precision\",{asset:this.props.assetSymbol})}),this.props.onUpdate(\"invalid\",!0)):(this.props.onUpdate(\"short_backing_asset\",e.get(\"id\")),this.props.onUpdate(\"invalid\",!1))}else this.props.onUpdate(\"invalid\",!0)}},{key:\"render\",value:function(){var e=this.props.bitasset_opts,t=this.state.error;return r.a.createElement(\"div\",{className:\"small-12 grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.feed_lifetime_sec\"}),r.a.createElement(\"input\",{type:\"number\",value:e.feed_lifetime_sec/60,onChange:this.props.onUpdate.bind(this,\"feed_lifetime_sec\")})),r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.minimum_feeds\"}),r.a.createElement(\"input\",{type:\"number\",value:e.minimum_feeds,onChange:this.props.onUpdate.bind(this,\"minimum_feeds\")})),r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.force_settlement_delay_sec\"}),r.a.createElement(\"input\",{type:\"number\",value:e.force_settlement_delay_sec/60,onChange:this.props.onUpdate.bind(this,\"force_settlement_delay_sec\")})),r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.force_settlement_offset_percent\"}),r.a.createElement(\"input\",{type:\"number\",value:e.force_settlement_offset_percent/Z.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,\"force_settlement_offset_percent\")})),r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.maximum_force_settlement_volume\"}),r.a.createElement(\"input\",{type:\"number\",value:e.maximum_force_settlement_volume/Z.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,\"maximum_force_settlement_volume\")})),r.a.createElement(\"div\",{className:\"grid-block no-margin small-12\"},r.a.createElement(z.a,{label:\"account.user_issued_assets.backing\",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundBackingAsset.bind(this)}),t?r.a.createElement(\"div\",{className:\"content-block has-error\"},t):null))}}]),t}(r.a.Component);ne.propTypes={backingAsset:c.a.ChainAsset.isRequired,isUpdate:E.a.bool},ne.defaultProps={isUpdate:!1},ne=Object(u.a)(ne);var re=function(e){function t(e){$(this,t);var a=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a}return te(t,e),X(t,[{key:\"resetState\",value:function(e){L.a.get_asset_precision(4),L.a.get_asset_precision(e.core.get(\"precision\"));var t=this._getPermissions({isBitAsset:!1}),a=t.flagBooleans,n=t.permissionBooleans;V.ChainStore.getAsset(\"1.3.0\").get(\"symbol\");return{update:{symbol:\"\",precision:4,max_supply:1e5,max_market_fee:0,market_fee_percent:0,description:{main:\"\"},reward_percent:0},errors:{max_supply:null},isValid:!0,flagBooleans:a,permissionBooleans:n,isBitAsset:!1,is_prediction_market:!1,core_exchange_rate:{quote:{asset_id:null,amount:1},base:{asset_id:\"1.3.0\",amount:1}},bitasset_opts:{feed_lifetime_sec:86400,minimum_feeds:7,force_settlement_delay_sec:86400,force_settlement_offset_percent:1*Z.a.GRAPHENE_1_PERCENT,maximum_force_settlement_volume:20*Z.a.GRAPHENE_1_PERCENT,short_backing_asset:\"1.3.0\"},marketInput:\"\"}}},{key:\"_getPermissions\",value:function(e){return{flagBooleans:P.a.getFlagBooleans(0,e.isBitAsset),permissionBooleans:P.a.getFlagBooleans(\"all\",e.isBitAsset)}}},{key:\"_createAsset\",value:function(e){e.preventDefault();var t=this.state,a=t.update,n=t.flagBooleans,r=t.permissionBooleans,s=t.core_exchange_rate,o=t.isBitAsset,i=t.is_prediction_market,l=t.bitasset_opts,c=this.props.account,u=P.a.getFlags(n,o),p=P.a.getPermissions(r,o);this.state.marketInput!==a.description.market&&(a.description.market=\"\");var d=JSON.stringify(a.description);O.a.createAsset(c.get(\"id\"),a,u,p,s,o,i,l,d).then((function(e){console.log(\"... AssetActions.createAsset(account_id, update)\",c.get(\"id\"),a,u,p)}))}},{key:\"_hasChanged\",value:function(){return!L.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:\"_reset\",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:\"_forcePositive\",value:function(e){return parseFloat(e)<0?\"0\":e}},{key:\"_onUpdateDescription\",value:function(e,t){var a=this.state.update,n=!0;switch(e){case\"condition\":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case\"short_name\":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case\"market\":a.description[e]=t;break;case\"visible\":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:\"onChangeBitAssetOpts\",value:function(e,t){var a=this.state,n=a.bitasset_opts,r=a.errors;switch(e){case\"force_settlement_offset_percent\":case\"maximum_force_settlement_volume\":n[e]=parseFloat(t.target.value)*Z.a.GRAPHENE_1_PERCENT;break;case\"minimum_feeds\":n[e]=parseInt(t.target.value,10);break;case\"feed_lifetime_sec\":case\"force_settlement_delay_sec\":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case\"short_backing_asset\":n[e]=t;break;case\"invalid\":r.invalid_bitasset=t;break;default:n[e]=t.target.value}var s=!r.symbol&&!r.max_supply&&!r.invalid_bitasset;this.setState({isValid:s,errors:r})}},{key:\"_onUpdateInput\",value:function(e,t){var a=this.state,n=a.update,r=a.errors,s=!1,o=L.a.get_asset_precision(this.state.update.precision),i=t.target,l=i.selectionStart,c=i.value;switch(e){case\"market_fee_percent\":case\"reward_percent\":n[e]=this._forcePositive(i.value);break;case\"max_market_fee\":if(new K.a(c).times(o).gt(ae))return r.max_market_fee=\"The number you tried to enter is too large\",this.setState({errors:r});i.value=L.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case\"precision\":n[e]=this._forcePositive(i.value);break;case\"max_supply\":s=!0,new RegExp(/[[:digit:]]/).test(i.value)||(i.value=i.value.replace(/[^0-9.]/g,\"\")),\".\"==i.value.charAt(0)&&(i.value=\"0.\"),i.value.charAt(i.value.length)!=i.value.search(\".\")&&i.value.substr(1),i.value=L.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case\"symbol\":s=!0;var u=i.value.toUpperCase(),p=new RegExp(\"^[.A-Z0-9]+$\");if(\"\"!==u&&!p.test(u))break;V.ChainStore.getAsset(u),n[e]=this._forcePositive(u);break;default:n[e]=i.value}this.setState({update:n},(function(){if(s){var t=l-(c.length-n[e].length);i.setSelectionRange(t,t)}})),this._validateEditFields(n)}},{key:\"_validateEditFields\",value:function(e){var t=this.state.errors;t.max_supply=null,t.symbol=V.ChainValidation.is_valid_symbol_error(e.symbol),V.ChainStore.getAsset(e.symbol)&&(t.symbol=W.a.translate(\"account.user_issued_assets.exists\"));try{t.max_supply=e.max_supply<=0?W.a.translate(\"account.user_issued_assets.max_positive\"):new K.a(e.max_supply).times(Math.pow(10,e.precision)).gt(ae)?W.a.translate(\"account.user_issued_assets.too_large\"):null}catch(e){console.log(\"err:\",e),t.max_supply=W.a.translate(\"account.user_issued_assets.too_large\")}var a=!t.symbol&&!t.max_supply&&!t.invalid_bitasset;this.setState({isValid:a,errors:t})}},{key:\"_onFlagChange\",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:\"_onPermissionChange\",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:\"_onInputCoreAsset\",value:function(e,t){\"quote\"===e?this.setState({quoteAssetInput:t}):\"base\"===e&&this.setState({baseAssetInput:t})}},{key:\"_onFoundCoreAsset\",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get(\"id\"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:\"_onInputMarket\",value:function(e){this.setState({marketInput:e})}},{key:\"_onFoundMarketAsset\",value:function(e){e&&this._onUpdateDescription(\"market\",e.get(\"symbol\"))}},{key:\"_onCoreRateChange\",value:function(e,t){var a=void 0,n=void 0;if(\"quote\"===e)a=L.a.limitByPrecision(t.target.value,this.state.update.precision),n=null;else{if(!(t&&\"amount\"in t))return;a=\"\"==t.amount?\"0\":L.a.limitByPrecision(t.amount.toString().replace(/,/g,\"\"),this.props.core.get(\"precision\")),n=t.asset.get(\"id\")}this.state.core_exchange_rate[e]={amount:a,asset_id:n},this.forceUpdate()}},{key:\"_onToggleBitAsset\",value:function(){this.state.update;this.state.isBitAsset=!this.state.isBitAsset,this.state.isBitAsset||(this.state.is_prediction_market=!1);var e=this._getPermissions(this.state),t=e.flagBooleans,a=e.permissionBooleans;this.state.flagBooleans=t,this.state.permissionBooleans=a,this.forceUpdate()}},{key:\"_onTogglePM\",value:function(){this.state.is_prediction_market=!this.state.is_prediction_market,this.state.update.precision=this.props.core.get(\"precision\"),this.state.core_exchange_rate.base.asset_id=this.props.core.get(\"id\"),this.forceUpdate()}},{key:\"render\",value:function(){var e=this.props,t=e.globalObject,a=e.core,n=this.state,s=n.errors,o=n.isValid,i=n.update,l=n.flagBooleans,c=n.permissionBooleans,u=n.core_exchange_rate,p=n.is_prediction_market,d=n.isBitAsset,m=n.bitasset_opts,h=i.symbol.length,f=\"N/A\";3===h?f=r.a.createElement(A.a,{amount:Object(H.c)(\"asset_create\",[\"symbol3\"],t),asset:\"1.3.0\"}):4===h?f=r.a.createElement(A.a,{amount:Object(H.c)(\"asset_create\",[\"symbol4\"],t),asset:\"1.3.0\"}):h>4&&(f=r.a.createElement(A.a,{amount:Object(H.c)(\"asset_create\",[\"long_symbol\"],t),asset:\"1.3.0\"}));var g=[],b=function(e,t,a){return r.a.createElement(\"table\",{key:\"table_\"+e,className:\"table\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.\"+e}),\":\"),r.a.createElement(\"td\",{style:{border:\"none\",textAlign:\"right\"}},r.a.createElement(Y.Switch,{checked:a,onChange:t})))))};for(var _ in c)c[_]&&\"charge_market_fee\"!==_&&g.push(b(_,this._onFlagChange.bind(this,_),l[_]));g.push(b(\"visible\",this._onUpdateDescription.bind(this,\"visible\"),!i.description.visible&&!1===i.description.visible));var v=[];for(var y in c)v.push(r.a.createElement(\"table\",{key:\"table_\"+y,className:\"table\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.\"+y}),\":\"),r.a.createElement(\"td\",{style:{border:\"none\"}},r.a.createElement(Y.Switch,{checked:c[y],onChange:this._onPermissionChange.bind(this,y)}))))));var E=r.a.createElement(\"div\",null,r.a.createElement(\"button\",{className:\"button\",onClick:this._reset.bind(this),value:W.a.translate(\"account.perm.reset\")},r.a.createElement(C.a,{content:\"account.perm.reset\"})),r.a.createElement(\"button\",{className:F()(\"button\",{disabled:!o}),onClick:this._createAsset.bind(this)},r.a.createElement(C.a,{content:\"header.create_asset\"})));return r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(\"div\",{className:\"tabs-header\"},r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:\"header.create_asset\"}))),r.a.createElement(I.b,{setting:\"createAssetTab\",className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",contentClass:\"grid-block shrink small-vertical medium-horizontal padding\",segmented:!1,actionButtons:E},r.a.createElement(I.a,{title:\"account.user_issued_assets.primary\"},r.a.createElement(\"div\",{className:\"small-12 grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.symbol\"}),r.a.createElement(\"input\",{type:\"text\",value:i.symbol,onChange:this._onUpdateInput.bind(this,\"symbol\")})),s.symbol?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.symbol):null,r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.max_supply\"}),\" \",i.symbol?r.a.createElement(\"span\",null,\"(\",i.symbol,\")\"):null,r.a.createElement(\"input\",{type:\"text\",value:i.max_supply,onChange:this._onUpdateInput.bind(this,\"max_supply\")})),s.max_supply?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.max_supply):null,r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.decimals\"}),r.a.createElement(\"input\",{min:\"0\",max:\"8\",step:\"1\",type:\"range\",value:i.precision,onChange:this._onUpdateInput.bind(this,\"precision\")})),r.a.createElement(\"p\",null,i.precision),r.a.createElement(\"div\",{style:{marginBottom:10},className:\"txtlabel cancel\"},r.a.createElement(C.a,{content:\"account.user_issued_assets.precision_warning\"})),r.a.createElement(\"table\",{className:\"table\",style:{width:\"inherit\"}},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{style:{border:\"none\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.mpa\"}),\":\"),r.a.createElement(\"td\",{style:{border:\"none\"}},r.a.createElement(Y.Switch,{checked:d,onChange:this._onToggleBitAsset.bind(this)}))))),d?r.a.createElement(\"table\",{className:\"table\",style:{width:\"inherit\"}},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{style:{border:\"none\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.pm\"}),\":\"),r.a.createElement(\"td\",{style:{border:\"none\"}},r.a.createElement(Y.Switch,{checked:p,onChange:this._onTogglePM.bind(this)}))))):null,r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.core_exchange_rate\"}),r.a.createElement(\"label\",null,r.a.createElement(\"div\",{className:\"grid-block no-margin\"},s.quote_asset?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.quote_asset):null,s.base_asset?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.base_asset):null,r.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},r.a.createElement(\"div\",{className:\"amount-selector\",style:{width:\"100%\",paddingRight:\"10px\"}},r.a.createElement(C.a,{component:\"label\",content:\"account.user_issued_assets.quote\"}),r.a.createElement(\"div\",{className:\"inline-label\"},r.a.createElement(\"input\",{type:\"text\",placeholder:\"0.0\",onChange:this._onCoreRateChange.bind(this,\"quote\"),value:u.quote.amount})))),r.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},r.a.createElement(G.a,{label:\"account.user_issued_assets.base\",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,\"base\"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"}}))),r.a.createElement(\"div\",null,r.a.createElement(\"h5\",null,r.a.createElement(C.a,{content:\"exchange.price\"}),r.a.createElement(\"span\",null,\":\",\" \",L.a.format_number(L.a.get_asset_price(u.quote.amount*L.a.get_asset_precision(i.precision),{precision:i.precision},u.base.amount*L.a.get_asset_precision(a),a),2+(parseInt(i.precision,10)||8))),r.a.createElement(\"span\",null,\" \",i.symbol,\"/\",a.get(\"symbol\"))))),r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.cer_warning_1\",component:\"label\",className:\"has-error\"}),r.a.createElement(C.a,{content:\"account.user_issued_assets.cer_warning_2\",component:\"p\"})),r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",f))),r.a.createElement(I.a,{title:\"account.user_issued_assets.description\"},r.a.createElement(\"div\",{className:\"small-12 grid-content\"},r.a.createElement(C.a,{component:\"label\",content:\"account.user_issued_assets.description\"}),r.a.createElement(\"label\",null,r.a.createElement(\"textarea\",{style:{height:\"7rem\"},rows:\"1\",value:i.description.main,onChange:this._onUpdateDescription.bind(this,\"main\")})),r.a.createElement(C.a,{component:\"label\",content:\"account.user_issued_assets.short\"}),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.short_name,onChange:this._onUpdateDescription.bind(this,\"short_name\")})),r.a.createElement(C.a,{component:\"label\",content:\"account.user_issued_assets.market\"}),r.a.createElement(z.a,{label:\"account.user_issued_assets.name\",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundMarketAsset.bind(this)}),p?r.a.createElement(\"div\",null,r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.condition\"}),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,\"condition\")})),r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.expiry\"}),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"date\",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,\"expiry\")}))):null)),d?r.a.createElement(I.a,{title:\"account.user_issued_assets.bitasset_opts\"},r.a.createElement(ne,{bitasset_opts:m,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:m.short_backing_asset,assetPrecision:i.precision,assetSymbol:i.symbol,isPredictionMarket:p})):null,r.a.createElement(I.a,{title:\"account.permissions\"},r.a.createElement(\"div\",{className:\"small-12 grid-content\"},r.a.createElement(\"div\",{style:{maxWidth:800}},r.a.createElement(q.a,{path:\"components/AccountAssetCreate\",section:\"permissions\"})),v)),r.a.createElement(I.a,{title:\"account.user_issued_assets.flags\"},r.a.createElement(\"div\",{className:\"small-12 grid-content\"},r.a.createElement(\"div\",{style:{maxWidth:800}},r.a.createElement(q.a,{path:\"components/AccountAssetCreate\",section:\"flags\"})),c.charge_market_fee?r.a.createElement(\"div\",null,r.a.createElement(\"h3\",null,r.a.createElement(C.a,{component:\"span\",content:\"account.user_issued_assets.market_fee\",style:{paddingRight:\"20px\"}}),r.a.createElement(Y.Switch,{checked:l.charge_market_fee,onChange:this._onFlagChange.bind(this,\"charge_market_fee\")})),r.a.createElement(\"div\",{className:F()({disabled:!l.charge_market_fee}),style:{marginTop:\"10px\",marginLeft:\"30px\"}},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.market_fee\"}),\" \",\"(%)\",r.a.createElement(\"input\",{type:\"number\",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,\"market_fee_percent\")})),r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.max_market_fee\"}),\" \",\"(\",i.symbol,\")\",r.a.createElement(\"input\",{type:\"number\",value:i.max_market_fee,onChange:this._onUpdateInput.bind(this,\"max_market_fee\")})),r.a.createElement(\"div\",{className:F()({disabled:!(i.market_fee_percent>0)})},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.reward_percent\"}),\" \",\"(%)\",r.a.createElement(\"input\",{type:\"number\",value:i.reward_percent,onChange:this._onUpdateInput.bind(this,\"reward_percent\")}))),s.max_market_fee?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.max_market_fee):null)):null,r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.flags\"})),g))))))}}]),t}(r.a.Component);re.propTypes={core:c.a.ChainAsset.isRequired,globalObject:c.a.ChainObject.isRequired},re.defaultProps={globalObject:\"2.0.0\",core:\"1.3.0\"},re=Object(u.a)(re);var se=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),se(t,[{key:\"getFee\",value:function(){return Object(H.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:\"render\",value:function(){var e=this.props,t=e.opType,a=e.options,n=e.globalObject;if(!t||!a||!n)return null;var s=Object(H.c)(t,a,n);return r.a.createElement(A.a,{amount:s,asset:\"1.3.0\"})}}]),t}(r.a.Component);oe.propTypes={globalObject:c.a.ChainObject.isRequired,opType:E.a.string,options:E.a.array},oe.defaultProps={globalObject:\"2.0.0\",options:[]};var ie=Object(u.a)(oe),le=a(136),ce=a(128),ue=a(182),pe=a(282),de=a(22),me=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var he=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={listType:e.assetWhiteListType,accountTable:-1===e.assetWhiteListType.indexOf(\"markets\"),listTypes:[\"whitelist_authorities\",\"blacklist_authorities\",\"whitelist_markets\",\"blacklist_markets\",\"whitelist_market_fee_sharing\"],assetInput:null,asset_id:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),me(t,[{key:\"renderAccountTables\",value:function(){var e=this,t=this.state.listType,a=!1,n=\"explorer.asset.whitelist.enable_flag\";return\"whitelist_market_fee_sharing\"===t?this.props.marketFeeEnabled||(a=!0,n=\"explorer.asset.whitelist.market_fee_enable_flag\"):a=!this.props.whiteListEnabled,a?r.a.createElement(\"div\",null,r.a.createElement(C.a,{className:\"txtlabel cancel\",component:\"p\",content:n})):r.a.createElement(\"div\",null,r.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"explorer.account.title\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"account.perm.remove_text\"})))),r.a.createElement(\"tbody\",null,this.props[t].map((function(a){return r.a.createElement(\"tr\",{key:a},r.a.createElement(\"td\",null,r.a.createElement(ce.a,{account:a})),r.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,t,\"remove\",a)},r.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))})))),r.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},r.a.createElement(pe.a,{label:\"account.whitelist.\"+t,accountName:this.props.authority_name,account:this.props.authority_name,onChange:this.props.onAccountNameChanged.bind(this,\"authority_name\"),onAccountChanged:this.props.onAccountChanged.bind(this,\"new_authority_id\"),error:null,tabIndex:1,action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,t,\"add\",this.props.new_authority_id)})))}},{key:\"_onAssetChange\",value:function(e){this.setState({assetInput:e})}},{key:\"_onAssetFound\",value:function(e){this.setState({asset_id:e?e.get(\"id\"):null})}},{key:\"renderMarketTable\",value:function(){var e=this,t=this.state.listType;return r.a.createElement(\"div\",null,r.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"explorer.asset.title\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"account.perm.remove_text\"})))),r.a.createElement(\"tbody\",null,this.props[t].map((function(a){return r.a.createElement(\"tr\",{key:a},r.a.createElement(\"td\",null,r.a.createElement(ue.a,{asset:a})),r.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,t,\"remove\",a)},r.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))})))),r.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},r.a.createElement(z.a,{label:\"explorer.asset.whitelist.\"+t,onChange:this._onAssetChange.bind(this),asset:this.state.assetInput,assetInput:this.state.assetInput,tabIndex:1,style:{width:\"100%\"},onFound:this._onAssetFound.bind(this),action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,t,\"add\",this.state.asset_id)})))}},{key:\"_onSwitchType\",value:function(e){this.setState({listType:e,accountTable:-1===e.indexOf(\"markets\")}),de.a.changeViewSetting({assetWhiteListType:e})}},{key:\"render\",value:function(){var e=this,t=this.state,a=t.accountTable,n=(t.listType,this.state.listTypes.indexOf(this.state.listType));return r.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"header-selector\",style:{paddingBottom:\"2rem\"}},r.a.createElement(\"div\",{className:\"selector\"},this.state.listTypes.map((function(t,a){return r.a.createElement(\"div\",{key:t,className:F()(\"inline-block\",{inactive:n!==a}),onClick:e._onSwitchType.bind(e,t)},r.a.createElement(C.a,{content:\"explorer.asset.whitelist.\"+t}))})))),a?this.renderAccountTables():this.renderMarketTable(),this.props.children))}}]),t}(r.a.Component),fe=Object(p.a)(he,{listenTo:function(){return[i.a]},getProps:function(){return{assetWhiteListType:i.a.getState().viewSettings.get(\"assetWhiteListType\",\"whitelist_authorities\")}}}),ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var be=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={producer_name:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ge(t,[{key:\"onAccountChanged\",value:function(e){this.setState({new_producer_id:e?e.get(\"id\"):null})}},{key:\"onAccountNameChanged\",value:function(e){this.setState({producer_name:e})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.witnessFed,n=t.committeeFed;return a||n?r.a.createElement(\"div\",{className:\"grid-content small-12 large-8 large-offset-2\"},r.a.createElement(C.a,{component:\"p\",content:\"account.user_issued_assets.feed_not_allowed_1\",className:\"has-error\"}),r.a.createElement(C.a,{component:\"p\",content:\"account.user_issued_assets.feed_not_allowed_2\"})):r.a.createElement(\"div\",{className:\"grid-content small-12 large-8 large-offset-2\"},r.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null),r.a.createElement(\"th\",{style:{textAlign:\"left\"}},r.a.createElement(C.a,{content:\"explorer.account.title\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"account.perm.remove_text\"})))),r.a.createElement(\"tbody\",null,this.props.producers.map((function(t,a){return r.a.createElement(\"tr\",{key:t},r.a.createElement(\"td\",{style:{textAlign:\"left\"}},\"#\",a+1),r.a.createElement(\"td\",{style:{textAlign:\"left\"}},r.a.createElement(ce.a,{account:t})),r.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,\"remove\",t)},r.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))})))),r.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},r.a.createElement(pe.a,{label:\"account.user_issued_assets.add_feed\",accountName:this.state.producer_name,account:this.state.producer_name,onChange:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),error:null,tabIndex:1,action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,\"add\",this.state.new_producer_id)})))}}]),t}(r.a.Component),_e=a(885),ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ye=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function we(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ke(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ce(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Oe=new K.a(Z.a.GRAPHENE_MAX_SHARE_SUPPLY),Se=function(){Y.Notification.error({message:W.a.translate(\"account.user_issued_assets.invalid_backing_asset_change\")})},Ae=function(e){function t(e){we(this,t);var a=ke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a.showAssetUpdateConfirmationModal=a.showAssetUpdateConfirmationModal.bind(a),a.hideAssetUpdateConfirmationModal=a.hideAssetUpdateConfirmationModal.bind(a),a}return Ce(t,e),ye(t,[{key:\"_openConfirm\",value:function(){this.showAssetUpdateConfirmationModal()}},{key:\"_cancelConfirm\",value:function(){this.hideAssetUpdateConfirmationModal()}},{key:\"resetState\",value:function(e){var t=e.asset.toJS(),a=void 0!==t.bitasset_data_id,n=L.a.get_asset_precision(t.precision),r=L.a.get_asset_precision(e.core.get(\"precision\")),s=new K.a(t.options.max_market_fee).div(n).toString(),o=new K.a(t.options.max_supply).div(n).toString(),i=t.options.core_exchange_rate;i.quote.amount=i.quote.asset_id===t.id?new K.a(i.quote.amount).div(n).toString():new K.a(i.quote.amount).div(r).toString(),i.base.amount=i.base.asset_id===t.id?new K.a(i.base.amount).div(n).toString():new K.a(i.base.amount).div(r).toString();var l=P.a.getFlagBooleans(t.options.flags,a),c=P.a.getFlagBooleans(t.options.issuer_permissions,a);t.options.market_fee_percent/=100,null!==t.options.extensions&&null!==t.options.extensions.reward_percent&&(t.options.extensions.reward_percent/=100);var u=V.ChainStore.getAsset(i.quote.asset_id).get(\"symbol\"),p=V.ChainStore.getAsset(i.base.asset_id).get(\"symbol\"),d=e.asset.getIn([\"options\",\"extensions\",\"whitelist_market_fee_sharing\"]);return{isAssetUpdateConfirmationModalVisible:!1,update:{max_supply:o,max_market_fee:s,reward_percent:void 0===e.asset.getIn([\"options\",\"extensions\",\"reward_percent\"])?void 0:t.options.extensions.reward_percent,market_fee_percent:t.options.market_fee_percent,description:P.a.parseDescription(t.options.description)},core_exchange_rate:i,issuer:t.issuer,new_issuer_account_id:null,new_funder_account:e.account.get(\"id\"),asset_to_update:t.id,errors:{max_supply:null},new_authority_id:null,authority_name:null,isValid:!0,flagBooleans:l,permissionBooleans:c,isBitAsset:a,coreRateQuoteAssetName:u,quoteAssetInput:u,coreRateBaseAssetName:p,baseAssetInput:p,claimFeesAmount:0,bitasset_opts:a?t.bitasset.options:null,original_bitasset_opts:a?e.asset.getIn([\"bitasset\",\"options\"]).toJS():null,marketInput:\"\",whitelist_authorities:e.asset.getIn([\"options\",\"whitelist_authorities\"]),blacklist_authorities:e.asset.getIn([\"options\",\"blacklist_authorities\"]),whitelist_markets:e.asset.getIn([\"options\",\"whitelist_markets\"]),whitelist_market_fee_sharing:d,blacklist_markets:e.asset.getIn([\"options\",\"blacklist_markets\"]),maxFeedProducers:e.globalObject.getIn([\"parameters\",\"maximum_asset_feed_publishers\"]),feedProducers:a?e.asset.getIn([\"bitasset\",\"feeds\"],[]).map((function(e){return e.first()})):null,originalFeedProducers:a?e.asset.getIn([\"bitasset\",\"feeds\"],[]).map((function(e){return e.first()})):null}}},{key:\"hideAssetUpdateConfirmationModal\",value:function(){this.setState({isAssetUpdateConfirmationModalVisible:!1})}},{key:\"showAssetUpdateConfirmationModal\",value:function(){this.setState({isAssetUpdateConfirmationModalVisible:!0})}},{key:\"assetChanged\",value:function(){var e=this.state,t=this.resetState(this.props);return JSON.stringify(e.update)!==JSON.stringify(t.update)||JSON.stringify(e.core_exchange_rate)!==JSON.stringify(t.core_exchange_rate)||null!==e.new_issuer_account_id&&e.new_issuer_account_id!==e.issuer||JSON.stringify(e.flagBooleans)!==JSON.stringify(t.flagBooleans)||JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)||JSON.stringify(e.whitelist_authorities)!==JSON.stringify(t.whitelist_authorities)||JSON.stringify(e.blacklist_authorities)!==JSON.stringify(t.blacklist_authorities)||JSON.stringify(e.whitelist_markets)!==JSON.stringify(t.whitelist_markets)||JSON.stringify(e.blacklist_markets)!==JSON.stringify(t.blacklist_markets)||JSON.stringify(e.whitelist_market_fee_sharing)!==JSON.stringify(t.whitelist_market_fee_sharing)}},{key:\"tabChanged\",value:function(e){var t=this.tabsChanged();return!!t[e]&&t[e]}},{key:\"tabsChanged\",value:function(){var e=this.state,t=this.resetState(this.props),a=[];return e.update.max_supply===t.update.max_supply&&e.core_exchange_rate.base.amount===t.core_exchange_rate.base.amount&&e.core_exchange_rate.quote.amount===t.core_exchange_rate.quote.amount||(a[0]=!0),JSON.stringify(e.whitelist_authorities)===JSON.stringify(t.whitelist_authorities)&&JSON.stringify(e.blacklist_authorities)===JSON.stringify(t.blacklist_authorities)&&JSON.stringify(e.whitelist_markets)===JSON.stringify(t.whitelist_markets)&&JSON.stringify(e.blacklist_markets)===JSON.stringify(t.blacklist_markets)&&JSON.stringify(e.whitelist_market_fee_sharing)===JSON.stringify(t.whitelist_market_fee_sharing)||(a[1]=!0),e.update.description.main===t.update.description.main&&e.update.description.short_name===t.update.description.short_name&&e.update.description.market===t.update.description.market||(a[2]=!0),JSON.stringify(e.bitasset_opts)!==JSON.stringify(t.original_bitasset_opts)&&(a[3]=!0),JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)&&(a[4]=!0),JSON.stringify(e.flagBooleans)===JSON.stringify(t.flagBooleans)&&e.update.market_fee_percent===t.update.market_fee_percent&&e.update.max_market_fee===t.update.max_market_fee&&e.update.reward_percent===t.update.reward_percent||(a[5]=!0),JSON.stringify(e.feedProducers)!==JSON.stringify(t.originalFeedProducers)&&(a[6]=!0),a}},{key:\"pageChanged\",value:function(){var e=this.state,t=e.isBitAsset,a=e.bitasset_opts,n=e.original_bitasset_opts,r=e.feedProducers,s=e.originalFeedProducers;return this.assetChanged()||t&&(JSON.stringify(a)!==JSON.stringify(n)||!L.a.are_equal_shallow(r.toJS(),s.toJS()))}},{key:\"_updateAsset\",value:function(e){var t=this;e.preventDefault(),this.hideAssetUpdateConfirmationModal();var a=this.state,n=a.update,r=a.issuer,s=a.new_issuer_account_id,o=a.core_exchange_rate,i=a.flagBooleans,l=a.permissionBooleans,c=a.isBitAsset,u=a.bitasset_opts,p=a.original_bitasset_opts,d=a.feedProducers,m=a.originalFeedProducers,h=P.a.getFlags(i);128&this.props.asset.getIn([\"options\",\"flags\"])&&!(128&this.props.asset.getIn([\"options\",\"issuer_permissions\"]))&&(h+=128);var f=P.a.getPermissions(l,c);this.state.marketInput!==n.description.market&&(n.description.market=\"\");var g=JSON.stringify(n.description),b={whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets,whitelist_market_fee_sharing:this.state.whitelist_market_fee_sharing},_=c?d.toJS():null,v=c?m.toJS():null;O.a.updateAsset(r,s,n,o,this.props.asset,h,f,c,u,p,g,b,_,v,this.assetChanged()).then((function(){console.log(\"... AssetActions.updateAsset(account_id, update)\",r,s,t.props.asset.get(\"id\"),n),setTimeout((function(){V.ChainStore.getAsset(t.props.asset.get(\"id\")),t.setState(t.resetState(t.props))}),3e3)}))}},{key:\"_reset\",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:\"_forcePositive\",value:function(e){return parseFloat(e)<0?\"0\":e}},{key:\"_onUpdateDescription\",value:function(e,t){var a=this.state.update,n=!0;switch(e){case\"condition\":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case\"short_name\":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case\"market\":a.description[e]=t;break;case\"visible\":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:\"onChangeBitAssetOpts\",value:function(e,t){var a=this.state.bitasset_opts;switch(e){case\"force_settlement_offset_percent\":case\"maximum_force_settlement_volume\":a[e]=parseFloat(t.target.value)*Z.a.GRAPHENE_1_PERCENT;break;case\"feed_lifetime_sec\":case\"force_settlement_delay_sec\":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),a[e]=parseInt(60*parseFloat(t.target.value),10);break;case\"short_backing_asset\":a[e]=t;break;case\"minimum_feeds\":a[e]=parseInt(t.target.value,10)}this.forceUpdate()}},{key:\"_onUpdateInput\",value:function(e,t){var a=this.state.update,n=!0,r=L.a.get_asset_precision(this.props.asset.get(\"precision\"));switch(e){case\"market_fee_percent\":case\"reward_percent\":a[e]=this._forcePositive(t.target.value);break;case\"max_market_fee\":var s=t.amount.replace(/,/g,\"\");if(new K.a(s).times(r).gt(Oe))return n=!1,this.setState({errors:{max_market_fee:\"The number you tried to enter is too large\"}});a[e]=L.a.limitByPrecision(s,this.props.asset.get(\"precision\"));break;case\"max_supply\":var o=t.amount.replace(/,/g,\"\");a[e]=L.a.limitByPrecision(o,this.props.asset.get(\"precision\"));break;default:a[e]=t.target.value}n&&(this.setState({update:a}),this._validateEditFields(a))}},{key:\"_validateEditFields\",value:function(e){var t=e.core_exchange_rate,a=e.feedProducers?e.feedProducers:this.state.feedProducers,n=this.state.flagBooleans,r=this.props,s=r.asset,o=r.core,i={max_supply:null,quote_asset:null,base_asset:null,max_feed_producer:null,conflict_producer:null,invalid_market_pair:null},l=this.props.asset.get(\"precision\");try{i.max_supply=e.max_supply<=0?W.a.translate(\"account.user_issued_assets.max_positive\"):new K.a(parseInt(e.max_supply,10)).times(Math.pow(10,l)).gt(Oe)?W.a.translate(\"account.user_issued_assets.too_large\"):null}catch(e){console.log(\"err:\",e),i.max_supply=W.a.translate(\"account.user_issued_assets.too_large\")}t&&(t.quote.asset_id!==s.get(\"id\")&&t.base.asset_id!==s.get(\"id\")&&(i.quote_asset=W.a.translate(\"account.user_issued_assets.need_asset\",{name:s.get(\"symbol\")})),t.quote.asset_id!==o.get(\"id\")&&t.base.asset_id!==o.get(\"id\")&&(i.base_asset=W.a.translate(\"account.user_issued_assets.need_asset\",{name:o.get(\"symbol\")}))),a&&a.size>this.state.maxFeedProducers&&(i.max_feed_producer=W.a.translate(\"account.user_issued_assets.too_many_feed\",{max:this.state.maxFeedProducers})),n.committee_fed_asset&&n.witness_fed_asset&&(i.conflict_producer=W.a.translate(\"account.user_issued_assets.conflict_feed\")),this.state.marketInput==this.props.asset.get(\"symbol\")&&(i.invalid_market_pair=W.a.translate(\"account.user_issued_assets.invalid_market_pair\"));var c=!(i.invalid_market_pair||i.max_supply||i.base_asset||i.quote_asset||i.max_feed_producer||i.conflict_producer);this.setState({isValid:c,errors:i})}},{key:\"_onCoreRateChange\",value:function(e,t){t.amount=\"\"==t.amount?\"0\":t.amount.replace(/,/g,\"\"),t.amount=L.a.limitByPrecision(t.amount,t.asset.get(\"precision\")),this.state.core_exchange_rate[e]={amount:t.amount,asset_id:t.asset.get(\"id\")},this.forceUpdate()}},{key:\"onAccountChanged\",value:function(e,t){this.setState(Ee({},e,t?t.get(\"id\"):null))}},{key:\"onAccountNameChanged\",value:function(e,t){this.setState(Ee({},e,t))}},{key:\"_onInputCoreAsset\",value:function(e,t){\"quote\"===e?this.setState({quoteAssetInput:t}):\"base\"===e&&this.setState({baseAssetInput:t})}},{key:\"_onFoundCoreAsset\",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get(\"id\"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:\"_onInputMarket\",value:function(e){this.setState({marketInput:e})}},{key:\"_onFoundMarketAsset\",value:function(e){e&&this._onUpdateDescription(\"market\",e.get(\"symbol\"))}},{key:\"_onFlagChange\",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t}),this._validateEditFields({})}},{key:\"_getCurrentSupply\",value:function(){var e=this.props,t=e.asset,a=e.getDynamicObject;return a&&a(t.get(\"dynamic_asset_data_id\")).get(\"current_supply\")}},{key:\"_onPermissionChange\",value:function(e){var t=this.state,a=t.isBitAsset,n=t.permissionBooleans,r=!P.a.getFlagBooleans(this.props.asset.getIn([\"options\",\"issuer_permissions\"]),a)[e];if(this._getCurrentSupply()>0&&r)Y.Notification.error({message:W.a.translate(\"account.user_issued_assets.invalid_permissions_change\")});else{var s=n;s[e]=!s[e],this.setState({permissionBooleans:s})}}},{key:\"_onClaimInput\",value:function(e){this.setState({claimFeesAmount:e.amount})}},{key:\"onChangeList\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"add\",a=arguments[2],n=this.state[e];void 0===n&&(n=new h.a.List([])),\"add\"!==t||n.includes(a)?\"remove\"===t&&n.includes(a)&&(n=n.remove(n.indexOf(a))):n=n.push(a),this.setState(Ee({},e,n))}},{key:\"onChangeFeedProducerList\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"add\",t=arguments[1],a=this.state.feedProducers;\"add\"!==e||a.includes(t)?\"remove\"===e&&a.includes(t)&&(a=a.remove(a.indexOf(t))):a=a.push(t),this.setState({feedProducers:a}),this._validateEditFields({feedProducers:a})}},{key:\"render\",value:function(){var e,t=this,a=this.props.asset,n=this.state,s=n.errors,o=n.isValid,i=n.update,l=n.core_exchange_rate,c=n.flagBooleans,u=n.permissionBooleans,p=(n.claimFeesAmount,n.isBitAsset),d=n.bitasset_opts,m=a.get(\"symbol\");e=r.a.createElement(ie,{opType:\"asset_update\"});var f=V.ChainStore.getAsset(l.quote.asset_id),g=L.a.get_asset_precision(f.get(\"precision\")),b=V.ChainStore.getAsset(l.base.asset_id),_=L.a.get_asset_precision(b.get(\"precision\")),v=parseFloat(l.quote.amount)*g,y=parseFloat(l.base.amount)*_,E=P.a.getFlagBooleans(a.getIn([\"options\",\"issuer_permissions\"]),void 0!==a.get(\"bitasset\")),w=[],k=function(e,t,a){return r.a.createElement(\"table\",{key:\"table_\"+e,className:\"table\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.\"+e}),\":\"),r.a.createElement(\"td\",{style:{border:\"none\",textAlign:\"right\"}},r.a.createElement(Y.Switch,{checked:a,onChange:t})))))};for(var O in E)E[O]&&\"charge_market_fee\"!==O&&w.push(k(O,this._onFlagChange.bind(this,O),c[O]));w.push(k(\"visible\",this._onUpdateDescription.bind(this,\"visible\"),!i.description.visible&&!1===i.description.visible));var S=[];for(var A in E)S.push(r.a.createElement(\"table\",{key:\"table_\"+A,className:\"table\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},r.a.createElement(C.a,{content:\"account.user_issued_assets.\"+A}),\":\"),r.a.createElement(\"td\",{style:{border:\"none\"}},r.a.createElement(Y.Switch,{checked:u[A],onChange:this._onPermissionChange.bind(this,A)}))))));var x=0;this.tabsChanged().forEach((function(){x++}));var j=r.a.createElement(\"div\",null,r.a.createElement(\"button\",{className:F()(\"button\",{disabled:!o||!this.pageChanged()}),style:{width:\"9rem\"},onClick:x>1?this._openConfirm.bind(this):this._updateAsset.bind(this)},x>1?r.a.createElement(C.a,{content:\"account.perm.save_all\"}):r.a.createElement(C.a,{content:\"account.perm.save\"})),r.a.createElement(\"button\",{className:F()(\"button primary hollow\",{disabled:!this.pageChanged()}),onClick:this._reset.bind(this)},r.a.createElement(C.a,{content:\"account.perm.reset\"}))),N=!1;\"1.3.0\"!==f.get(\"id\")&&\"1.3.0\"!==b.get(\"id\")||f.get(\"id\")!==a.get(\"id\")&&b.get(\"id\")!==a.get(\"id\")||(N=!0);var M=a.getIn([\"bitasset\",\"is_prediction_market\"]),T=P.a.parseDescription(this.props.asset.toJS().options.description);return r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(\"div\",{className:\"tabs-header\"},r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:\"header.update_asset\"}),\":\",\" \",m)),r.a.createElement(I.b,{setting:\"updateAssetTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"grid-block padding-top shrink small-vertical medium-horizontal\",segmented:!1,actionButtons:j,onChangeTab:function(e){t.setState({activeTab:e})}},r.a.createElement(I.a,{title:\"account.user_issued_assets.primary\",updatedTab:this.tabChanged(0)},r.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.precision\"}),r.a.createElement(\"span\",null,\": \",a.get(\"precision\"))),r.a.createElement(\"br\",null),r.a.createElement(\"label\",null,r.a.createElement(G.a,{label:\"account.user_issued_assets.max_supply\",amount:i.max_supply,onChange:this._onUpdateInput.bind(this,\"max_supply\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1})),s.max_supply?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.max_supply):null,r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.core_exchange_rate\"}),r.a.createElement(\"label\",null,r.a.createElement(\"div\",{className:\"grid-block no-margin\"},N?null:r.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},r.a.createElement(z.a,{label:\"account.user_issued_assets.quote_name\",onChange:this._onInputCoreAsset.bind(this,\"quote\"),asset:this.state.quoteAssetInput,assetInput:this.state.quoteAssetInput,tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundCoreAsset.bind(this,\"quote\")})),N?null:r.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},r.a.createElement(z.a,{label:\"account.user_issued_assets.base_name\",onChange:this._onInputCoreAsset.bind(this,\"base\"),asset:this.state.baseAssetInput,assetInput:this.state.baseAssetInput,tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"},onFound:this._onFoundCoreAsset.bind(this,\"base\")})),s.quote_asset?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.quote_asset):null,s.base_asset?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.base_asset):null,r.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},r.a.createElement(G.a,{label:\"account.user_issued_assets.quote\",amount:l.quote.amount,onChange:this._onCoreRateChange.bind(this,\"quote\"),asset:l.quote.asset_id,assets:[l.quote.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"}})),r.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},r.a.createElement(G.a,{label:\"account.user_issued_assets.base\",amount:l.base.amount,onChange:this._onCoreRateChange.bind(this,\"base\"),asset:l.base.asset_id,assets:[l.base.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"}}))),r.a.createElement(\"div\",null,r.a.createElement(\"h5\",null,r.a.createElement(C.a,{content:\"exchange.price\"}),\":\",\" \",r.a.createElement(le.a,{style:{fontWeight:\"bold\"},quote_amount:v,quote_asset:l.quote.asset_id,base_asset:l.base.asset_id,base_amount:y})))),r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.cer_warning_1\",component:\"label\",className:\"has-error\"}),r.a.createElement(C.a,{content:\"account.user_issued_assets.cer_warning_2\",component:\"p\"})),r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),r.a.createElement(I.a,{title:\"account.whitelist.title\",updatedTab:this.tabChanged(1)},r.a.createElement(fe,{whiteListEnabled:c.white_list,marketFeeEnabled:c.charge_market_fee,whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,whitelist_market_fee_sharing:void 0===this.state.whitelist_market_fee_sharing?new h.a.List([]):this.state.whitelist_market_fee_sharing,blacklist_markets:this.state.blacklist_markets,new_authority_id:this.state.new_authority_id,authority_name:this.state.authority_name,onAccountNameChanged:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),onChangeList:this.onChangeList.bind(this)},r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),r.a.createElement(I.a,{title:\"account.user_issued_assets.description\",updatedTab:this.tabChanged(2)},r.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(\"textarea\",{style:{height:\"7rem\"},rows:\"1\",value:i.description.main||\"\",onChange:this._onUpdateDescription.bind(this,\"main\")})),r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.short\"}),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.short_name||\"\",onChange:this._onUpdateDescription.bind(this,\"short_name\")})),r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.market\"}),r.a.createElement(z.a,{label:\"account.user_issued_assets.name\",onChange:this._onInputMarket.bind(this),placeholder:T.market,asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:\"100%\",paddingRight:\"10px\",paddingBottom:\"20px\"},onFound:this._onFoundMarketAsset.bind(this)}),s.invalid_market_pair?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.invalid_market_pair):null,M?r.a.createElement(\"div\",null,r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.condition\"}),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,\"condition\")})),r.a.createElement(C.a,{component:\"h3\",content:\"account.user_issued_assets.expiry\"}),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"date\",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,\"expiry\")}))):null,r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),p?r.a.createElement(I.a,{title:\"account.user_issued_assets.bitasset_opts\",updatedTab:this.tabChanged(3)},r.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},r.a.createElement(ne,{bitasset_opts:d,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:d.short_backing_asset,assetPrecision:a.get(\"precision\"),assetSymbol:a.get(\"symbol\"),disableBackingAssetChange:this._getCurrentSupply()>0,disabledBackingAssetChangeCallback:Se}),r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))):null,r.a.createElement(I.a,{title:\"account.permissions\",updatedTab:this.tabChanged(4)},r.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},r.a.createElement(q.a,{path:\"components/AccountAssetCreate\",section:\"permissions\"}),r.a.createElement(\"p\",{className:\"grid-content has-error\"},r.a.createElement(C.a,{content:\"account.user_issued_assets.perm_warning\"})),S,r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),r.a.createElement(I.a,{title:\"account.user_issued_assets.flags\",updatedTab:this.tabChanged(5)},r.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},r.a.createElement(q.a,{path:\"components/AccountAssetCreate\",section:\"flags\"}),E.charge_market_fee?r.a.createElement(\"div\",null,r.a.createElement(\"h3\",null,r.a.createElement(C.a,{component:\"span\",content:\"account.user_issued_assets.market_fee\",style:{paddingRight:\"20px\"}}),r.a.createElement(Y.Switch,{checked:c.charge_market_fee,onChange:this._onFlagChange.bind(this,\"charge_market_fee\")})),r.a.createElement(\"div\",{className:F()({disabled:!c.charge_market_fee}),style:{marginTop:\"10px\",marginLeft:\"30px\"}},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.market_fee\"}),\" \",\"(%)\",r.a.createElement(\"input\",{type:\"number\",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,\"market_fee_percent\")})),r.a.createElement(\"label\",null,r.a.createElement(G.a,{label:\"account.user_issued_assets.max_market_fee\",amount:i.max_market_fee,onChange:this._onUpdateInput.bind(this,\"max_market_fee\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1})),r.a.createElement(\"div\",null,r.a.createElement(\"label\",null,r.a.createElement(Y.Tooltip,{title:W.a.translate(\"account.user_issued_assets.reward_percent_tooltip\")},r.a.createElement(C.a,{content:\"account.user_issued_assets.reward_percent\"}),\" \",\"(%)\"),r.a.createElement(\"input\",{type:\"number\",value:i.reward_percent,onChange:this._onUpdateInput.bind(this,\"reward_percent\")}))),s.max_market_fee?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.max_market_fee):null)):null,r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.flags\"})),w,r.a.createElement(\"p\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e),s.conflict_producer?r.a.createElement(\"p\",{className:\"grid-content has-error\"},s.conflict_producer):null)),p?r.a.createElement(I.a,{title:\"account.user_issued_assets.feed_producers\",updatedTab:this.tabChanged(6)},r.a.createElement(be,{asset:this.props.asset,account:this.props.account,witnessFed:c.witness_fed_asset,committeeFed:c.committee_fed_asset,producers:this.state.feedProducers,onChangeList:this.onChangeFeedProducerList.bind(this)}),s.max_feed_producer?r.a.createElement(\"p\",{className:\"grid-content has-error large-8 large-offset-2\",style:{marginTop:\"20px\"}},s.max_feed_producer):null):null))),r.a.createElement(xe,ve({visible:this.state.isAssetUpdateConfirmationModalVisible,hideModal:this.hideAssetUpdateConfirmationModal,showModal:this.showAssetUpdateConfirmationModal,tabsChanged:this.tabsChanged(),_cancelConfirm:this._cancelConfirm.bind(this),_updateAsset:this._updateAsset.bind(this)},this.props)))}}]),t}(r.a.Component);Ae.propTypes={globalObject:c.a.ChainObject.isRequired},Ae.defaultProps={globalObject:\"2.0.0\"},Ae=Object(u.a)(Ae),Ae=Object(N.a)(Ae,{propNames:[\"asset\",\"core\"],defaultProps:{core:\"1.3.0\"},withDynamic:!0});var xe=function(e){function t(){return we(this,t),ke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return Ce(t,e),ye(t,[{key:\"render\",value:function(){var e=this.props.tabsChanged,t=[r.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.props._updateAsset},W.a.translate(\"global.confirm\")),r.a.createElement(Y.Button,{key:\"cancel\",onClick:this.props.hideModal},W.a.translate(\"global.cancel\"))];return r.a.createElement(Y.Modal,{visible:this.props.visible,footer:t,onCancel:this.props.hideModal,title:W.a.translate(\"account.confirm_asset_modal.header\")},r.a.createElement(C.a,{content:\"account.confirm_asset_modal.are_you_sure\",component:\"div\",style:{paddingBottom:\"1rem\"}}),r.a.createElement(\"div\",null,r.a.createElement(\"ul\",null,e[0]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.primary\"})):null,e[1]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.whitelist.title\"})):null,e[2]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.description\"})):null,e[3]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.bitasset_opts\"})):null,e[4]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.permissions\"})):null,e[5]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.flags\"})):null,e[6]?r.a.createElement(\"li\",null,r.a.createElement(C.a,{content:\"account.user_issued_assets.feed_producers\"})):null)))}}]),t}(r.a.Component),je=function(e){function t(){return we(this,t),ke(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ce(t,e),ye(t,[{key:\"render\",value:function(){var e=this.props.match.params.asset.toUpperCase();return r.a.createElement(Ae,ve({asset:e},this.props))}}]),t}(r.a.Component),Pe=Object(_e.a)(je),Ne=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ne(t,[{key:\"render\",value:function(){var e=this.props.stat_object.toJS();return this.props.plainText?r.a.createElement(A.a,{amount:parseFloat(e.lifetime_fees_paid),asset:\"1.3.0\"}):r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.member.fees_paid\"}),\" \"),r.a.createElement(\"td\",null,r.a.createElement(A.a,{amount:parseFloat(e.lifetime_fees_paid),asset:\"1.3.0\"}))))}}]),t}(r.a.Component);Ie.propTypes={stat_object:c.a.ChainObject.isRequired};var Me=Object(u.a)(Ie),Te=a(596),Be=a(36),Re=a(46),De=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Fe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={referralsIndex:[],referralsCount:null,errorLoading:null},a}var a,n;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),De(t,[{key:\"componentDidMount\",value:function(){this._getReferrals(0,!0)}},{key:\"componentDidUpdate\",value:function(e,t){e.account!==this.props.account&&this._getReferrals(0,!0)}},{key:\"_getReferrals\",value:(a=regeneratorRuntime.mark((function e(){var t,a,n,r,s,o,i,l,c,u=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.props).myHiddenAccounts,t.myActiveAccounts,a=this.state,n=a.referralsIndex,r=a.referralsCount,0!=Re.j.ES_WRAPPER_LIST.length){e.next=4;break}return e.abrupt(\"return\");case 4:if(s=Re.j.ES_WRAPPER_LIST[3].url,d&&(r=null,n=[]),e.prev=6,r){e.next=19;break}return e.next=10,fetch(s+\"/referrer_count?account_id=\"+this.props.account.get(\"id\"));case 10:if((o=e.sent).ok){e.next=13;break}throw new Error(\"Could not reach referrer_count endpoint on ES wrapper\"+s);case 13:return e.t0=this,e.next=16,o.json();case 16:e.t1=e.sent,e.t2={referralsCount:e.t1},e.t0.setState.call(e.t0,e.t2);case 19:return e.next=21,fetch(s+\"/all_referrers?account_id=\"+this.props.account.get(\"id\")+\"&page=\"+p);case 21:if((i=e.sent).ok){e.next=24;break}throw new Error(\"Could not reach all_referrers endpoint on ES wrapper\"+s);case 24:return e.next=26,i.json();case 26:l=e.sent,c=[],l.map((function(e){c.push(e.account_id)})),c.forEach((function(e){Object(V.FetchChain)(\"getAccount\",e).then((function(e){var t=(e=e.toJS()).network_fee_percentage/100,a=e.lifetime_referrer_fee_percentage/100,r=(100-t-a)*e.referrer_rewards_percentage/1e4,s=100-r-a-t;n.push({id:e.id,name:e.name,lifetime_ref:{name:e.lifetime_referrer_name,value:a},registrar_ref:{name:e.registrar_name,value:s},affiliate_ref:{name:e.referrer_name,value:r},network:t,statistics:e.statistics,membership_expiration:null}),u.setState({referralsIndex:n})}))})),e.next=36;break;case 32:e.prev=32,e.t3=e.catch(6),console.error(e.t3),this.setState({errorLoading:!0});case 36:case\"end\":return e.stop()}}),e,this,[[6,32]])})),n=function(){var e=a.apply(this,arguments);return new Promise((function(t,a){return function n(r,s){try{var o=e[r](s),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then((function(e){n(\"next\",e)}),(function(e){n(\"throw\",e)}));t(i)}(\"next\")}))},function(){return n.apply(this,arguments)})},{key:\"onPaginationChange\",value:function(e){this._getReferrals(e-1)}},{key:\"render\",value:function(){var e=this;if(0==Re.j.ES_WRAPPER_LIST.length)return null;var t=this.props.account.toJS(),a=V.ChainStore.getAccount(t.lifetime_referrer,!1);a&&(t.lifetime_referrer_name=a.get(\"name\"));var n=V.ChainStore.getAccount(t.referrer,!1);n&&(t.referrer_name=n.get(\"name\"));var s=V.ChainStore.getAccount(t.registrar,!1);s&&(t.registrar_name=s.get(\"name\"));var o=this.state.referralsIndex,i=[{key:\"name\",title:\"Name\",render:function(e){return r.a.createElement(\"span\",null,r.a.createElement(w.a,{to:\"/account/\"+e.name},e.name))}},{key:\"statistics\",title:r.a.createElement(C.a,{content:\"account.member.fees_paid\"}),render:function(e){return r.a.createElement(Me,{plainText:!0,stat_object:e.statistics})}},{key:\"network\",title:r.a.createElement(C.a,{content:\"account.member.network_percentage\"}),render:function(e){return r.a.createElement(\"span\",null,e.network,\"%\")}},{key:\"lifetime_ref\",title:r.a.createElement(C.a,{content:\"account.member.lifetime_referrer\"}),render:function(e){return r.a.createElement(\"span\",null,e.lifetime_ref.value,\"% (\",r.a.createElement(w.a,{to:\"/account/\"+e.lifetime_ref.name},e.lifetime_ref.name),\")\")}},{key:\"registrar_ref\",title:r.a.createElement(C.a,{content:\"account.member.registrar\"}),render:function(e){return r.a.createElement(\"span\",null,e.registrar_ref.value,\"% (\",r.a.createElement(w.a,{to:\"/account/\"+e.registrar_ref.name},e.registrar_ref.name),\")\")}},{key:\"affiliate_ref\",title:r.a.createElement(C.a,{content:\"account.member.referrer\"}),render:function(e){return r.a.createElement(\"span\",null,e.affiliate_ref.value,\"% (\",r.a.createElement(w.a,{to:\"/account/\"+e.affiliate_ref.name},e.affiliate_ref.name),\")\")}}];return this.state.errorLoading?r.a.createElement(C.a,{content:\"errors.loading_from_es\"}):r.a.createElement(Y.Table,{rowKey:\"accountReferrals\",columns:i,dataSource:o,pagination:{pageSize:Number(20),total:this.state.referralsCount<=this.state.referralsIndex.length?this.state.referralsIndex.length:this.state.referralsIndex.length+20,onChange:this.onPaginationChange.bind(this),showTotal:function(){return r.a.createElement(C.a,{content:\"account.member.total_ref\",total:e.state.referralsCount})}}})}}]),t}(r.a.Component);Fe.propTypes={account:c.a.ChainAccount.isRequired,gprops:c.a.ChainObject.isRequired,dprops:c.a.ChainObject.isRequired,core_asset:c.a.ChainAsset.isRequired},Fe.defaultProps={gprops:\"2.0.0\",dprops:\"2.1.0\",core_asset:\"1.3.0\"},Fe=Object(u.a)(Fe);var qe=Fe=Object(p.a)(Fe,{listenTo:function(){return[o.a]},getProps:function(){return{myActiveAccounts:o.a.getState().myActiveAccounts,myHiddenAccounts:o.a.getState().myHiddenAccounts}}}),Le=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ve=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Le(t,[{key:\"upgradeAccount\",value:function(e,t,a){a.preventDefault(),s.a.upgradeAccount(e,t)}},{key:\"componentWillMount\",value:function(){d.a.getFinalFeeAsset(this.props.account,\"account_upgrade\")}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this.setState({referralsIndex:[]})}},{key:\"render\",value:function(){var e=this.props,t=e.gprops,a=e.dprops,n=e.core_asset,s=this.props.account.toJS(),o=V.ChainStore.getAccount(s.lifetime_referrer,!1);o&&(s.lifetime_referrer_name=o.get(\"name\"));var i=V.ChainStore.getAccount(s.referrer,!1);i&&(s.referrer_name=i.get(\"name\"));var l=V.ChainStore.getAccount(s.registrar,!1);l&&(s.registrar_name=l.get(\"name\"));var c=s.name,u=s.network_fee_percentage/100,p=s.lifetime_referrer_fee_percentage/100,d=(100-u-p)*s.referrer_rewards_percentage/1e4,m=100-d-p-u,h=t.getIn([\"parameters\",\"current_fees\",\"parameters\",8,1,\"membership_lifetime_fee\"])*t.getIn([\"parameters\",\"current_fees\",\"scale\"])/1e4,f=V.ChainStore.getAccountMemberStatus(this.props.account),g=\"account.member.\"+f,b=null;\"annual\"===f&&(b=r.a.createElement(\"span\",null,\"(\",r.a.createElement(C.a,{content:\"account.member.expires\"}),\" \",r.a.createElement(Te.a,{time:s.membership_expiration_date}),\")\"));var _=s.membership_expiration_date;return\"1969-12-31T23:59:59\"===_?_=\"Never\":\"1970-01-01T00:00:00\"===_&&(_=\"N/A\"),r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(I.b,{segmented:!1,setting:\"membershipTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},r.a.createElement(I.a,{title:\"account.member.membership\"},r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:g}),\" \",b),r.a.createElement(\"div\",{className:\"content-block no-margin\"},r.a.createElement(\"div\",{className:\"no-margin grid-block vertical large-horizontal\"},r.a.createElement(\"div\",{className:\"grid-block large-12\"},r.a.createElement(\"div\",{className:\"grid-content\"},r.a.createElement(\"div\",{className:\"grid-content\"},r.a.createElement(\"div\",{className:\"grid-block\"},\"lifetime\"===f?r.a.createElement(\"div\",{className:\"small-12 large-6\",style:{paddingRight:10}},r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.lifetime_title\"})),r.a.createElement(C.a,{component:\"p\",content:\"account.member.referral_info\",feesCashback:100-u}),r.a.createElement(C.a,{component:\"h4\",content:\"account.member.referral_link\"}),r.a.createElement(C.a,{component:\"p\",content:\"account.member.referral_text\",wallet_name:Object(Be.o)()}),r.a.createElement(\"h5\",null,Object(Be.p)()+\"/?r=\"+s.name))):r.a.createElement(\"div\",{className:\"small-12 large-6\",style:{paddingRight:\"10px !important\"}},r.a.createElement(q.a,{path:\"components/AccountMembership\",section:\"lifetime\",feesCashback:100-u,price:{amount:h,asset:n}}),r.a.createElement(\"br\",null),r.a.createElement(Y.Button,{type:\"primary\",onClick:this.upgradeAccount.bind(this,s.id,!0)},r.a.createElement(C.a,{content:\"account.member.upgrade_lifetime\"})),\" \",\"   \",null),r.a.createElement(\"div\",{className:\"small-12 large-6\"},r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.fee_allocation\"})),r.a.createElement(\"table\",{className:\"table key-value-table\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.member.network_percentage\"})),r.a.createElement(\"td\",null,u,\"%\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.member.lifetime_referrer\"}),\" \",\"  (\",r.a.createElement(w.a,{to:\"/account/\"+s.lifetime_referrer_name},s.lifetime_referrer_name),\")\"),r.a.createElement(\"td\",null,p,\"%\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.member.registrar\"}),\" \",\"  (\",r.a.createElement(w.a,{to:\"/account/\"+s.registrar_name},s.registrar_name),\")\"),r.a.createElement(\"td\",null,m,\"%\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.member.referrer\"}),\" \",\"  (\",r.a.createElement(w.a,{to:\"/account/\"+s.referrer_name},s.referrer_name),\")\"),r.a.createElement(\"td\",null,d,\"%\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.member.membership_expiration\"}),\" \"),r.a.createElement(\"td\",null,_))))),r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.fees_cashback\"})),r.a.createElement(\"table\",{className:\"table key-value-table\"},r.a.createElement(Me,{stat_object:s.statistics})))))))),r.a.createElement(\"div\",{className:\"grid-block large-12\"},r.a.createElement(\"div\",{className:\"grid-content\"},r.a.createElement(\"div\",{className:\"grid-content\"},r.a.createElement(\"div\",{className:\"grid-block\"},r.a.createElement(\"div\",{className:\"small-12 large-6\"},r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.fee_pending\"})),r.a.createElement(C.a,{component:\"p\",content:\"account.member.fee_pending_text\",account:c,maintenanceInterval:t.getIn([\"parameters\",\"maintenance_interval\"]),nextMaintenanceTime:a.get(\"next_maintenance_time\")})),r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.fee_vesting\"})),r.a.createElement(C.a,{component:\"p\",content:\"account.member.fee_vesting_text\",account:c,vestingThresholdAmount:t.getIn([\"parameters\",\"cashback_vesting_threshold\"])/Math.pow(10,n.get(\"precision\")),vestingThresholdAsset:n.get(\"symbol\"),vestingPeriod:t.getIn([\"parameters\",\"cashback_vesting_period_seconds\"])/60/60/24}))),r.a.createElement(\"div\",{className:\"small-12 large-6\"},r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.fee_division\"})),r.a.createElement(C.a,{component:\"p\",content:\"account.member.fee_division_text.paragraph_1\",account:c,fee_share_network:u,fee_share_ltm:p,fee_share_affiliate:d,fee_share_registrar:m}),r.a.createElement(C.a,{component:\"p\",content:\"account.member.fee_division_text.paragraph_2\",account:c,fee_share_network:u,fee_share_ltm:p,fee_share_affiliate:d,fee_share_registrar:m}),r.a.createElement(w.a,{to:\"/account/\"+c+\"/vesting\"},r.a.createElement(C.a,{component:\"p\",content:\"account.member.fee_division_text.paragraph_3\"})))))))))),\"lifetime\"==f&&Re.j.ES_WRAPPER_LIST.length>0?r.a.createElement(\"div\",{className:\"asset-card\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(C.a,{content:\"account.member.ref_distribution\"})),r.a.createElement(qe,{account:c})):null)))))}}]),t}(r.a.Component);Ve.propTypes={account:c.a.ChainAccount.isRequired,gprops:c.a.ChainObject.isRequired,dprops:c.a.ChainObject.isRequired,core_asset:c.a.ChainAsset.isRequired},Ve.defaultProps={gprops:\"2.0.0\",dprops:\"2.1.0\",core_asset:\"1.3.0\"};var Ue=Ve=Object(u.a)(Ve),We=a(66),ze=a(15),Je=a(2031),Ke=a(2023),Ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Qe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={vesting_balances:[],searchTerm:\"\",loading:!1,error:!1},a.onSearch=a.onSearch.bind(a),a.retrieveVestingBalances=a.retrieveVestingBalances.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ge(t,[{key:\"componentWillMount\",value:function(){this.retrieveVestingBalances.call(this,this.props.account.get(\"id\"))}},{key:\"componentDidUpdate\",value:function(e){var t=e.account.get(\"id\"),a=this.props.account.get(\"id\");a!==t&&this.retrieveVestingBalances.call(this,a)}},{key:\"retrieveVestingBalances\",value:function(e){var t=this;this.setState({loading:!0}),e=e||this.props.account.get(\"id\"),ze.Apis.instance().db_api().exec(\"get_vesting_balances\",[e]).then((function(e){t.mapVestingBalances(e),t.setState({loading:!1})})).catch((function(e){console.log(\"error:\",e),t.setState({loading:!1,error:!0})}))}},{key:\"mapVestingBalances\",value:function(e){if(!e)return null;var t=e.filter((function(e){return e.balance.amount&&e.balance.asset_id}));t=t.map((function(e){var t=void 0,a=void 0,n=0,r=0,s=0,o=0,i=!0,l=!0;if(e)if(a=e.balance.amount,t=V.ChainStore.getAsset(e.balance.asset_id),e.policy&&2!==e.policy[0]){var c=Math.floor(new Date(e.policy[1].start_claim+\"Z\").getTime()/1e3),u=Math.floor((new Date).getTime()/1e3);if(c>0){i=!1;var p=u-c,d=e.policy[1].vesting_seconds;p<d?(l=!1,r=parseFloat(p/86400).toFixed(2),o=((s=parseFloat(d/86400).toFixed(2))-r).toFixed(2),n=0):n=1}else{var m=Math.floor(new Date(e.policy[1].coin_seconds_earned_last_update+\"Z\").getTime()/1e3),h=parseFloat(e.policy[1].coin_seconds_earned)+a*(u-m),f=e.policy[1].vesting_seconds;n=(n=0===f?1:h/(f*a))>1?1:n,r=L.a.format_number(L.a.get_asset_amount(h/86400,t),0),s=L.a.format_number(L.a.get_asset_amount(e.balance.amount*f/86400,t),0),o=L.a.format_number(f*(1-n)/86400||0,2)}}else l&&(n=1);return{key:e.id,vestingId:e.id,vestingType:e.balance_type,vestingBalance:{amount:e.balance.amount,asset:e.balance.asset_id},coinDaysRequired:{days_required:s,isCoinDays:i},coinDaysEarned:{days_earned:r,isCoinDays:i},coinDaysRemaining:{days_remaining:o,isCoinDays:i},availablePercent:n,canClaim:l,vb:e}})),this.setState({vesting_balances:t})}},{key:\"getHeader\",value:function(){var e=this;return[{title:\"#\",dataIndex:\"vestingId\",align:\"left\",defaultSortOrder:\"ascend\",sorter:function(e,t){return e.vestingId>t.vestingId?1:e.vestingId<t.vestingId?-1:0}},{title:r.a.createElement(C.a,{content:\"account.member.balance_type\"}),dataIndex:\"vestingType\",align:\"left\",sorter:function(e,t){return e.vestingType>t.vestingType?1:e.vestingType<t.vestingType?-1:0},render:function(e){return r.a.createElement(\"span\",null,r.a.createElement(C.a,{content:\"account.vesting.type.\"+e}))}},{title:r.a.createElement(C.a,{content:\"account.member.cashback\"}),dataIndex:\"vestingBalance\",align:\"left\",render:function(e){return r.a.createElement(A.a,{amount:e.amount,asset:e.asset})}},{title:r.a.createElement(C.a,{content:\"account.member.required\"}),dataIndex:\"coinDaysRequired\",align:\"left\",render:function(e){return e.days_required?r.a.createElement(\"span\",null,e.days_required,\" \",r.a.createElement(C.a,{content:e.isCoinDays?\"account.member.coindays\":\"account.member.days\"})):null}},{title:r.a.createElement(C.a,{content:\"account.member.earned\"}),dataIndex:\"coinDaysEarned\",align:\"left\",render:function(e){return e.days_earned?r.a.createElement(\"span\",null,e.days_earned,\" \",r.a.createElement(C.a,{content:e.isCoinDays?\"account.member.coindays\":\"account.member.days\"})):null}},{title:r.a.createElement(C.a,{content:\"account.member.remaining\"}),dataIndex:\"coinDaysRemaining\",align:\"left\",render:function(e){return e.days_remaining?r.a.createElement(\"span\",null,e.days_remaining,\" \",r.a.createElement(C.a,{content:\"account.member.days\"})):null}},{title:r.a.createElement(C.a,{content:\"account.member.available\"}),dataIndex:\"availablePercent\",align:\"left\",render:function(e){return e?r.a.createElement(\"span\",null,(100*e).toFixed(2),\"%\"):null}},{title:r.a.createElement(C.a,{content:\"account.member.action\"}),align:\"center\",render:function(t){return t.canClaim?r.a.createElement(Y.Button,{onClick:function(){return e.onClaim(t)},type:\"secondary\"},r.a.createElement(C.a,{content:\"account.member.claim\"})):null}}]}},{key:\"onClaim\",value:function(e){var t=this,a=e.vb,n=this.props.account.get(\"id\");We.a.claimVestingBalance(n,a,!1).then((function(){t.retrieveVestingBalances()}))}},{key:\"onSearch\",value:function(e){this.setState({searchTerm:e.target.value||\"\"})}},{key:\"render\",value:function(){var e=this,t=this.getHeader(),a=this.state.vesting_balances.filter((function(t){return-1!==(t.vestingId+\"\\0\"+t.vestingType).toUpperCase().indexOf(e.state.searchTerm.toUpperCase())}));return r.a.createElement(\"div\",{className:\"grid-content vertical\"},r.a.createElement(C.a,{component:\"h1\",content:\"account.vesting.title\"}),r.a.createElement(C.a,{content:\"account.vesting.explain\",component:\"p\"}),r.a.createElement(\"div\",{className:\"header-selector padding\"},r.a.createElement(Ke.a,{onChange:this.onSearch.bind(this),value:this.state.searchTerm,autoComplete:\"off\",placeholder:W.a.translate(\"exchange.filter\")}),this.state.error&&r.a.createElement(C.a,{className:\"header-selector--error\",content:\"errors.loading_from_blockchain\"})),r.a.createElement(\"div\",null,r.a.createElement(Je.a,{loading:this.state.loading,rows:a,header:t,pageSize:10})))}}]),t}(r.a.Component),Ze=a(810),He=a(243),Ye=a(376),Xe=a(47),$e=a(20),et=a(108),tt=a(595),at=a.n(tt),nt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var rt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a._getInitialState(),a.onPasswordEnter=a.onPasswordEnter.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.onCancel=a.onCancel.bind(a),a.onClose=a.onClose.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),nt(t,[{key:\"_getInitialState\",value:function(){return{isShowQrcode:!1,keyString:null}}},{key:\"onCancel\",value:function(){this.props.hideModal(),this.onClose()}},{key:\"onClose\",value:function(){this.refs.password_input&&(this.refs.password_input.value=\"\"),this.setState(this._getInitialState())}},{key:\"onPasswordEnter\",value:function(e){e.preventDefault();var t=this.refs.password_input.value,a=this.props.keyValue;if(null!=t&&\"\"!=t){if(void 0!==a&&null!=a&&\"\"!=a){var n=V.Aes.fromSeed(t).encryptToHex(a);this.setState({isShowQrcode:!0,keyString:n})}}else this.setState({isShowQrcode:!0,keyString:a})}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&this.onPasswordEnter(e)}},{key:\"render\",value:function(){var e=this,t=null;this.state.isShowQrcode&&(t={textAlign:\"center\"});var a=[];return this.state.isShowQrcode||a.push(r.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.onPasswordEnter},W.a.translate(\"modal.ok\"))),a.push(r.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onCancel},W.a.translate(\"cancel\"))),r.a.createElement(Y.Modal,{visible:this.props.visible,onCancel:this.onCancel,footer:a},r.a.createElement(\"div\",{className:\"text-center\"},r.a.createElement(\"div\",{style:{margin:\"1.5rem 0\"}},r.a.createElement(C.a,{component:\"h4\",content:\"modal.qrcode.title\"})),r.a.createElement(\"form\",{className:\"full-width\",style:{margin:\"0 3.5rem\"},onSubmit:this.onPasswordEnter,noValidate:!0},r.a.createElement(\"div\",{className:\"form-group\"},this.state.isShowQrcode?r.a.createElement(\"section\",{style:t},r.a.createElement(\"span\",{style:{background:\"#fff\",padding:\".75rem\",display:\"inline-block\"}},r.a.createElement(at.a,{size:256,value:this.state.keyString}))):r.a.createElement(\"section\",null,r.a.createElement(\"label\",{className:\"left-label\"},r.a.createElement(C.a,{unsafe:!0,content:\"modal.qrcode.input_message\"})),r.a.createElement(\"input\",{name:\"password\",type:\"text\",onFocus:function(){e.refs.password_input.setAttribute(\"type\",\"password\")},ref:\"password_input\",autoComplete:\"off\",onKeyDown:this.onKeyDown}))))))}}]),t}(r.a.Component);rt.propTypes={modalId:E.a.string.isRequired,keyValue:E.a.string},rt.defaultProps={modalId:\"qr_code_password_modal\"};var st=rt,ot=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var it=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e.showQrModal=e.showQrModal.bind(e),e.hideQrModal=e.hideQrModal.bind(e),e.onClose=e.onClose.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ot(t,[{key:\"_getInitialState\",value:function(){return{isModalVisible:!1,isQrModalVisible:!1,wif:null}}},{key:\"reset\",value:function(){this.setState(this._getInitialState())}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideQrModal\",value:function(){this.setState({isQrModalVisible:!1})}},{key:\"showQrModal\",value:function(){this.setState({isQrModalVisible:!0})}},{key:\"render\",value:function(){var e=\"key_view_modal\"+this.props.pubkey,t=et.a.getState().keys;if(!t.has(this.props.pubkey))return r.a.createElement(\"span\",null,this.props.children);var n=t.get(this.props.pubkey),s=[r.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onClose},W.a.translate(\"transfer.close\"))];return r.a.createElement(\"span\",null,r.a.createElement(\"a\",{onClick:this.onOpen.bind(this)},this.props.children),r.a.createElement(Y.Modal,{visible:this.state.isModalVisible,title:W.a.translate(\"account.perm.key_viewer\"),ref:e,id:e,onCancel:this.onClose,footer:s},r.a.createElement(\"div\",{className:\"grid-block vertical\"},r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(\"div\",{className:\"grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.perm.public\"})),this.props.pubkey),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:\"grid-block grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.perm.private\"})),r.a.createElement(\"div\",null,this.state.wif?r.a.createElement(\"span\",null,r.a.createElement(\"p\",{style:{fontWeight:600}},this.state.wif),r.a.createElement(\"div\",{className:\"button-group\"},r.a.createElement(\"div\",{className:\"button\",onClick:this.onHide.bind(this)},\"hide\"),r.a.createElement(\"div\",{className:\"clickable\",onClick:this.showQrModal},r.a.createElement(\"img\",{style:{height:50},src:a(2195)})))):r.a.createElement(\"span\",null,r.a.createElement(\"div\",{className:\"button\",onClick:this.onShow.bind(this)},r.a.createElement(C.a,{content:\"account.perm.show\"}))))),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:\"grid-block grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.perm.brain\"})),null==n.brainkey_sequence?\"Non-deterministic\":n.brainkey_sequence),r.a.createElement(\"br\",null),n.import_account_names&&n.import_account_names.length?r.a.createElement(\"div\",{className:\"grid-block grid-content\"},r.a.createElement(\"label\",null,r.a.createElement(C.a,{content:\"account.perm.from\"})),n.import_account_names.join(\", \"),r.a.createElement(\"br\",null)):null))),r.a.createElement(st,{showModal:this.showQrModal,hideModal:this.hideQrModal,visible:this.state.isQrModalVisible,keyValue:this.state.wif}))}},{key:\"onOpen\",value:function(){this.showModal()}},{key:\"onClose\",value:function(){this.reset(),this.hideModal()}},{key:\"onShow\",value:function(){var e=this;Xe.a.unlock().then((function(){var t=$e.a.getPrivateKey(e.props.pubkey);e.setState({wif:t.toWif()})})).catch((function(){}))}},{key:\"onHide\",value:function(){this.setState({wif:null})}}]),t}(n.Component);it.propTypes={pubkey:E.a.string.isRequired};var lt=it,ct=a(226),ut=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function pt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function dt(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function mt(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ht=function(e){function t(){return pt(this,t),dt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return mt(t,e),ut(t,[{key:\"shouldComponentUpdate\",value:function(e){return!L.a.are_equal_shallow(e,this.props)}},{key:\"_lookUpPubKeyForAddress\",value:function(e){return ct.a.getState().addresses.get(e)}},{key:\"render\",value:function(){var e=void 0,t=void 0,a=void 0,n=\"_accounts\",s=this.props.pubkey,o=et.a.getState().keys,i=!1;return this.props.account?(e=this.props.account.get(\"name\"),t=this.props.account.get(\"id\"),a=r.a.createElement(w.a,{to:\"/account/\"+e+\"/permissions\"},e)):s?(e=t=s,a=r.a.createElement(lt,{pubkey:s},s),n=\"_keys\",i=o.has(s)):this.props.address&&(s=this._lookUpPubKeyForAddress(this.props.address),t=this.props.address,a=s?r.a.createElement(lt,{pubkey:s},s):this.props.address,n=\"_addresses\",i=o.has(s)),r.a.createElement(\"tr\",{key:e},r.a.createElement(\"td\",null,this.props.account?r.a.createElement(Ye.a,{size:{height:30,width:30},account:e}):s?r.a.createElement(\"div\",{className:\"account-image\"},r.a.createElement(lt,{pubkey:s},r.a.createElement(M.a,{name:\"key\",title:\"icons.key\",size:\"4x\"}))):null),r.a.createElement(\"td\",{className:(i?\"my-key\":\"\")+\" pub-key\"},a),r.a.createElement(\"td\",null,this.props.weights[t]),r.a.createElement(\"td\",null,r.a.createElement(\"button\",{className:\"button\",onClick:this.props.onRemoveItem.bind(this,t,n)},r.a.createElement(C.a,{content:\"account.votes.remove_witness\"}))))}}]),t}(r.a.Component);ht.propTypes={account:E.a.object,pubkey:E.a.string,address:E.a.string,onRemoveItem:E.a.func.isRequired,weights:E.a.object};var ft=function(e){function t(e){pt(this,t);var a=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:\"\",weight_input:\"\",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return mt(t,e),ut(t,[{key:\"onItemChange\",value:function(e){this.setState({item_name_input:e})}},{key:\"onItemAccountChange\",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;\"string\"==typeof a?this.setState({error:a}):a.then((function(e){return t.setState({error:e})}))}}},{key:\"onWeightChanged\",value:function(e){var t=e.target.value.trim();this.setState({weight_input:parseInt(t)})}},{key:\"onAddItem\",value:function(e){if(e){this.setState({selected_item:null,item_name_input:\"\",weight_input:\"\",error:null});var t=\"string\"==typeof e?e:e.get(\"id\");this.props.onAddItem(t,this.state.weight_input)}}},{key:\"onWeightKeyDown\",value:function(e){13===e.keyCode&&this.state.weight_input&&this.state.selected_item&&this.onAddItem(this.state.selected_item)}},{key:\"render\",value:function(){var e=this,t=0,a=this.props.accounts.filter((function(e){return!!e})).sort((function(e,t){return e.get(\"name\")>t.get(\"name\")?1:e.get(\"name\")<t.get(\"name\")?-1:0})).map((function(a){return r.a.createElement(ht,{key:t++,account:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})})),n=this.props.keys.map((function(a){return r.a.createElement(ht,{key:t++,pubkey:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})})),s=this.props.addresses.map((function(a){return r.a.createElement(ht,{key:t++,address:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})})),o=this.state.error;!o&&this.state.selected_item&&-1!==this.props.accounts.indexOf(this.state.selected_item)&&(o=W.a.translate(\"account.perm.warning3\")),!o&&this.state.item_name_input&&-1!==this.props.keys.indexOf(this.state.item_name_input)&&(o=W.a.translate(\"account.perm.warning4\"));var i=[\"10%\",\"70%\",\"30%\",\"10%\"];return r.a.createElement(\"div\",null,r.a.createElement(pe.a,{label:this.props.label,error:o,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:\"account.votes.add_witness\",tabIndex:this.props.tabIndex,allowPubKey:!0,disableActionButton:!this.state.weight_input,allowUppercase:!0},r.a.createElement(\"input\",{value:this.state.weight_input,onChange:this.onWeightChanged.bind(this),className:\"weight-input\",type:\"number\",autoComplete:\"off\",placeholder:W.a.translate(\"account.perm.weight\"),onKeyDown:this.onWeightKeyDown.bind(this),tabIndex:this.props.tabIndex+1})),r.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},r.a.createElement(\"table\",{className:\"table\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",{style:{width:i[0]}}),r.a.createElement(\"th\",{style:{width:i[1]}},r.a.createElement(C.a,{content:\"account.perm.acct_or_key\"})),r.a.createElement(\"th\",{style:{width:i[2]}},r.a.createElement(C.a,{content:\"account.perm.weight\"})),r.a.createElement(\"th\",{style:{width:i[3]}},r.a.createElement(C.a,{content:\"account.perm.action\"})))),r.a.createElement(\"tbody\",null,a,n,s))))}}]),t}(r.a.Component);ft.propTypes={accounts:c.a.ChainObjectsList,onAddItem:E.a.func.isRequired,onRemoveItem:E.a.func.isRequired,validateAccount:E.a.func,label:E.a.string.isRequired,placeholder:E.a.string,tabIndex:E.a.number,weights:E.a.object};var gt=Object(u.a)(ft,{autosubscribe:!1}),bt=a(809),_t=a.n(bt),vt=a(168),yt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Et=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.handleChange=a.handleChange.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.state={value:e.value||\"\",error:null,wrong:!1,doesnt_match:!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),yt(t,[{key:\"value\",value:function(){var e=this.refs.password;return e?e.value:\"\"}},{key:\"clear\",value:function(){this.refs.password.value=\"\",this.props.confirmation&&(this.refs.confirm_password.value=\"\")}},{key:\"focus\",value:function(){this.refs.password.focus()}},{key:\"valid\",value:function(){return!(this.state.error||this.state.wrong||this.state.doesnt_match)&&this.state.value.length>=this.props.passwordLength}},{key:\"handleChange\",value:function(e){e.preventDefault(),e.stopPropagation();var t=!this.props.confirmation||this.refs.confirm_password.value,a=this.refs.password.value,n=!!this.props.confirmation&&(t&&a!==t),r=0,s=void 0;if(this.props.checkStrength){if(this.state.value.length>100)r={score:4};else r=_t.a.load({sync:!0})(this.state.value||\"\");s=Math.min(5,r.score+Math.floor(this.state.value.length/(1.5*this.props.passwordLength)))}var o={valid:!this.state.error&&!this.state.wrong&&!(this.props.confirmation&&n)&&t&&a.length>=this.props.passwordLength,value:a,score:s,doesnt_match:n};this.props.onChange&&this.props.onChange(o),this.setState(o)}},{key:\"onKeyDown\",value:function(e){this.props.onEnter&&13===e.keyCode&&this.props.onEnter(e)}},{key:\"render\",value:function(){var e=this.state,t=e.score,a=e.value,n=this.props,s=n.copy,o=n.visible,i=n.readonly,l=null,c=null;this.state.wrong||this.props.wrongPassword?l=r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"wallet.pass_incorrect\"})):this.state.error&&(l=r.a.createElement(\"div\",null,this.state.error)),!this.props.noValidation&&!l&&this.state.value.length>0&&this.state.value.length<this.props.passwordLength&&(l=r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"wallet.pass_length\",minLength:this.props.passwordLength}))),this.state.doesnt_match&&(c=r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"wallet.confirm_error\"})));var u=F()(\"form-group\",{\"has-error\":l}),p=F()(\"form-group\",{\"has-error\":this.state.doesnt_match}),d=!1;return this.refs.confirm_password&&this.refs.confirm_password.value&&!this.state.doesnt_match&&(d=!0),r.a.createElement(\"div\",{className:\"account-selector\"},r.a.createElement(\"div\",{className:u},r.a.createElement(\"section\",null,r.a.createElement(\"label\",{className:\"left-label \"+(this.props.labelClass||\"\")},r.a.createElement(C.a,{content:\"wallet.enter_password\"})),r.a.createElement(\"div\",{className:\"generated-password-section\"},r.a.createElement(\"input\",{style:{marginBottom:this.props.checkStrength?0:null,display:s?\"inline\":\"block\"},id:\"current-password\",name:\"password\",type:o?\"text\":\"password\",ref:\"password\",autoComplete:\"current-password\",onChange:this.handleChange,onKeyDown:this.onKeyDown,value:a,readOnly:i}),s&&r.a.createElement(vt.a,{text:a,tip:\"tooltip.copy_password\",dataPlace:\"top\",className:\"button password-copy-button\"})),this.props.checkStrength?r.a.createElement(\"progress\",{style:{height:10},className:5===t?\"high\":4===t?\"medium\":\"low\",value:t,max:\"5\",min:\"0\"}):null),l),this.props.confirmation?r.a.createElement(\"div\",{className:p},r.a.createElement(\"label\",{className:\"left-label\"},r.a.createElement(C.a,{content:\"wallet.confirm_password\"})),r.a.createElement(\"section\",{style:{position:\"relative\",maxWidth:\"30rem\"}},r.a.createElement(\"input\",{id:\"confirm_password\",name:\"confirm_password\",type:\"password\",ref:\"confirm_password\",autoComplete:\"confirm-password\",onChange:this.handleChange}),d?r.a.createElement(\"div\",{className:\"ok-indicator success\"},\"OK\"):null),c):null)}}]),t}(n.Component);Et.propTypes={onChange:E.a.func,onEnter:E.a.func,confirmation:E.a.bool,wrongPassword:E.a.bool,noValidation:E.a.bool,noLabel:E.a.bool,passwordLength:E.a.number,checkStrength:E.a.bool,value:E.a.string,copy:E.a.bool,visible:E.a.bool,readonly:E.a.bool},Et.defaultProps={confirmation:!1,wrongPassword:!1,noValidation:!1,noLabel:!1,passwordLength:8,checkStrength:!1,value:\"\",copy:!1,visible:!1,readonly:!1};var wt=Et,kt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ct=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={validPassword:!1,pass:null,generatedPassword:\"P\"+V.key.get_random_key().toWif().toString()},e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),kt(t,[{key:\"onSubmit\",value:function(){}},{key:\"onPasswordChange\",value:function(e){var t=e.valid,a=this.props.account.get(\"name\"),n=t?$e.a.generateKeyFromPassword(a,\"active\",e.value).pubKey:null,r=t?$e.a.generateKeyFromPassword(a,\"owner\",e.value).pubKey:null,s=t?$e.a.generateKeyFromPassword(a,\"memo\",e.value).pubKey:null;this.setState({validPassword:e.valid,pass:e.value}),this.props.onSetPasswordKeys({active:n,owner:r,memo:s})}},{key:\"checkKeyUse\",value:function(e,t){return!!e&&(\"memo\"===t?e===this.props.memoKey:this.props[t+\"Keys\"].reduce((function(t,a){return a===e||t}),!1))}},{key:\"_onUseKey\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this.props[\"active\"===e?\"onRemoveActive\":\"onRemoveOwner\"](this.props[e],\"_keys\");else if(this.props[e]){var a={active:this.props.account.getIn([\"active\",\"weight_threshold\"]),owner:this.props.account.getIn([\"owner\",\"weight_threshold\"])};console.log(\"key\",this.props[e],\"weights\",a,\"weight of role:\",a[e]),this.props[\"active\"===e?\"onAddActive\":\"owner\"===e?\"onAddOwner\":\"onSetMemo\"](this.props[e],a[e])}}},{key:\"render\",value:function(){var e=this.checkKeyUse(this.props.active&&this.props.active,\"active\"),t=this.checkKeyUse(this.props.owner&&this.props.owner,\"owner\"),a=this.checkKeyUse(this.props.memo&&this.props.memo,\"memo\"),n=W.a.translate(\"account.perm.use_text\"),s=W.a.translate(\"account.perm.remove_text\");return r.a.createElement(\"div\",null,r.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},r.a.createElement(C.a,{content:\"account.perm.password_model_1\"})),r.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},r.a.createElement(C.a,{content:\"wallet.password_model_1\"})),r.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},r.a.createElement(C.a,{unsafe:!0,content:\"wallet.password_model_2\"})),r.a.createElement(\"div\",{className:\"divider\"}),r.a.createElement(\"form\",{style:{maxWidth:\"40rem\"},onSubmit:this.onSubmit.bind(this),noValidate:!0},r.a.createElement(\"label\",{className:\"left-label\"},r.a.createElement(C.a,{content:\"wallet.generated\"})),r.a.createElement(\"p\",null,this.state.generatedPassword),r.a.createElement(\"p\",{style:{fontWeight:\"bold\"}},r.a.createElement(C.a,{content:\"account.perm.password_model_2\"})),r.a.createElement(wt,{ref:\"password\",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,passwordLength:12,checkStrength:!0})),r.a.createElement(\"table\",{className:\"table\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",{className:e?\"in-use\":\"\"},r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.perm.new_active\"}),\":\"),r.a.createElement(\"td\",null,this.props.active),r.a.createElement(\"td\",{className:\"text-right\"},r.a.createElement(\"div\",{className:\"button\",onClick:this._onUseKey.bind(this,\"active\",e)},e?s:n))),r.a.createElement(\"tr\",{className:t?\"in-use\":\"\"},r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.perm.new_owner\"}),\":\"),r.a.createElement(\"td\",null,this.props.owner),r.a.createElement(\"td\",{className:\"text-right\"},r.a.createElement(\"div\",{className:\"button\",onClick:this._onUseKey.bind(this,\"owner\",t)},t?s:n))),r.a.createElement(\"tr\",{className:a?\"in-use\":\"\"},r.a.createElement(\"td\",null,r.a.createElement(C.a,{content:\"account.perm.new_memo\"}),\":\"),r.a.createElement(\"td\",null,this.props.memo),r.a.createElement(\"td\",{className:\"text-right\"},r.a.createElement(\"div\",{className:\"button\",style:{visibility:a?\"hidden\":\"\"},onClick:this._onUseKey.bind(this,\"memo\",a)},n))))),a?r.a.createElement(\"p\",{style:{maxWidth:\"800px\",paddingTop:10},className:\"has-error\"},r.a.createElement(C.a,{content:\"account.perm.memo_warning\"})):null)}}]),t}(r.a.Component),Ot=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var St=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ot(t,[{key:\"isValidPubKey\",value:function(e){return!!V.PublicKey.fromPublicKeyString(e)}},{key:\"onInputChanged\",value:function(e){var t=e.target.value.trim();this.props.onChange(t)}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:\"onAction\",value:function(e){e.preventDefault(),this.props.onAction&&this.state.valid&&!this.props.disableActionButton&&this.props.onAction(e)}},{key:\"render\",value:function(){var e=this.props.error;e||!this.props.value||this.isValidPubKey(this.props.value)||(e=\"Not a valid public key\");var t=F()(\"button\",{disabled:e||this.props.disableActionButton}),a=et.a.getState().keys,n=this.isValidPubKey(this.props.value)&&a.has(this.props.value);return r.a.createElement(\"div\",{className:\"pubkey-input no-overflow\"},r.a.createElement(\"div\",{className:\"content-area\"},r.a.createElement(\"div\",{className:\"header-area\"},!e&&this.props.value&&this.isValidPubKey(this.props.value)?r.a.createElement(\"label\",{className:\"right-label\"},r.a.createElement(C.a,{content:\"account.perm.valid_pub\"})):null,r.a.createElement(C.a,{className:\"left-label\",component:\"label\",content:this.props.label})),r.a.createElement(\"div\",{className:\"input-area\"},r.a.createElement(\"span\",{className:\"inline-label\"},r.a.createElement(\"div\",{className:\"account-image\"},r.a.createElement(lt,{pubkey:this.props.value},r.a.createElement(M.a,{name:\"key\",title:\"icons.key\",size:\"4x\"}))),r.a.createElement(\"input\",{type:\"text\",className:n?\"my-key\":\"\",value:this.props.value,placeholder:this.props.placeholder||counterpart.translate(\"account.public_key\"),ref:\"user_input\",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),this.props.onAction?r.a.createElement(\"button\",{className:t,onClick:this.onAction.bind(this)},r.a.createElement(C.a,{content:this.props.action_label})):null)),r.a.createElement(\"div\",{className:\"error-area has-error\"},r.a.createElement(\"span\",null,e))))}}]),t}(r.a.Component);St.propTypes={label:E.a.string.isRequired,value:E.a.string,error:E.a.string,placeholder:E.a.string,onChange:E.a.func,onAction:E.a.func,tabIndex:E.a.number,disableActionButton:E.a.bool};var At=St,xt=a(2041),jt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Pt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),jt(t,[{key:\"componentWillMount\",value:function(){this.updateAccountData(this.props.account),d.a.getFinalFeeAsset(this.props.account,\"account_update\")}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this.updateAccountData(e.account)}},{key:\"permissionsFromImmutableObj\",value:function(e){var t=e.get(\"weight_threshold\"),a=e.get(\"account_auths\"),n=e.get(\"key_auths\"),r=e.get(\"address_auths\"),s=a.map((function(e){return e.get(0)})),o=n.map((function(e){return e.get(0)})),i=r.map((function(e){return e.get(0)})),l=a.reduce((function(e,t){return e[t.get(0)]=t.get(1),e}),{});return l=n.reduce((function(e,t){return e[t.get(0)]=t.get(1),e}),l),{threshold:t,accounts:s,keys:o,addresses:i,weights:l=r.reduce((function(e,t){return e[t.get(0)]=t.get(1),e}),l)}}},{key:\"permissionsToJson\",value:function(e,t,a,n,r){var s={weight_threshold:e};return s.account_auths=t.sort(L.a.sortID).map((function(e){return[e,r[e]]})).toJS(),s.key_auths=a.sort(L.a.sortID).map((function(e){return[e,r[e]]})).toJS(),s.address_auths=n.sort(L.a.sortID).map((function(e){return[e,r[e]]})).toJS(),s}},{key:\"updateAccountData\",value:function(e){var t=this.permissionsFromImmutableObj(e.get(\"active\")),a=this.permissionsFromImmutableObj(e.get(\"owner\")),n=e.get(\"options\").get(\"memo_key\"),r={active_accounts:t.accounts,active_keys:t.keys,active_addresses:t.addresses,owner_accounts:a.accounts,owner_keys:a.keys,owner_addresses:a.addresses,active_weights:t.weights,owner_weights:a.weights,active_threshold:t.threshold,owner_threshold:a.threshold,memo_key:n,prev_active_accounts:t.accounts,prev_active_keys:t.keys,prev_active_addresses:t.addresses,prev_owner_accounts:a.accounts,prev_owner_keys:a.keys,prev_owner_addresses:a.addresses,prev_active_weights:t.weights,prev_owner_weights:a.weights,prev_active_threshold:t.threshold,prev_owner_threshold:a.threshold,prev_memo_key:n};this.setState(r)}},{key:\"isChanged\",value:function(){var e=this.state;return e.active_accounts!==e.prev_active_accounts||e.active_keys!==e.prev_active_keys||e.active_addresses!==e.prev_active_addresses||e.owner_accounts!==e.prev_owner_accounts||e.owner_keys!==e.prev_owner_keys||e.owner_addresses!==e.prev_owner_addresses||e.active_threshold!==e.prev_active_threshold||e.owner_threshold!==e.prev_owner_threshold||e.memo_key!==e.prev_memo_key}},{key:\"didChange\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;if(\"memo\"===e)return t.memo_key!==t.prev_memo_key;var a=!1;return[\"_keys\",\"_active_addresses\",\"_accounts\",\"_threshold\"].forEach((function(n){var r=e+n;t[r]!==t[\"prev_\"+r]&&(a=!0)})),a}},{key:\"onPublish\",value:function(){var e=this.state,t=this.props.account.toJS();t.fee={amount:0,asset_id:d.a.getFinalFeeAsset(t.id,\"account_update\")};var a={account:t.id};if(this.didChange(\"active\")&&(a.active=this.permissionsToJson(e.active_threshold,e.active_accounts,e.active_keys,e.active_addresses,e.active_weights)),this.didChange(\"owner\")&&(a.owner=this.permissionsToJson(e.owner_threshold,e.owner_accounts,e.owner_keys,e.owner_addresses,e.owner_weights)),this.didChange(\"owner\")&&0===e.owner_keys.size&&0===e.owner_addresses.size&&1===e.owner_accounts.size&&e.owner_accounts.first()===t.id)return Y.Notification.warning({message:W.a.translate(\"notifications.account_permissions_update_warning\")});e.memo_key&&this.didChange(\"memo\")&&this.isValidPubKey(e.memo_key)&&(a.new_options=this.props.account.get(\"options\").toJS(),a.new_options.memo_key=e.memo_key),He.a.updateAccount(a)}},{key:\"isValidPubKey\",value:function(e){return!!V.PublicKey.fromPublicKeyString(e)}},{key:\"onReset\",value:function(){var e=this.state;this.setState({active_accounts:e.prev_active_accounts,active_keys:e.prev_active_keys,active_addresses:e.prev_active_addresses,owner_accounts:e.prev_owner_accounts,owner_keys:e.prev_owner_keys,owner_addresses:e.prev_owner_addresses,active_weights:e.prev_active_weights,owner_weights:e.prev_owner_weights,active_threshold:e.prev_active_threshold,owner_threshold:e.prev_owner_threshold,memo_key:e.prev_memo_key})}},{key:\"onAddItem\",value:function(e,t,a){var n={},r=e+(L.a.is_object_id(t)?\"_accounts\":\"_keys\");n[r]=this.state[r].push(t),this.state[e+\"_weights\"][t]=a,this.setState(n)}},{key:\"onRemoveItem\",value:function(e,t,a){console.log(\"onRemoveItem\",e,t,a);var n={},r=e+a;n[r]=this.state[r].filter((function(e){return e!==t})),this.setState(n)}},{key:\"onThresholdChanged\",value:function(e,t){var a=parseInt(t.target.value.trim()),n={};n[e]=a,this.setState(n)}},{key:\"validateAccount\",value:function(e,t){return null}},{key:\"sumUpWeights\",value:function(e,t,a,n){var r=e.reduce((function(e,t){return e+n[t]}),0);return r=t.reduce((function(e,t){return e+n[t]}),r),a.reduce((function(e,t){return e+n[t]}),r)}},{key:\"onMemoKeyChanged\",value:function(e){this.setState({memo_key:e})}},{key:\"onSetPasswordKeys\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[\"active\",\"owner\",\"memo\"],a={};t.forEach((function(t){a[\"password_\"+t]=e[t]})),this.setState(a)}},{key:\"onPdfCreate\",value:function(){Object(Ze.a)(this.props.account)}},{key:\"render\",value:function(){var e=this,t=void 0,a=void 0,n=this.state,s=n.active_accounts,o=n.active_keys,i=n.active_addresses,l=n.active_weights,c=this.state,u=c.owner_accounts,p=c.owner_keys,d=c.owner_addresses,m=c.owner_weights,f=this.state.active_threshold>0?this.state.active_threshold:0,g=this.sumUpWeights(s,o,i,l);this.didChange(\"active\")&&g<f&&(t=W.a.translate(\"account.perm.warning1\",{weights_total:g,threshold:f})),f=this.state.owner_threshold>0?this.state.owner_threshold:0,g=this.sumUpWeights(u,p,d,m),this.didChange(\"owner\")&&g<f&&(a=W.a.translate(\"account.perm.warning2\",{weights_total:g,threshold:f}));var b=\"button\"+(!t&&!a&&this.isChanged()&&this.isValidPubKey(this.state.memo_key)?\"\":\" disabled\"),_=\"button\"+(this.isChanged()?\"\":\" disabled\"),v=h.a.Set();return v=v.add(this.props.account.get(\"id\")),r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(I.b,{defaultActiveTab:1,segmented:!1,setting:\"permissionsTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\",actionButtons:r.a.createElement(\"div\",{className:\"action-buttons\"},r.a.createElement(\"button\",{className:_,onClick:this.onReset,tabIndex:8},r.a.createElement(C.a,{content:\"account.perm.reset\"})),r.a.createElement(\"button\",{className:b,onClick:this.onPublish,tabIndex:9},r.a.createElement(C.a,{content:\"account.perm.publish\"})),r.a.createElement(\"button\",{className:\"button\",style:{marginLeft:10},\"data-tip\":W.a.translate(\"account.perm.create_paperwallet_private_hint\"),onClick:function(){e.onPdfCreate()},tabIndex:10},r.a.createElement(C.a,{content:\"account.perm.create_paperwallet\"})))},r.a.createElement(I.a,{title:\"account.perm.active\"},r.a.createElement(q.a,{path:\"components/AccountPermActive\"}),r.a.createElement(\"form\",{className:\"threshold\"},r.a.createElement(\"label\",{className:\"horizontal\"},r.a.createElement(C.a,{content:\"account.perm.threshold\"}),\" \",\"   \",r.a.createElement(\"input\",{type:\"number\",placeholder:\"0\",size:\"5\",value:this.state.active_threshold,onChange:this.onThresholdChanged.bind(this,\"active_threshold\"),autoComplete:\"off\",tabIndex:1}))),r.a.createElement(gt,{label:\"account.perm.add_permission_label\",accounts:s,keys:o,weights:l,addresses:i,validateAccount:this.validateAccount.bind(this,\"active\"),onAddItem:this.onAddItem.bind(this,\"active\"),onRemoveItem:this.onRemoveItem.bind(this,\"active\"),placeholder:W.a.translate(\"account.perm.account_name_or_key\"),tabIndex:2}),r.a.createElement(\"br\",null),t?r.a.createElement(\"div\",{className:\"content-block has-error\"},t):null),r.a.createElement(I.a,{title:\"account.perm.owner\"},r.a.createElement(q.a,{path:\"components/AccountPermOwner\"}),r.a.createElement(\"form\",{className:\"threshold\"},r.a.createElement(\"label\",{className:\"horizontal\"},r.a.createElement(C.a,{content:\"account.perm.threshold\"}),\" \",\"   \",r.a.createElement(\"input\",{type:\"number\",placeholder:\"0\",size:\"5\",value:this.state.owner_threshold,onChange:this.onThresholdChanged.bind(this,\"owner_threshold\"),autoComplete:\"off\",tabIndex:4}))),r.a.createElement(gt,{label:\"account.perm.add_permission_label\",accounts:u,keys:p,weights:m,addresses:d,validateAccount:this.validateAccount.bind(this,\"owner\"),onAddItem:this.onAddItem.bind(this,\"owner\"),onRemoveItem:this.onRemoveItem.bind(this,\"owner\"),placeholder:W.a.translate(\"account.perm.account_name_or_key\"),tabIndex:5}),r.a.createElement(\"br\",null),a?r.a.createElement(\"div\",{className:\"content-block has-error\"},a):null),r.a.createElement(I.a,{title:\"account.perm.memo_key\"},r.a.createElement(q.a,{style:{maxWidth:\"800px\"},path:\"components/AccountPermMemo\"}),r.a.createElement(At,{ref:\"memo_key\",value:this.state.memo_key,label:\"account.perm.memo_public_key\",placeholder:\"Public Key\",onChange:this.onMemoKeyChanged.bind(this),tabIndex:7})),r.a.createElement(I.a,{title:\"account.perm.password_model\"},r.a.createElement(Ct,{active:this.state.password_active,owner:this.state.password_owner,memo:this.state.password_memo,onSetPasswordKeys:this.onSetPasswordKeys.bind(this),account:this.props.account,activeKeys:this.state.active_keys,ownerKeys:this.state.owner_keys,memoKey:this.state.memo_key,onAddActive:this.onAddItem.bind(this,\"active\"),onRemoveActive:this.onRemoveItem.bind(this,\"active\"),onAddOwner:this.onAddItem.bind(this,\"owner\"),onRemoveOwner:this.onRemoveItem.bind(this,\"owner\"),onSetMemo:this.onMemoKeyChanged.bind(this)}))),r.a.createElement(\"div\",{className:\"tab-content\",style:{padding:10}},r.a.createElement(\"div\",{className:\"divider\"}),r.a.createElement(xt.a,{accountsList:v,limit:25,compactView:!1,filter:\"account_update\",style:{paddingBottom:\"2rem\"}})))))}}]),t}(r.a.Component),Nt=a(33),It=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Mt=\"-----BEGIN BITSHARES SIGNED MESSAGE-----\",Tt=\"-----END BITSHARES SIGNED MESSAGE-----\",Bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return It(e,[{key:\"parseMessage\",value:function(e){var t=void 0,a=void 0,n=void 0,r=void 0;try{a=(t=e.split(Mt)[1]).split(\"-----BEGIN META-----\"),t=a[0].replace(/^\\n|\\n$/g,\"\"),n=a[1].split(\"-----BEGIN SIGNATURE-----\"),a=n[0].trim(),n=n[1].split(Tt)[0].trim(),r=t+\"\\n\"+a}catch(e){throw new Error(W.a.translate(\"account.signedmessages.invalidformat\"))}var s=void 0,o=void 0,i=void 0,l=void 0;if(a)try{s=(s=a.split(\"account=\"))[1].split(\"\\n\")[0].trim(),o=(o=a.split(\"memokey=\"))[1].split(\"\\n\")[0].trim(),i=(i=a.split(\"block=\"))[1].split(\"\\n\")[0].trim(),l=(l=a.split(\"timestamp=\"))[1].split(\"\\n\")[0].trim()}catch(e){throw new Error(W.a.translate(\"account.signedmessages.invalidformat\"))}return{content:t,meta:{account:s,key:o,block:i,timestamp:l},signed:r,signature:n}}},{key:\"verifyMemo\",value:function(e){var t=void 0;if(t=\"string\"==typeof e||e instanceof String?this.parseMessage(e):e,null==V.ChainStore.getAccount(t.meta.account))throw new Error(W.a.translate(\"account.signedmessages.invaliduser\"));var a=!1;try{a=V.Signature.fromHex(t.signature).verifyBuffer(t.signed,V.PublicKey.fromPublicKeyString(t.meta.key))}catch(e){throw new Error(W.a.translate(\"account.signedmessages.errorverifying\"))}if(!a)throw new Error(W.a.translate(\"account.signedmessages.invalidsignature\"));return t}},{key:\"signMessage\",value:function(e,t){return new Promise((function(a,n){Xe.a.unlock().then((function(){try{var r=e.get(\"options\").get(\"memo_key\");/111111111111111111111/.test(r)&&(r=null);var s=void 0;if(t&&r&&!(s=$e.a.getPrivateKey(r)))throw new Error(W.a.translate(\"account.signedmessages.invalidkey\"));var o=V.ChainStore.getObject(\"2.1.0\").get(\"last_irreversible_block_num\"),i=new Date,l=\"account=\"+e.get(\"name\")+\"\\nmemokey=\"+r+\"\\nblock=\"+o+\"\\ntimestamp=\"+i.toUTCString(),c=t+\"\\n\"+l;setTimeout((function(){try{var e=V.Signature.signBuffer(c,s,r),o=Mt+\"\\n\"+t+\"\\n-----BEGIN META-----\\n\"+l+\"\\n-----BEGIN SIGNATURE-----\\n\"+e.toHex()+\"\\n\"+Tt;a(o)}catch(e){n(e)}}),0)}catch(e){n(e)}})).catch((function(e){n(e)}))}))}}]),e}(),Rt=Nt.a.createActions(Bt),Dt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ft=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={message:a.props.message,messageParsed:null,showRawMessage:!1,noVerification:a.props.noVerification,verified:null,notification:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Dt(t,[{key:\"_verifyMessage\",value:function(e){var t=this;this.setState({message:e,messageParsed:null,verified:null});var a=null;try{a=Rt.parseMessage(e),this.setState({verified:null,messageParsed:a}),this.state.noVerification||(this.setState({verified:null,notification:W.a.translate(\"account.signedmessages.verifying\")}),setTimeout((function(){try{Rt.verifyMemo(a),t.setState({verified:!0,notification:\"\"})}catch(e){t._warning(e.message),t.setState({verified:!1})}}),0))}catch(e){this._warning(e.message)}}},{key:\"componentWillMount\",value:function(){this._verifyMessage(this.state.message)}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.message;null!=t&&null!=t&&t==this.state.message||this._verifyMessage(t)}},{key:\"_warning\",value:function(e){this.setState({notification:e})}},{key:\"_toggleRawMessage\",value:function(){this.setState({showRawMessage:!this.state.showRawMessage})}},{key:\"render\",value:function(){var e=void 0,t=void 0;null!=this.state.messageParsed&&(null==this.state.verified?(t=\"#FFF\",e=\"Unverified message from \"+this.state.messageParsed.meta.account):this.state.verified?(t=\"#FFF\",e=\"Verified message from \"+this.state.messageParsed.meta.account):(t=\"#F00\",e=\"Refuted message, indicated sender \"+this.state.messageParsed.meta.account));var a=null!=this.props.message&&\"\"!=this.props.message,n=this.state.notification&&\"\"!=this.state.notification;return r.a.createElement(\"div\",{style:{color:\"gray\",margin:\"10px 10px\"}},null!=this.state.messageParsed&&r.a.createElement(\"fieldset\",{style:{borderColor:t}},r.a.createElement(\"legend\",{style:{color:\"white\",weight:\"bold\"}},e),r.a.createElement(\"pre\",{style:{position:\"relative\",width:\"100%\",display:\"table\"}},this.state.messageParsed.content,n&&r.a.createElement(\"div\",{style:{textAlign:\"center\",display:\"table-cell\",verticalAlign:\"middle\",position:\"absolute\",width:\"calc(100% - 30px)\",height:\"calc(100% + 15px)\",top:\"0px\",right:\"30px\",backgroundColor:\"rgba(50,50,50,0.5)\"},id:\"overlay\"},this.state.notification)),r.a.createElement(\"span\",{style:{fontSize:\"small\",float:\"right\"}},\"Signed on \",this.state.messageParsed.meta.timestamp,\" \",\" \",r.a.createElement(\"button\",{className:\"button\",type:\"button\",style:{fontSize:\"small\",float:\"right\",padding:\"0px 0px\",background:\"#777\"},onClick:this._toggleRawMessage.bind(this)},\"🔍\")),this.state.showRawMessage&&r.a.createElement(\"br\",null),this.state.showRawMessage&&r.a.createElement(\"br\",null),this.state.showRawMessage&&r.a.createElement(\"div\",{style:{overflow:\"auto\",width:\"calc(100%)\",maxWidth:\"1000px\"}},r.a.createElement(\"pre\",null,this.state.message))),a&&null==this.state.messageParsed&&r.a.createElement(\"fieldset\",{style:{borderColor:\"#F00\"}},r.a.createElement(\"legend\",{style:{color:\"red\",weight:\"bold\"},className:\"error\"},\"Error while parsing message, please check syntax from message below\"),r.a.createElement(\"pre\",null,this.props.message)))}}]),t}(r.a.Component);Ft.defaultProps={noVerification:!1};var qt=Ft,Lt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Vt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tabsm_memo_key:a.props.account.get(\"options\").get(\"memo_key\"),tabsm_popup:\"\",tabsm_message_text:\"\",tabsm_message_signed:\"\",tabvm_popup:\"\",tabvm_message_signed:\"\",tabvm_verified:null,tabvm_message_signed_and_verified:null,tabvm_flag_verifyonchange:!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Lt(t,[{key:\"_tabSMSignAction\",value:function(e){var t=this;e.preventDefault();try{var a=this.props.account.get(\"options\").get(\"memo_key\");if(this.state.tabsm_memo_key!==a)throw Error(W.a.translate(\"account.signedmessages.keymismatch\"));this.state.tabsm_message_text&&(this._tabSMPopMessage(W.a.translate(\"account.signedmessages.signing\"),0),Rt.signMessage(this.props.account,this.state.tabsm_message_text).then((function(e){t.setState({tabsm_message_signed:e,tabsm_popup:\"\"})})).catch((function(e){t._tabSMPopMessage(e.message),t.setState({tabsm_message_signed:null})})))}catch(e){this._tabSMPopMessage(e.message),this.setState({tabsm_message_signed:null})}}},{key:\"_tabSMHandleChange\",value:function(e){this.setState({tabsm_message_text:e.target.value})}},{key:\"_tabSMHandleChangeKey\",value:function(e){this.setState({tabsm_memo_key:e})}},{key:\"_tabSMCopyToClipBoard\",value:function(e){if(\"\"!==e.target.value){e.target.focus(),e.target.select();try{var t=document.execCommand(\"copy\");this._tabSMPopMessage(t?W.a.translate(\"account.signedmessages.copysuccessful\"):W.a.translate(\"account.signedmessages.copyunsuccessful\"))}catch(e){this._tabSMPopMessage(W.a.translate(\"account.signedmessages.copyunsuccessful\"))}}}},{key:\"_tabSMPopMessage\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabsm_popup:e}),\"\"!==e&&a>0&&setTimeout((function(){t.setState({tabsm_popup:\"\"})}),a)}},{key:\"_tabVMAction\",value:function(e){var t=this;e.preventDefault(),this.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1}),this.state.tabvm_message_signed&&(this._tabVMPopMessage(W.a.translate(\"account.signedmessages.verifying\"),0),setTimeout((function(){try{var e=Rt.verifyMemo(t.state.tabvm_message_signed);t.setState({tabvm_message_signed_and_verified:e,tabvm_verified:!0,tabvm_popup:\"\"})}catch(e){t._tabVMPopMessage(e.message),t.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1})}}),0))}},{key:\"_tabVMHandleChange\",value:function(e){this.setState({tabvm_message_signed:e.target.value,tabvm_verified:!1,tabvm_message_signed_and_verified:null}),this.state.tabvm_flag_verifyonchange&&this._tabVMAction(e)}},{key:\"_tabVMPopMessage\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabvm_popup:e}),\"\"!==e&&a>0&&setTimeout((function(){t.setState({tabvm_popup:\"\"})}),a)}},{key:\"_tabVMToggleVerifyOnChange\",value:function(){this.setState({tabvm_flag_verifyonchange:!this.state.tabvm_flag_verifyonchange})}},{key:\"render\",value:function(){return r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(I.b,{className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",setting:\"accountSignedMessagesTab\",contentClass:\"grid-content shrink small-vertical medium-horizontal padding\",segmented:!1},r.a.createElement(I.a,{title:\"account.signedmessages.signmessage\"},r.a.createElement(\"div\",{className:\"grid-content\",style:{overflowX:\"hidden\"}},r.a.createElement(\"div\",{className:\"content-block no-margin\"},r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:\"account.signedmessages.signmessage\"}))),r.a.createElement(At,{ref:\"memo_key\",value:this.state.tabsm_memo_key,label:\"account.perm.memo_public_key\",placeholder:\"Public Key\",tabIndex:7,onChange:this._tabSMHandleChangeKey.bind(this),disableActionButton:!0}),r.a.createElement(\"br\",null),r.a.createElement(\"textarea\",{rows:\"10\",value:this.state.tabsm_message_text,onChange:this._tabSMHandleChange.bind(this),placeholder:W.a.translate(\"account.signedmessages.entermessage\")}),r.a.createElement(\"span\",null,r.a.createElement(\"button\",{className:\"button\",onClick:this._tabSMSignAction.bind(this)},r.a.createElement(C.a,{content:\"account.signedmessages.sign\"})),r.a.createElement(\"div\",{style:{color:\"gray\"}},this.state.tabsm_popup)),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(\"textarea\",{rows:\"14\",value:this.state.tabsm_message_signed,style:{editable:!1},placeholder:W.a.translate(\"account.signedmessages.automaticcreation\"),onClick:this._tabSMCopyToClipBoard.bind(this)}))),r.a.createElement(I.a,{title:\"account.signedmessages.verifymessage\"},r.a.createElement(\"div\",{className:\"grid-content\",style:{overflowX:\"hidden\"}},r.a.createElement(\"div\",{className:\"content-block no-margin\"},r.a.createElement(\"h3\",null,r.a.createElement(C.a,{content:\"account.signedmessages.verifymessage\"})),r.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"0.1em\",marginBottom:\"0.5em\"}},r.a.createElement(\"table\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(\"label\",{style:{marginBottom:0,marginRight:\"0.5rem\"}},r.a.createElement(C.a,{content:\"account.signedmessages.verifyonchange\"}))),r.a.createElement(\"td\",null,r.a.createElement(Y.Switch,{checked:this.state.tabvm_flag_verifyonchange,onChange:this._tabVMToggleVerifyOnChange.bind(this)})))))),r.a.createElement(\"textarea\",{rows:\"10\",value:this.state.tabvm_message_signed,onChange:this._tabVMHandleChange.bind(this),placeholder:W.a.translate(\"account.signedmessages.entermessage\")}),r.a.createElement(\"span\",null,r.a.createElement(\"button\",{className:\"button\",onClick:this._tabVMAction.bind(this)},r.a.createElement(C.a,{content:\"account.signedmessages.verify\"})),r.a.createElement(\"text\",{style:{color:\"gray\"}},this.state.tabvm_popup),null!==this.state.tabvm_verified&&r.a.createElement(\"div\",{style:{float:\"right\"}},\"Message is:\",r.a.createElement(\"div\",{style:{backgroundColor:this.state.tabvm_verified?\"green\":\"red\"}},r.a.createElement(\"label\",null,this.state.tabvm_verified?\"verified\":\"not verified\"))),(this.state.tabvm_verified&&null!==this.state.tabvm_message_signed_and_verified||this.state.tabvm_flag_verifyonchange)&&r.a.createElement(\"div\",null,r.a.createElement(\"br\",null),r.a.createElement(qt,{message:this.state.tabvm_message_signed})))))))))}}]),t}(r.a.Component);Vt.propTypes={account:c.a.ChainAccount.isRequired};var Ut=Vt=Object(u.a)(Vt),Wt=a(357),zt=a.n(Wt),Jt=a(87),Kt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Gt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Qt(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Zt(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ht=function(e){function t(){return Gt(this,t),Qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zt(t,e),Kt(t,[{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.onRemove;return r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,this.props.index),r.a.createElement(\"td\",null,t.get(\"id\")),r.a.createElement(\"td\",null,r.a.createElement(ce.a,{account:t.get(\"id\")})),a?r.a.createElement(\"td\",null,r.a.createElement(\"button\",{onClick:a.bind(this,t.get(\"id\")),className:\"button outline\"},\"Remove\")):null)}}]),t}(r.a.Component);Ht.propTypes={account:c.a.ChainAccount.isRequired},Ht.defaultProps={tempComponent:\"tr\"},Ht=Object(u.a)(Ht);var Yt=function(e){function t(){return Gt(this,t),Qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zt(t,e),Kt(t,[{key:\"_onRemove\",value:function(e,t,a){if(t){var n=this.props.getCurrentState(t),r=Jt.a.new_transaction();r.add_type_operation(\"account_whitelist\",{fee:{amount:0,asset_id:V.ChainStore.assets_by_symbol.get(this.props.settings.get(\"fee_asset\"))||\"1.3.0\"},authorizing_account:this.props.account.get(\"id\"),account_to_list:t,new_listing:n-zt.a.account_listing[e]}),$e.a.process_transaction(r,null,!0)}}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.removeButton,n=t.white,s=t.list.map((function(t,s){return r.a.createElement(Ht,{key:t,onRemove:a?e._onRemove.bind(e,n?\"white_listed\":\"black_listed\"):null,account:t,index:s+1})})).toArray(),o=!0;return s.length||(o=!1,s.push(r.a.createElement(\"tr\",{key:\"empty\"},r.a.createElement(\"td\",{style:{padding:\"1rem 0\"},colSpan:a?4:3},r.a.createElement(C.a,{content:this.props.emptyText,account:this.props.account.get(\"name\")}))))),r.a.createElement(\"table\",{className:\"table compact dashboard-table\"},o?r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,\"#\"),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"account.id\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"account.name\"})),a?r.a.createElement(\"th\",null):null)):null,r.a.createElement(\"tbody\",null,s))}}]),t}(r.a.Component);Yt=Object(p.a)(Yt,{listenTo:function(){return[i.a]},getProps:function(){return{settings:i.a.getState().settings}}});var Xt=function(e){function t(e){Gt(this,t);var a=Qt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={accountName:\"\",accountToList:null},a}return Zt(t,e),Kt(t,[{key:\"_getCurrentState\",value:function(e){var t=this.props.account,a=t.get(\"whitelisted_accounts\")||h.a.List(),n=t.get(\"blacklisted_accounts\")||h.a.List(),r=zt.a.account_listing.no_listing;return a.includes(e)&&(r+=zt.a.account_listing.white_listed),n.includes(e)&&(r+=zt.a.account_listing.black_listed),r}},{key:\"_onAdd\",value:function(e,t){var a=this.state.accountToList,n=this.props.account,r=this._getCurrentState(a);if(a){var s=Jt.a.new_transaction();s.add_type_operation(\"account_whitelist\",{fee:{amount:0,asset_id:\"1.3.0\"},authorizing_account:n.get(\"id\"),account_to_list:a,new_listing:r+zt.a.account_listing[e]}),$e.a.process_transaction(s,null,!0)}}},{key:\"_onAccountFound\",value:function(e){console.log(\"accountFound:\",e),this.setState({accountName:e?e.get(\"name\"):null,accountToList:e?e.get(\"id\"):null})}},{key:\"_onAccountChanged\",value:function(e){console.log(\"account changed:\",e),this.setState({accountName:e,accountToList:null})}},{key:\"render\",value:function(){var e=this.props.account,t=this.state.accountName;return r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(I.b,{className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",setting:\"whitelistTab\",contentClass:\"grid-content shrink small-vertical medium-horizontal no-padding\",segmented:!1},r.a.createElement(I.a,{title:\"account.whitelist.title\"},r.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},r.a.createElement(\"div\",null,r.a.createElement(Yt,{emptyText:\"account.whitelist.empty\",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get(\"whitelisted_accounts\")||h.a.List(),removeButton:!0,white:!0})),e.get(\"whitelisted_accounts\")?null:r.a.createElement(\"p\",{className:\"has-error\"},\"Please note, whitelisting is not working yet due to unresolved backend issue.\"),r.a.createElement(\"div\",{style:{padding:\"2rem 0\"}},r.a.createElement(pe.a,{label:\"account.whitelist.add\",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,\"white_listed\"),action_label:\"account.perm.confirm_add\",white:!1,typeahead:!0})))),r.a.createElement(I.a,{title:\"account.whitelist.black\"},r.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},r.a.createElement(\"div\",null,r.a.createElement(Yt,{emptyText:\"account.whitelist.empty_black\",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get(\"blacklisted_accounts\"),removeButton:!0})),r.a.createElement(\"div\",{style:{padding:\"2rem 1rem\"}},r.a.createElement(pe.a,{label:\"account.whitelist.add_black\",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,\"black_listed\"),action_label:\"account.perm.confirm_add\",typeahead:!0})))),r.a.createElement(I.a,{title:\"account.whitelist.white_by\"},r.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},r.a.createElement(\"div\",null,r.a.createElement(Yt,{emptyText:\"account.whitelist.empty_white_by\",account:e,list:e.get(\"whitelisting_accounts\")})))),r.a.createElement(I.a,{title:\"account.whitelist.black_by\"},r.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},r.a.createElement(\"div\",null,r.a.createElement(Yt,{emptyText:\"account.whitelist.empty_black_by\",account:e,list:e.get(\"blacklisting_accounts\")}))))))))}}]),t}(r.a.Component),$t=a(868),ea=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ta(e,t){var a=\"\",n=0,r=void 0;return\"witness\"===e?r=V.ChainStore.getWitnessById(t.get(\"id\")):\"committee\"===e&&(r=V.ChainStore.getCommitteeMemberById(t.get(\"id\"))),a=r?r.get(\"url\"):a,{url:a=L.a.sanitize(a),votes:n=r?r.get(\"total_votes\"):n,id:r.get(\"id\")}}var aa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:\"\",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ea(t,[{key:\"onItemChange\",value:function(e){this.setState({item_name_input:e})}},{key:\"onItemAccountChange\",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;\"string\"==typeof a?this.setState({error:a}):a.then((function(e){return t.setState({error:e})}))}}},{key:\"onAddItem\",value:function(e){if(e){this.setState({selected_item:null,item_name_input:\"\",error:null}),this.props.onAddItem(e.get(\"id\"))}}},{key:\"getHeader\",value:function(){var e=this,t=[\"10%\",\"20%\",\"40%\",\"20%\",\"10%\"];return[{title:\"#\",dataIndex:\"num\",align:\"right\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:r.a.createElement(C.a,{content:\"account.votes.name\"}),dataIndex:\"name\",align:\"left\",sorter:function(e,t){return e.key>t.key?1:e.key<t.key?-1:0},render:function(e){return r.a.createElement(\"span\",{style:{maxWidth:t[1],whiteSpace:\"nowrap\"}},r.a.createElement(ce.a,{account:e}))}},{title:r.a.createElement(C.a,{content:\"account.votes.about\"}),dataIndex:\"about\",render:function(e){return r.a.createElement(\"span\",{style:{maxWidth:t[2],whiteSpace:\"nowrap\"}},r.a.createElement(\"a\",{href:e,target:\"_blank\",rel:\"noopener noreferrer\"},r.a.createElement(M.a,{name:\"share\",title:\"icons.share\"})))}},{title:r.a.createElement(C.a,{content:\"account.votes.votes\"}),dataIndex:\"votes\",sorter:function(e,t){return e.votes-t.votes},render:function(e){return r.a.createElement(\"span\",{style:{maxWidth:t[3],whiteSpace:\"nowrap\"}},r.a.createElement(A.a,{amount:e,asset:\"1.3.0\",decimalOffset:5,hide_asset:!0}))}},{title:r.a.createElement(C.a,{content:\"account.votes.status.title\"}),dataIndex:\"title\",sorter:function(e,t){return e.title>t.title?1:e.title<t.title?-1:0},render:function(e){return r.a.createElement(\"span\",{style:{maxWidth:t[4],whiteSpace:\"nowrap\"}},r.a.createElement(C.a,{content:e}))}},{title:r.a.createElement(C.a,{content:\"account.votes.supported\"}),dataIndex:\"supported\",align:\"center\",sorter:function(e,t){return e.supported.translate>t.supported.translate?1:e.supported.translate<t.supported.translate?-1:0},render:function(a){return r.a.createElement(\"span\",{style:{maxWidth:t[0],whiteSpace:\"nowrap\"},className:a.proxy?\"\":\"clickable\",onClick:a.proxy?function(){}:a.onAction.bind(e,a.item_id)},r.a.createElement(C.a,{content:a.translate}))}},{title:r.a.createElement(C.a,{content:\"account.votes.toggle\"}),dataIndex:\"toggle\",render:function(a){return r.a.createElement(\"span\",{style:{maxWidth:t[5],whiteSpace:\"nowrap\"},className:a.proxy?\"\":\"clickable\",onClick:a.proxy?function(){}:a.onAction.bind(e,a.item_id)},a.proxy?r.a.createElement(M.a,{name:\"locked\",title:\"icons.locked.action\"}):r.a.createElement(M.a,{name:a.isSupported?\"checkmark-circle\":\"minus-circle\",title:a.isSupported?\"icons.checkmark_circle.yes\":\"icons.minus_circle.no\"}))}}]}},{key:\"_decideRowClassName\",value:function(e,t){return e.toggle.isSupported?\"\":\"unsupported\"}},{key:\"render\",value:function(){var e=this;if(!this.props.items)return null;var t=this.getHeader(),a=this.props.items.filter((function(t){return!!t&&(!e.props.filterSearch||(-1!==t.get(\"name\").indexOf(e.props.filterSearch)||-1!==t.get(\"id\").indexOf(e.props.filterSearch)))})).sort((function(t,a){var n=ta(e.props.type,t).votes,r=ta(e.props.type,a).votes;return n!==r?parseInt(r,10)-parseInt(n,10):t.get(\"name\")>a.get(\"name\")?1:t.get(\"name\")<a.get(\"name\")?-1:0})).map((function(t,a){var n=e.props.supported&&e.props.supported.includes(t.get(\"id\"))?\"remove\":\"add\",r=e.props.active.includes(ta(e.props.type,t).id);return function(e){var t=e.account,a=e.type,n=e.action,r=e.isActive,s=e.idx,o=e.proxy,i=e.onAction,l=e.key,c=t.get(\"id\"),u=ta(a,t),p=u.url,d=u.votes,m=p&&p.length>0&&-1===p.indexOf(\"http\")?\"http://\"+p:p,h=\"remove\"===n;return{key:l,num:s+1,name:t.get(\"id\"),about:m&&-1!==m.indexOf(\".\")?m:null,votes:d,title:\"account.votes.\"+(r?\"active_short\":\"inactive\"),supported:{translate:\"settings.\"+(h?\"yes\":\"no\"),proxy:o,item_id:c,onAction:i},toggle:{proxy:o,isSupported:h,item_id:c,onAction:i}}}({idx:a,key:t.get(\"name\"),account:t,type:e.props.type,onAction:\"add\"===n?e.props.onAddItem:e.props.onRemoveItem,isSelected:-1!==e.props.items.indexOf(t),action:n,isActive:r,proxy:e.props.proxy})})),n=this.state.error;return!n&&this.state.selected_item&&-1!==this.props.items.indexOf(this.state.selected_item)&&(n=W.a.translate(\"account.votes.already\")),r.a.createElement(\"div\",null,a.length?r.a.createElement(Je.a,{className:\"table dashboard-table table-hover\",rowClassName:this._decideRowClassName.bind(this),rows:a,header:t,pageSize:20,label:\"utility.total_x_assets\",leftPadding:\"1.5rem\"}):null)}}]),t}(r.a.Component);aa.propTypes={items:c.a.ChainObjectsList,onAddItem:E.a.func.isRequired,onRemoveItem:E.a.func.isRequired,validateAccount:E.a.func,label:E.a.string.isRequired,placeholder:E.a.string,tabIndex:E.a.number,action:E.a.string,filterSearch:E.a.string},aa.defaultProps={action:\"remove\",filterSearch:null};var na=Object(u.a)(aa),ra=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var sa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.isValidPubKey=function(e){return!V.PublicKey.fromPublicKeyString(e)},a.state=a.getInitialState(e),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ra(t,[{key:\"getInitialState\",value:function(e){return{witnessAccount:e.account,signingKey:\"\",url:\"\"}}},{key:\"shouldComponentUpdate\",value:function(e,t){return this.state.url!==t.visible||this.props.visible!==e.visible||this.state.signingKey!==t.signingKey||this.state.witnessAccount!==t.witnessAccount}},{key:\"onAddWitness\",value:function(){var e=this.state,t=e.witnessAccount,a=e.signingKey,n=e.url;t&&a&&s.a.createWitness({account:t,url:n,signingKey:a}),this.props.hideModal()}},{key:\"onChangeCommittee\",value:function(e){this.setState({witnessAccount:e})}},{key:\"onMemoKeyChanged\",value:function(e){this.setState({signingKey:e.target.value})}},{key:\"onUrlChanged\",value:function(e){this.setState({url:L.a.sanitize(e.target.value.toLowerCase())})}},{key:\"render\",value:function(){var e=this.state,t=e.witnessAccount,a=e.signingKey,n=e.url;return r.a.createElement(Y.Modal,{title:W.a.translate(\"modal.witness.create_witness\"),onCancel:this.props.hideModal,visible:this.props.visible,footer:[r.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this.onAddWitness.bind(this)},W.a.translate(\"modal.witness.confirm\")),r.a.createElement(Y.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.props.hideModal},W.a.translate(\"modal.cancel\"))]},r.a.createElement(Y.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(pe.a,{label:\"modal.witness.witness_account\",accountName:t&&t.get(\"name\")||account.get(\"name\"),account:t,onAccountChanged:this.onChangeCommittee.bind(this),size:35,typeahead:!0}),r.a.createElement(C.a,{content:\"modal.witness.text\",unsafe:!0,component:\"p\"}),r.a.createElement(Y.Form.Item,{label:W.a.translate(\"modal.witness.url\")},r.a.createElement(Y.Input,{value:n,onChange:this.onUrlChanged.bind(this),placeholder:W.a.translate(\"modal.witness.web_example\")})),r.a.createElement(Y.Form.Item,{label:W.a.translate(\"modal.witness.public_signing_key\")},this.isValidPubKey(a)?r.a.createElement(\"label\",{className:\"right-label\",style:{marginTop:\"-30px\",position:\"static\"}},r.a.createElement(C.a,{content:\"modal.witness.invalid_key\"})):null,r.a.createElement(Y.Input,{addonBefore:r.a.createElement(M.a,{name:\"key\",title:\"icons.key\",size:\"1x\"}),value:a,onChange:this.onMemoKeyChanged.bind(this),placeholder:W.a.translate(\"modal.witness.enter_public_signing_key\")}))))}}]),t}(r.a.Component),oa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ia=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCreateWitnessModal:!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),oa(t,[{key:\"render\",value:function(){var e=this,t=function(){e.setState({showCreateWitnessModal:!e.state.showCreateWitnessModal})},a=this.props.onFilterChange,n=this.props.validateAccountHandler,s=this.props.addWitnessHandler,o=this.props.removeWitnessHandler,i=this.state.showCreateWitnessModal,l=this.props,c=l.all_witnesses,u=l.proxy_witnesses,p=l.witnesses,d=l.proxy_account_id,m=l.hasProxy,h=l.globalObject,f=l.filterSearch,g=l.account;return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:F()(\"content-block\")},r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(\"div\",{style:{float:\"right\"}},r.a.createElement(Y.Button,{onClick:t},r.a.createElement(C.a,{content:\"account.votes.join_witnesses\"}))),r.a.createElement(\"div\",{className:\"selector inline-block\"},r.a.createElement(Ke.a,{placeholder:W.a.translate(\"explorer.witnesses.filter_by_name\"),value:f,onChange:a}))),r.a.createElement(na,{type:\"witness\",label:\"account.votes.add_witness_label\",items:c,validateAccount:n,onAddItem:s,onRemoveItem:o,tabIndex:m?-1:2,supported:m?u:p,active:h.get(\"active_witnesses\"),proxy:d,filterSearch:f})),r.a.createElement(sa,{visible:i,account:g,hideModal:t}))}}]),t}(n.Component),la=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ca=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.getInitialState(e),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),la(t,[{key:\"getInitialState\",value:function(){return{committeeAccount:this.props.account,url:\"\"}}},{key:\"shouldComponentUpdate\",value:function(e,t){return this.props.visible!==e.visible||this.state.url!==t.url||this.state.committeeAccount!==t.committeeAccount}},{key:\"onAddComittee\",value:function(){var e=this.state,t=e.committeeAccount,a=e.url;t&&a&&s.a.createCommittee({account:t,url:a}),this.props.hideModal()}},{key:\"onChangeCommittee\",value:function(e){this.setState({committeeAccount:e})}},{key:\"onUrlChanged\",value:function(e){this.setState({url:L.a.sanitize(e.target.value.toLowerCase())})}},{key:\"onClose\",value:function(){this.props.hideModal(),this.setState(this.getInitialState(this.props))}},{key:\"render\",value:function(){var e=this.state,t=e.url,a=e.committeeAccount;return r.a.createElement(Y.Modal,{title:W.a.translate(\"modal.committee.create_committee\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:[r.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this.onAddComittee.bind(this)},W.a.translate(\"modal.committee.confirm\")),r.a.createElement(Y.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.onClose.bind(this)},W.a.translate(\"modal.cancel\"))]},r.a.createElement(Y.Form,{className:\"full-width\",layout:\"vertical\"},r.a.createElement(pe.a,{label:\"modal.committee.from\",accountName:a&&a.get(\"name\")||account.get(\"name\"),account:a||account,onAccountChanged:this.onChangeCommittee.bind(this),size:35,typeahead:!0}),r.a.createElement(C.a,{content:\"modal.committee.text\",unsafe:!0,component:\"p\"}),r.a.createElement(Y.Form.Item,{label:W.a.translate(\"modal.committee.url\")},r.a.createElement(Y.Input,{value:t,onChange:this.onUrlChanged.bind(this),placeholder:W.a.translate(\"modal.committee.web_example\")}))))}}]),t}(r.a.Component),ua=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var pa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCreateCommitteeModal:!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ua(t,[{key:\"render\",value:function(){var e=this,t=function(){console.log(\"show committee modal\"),e.setState({showCreateCommitteeModal:!e.state.showCreateCommitteeModal})},a=this.props.onFilterChange,n=this.props.validateAccountHandler,s=this.props.addCommitteeHandler,o=this.props.removeCommitteeHandler,i=this.state.showCreateCommitteeModal,l=this.props,c=l.all_committee,u=l.proxy_committee,p=l.committee,d=l.proxy_account_id,m=l.hasProxy,h=l.globalObject,f=l.filterSearch,g=l.account;return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(\"div\",{style:{float:\"right\"}},r.a.createElement(Y.Button,{onClick:t},r.a.createElement(C.a,{content:\"account.votes.join_committee\"}))),r.a.createElement(\"div\",{className:\"selector inline-block\"},r.a.createElement(Ke.a,{placeholder:W.a.translate(\"explorer.witnesses.filter_by_name\"),value:f,onChange:a}))),r.a.createElement(\"div\",{className:F()(\"content-block\")},r.a.createElement(na,{type:\"committee\",label:\"account.votes.add_committee_label\",items:c,validateAccount:n,onAddItem:s,onRemoveItem:o,tabIndex:m?-1:3,supported:m?u:p,active:h.get(\"active_committee_members\"),proxy:d,filterSearch:f})),r.a.createElement(ca,{visible:i,account:g,hideModal:t}))}}]),t}(n.Component),da=a(2044),ma=a(97),ha=a(2196),fa=a.n(ha),ga=[\"1.14.114\",\"1.14.107\"],ba=(a(283),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());function _a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var va=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ba(t,[{key:\"onApprove\",value:function(e){var t=[],a=[];e.vote_ids.has(e.worker.get(\"vote_against\"))&&a.push(e.worker.get(\"vote_against\")),e.vote_ids.has(e.worker.get(\"vote_for\"))||t.push(e.worker.get(\"vote_for\")),this.props.onChangeVotes(t,a)}},{key:\"onReject\",value:function(e){var t=[];e.vote_ids.has(e.worker.get(\"vote_against\"))&&t.push(e.worker.get(\"vote_against\")),e.vote_ids.has(e.worker.get(\"vote_for\"))&&t.push(e.worker.get(\"vote_for\")),this.props.onChangeVotes([],t)}},{key:\"getHeader\",value:function(e,t){var a=this;return[2===e?null:{title:r.a.createElement(C.a,{component:\"span\",content:\"account.votes.line\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"line\",align:\"right\",render:function(e){return r.a.createElement(\"span\",{style:{textAlign:\"right\",paddingRight:10,paddingLeft:0,whiteSpace:\"nowrap\"}},e||W.a.translate(\"account.votes.expired\"))}},{title:r.a.createElement(C.a,{content:\"account.user_issued_assets.id\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"assets_id\",align:\"center\",sorter:function(e,t){return e.assets_id>t.assets_id?1:e.assets_id<t.assets_id?-1:0},render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:r.a.createElement(C.a,{content:\"account.user_issued_assets.description\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"description\",align:\"left\",sorter:function(e,t){return e.description.name>t.description.name?1:e.description.name<t.description.name?-1:0},render:function(e){return r.a.createElement(\"span\",null,r.a.createElement(\"div\",{className:\"inline-block\",style:{paddingRight:5,position:\"relative\",top:-1,whiteSpace:\"nowrap\"}},r.a.createElement(\"a\",{style:{visibility:e.url&&-1!==e.url.indexOf(\".\")?\"visible\":\"hidden\"},href:L.a.sanitize(e.url),target:\"_blank\",rel:\"noopener noreferrer\"},r.a.createElement(M.a,{name:\"share\",size:\"2x\",title:\"icons.share\"}))),r.a.createElement(\"div\",{className:\"inline-block\"},e.name,r.a.createElement(\"br\",null),r.a.createElement(ce.a,{account:e.worker_account,maxDisplayAccountNameLength:null})))}},{className:\"column-hide-small\",title:r.a.createElement(C.a,{content:\"account.votes.total_votes\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"total_votes\",align:\"right\",sorter:function(e,t){return e.total_votes-t.total_votes},render:function(e){return r.a.createElement(A.a,{amount:e,asset:\"1.3.0\",decimalOffset:5,hide_asset:!0,style:{whiteSpace:\"nowrap\"}})}},0===e?{title:r.a.createElement(C.a,{content:\"account.votes.missing\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"missing\",align:\"right\",sorter:function(e,t){return e.missing-t.missing},render:function(e){return r.a.createElement(\"span\",{style:{textAlign:\"right\",whiteSpace:\"nowrap\"}},r.a.createElement(A.a,{amount:Math.max(0,e),asset:\"1.3.0\",hide_asset:!0,decimalOffset:5}))}}:null,{title:r.a.createElement(C.a,{content:\"explorer.workers.period\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"period\",align:\"right\",sorter:function(e,t){return new Date(e.period.startDate)-new Date(t.period.startDate)},render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e.startDate,\" - \",e.endDate)}},2===e||0===e?null:{title:r.a.createElement(C.a,{content:\"account.votes.funding\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"funding\",align:\"right\",render:function(e){return r.a.createElement(\"span\",{style:{textAlign:\"right\",whiteSpace:\"nowrap\"},className:\"hide-column-small\"},e.isExpired?\"-\":L.a.format_number(e.fundedPercent,2)+\"%\")}},2===e||0===e?null:{title:r.a.createElement(\"span\",null,r.a.createElement(C.a,{content:\"explorer.witnesses.budget\",style:{whiteSpace:\"nowrap\"}}),r.a.createElement(\"div\",{style:{paddingTop:5,fontSize:\"0.8rem\"}},\"(\",r.a.createElement(ma.a,{name:t}),\")\")),dataIndex:\"budget\",align:\"right\",render:function(e){return r.a.createElement(\"span\",{style:{textAlign:\"right\",whiteSpace:\"nowrap\"}},e.rest<=0?e.isExpired?\"-\":\"0.00\":r.a.createElement(da.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:e.preferredUnit,amount:e.rest}))}},{className:\"column-hide-small\",title:r.a.createElement(\"span\",null,r.a.createElement(C.a,{content:\"account.votes.daily_pay\",style:{whiteSpace:\"nowrap\"}}),r.a.createElement(\"div\",{style:{paddingTop:5,fontSize:\"0.8rem\"}},\"(\",r.a.createElement(ma.a,{name:t}),\")\")),dataIndex:\"daily_pay\",align:\"right\",sorter:function(e,t){return e.daily_pay.daily_pay-t.daily_pay.daily_pay},render:function(e){return r.a.createElement(\"span\",{className:e.proxy?\"\":\"clickable\",style:{whiteSpace:\"nowrap\"},onClick:e.proxy?function(){}:a[e.approvalState?\"onReject\":\"onApprove\"].bind(a,e)},r.a.createElement(da.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:e.preferredUnit,amount:e.daily_pay,style:{whiteSpace:\"nowrap\"}}))}},{className:\"column-hide-small\",title:r.a.createElement(C.a,{content:\"account.votes.toggle\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"toggle\",align:\"right\",render:function(e){return r.a.createElement(\"span\",{className:e.proxy?\"\":\"clickable\",style:{whiteSpace:\"nowrap\"},onClick:e.proxy?function(){}:a[e.approvalState?\"onReject\":\"onApprove\"].bind(a,e)},e.proxy?r.a.createElement(M.a,{name:\"locked\",title:\"icons.locked.action\"}):r.a.createElement(M.a,{name:e.approvalState?\"checkmark-circle\":\"minus-circle\",title:e.approvalState?\"icons.checkmark_circle.approved\":\"icons.minus_circle.disapproved\"}))}}].filter((function(e){return e}))}},{key:\"getData\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.props,n=a.hasProxy,r=a.proxy_vote_ids,s=a.vote_ids;return s=n?r:s,t=t||0,e.map((function(e,a){var r=e.worker.toJS(),o=a+1,i=r.total_votes_for-r.total_votes_against,l=!!s.has(r.vote_for)||!s.has(r.vote_against)&&null,c=0;r.daily_pay<e.rest?c=100:e.rest>0&&(c=e.rest/r.daily_pay*100);var u=W.a.localize(new Date(r.work_begin_date+\"Z\"),{type:\"date\",format:\"short_custom\"}),p=W.a.localize(new Date(r.work_end_date+\"Z\"),{type:\"date\",format:\"short_custom\"}),d=new Date,m=new Date(r.work_end_date+\"Z\")<=d,h=new Date(r.work_begin_date+\"Z\")<=d,f=!m&&i<t||!h,g=!!e.poll;return{key:r.id,line:!g&&m?null:m?null:o,assets_id:r.id,description:r,total_votes:i,missing:t-i,period:{startDate:u,endDate:p},funding:g||!m&&!f?{isExpired:m,fundedPercent:c}:null,daily_pay:{preferredUnit:e.preferredUnit,daily_pay:r.daily_pay,proxy:n,approvalState:l,worker:e.worker,vote_ids:s},budget:g||!m&&!f?_a({rest:e.rest,isExpired:m,preferredUnit:e.preferredUnit},\"rest\",e.rest):null,toggle:{proxy:n,approvalState:l,worker:e.worker,vote_ids:s}}}))}},{key:\"_getMappedWorkers\",value:function(e,t,a){var n=this,r=new Date,s=t,o=void 0;return{mappedWorkers:e.sort((function(e,t){return n._getTotalVotes(t)-n._getTotalVotes(e)})).map((function(e){e.isOngoing=new Date(e.get(\"work_end_date\")+\"Z\")>r&&new Date(e.get(\"work_begin_date\")+\"Z\")<=r,e.isUpcoming=new Date(e.get(\"work_begin_date\")+\"Z\")>r,e.isExpired=new Date(e.get(\"work_end_date\")+\"Z\")<=r;var t=parseInt(e.get(\"daily_pay\"),10);return e.votes=e.get(\"total_votes_for\")-e.get(\"total_votes_against\"),s>0&&e.isOngoing?(e.active=!0,(s-=t)<=0&&!o&&(o=e.votes),e.remainingPayout=s+t):(e.active=!1,e.remainingPayout=0),e})).filter((function(e){var t=e.get(\"name\").toLowerCase();return e&&-1!==t.indexOf(a)})).sort((function(e,t){return e.isExpired!==t.isExpired?e.isExpired?1:-1:n._getTotalVotes(t)-n._getTotalVotes(e)})),voteThreshold:o}}},{key:\"_getTotalVotes\",value:function(e){return parseInt(e.get(\"total_votes_for\"),10)-parseInt(e.get(\"total_votes_against\"),10)}},{key:\"_decideRowClassName\",value:function(e,t){return e.toggle.approvalState?\"\":\"unsupported\"}},{key:\"render\",value:function(){var e=this.props,t=e.workerTableIndex,a=e.preferredUnit,n=e.setWorkersLength,s=e.workerBudget,o=e.hideLegacyProposals,i=e.getWorkerArray,l=e.filterSearch,c=this.getHeader(t,a),u=i(),p=this._getMappedWorkers(u,s,l),d=p.mappedWorkers,m=p.voteThreshold,h=d.filter((function(e){var t=e.get(\"name\").toLowerCase();return t.includes(\"bsip\")||t.includes(\"poll\")})).map((function(e){return{preferredUnit:a,rest:e.remainingPayout,poll:!0,worker:e}})).filter((function(e){return!!e})),f=(d=d.filter((function(e){var t=e.get(\"name\").toLowerCase();return!t.includes(\"bsip\")&&!t.includes(\"poll\")}))).filter((function(e){return e.isOngoing})),g=d.filter((function(e){return e.active&&e.isOngoing})).map((function(e){return{preferredUnit:a,rest:e.remainingPayout,worker:e}})).filter((function(e){return!!e})),b=d.filter((function(e){return!e.active&&!e.isExpired&&function(e,t){if(!o)return!0;var a=t.some((function(t){var a=fa.a.compareTwoStrings(e.get(\"name\"),t.get(\"name\"))>.8,n=t.get(\"id\")===e.get(\"id\"),r=t.get(\"id\").substr(5,t.get(\"id\").length)>e.get(\"id\").substr(5,t.get(\"id\").length);return a&&!n&&r})),n=new Date,r=e.get(\"total_votes_for\")-e.get(\"total_votes_against\")<2e12,s=new Date(e.get(\"work_begin_date\")+\"Z\")<=new Date(n.setMonth(n.getMonth()-2)),i=ga.includes(e.get(\"id\"));return!((!!a||s)&&r||i)}(e,f)})).map((function(e){return{preferredUnit:a,rest:0,worker:e}})),_=u.filter((function(e){return e.isExpired})).map((function(e){return{preferredUnit:a,rest:0,worker:e}}));setTimeout((function(){n(b.length,g.length,h.length,_.length,m)}),250);var v=0===t?b:1===t?g:2===t?_:h;return r.a.createElement(Je.a,{className:\"table dashboard-table table-hover\",rowClassName:this._decideRowClassName.bind(this),rows:this.getData(v,m),header:c,pageSize:50,label:\"utility.total_x_assets\",leftPadding:\"1.5rem\"})}}]),t}(r.a.Component),ya=Object(u.a)(va),Ea=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var wa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={newWorkersLength:null,activeWorkersLength:null,pollsLength:null,expiredWorkersLength:null,voteThreshold:null,workerTableIndex:e.viewSettings.get(\"workerTableIndex\",1)},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ea(t,[{key:\"shouldComponentUpdate\",value:function(e,t){return t.newWorkersLength!==this.state.newWorkersLength||t.activeWorkersLength!==this.state.activeWorkersLength||t.pollsLength!==this.state.pollsLength||t.expiredWorkersLength!==this.state.expiredWorkersLength||t.voteThreshold!==this.state.voteThreshold||e.workerTableIndex!==this.state.workerTableIndex}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.vote_ids,n=t.proxy_vote_ids,s=t.hideLegacy,o=t.preferredUnit,i=t.globalObject,l=t.totalBudget,c=t.workerBudget,u=t.hideLegacyProposals,p=t.hasProxy,d=t.filterSearch,m=t.onFilterChange,h=t.onChangeVotes,f=t.getWorkerArray,g=this.state,b=g.workerTableIndex,_=g.newWorkersLength,v=g.activeWorkersLength,y=g.pollsLength,E=g.expiredWorkersLength,k=g.voteThreshold;return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(\"div\",{style:{float:\"right\"}},r.a.createElement(Y.Button,null,r.a.createElement(w.a,{to:\"/create-worker\"},r.a.createElement(C.a,{content:\"account.votes.create_worker\"})))),r.a.createElement(\"div\",{className:\"selector inline-block\"},r.a.createElement(Ke.a,{placeholder:W.a.translate(\"explorer.witnesses.filter_by_name\"),value:d,onChange:m}),r.a.createElement(Y.Radio.Group,{defaultValue:1,onChange:function(t){e.setState({workerTableIndex:t.target.value})}},r.a.createElement(Y.Radio,{value:0},W.a.translate(\"account.votes.new\",{count:_})),r.a.createElement(Y.Radio,{value:1},W.a.translate(\"account.votes.active\",{count:v})),y?r.a.createElement(Y.Radio,{value:3},W.a.translate(\"account.votes.polls\",{count:y})):null,E?r.a.createElement(Y.Radio,{value:2},r.a.createElement(C.a,{content:\"account.votes.expired\"})):null)),s,r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(Y.Row,null,r.a.createElement(Y.Col,{span:3},r.a.createElement(C.a,{content:\"account.votes.threshold\"}),\" (\",r.a.createElement(ma.a,{name:o}),\")\"),r.a.createElement(Y.Col,{span:3,style:{marginLeft:\"10px\"}},r.a.createElement(A.a,{decimalOffset:4,hide_asset:!0,amount:k,asset:\"1.3.0\"}))),r.a.createElement(Y.Row,null,r.a.createElement(Y.Col,{span:3},r.a.createElement(C.a,{content:\"account.votes.total_budget\"}),\" (\",r.a.createElement(ma.a,{name:o}),\")\"),r.a.createElement(Y.Col,{span:3,style:{marginLeft:\"10px\"}},i?r.a.createElement(da.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:o,amount:l}):null))),r.a.createElement(ya,{workerTableIndex:b,preferredUnit:o,setWorkersLength:function(t,a,n,r,s){t===e.state.newWorkersLength&&a===e.state.activeWorkersLength&&n===e.state.pollsLength&&r===e.state.expiredWorkersLength&&s===e.state.voteThreshold||e.setState({newWorkersLength:t,activeWorkersLength:a,pollsLength:n,expiredWorkersLength:r,voteThreshold:s})},workerBudget:c,hideLegacyProposals:u,hasProxy:p,proxy_vote_ids:n,vote_ids:a,onChangeVotes:h,getWorkerArray:f,filterSearch:d}))}}]),t}(r.a.Component),ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ca=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},Oa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Sa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRemoveProxy=function(){a.publish(null)};var n=e.proxy.get(\"id\"),r=e.proxy.get(\"name\"),s=\"string\"==typeof e.account?e.account:e.account.get(\"name\");return a.state={proxy_account_id:\"1.2.5\"===n?\"\":n,prev_proxy_account_id:\"1.2.5\"===n?\"\":n,current_proxy_input:\"1.2.5\"===n?\"\":r,witnesses:null,committee:null,vote_ids:h.a.Set(),proxy_vote_ids:h.a.Set(),lastBudgetObject:e.initialBudget.get(\"id\"),all_witnesses:h.a.List(),all_committee:h.a.List(),hideLegacyProposals:!0,filterSearch:\"\",tabs:[{name:\"witnesses\",link:\"/account/\"+s+\"/voting/witnesses\",translate:\"explorer.witnesses.title\",content:ia},{name:\"committee\",link:\"/account/\"+s+\"/voting/committee\",translate:\"explorer.committee_members.title\",content:pa},{name:\"workers\",link:\"/account/\"+s+\"/voting/workers\",translate:\"account.votes.workers_short\",content:wa}]},a.onProxyAccountFound=a.onProxyAccountFound.bind(a),a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a._getVoteObjects=a._getVoteObjects.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Oa(t,[{key:\"componentWillMount\",value:function(){d.a.getFinalFeeAsset(this.props.account,\"account_update\"),V.ChainStore.fetchAllWorkers(),this.getBudgetObject()}},{key:\"componentDidMount\",value:function(){this.updateAccountData(this.props),this._getVoteObjects(),this._getVoteObjects(\"committee\")}},{key:\"shouldComponentUpdate\",value:function(e,t){return e.location.pathname!==this.props.location.pathname||t.prev_proxy_account_id!==this.state.prev_proxy_account_id||t.hideLegacyProposals!==this.state.hideLegacyProposals||t.vote_ids.size!==this.state.vote_ids.size||t.current_proxy_input!==this.state.current_proxy_input||t.filterSearch!==this.state.filterSearch||t.witnesses!==this.state.witnesses||t.committee!==this.state.committee}},{key:\"componentWillReceiveProps\",value:function(e){if(e.account!==this.props.account){var t=e.proxy.get(\"id\"),a={proxy_account_id:\"1.2.5\"===t?\"\":t};this.setState({prev_proxy_account_id:a.proxy_account_id}),this.updateAccountData(e,a)}this.getBudgetObject()}},{key:\"updateAccountData\",value:function(e){var t=this,a=e.account,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=n.proxy_account_id,s=V.ChainStore.getAccount(r),o=a.get(\"options\"),i=s?s.get(\"options\"):null,l=s?s.get(\"name\"):\"\";\"1.2.5\"===r&&(r=\"\",l=\"\");var c=o.get(\"votes\"),u=c.toArray(),p=h.a.Set(u);V.ChainStore.getObjectsByVoteIds(u);var d=null,m=h.a.Set([]),f=\"1.2.5\"!==r;if(f&&i){var g=i.get(\"votes\"),b=g.toArray();m=h.a.Set(b),V.ChainStore.getObjectsByVoteIds(b),d=Object(V.FetchChainObjects)(V.ChainStore.getObjectByVoteID,b,1e4)}Promise.all([Object(V.FetchChainObjects)(V.ChainStore.getObjectByVoteID,u,1e4),d]).then((function(e){var a=Ca(e,2),n=a[0],s=a[1];function o(e){var t=new h.a.List,a=new h.a.List,n=new h.a.Set;return e.forEach((function(e){var n=e.get(\"committee_member_account\");n?a=a.push(n):(n=e.get(\"worker_account\"))||(n=e.get(\"witness_account\"))&&(t=t.push(n))})),{witnesses:t,committee:a,workers:n}}var i=o(n),c=i.witnesses,u=i.committee,d=i.workers,f=o(s||[]),g=f.witnesses,b=f.committee,_=f.workers,v={proxy_account_id:r,current_proxy_input:l,witnesses:c,committee:u,workers:d,proxy_witnesses:g,proxy_committee:b,proxy_workers:_,vote_ids:p,proxy_vote_ids:m,prev_witnesses:c,prev_committee:u,prev_workers:d,prev_vote_ids:p};t.setState(v)}))}},{key:\"isChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.proxy_account_id!==e.prev_proxy_account_id||e.witnesses!==e.prev_witnesses||e.committee!==e.prev_committee||!h.a.is(e.vote_ids,e.prev_vote_ids)}},{key:\"_getVoteObjects\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"witnesses\",a=arguments[1],n=this.state[\"all_\"+t],r=\"witnesses\"===t,s=void 0;if(a)s=parseInt(a[a.length-1].split(\".\")[2],10);else{a=[];var o=this.props.globalObject.get(r?\"active_witnesses\":\"active_committee_members\").sort((function(e,t){return parseInt(e.split(\".\")[2],10)-parseInt(t.split(\".\")[2],10)})),i=o.last()||\"1.\"+(r?\"6\":\"5\")+\".1\";s=parseInt(i.split(\".\")[2],10);for(var l=1;l<=s+10;l++)a.push(\"1.\"+(r?\"6\":\"5\")+\".\"+l)}Object(V.FetchChainObjects)(V.ChainStore.getObject,a,5e3,{}).then((function(o){if(e.state[\"all_\"+t]=n.concat(h.a.List(o.filter((function(e){return!!e})).map((function(e){return e.get(r?\"witness_account\":\"committee_member_account\")})))),o[o.length-1]){a=[];for(var i=s+11;i<=s+20;i++)a.push(\"1.\"+(r?\"6\":\"5\")+\".\"+i);return e._getVoteObjects(t,a)}e.forceUpdate()}))}},{key:\"onPublish\",value:function(){this.publish(this.state.proxy_account_id)}},{key:\"publish\",value:function(e){var t=this,a=this.props.account.toJS(),n={account:a.id},r={memo_key:a.options.memo_key};r.voting_account=e||\"1.2.5\",r.num_witness=this.state.witnesses.size,r.num_committee=this.state.committee.size,n.new_options=r,n.fee={amount:0,asset_id:d.a.getFinalFeeAsset(a.id,\"account_update\")};var s=this.state.vote_ids,o=this._getWorkerArray(),i=new Date;function l(e,t){return e.includes(t)&&(e=e.delete(t)),e}o.forEach((function(e){e&&(new Date(e.get(\"work_end_date\"))<=i&&(s=l(s,e.get(\"vote_for\"))),s=l(s,e.get(\"vote_against\")))})),Object(V.FetchChainObjects)(V.ChainStore.getWitnessById,this.state.witnesses.toArray(),4e3).then((function(e){var a=e.map((function(e){return e.get(\"vote_id\")}));return Promise.all([Promise.resolve(a),Object(V.FetchChainObjects)(V.ChainStore.getCommitteeMemberById,t.state.committee.toArray(),4e3)])})).then((function(e){n.new_options.votes=e[0].concat(e[1].map((function(e){return e.get(\"vote_id\")}))).concat(s.filter((function(e){return\"2\"===e.split(\":\")[0]})).toArray()).sort((function(e,t){var a=e.split(\":\"),n=t.split(\":\");return parseInt(a[1],10)-parseInt(n[1],10)})),He.a.updateAccount(n)}))}},{key:\"_getWorkerArray\",value:function(){var e=[];return V.ChainStore.workers.forEach((function(t){var a=V.ChainStore.getObject(t,!1,!1);a&&e.push(a)})),e}},{key:\"onReset\",value:function(){var e=this,t=this.state;this.refs.voting_proxy&&this.refs.voting_proxy.refs.bound_component&&this.refs.voting_proxy.refs.bound_component.onResetProxy(),this.setState({proxy_account_id:t.prev_proxy_account_id,current_proxy_input:t.prev_proxy_input,witnesses:t.prev_witnesses,committee:t.prev_committee,workers:t.prev_workers,vote_ids:t.prev_vote_ids},(function(){e.updateAccountData(e.props)}))}},{key:\"onAddItem\",value:function(e,t){var a={};a[e]=this.state[e].push(t),this.setState(a)}},{key:\"onRemoveItem\",value:function(e,t){var a={};a[e]=this.state[e].filter((function(e){return e!==t})),this.setState(a)}},{key:\"onChangeVotes\",value:function(e,t){var a={};a.vote_ids=this.state.vote_ids,e.length&&e.forEach((function(e){a.vote_ids=a.vote_ids.add(e)})),t&&t.forEach((function(e){a.vote_ids=a.vote_ids.delete(e)})),this.setState(a)}},{key:\"validateAccount\",value:function(e,t){return t?\"witnesses\"===e?Object(V.FetchChainObjects)(V.ChainStore.getWitnessById,[t.get(\"id\")],3e3).then((function(e){return e[0]?null:\"Not a witness\"})):\"committee\"===e?Object(V.FetchChainObjects)(V.ChainStore.getCommitteeMemberById,[t.get(\"id\")],3e3).then((function(e){return e[0]?null:\"Not a committee member\"})):null:null}},{key:\"onProxyChange\",value:function(e){var t=V.ChainStore.getAccount(e);(!t||t&&t.get(\"id\")!==this.state.proxy_account_id)&&this.setState({proxy_account_id:\"\",proxy_witnesses:h.a.Set(),proxy_committee:h.a.Set(),proxy_workers:h.a.Set()}),this.setState({current_proxy_input:e})}},{key:\"onProxyAccountFound\",value:function(e){var t=this,a=e?e.get(\"id\"):\"\";this.state.proxy_account_id!==a&&this.setState({proxy_account_id:a},(function(){t.updateAccountData(t.props)}))}},{key:\"onClearProxy\",value:function(){this.setState({proxy_account_id:\"\"})}},{key:\"getBudgetObject\",value:function(){var e=this,t=this.state.lastBudgetObject,a=void 0;a=V.ChainStore.getObject(t);var n=parseInt(t.split(\".\")[2],10);if(a){var r=a.get(\"time\");/Z$/.test(r)||(r+=\"Z\");var s=new Date,o=n+Math.floor((s-new Date(r).getTime())/1e3/60/60)-1;if(n>=o)return;var l=\"2.13.\"+Math.max(n,o),c=parseInt(l.split(\".\")[2],10);Object(V.FetchChainObjects)(V.ChainStore.getObject,[l],void 0,{}).then((function(t){null===Ca(t,1)[0]?e.setState({lastBudgetObject:\"2.13.\"+(c-1)},e.getBudgetObject):(i.a.setLastBudgetObject(l),e.setState({lastBudgetObject:l}))}))}else{var u=\"2.13.\"+(n-1);Object(V.FetchChainObjects)(V.ChainStore.getObject,[u],void 0,{}).then((function(t){null===Ca(t,1)[0]?e.setState({lastBudgetObject:\"2.13.\"+(n-2)},e.getBudgetObject):(i.a.setLastBudgetObject(u),e.setState({lastBudgetObject:u}))}))}}},{key:\"handleFilterChange\",value:function(e){this.setState({filterSearch:e.target.value||\"\"})}},{key:\"render\",value:function(){var e=this,t=this.state,a=t.prev_proxy_account_id,n=t.hideLegacyProposals,s=t.filterSearch,o=t.all_witnesses,i=t.proxy_witnesses,l=t.witnesses,c=t.all_committee,u=t.proxy_committee,p=t.committee,d=t.vote_ids,m=t.proxy_vote_ids,h=t.proxy_account_id,f=!!a,g=this.props.settings.get(\"unit\")||\"1.3.0\",b=!!h,_=this.props,v=_.globalObject,y=_.account,E=this._getBudgets(v),w=E.totalBudget,k=E.workerBudget,O=this._getActionButtons(),S=this._getProxyInput(f),A=this._getHideLegacyOptions(),x=this.handleFilterChange.bind(this),j=this.validateAccount.bind(this,\"witnesses\"),P=this.onAddItem.bind(this,\"witnesses\"),N=this.onRemoveItem.bind(this,\"witnesses\"),I=this.onChangeVotes.bind(this),M=this._getWorkerArray.bind(this),T=this.onAddItem.bind(this,\"committee\"),B=this.onRemoveItem.bind(this,\"committee\");return r.a.createElement(\"div\",{className:\"main-content grid-content\"},r.a.createElement(\"div\",{className:\"voting\"},r.a.createElement(\"div\",{className:\"padding\"},r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"voting.title\",component:\"h1\"}),r.a.createElement(C.a,{content:\"voting.description\",component:\"p\"})),r.a.createElement(\"div\",{className:\"proxy-row\"},S,O)),r.a.createElement(Y.Tabs,{activeKey:this.props.location.pathname,animated:!1,style:{display:\"table\",height:\"100%\",width:\"100%\"},onChange:function(t){e.props.history.push(t)}},this.state.tabs.map((function(t){var a=t.content;return r.a.createElement(Y.Tabs.TabPane,{key:t.link,tab:W.a.translate(t.translate)},r.a.createElement(a,{all_witnesses:o,proxy_witnesses:i,witnesses:l,proxy_account_id:h,onFilterChange:x,validateAccountHandler:j,addWitnessHandler:P,removeWitnessHandler:N,hasProxy:b,globalObject:v,filterSearch:s,account:y,all_committee:c,proxy_committee:u,committee:p,addCommitteeHandler:T,removeCommitteeHandler:B,vote_ids:d,proxy_vote_ids:m,hideLegacy:A,preferredUnit:g,totalBudget:w,workerBudget:k,hideLegacyProposals:n,onChangeVotes:I,getWorkerArray:M,viewSettings:e.props.viewSettings}))})))))}},{key:\"_getBudgets\",value:function(e){var t=void 0;this.state.lastBudgetObject&&(t=V.ChainStore.getObject(this.state.lastBudgetObject));var a=0,n=e?parseInt(e.getIn([\"parameters\",\"worker_budget_per_day\"]),10):0;return t&&(n=Math.min(24*t.getIn([\"record\",\"worker_budget\"]),n),a=Math.min(24*t.getIn([\"record\",\"worker_budget\"]),n)),{totalBudget:a,workerBudget:n}}},{key:\"_getProxyInput\",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{label:\"account.votes.proxy_short\",style:{width:\"50%\",maxWidth:250,display:\"inline-block\"},account:this.state.current_proxy_input,accountName:this.state.current_proxy_input,onChange:this.onProxyChange.bind(this),onAccountChanged:this.onProxyAccountFound,tabIndex:1,placeholder:W.a.translate(\"account.votes.set_proxy\"),tooltip:W.a.translate(this.state.proxy_account_id?\"tooltip.proxy_remove\":\"tooltip.proxy_search\"),hideImage:!0},r.a.createElement(\"span\",{style:{paddingLeft:5,position:\"relative\",top:9}},r.a.createElement(w.a,{to:\"/help/voting\"},r.a.createElement(M.a,{name:\"question-circle\",title:\"icons.question_circle\",size:\"1x\"})))),e&&r.a.createElement(Y.Button,{style:{marginLeft:\"1rem\"},onClick:this.onRemoveProxy,tabIndex:9},r.a.createElement(C.a,{content:\"account.perm.remove_proxy\"})))}},{key:\"_getHideLegacyOptions\",value:function(){var e=this;return r.a.createElement(\"div\",{className:\"inline-block\",style:{marginLeft:\"0.5em\"},onClick:function(){e.setState({hideLegacyProposals:!e.state.hideLegacyProposals})}},r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.legacy_explanation\")},r.a.createElement(Y.Switch,{style:{marginRight:6,marginTop:-3},checked:this.state.hideLegacyProposals}),r.a.createElement(C.a,{content:\"account.votes.hide_legacy_proposals\"})))}},{key:\"_getActionButtons\",value:function(){return r.a.createElement(Y.Tooltip,{title:W.a.translate(\"account.votes.cast_votes_through_one_operation\"),mouseEnterDelay:.5},r.a.createElement(\"div\",{style:{float:\"right\"}},r.a.createElement(Y.Button,{type:\"primary\",onClick:this.onPublish,tabIndex:4,disabled:!this.isChanged()||void 0},r.a.createElement(C.a,{content:\"account.votes.publish\"})),r.a.createElement(Y.Button,{style:{marginLeft:\"8px\"},onClick:this.onReset,tabIndex:8},r.a.createElement(C.a,{content:\"account.perm.reset\"}))))}}]),t}(r.a.Component);Sa.propTypes={initialBudget:c.a.ChainObject.isRequired,globalObject:c.a.ChainObject.isRequired,proxy:c.a.ChainAccount.isRequired},Sa.defaultProps={globalObject:\"2.0.0\"},Sa=Object(u.a)(Sa);var Aa=Object($t.a)((function(e){var t={};if(e.initialBudget||(t.initialBudget=i.a.getLastBudgetObject()),!e.account){var a=o.a.getState().currentAccount||o.a.getState().passwordAccount;a=a&&\"null\"!==a?a:\"committee-account\",t.account=a}if(!e.proxy){var n=V.ChainStore.getAccount(e.account),s=null;if(!n)throw\"Account must be loaded\";s=n.getIn([\"options\",\"voting_account\"]),t.proxy=s}return r.a.createElement(Sa,ka({},e,t))})),xa=a(602),ja=a(2060),Pa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ia={textAlign:\"right\"},Ma={textAlign:\"left\"},Ta=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=null!=e.object;return a.state={isBorrowModalVisible:!1,modalRef:\"cp_modal_\"+(n?a.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"]):a.props.debtAsset.get(\"id\")),hasOrder:n},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Pa(t,[{key:\"showBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!0})}},{key:\"hideBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!1})}},{key:\"_onUpdatePosition\",value:function(e){e.preventDefault(),this.refs[this.state.modalRef].show()}},{key:\"_getFeedPrice\",value:function(){return this.props?1/L.a.get_asset_price(P.a.extractRawFeedPrice(this.props.debtAsset).getIn([\"quote\",\"amount\"]),this.props.collateralAsset,P.a.extractRawFeedPrice(this.props.debtAsset).getIn([\"base\",\"amount\"]),this.props.debtAsset):1}},{key:\"_onClosePosition\",value:function(e){e.preventDefault();var t=Jt.a.new_transaction();t.add_type_operation(\"call_order_update\",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get(\"borrower\"),delta_collateral:{amount:-this.props.object.get(\"collateral\"),asset_id:this.props.object.getIn([\"call_price\",\"base\",\"asset_id\"])},delta_debt:{amount:-this.props.object.get(\"debt\"),asset_id:this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"])}}),$e.a.process_transaction(t,null,!0)}},{key:\"_getBalance\",value:function(){var e=this.props.account,t=null;t=null!=this.props.object?this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"]):this.props.debtAsset.get(\"id\");var a=e.get(\"balances\"),n=0;return a&&a.forEach((function(e,a){if(a==t){var r=V.ChainStore.getObject(e);n=r.get(\"balance\")}})),n}},{key:\"_getCollateralRatio\",value:function(){var e=this.props.object.toJS();return L.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(L.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:\"_getMR\",value:function(){return this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"])/1e3}},{key:\"_getStatusClass\",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?\"danger\":e<t+.5?\"warning\":\"\"}},{key:\"_getCRTip\",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&\"\"!==e?\"danger\"===e?W.a.translate(\"tooltip.cr_danger\",{mr:t}):\"warning\"===e?W.a.translate(\"tooltip.cr_warning\",{mr:t}):null:null}},{key:\"_getTargetCollateralRatio\",value:function(){var e=this.props.object&&this.props.object.toJS();return e&&!isNaN(e.target_collateral_ratio)?e.target_collateral_ratio/1e3:0}},{key:\"render\",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object,s=null!=n,o=this._getBalance(),i=s?n.toJS():null,l=L.a.replaceName(this.props.debtAsset).isBitAsset,c=t.get(\"bitasset\")&&t.getIn([\"bitasset\",\"is_prediction_market\"]),u=this.props.debtAsset.getIn([\"bitasset\",\"settlement_fund\"]),p=this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"]),d=u>0,h=s?i.call_price.quote.asset_id:t.get(\"id\"),f=s?i.debt:0,g=s?i.collateral:0,b=s?i.call_price.base.asset_id:a.get(\"id\"),_=this._getTargetCollateralRatio();return r.a.createElement(\"tr\",{className:\"margin-row\"},r.a.createElement(\"td\",{style:Ma},r.a.createElement(w.a,{to:\"/asset/\"+t.get(\"symbol\")},r.a.createElement(ma.a,{noTip:!0,name:t.get(\"symbol\")}))),r.a.createElement(\"td\",{style:Ia},r.a.createElement(A.a,{amount:o,asset:h,hide_asset:!0})),r.a.createElement(\"td\",{style:Ia},r.a.createElement(A.a,{amount:f,asset:h,hide_asset:!0})),r.a.createElement(\"td\",{style:Ia,className:\"column-hide-medium\"},r.a.createElement(A.a,{decimalOffset:3,amount:g,asset:b})),s?r.a.createElement(\"td\",{\"data-place\":\"bottom\",\"data-tip\":this._getCRTip(),className:\"center-content \"+this._getStatusClass()},c?\"1:1\":L.a.format_number(this._getCollateralRatio(),2)):r.a.createElement(\"td\",null),r.a.createElement(\"td\",null,_&&!c?L.a.format_number(_,2):null),r.a.createElement(\"td\",{style:Ia},s?r.a.createElement(xa.a,{noTip:!0,balances:Object(m.List)(),debt:Na({},t.get(\"id\"),i.debt),collateral:Na({},a.get(\"id\"),parseInt(i.collateral,10)),hide_asset:!0}):null),r.a.createElement(\"td\",{style:Ia,className:\"column-hide-small\"},s?c?\"-\":r.a.createElement(le.a,{base_amount:g,base_asset:a.get(\"id\"),quote_amount:f*(p/1e3),quote_asset:t.get(\"id\"),hide_symbols:!0}):null),r.a.createElement(\"td\",{style:Ia,className:\"column-hide-small\"},s?c?\"1\":r.a.createElement(le.a,{base_amount:P.a.extractRawFeedPrice(t).getIn([\"base\",\"amount\"]),base_asset:i.call_price.quote.asset_id,quote_amount:P.a.extractRawFeedPrice(t).getIn([\"quote\",\"amount\"]),quote_asset:i.call_price.base.asset_id,hide_symbols:!0}):null),r.a.createElement(\"td\",{className:\"center-content column-hide-small\",style:Ma},s?r.a.createElement(le.a,{base_amount:i.call_price.base.amount,base_asset:i.call_price.base.asset_id,quote_amount:i.call_price.quote.amount,quote_asset:i.call_price.quote.asset_id,hide_value:!0}):null),r.a.createElement(\"td\",{style:{textAlign:\"center\"}},r.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+a.get(\"symbol\")},r.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\",style:{marginRight:5}}))),r.a.createElement(\"td\",null,d?r.a.createElement(Y.Tooltip,{placement:\"left\",title:W.a.translate(\"tooltip.borrow_disabled\",{asset:l?\"bit\"+t.get(\"symbol\"):\"\"+t.get(\"symbol\")})},r.a.createElement(\"div\",{style:{paddingBottom:5}},r.a.createElement(Y.Icon,{type:\"question-circle\"}))):r.a.createElement(Y.Tooltip,{placement:\"left\",title:W.a.translate(\"tooltip.update_position\")},r.a.createElement(\"div\",{style:{paddingBottom:5}},r.a.createElement(\"a\",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(M.a,{name:\"adjust\",title:\"icons.adjust\",className:\"icon-14px rotate90\"}))))),r.a.createElement(\"td\",null,s?r.a.createElement(\"div\",{\"data-place\":\"left\",\"data-tip\":W.a.translate(\"tooltip.close_position\",{amount:L.a.get_asset_amount(i.debt,this.props.debtAsset),asset:t.get(\"symbol\")}),style:{paddingBottom:5}},r.a.createElement(\"a\",{onClick:this._onClosePosition.bind(this)},r.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.close_position\",className:\"icon-14px\"}))):null,t?r.a.createElement(ja.a,{visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal.bind(this),hideModal:this.hideBorrowModal.bind(this),ref:this.state.modalRef,modalId:this.state.modalRef,quoteAssetObj:h,backingAssetObj:t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),accountObj:this.props.account}):null))}}]),t}(r.a.Component);Ta.propTypes={object:c.a.ChainObject,debtAsset:c.a.ChainAsset.isRequired,collateralAsset:c.a.ChainAsset.isRequired},Ta.defaultProps={tempComponent:\"tr\"};var Ba=Ta=Object(u.a)(Ta),Ra=a(27),Da=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var qa={textAlign:\"right\"},La={textAlign:\"left\"},Va=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={assetsPropsCount:0,ordersJson:\"\"},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Fa(t,[{key:\"render\",value:function(){var e=this,t=this.props.account,a=this.state.assets.sort((function(e,t){if(e.has_margin_order&&t.has_margin_order)return t.order.get(\"debt\")-e.order.get(\"debt\");if(e.has_margin_order||t.has_margin_order)return e.has_margin_order?-1:1;var a=L.a.replaceName(e.asset),n=L.a.replaceName(t.asset),r=(null!=a.prefix?a.prefix:\"\")+a.name,s=(null!=n.prefix?n.prefix:\"\")+n.name;return r.localeCompare(s)})).map((function(a){var n=void 0,s=void 0,o=null;if(a.has_margin_order){var i=a.order;n=i.getIn([\"call_price\",\"quote\",\"asset_id\"]),s=i.getIn([\"call_price\",\"base\",\"asset_id\"]),o=i.get(\"id\")}else n=a.asset.get(\"id\"),s=a.asset.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]);return r.a.createElement(Ba,Da({key:a.asset.get(\"id\"),object:o,account:t,debtAsset:n,collateralAsset:s},e.props))}));return r.a.createElement(\"tbody\",null,a)}}],[{key:\"getDerivedStateFromProps\",value:function(e,t){var a=JSON.stringify(e.callOrders);if(null==t||t.assetsPropsCount!=e.bitAssets.length||t.ordersJson!=a){var n=new Array,r={},s=0;return e.bitAssets.forEach((function(e){r[e.get(\"id\")]=s++,n.push({asset:e,has_margin_order:!1})})),e.callOrders.length>0&&e.callOrders.forEach((function(e){if(e){var t=e.getIn([\"call_price\",\"quote\",\"asset_id\"]);if(null==r[t]){var a=V.ChainStore.getObject(t);void 0!==a&&(r[t]=s++,n.push({asset:a,has_margin_order:!0,order:e}))}else n[r[t]].has_margin_order=!0,n[r[t]].order=e}})),{assetsPropsCount:e.bitAssets.length,assets:n,ordersJson:a}}return t}}]),t}(r.a.Component);Va.propTypes={callOrders:c.a.ChainObjectsList},Va=Object(u.a)(Va),Va=Object(N.a)(Va,{propNames:[\"bitAssets\"],defaultProps:{bitAssets:[\"1.3.113\",\"1.3.120\",\"1.3.121\",\"1.3.1325\",\"1.3.105\",\"1.3.106\",\"1.3.103\"]},asList:!0});var Ua=function(e){var t=e.callOrders,a=e.account,n=e.className,s=e.children,o=e.preferredUnit;return r.a.createElement(\"table\",{className:\"table table-hover \"+n},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",{style:La},r.a.createElement(C.a,{content:\"explorer.asset.title\"})),r.a.createElement(\"th\",{style:qa},r.a.createElement(C.a,{content:\"exchange.balance\"})),r.a.createElement(\"th\",{style:qa},r.a.createElement(C.a,{content:\"transaction.borrow_amount\"})),r.a.createElement(\"th\",{style:qa,className:\"column-hide-medium\"},r.a.createElement(C.a,{content:\"transaction.collateral\"})),r.a.createElement(\"th\",null,r.a.createElement(Y.Popover,{placement:\"top\",title:W.a.translate(\"header.collateral_ratio\"),content:W.a.translate(\"tooltip.coll_ratio\")},r.a.createElement(C.a,{content:\"borrow.coll_ratio\"}))),r.a.createElement(\"th\",null,r.a.createElement(Y.Popover,{placement:\"top\",content:r.a.createElement(\"div\",{style:{width:\"600px\"}},W.a.translate(\"borrow.target_collateral_ratio_explanation\")),title:W.a.translate(\"borrow.target_collateral_ratio\")},r.a.createElement(C.a,{content:\"borrow.target_collateral_ratio_short\"}))),r.a.createElement(\"th\",{style:qa},r.a.createElement(Ra.a,{noLink:!0,string:\"account.total\",keys:[{type:\"asset\",value:o,arg:\"asset\"}]})),r.a.createElement(\"th\",{style:qa,className:\"column-hide-small\"},r.a.createElement(Y.Popover,{placement:\"top\",content:W.a.translate(\"tooltip.call_price\")},r.a.createElement(C.a,{content:\"exchange.call\"}))),r.a.createElement(\"th\",{style:qa,className:\"column-hide-small\"},r.a.createElement(Y.Popover,{placement:\"top\",content:W.a.translate(\"tooltip.feed_price\")},r.a.createElement(C.a,{content:\"exchange.feed_price\"}))),r.a.createElement(\"th\",{className:\"column-hide-small\",style:La},r.a.createElement(C.a,{content:\"explorer.assets.units\"})),r.a.createElement(\"th\",{style:{textAlign:\"center\"}},r.a.createElement(C.a,{content:\"exchange.market\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"borrow.adjust_short\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"transfer.close\"})))),r.a.createElement(Va,{account:a,callOrders:h.a.List(t)}),r.a.createElement(\"tbody\",null,s))},Wa=a(413),za=a(202),Ja=a(612),Ka=function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}},Ga={AccountPermission:function(e,t,a){var n=this;this.id=e.get(\"id\"),this.weight=t,this.threshold=e.getIn([a,\"weight_threshold\"]),this.accounts=[],this.keys=e.getIn([a,\"key_auths\"]).map((function(e){return new Ka(e)})).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce((function(t,a){return t+(a._sumWeights(e)?a.weight:0)}),0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce((function(t,a){return t+a._sumWeights(e)}),0);return n.keys.length&&(a+=n.sumKeys(t)),a}var r=n._sumWeights(e);return n.isMultiSig()&&(r+=n.sumKeys(t)),r},this.sumKeys=function(e){return n.keys.reduce((function(t,a){return t+(a.isAvailable(e)?a.weight:0)}),0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce((function(e,t){return e||t.weight<n.threshold}),!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce((function(t,a){return t.concat(a.getMissingSigs(e))}),[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach((function(a){a.isAvailable(e)||t.push(a.id)})),n.isNested()&&(a=n.accounts.reduce((function(t,a){return t.concat(a.getMissingKeys(e))}),[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach((function(e){e&&t.push(e.get?e.get(\"id\"):e)})),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var r=V.ChainStore.getAccount(e.id);r&&r.getIn([t,\"account_auths\"]).size&&r.getIn([t,\"account_auths\"]).forEach((function(r){var s=V.ChainStore.getAccount(r.get(0));s&&e.accounts.push(a.unravel(new a.AccountPermission(s,r.get(1),t),t,n+1))}))}return e},unnest:function(e,t){var a=this,n=[];return e.forEach((function(e){var r=V.ChainStore.getAccount(e);if(r){var s=a.unravel(new a.AccountPermission(r,null,t),t);n.push(s)}})),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.a.List();return e.size?(e.forEach((function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))})),t):t}},Qa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Za=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Qa(t,[{key:\"render\",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,s=e.content;return r.a.createElement(Y.Tooltip,{title:n&&n.trim()||W.a.translate(s)},r.a.createElement(\"span\",{className:\"tooltip \"+t},a))}}]),t}(r.a.Component),Ha=function(){return r.a.createElement(Za,{className:\"error appended\",content:\"explorer.proposals.authority_depth_warning\"},\"/!\\\\\")},Ya=function(){return r.a.createElement(Za,{className:\"error appended\",content:\"explorer.proposals.children_authority_depth_warning\"},\"/!\\\\\")},Xa=function(){return r.a.createElement(Za,{className:\"warning\",content:\"explorer.proposals.pending_approval\"},r.a.createElement(C.a,{content:\"explorer.proposals.pending\"}))},$a=function(){return r.a.createElement(Za,{className:\"warning\",content:\"explorer.proposals.pending_review\"},r.a.createElement(C.a,{content:\"explorer.proposals.review\"}))},en=function(e){var t=e.reason;return r.a.createElement(Za,{className:\"error\",dataTip:t,content:\"explorer.proposals.no_reason_available_switch_node\"},r.a.createElement(C.a,{content:\"explorer.proposals.failed\"}))},tn=function(e){var t=e.onToggle,a=e.expanded;return r.a.createElement(\"a\",{className:\"expand-button\",onClick:t},\"[\",a?\"-\":\"+\",\"]\")},an=function(e){return e.approved?r.a.createElement(M.a,{name:\"checkmark-circle\",size:\"1x\",className:\"success\",title:\"icons.checkmark_circle.operation_succeed\"}):r.a.createElement(M.a,{name:\"cross-circle\",size:\"1x\",className:\"error\",title:\"icons.cross_circle.operation_failed\"})},nn=function(e){var t=e.available,a=e.permission,n=e.weight,s=e.level;return r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{colSpan:\"2\"},r.a.createElement(an,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*s),\"...\"),r.a.createElement(\"td\",null,n)))},rn=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some((function(a){return e(t,a,n+1)}))},sn=function(e,t,a){return e.accounts.reduce((function(e,n){return e+(on(n,t,a)?n.weight:0)}),0)+e.keys.reduce((function(e,t){return e+(t.isAvailable(a)?t.weight:0)}),0)},on=function(e,t,a){return e.isNested()||e.isMultiSig()?sn(e,t,a)>=e.threshold:e.isAvailable(t)},ln=function(e,t,a){return e&&e.threshold>10?L.a.get_percentage(e.getStatus(t,a),e.threshold)+\" / 100%\":e.getStatus(t,a)+\" / \"+e.threshold},cn=function(e,t){return t&&t>10?L.a.get_percentage(e,t):e},un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function dn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function mn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function hn(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fn=function(e){function t(e){dn(this,t);var a=mn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return hn(t,e),pn(t,[{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,s=e.permission,o=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=on(s,a,n),d=s.isNested(),m=s.isMultiSig(),h=cn(s.weight,o)||1,f=ln(s,a,n),g=i>=l,b=d||m?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{colSpan:\"2\"},r.a.createElement(an,{approved:p}),r.a.createElement(ce.a,{subpage:\"permissions\",account:t.get(\"id\")})),r.a.createElement(\"td\",null,u?r.a.createElement(\"span\",{className:p?\"success-text\":\"\"},h):h&&(h&&2===h.length?\"  \":\"\")+h+\" \",r.a.createElement(tn,{onToggle:this.handleExpandToggle,expanded:u}),u&&r.a.createElement(\"span\",{className:\"appended\"},\"(\",f,\")\"),g?r.a.createElement(Ha,null):rn(l,s,i)&&!u&&r.a.createElement(Ya,null))):r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{colSpan:\"2\"},r.a.createElement(an,{approved:p}),r.a.createElement(ce.a,{subpage:\"permissions\",account:t.get(\"id\")})),r.a.createElement(\"td\",null,!d&&h?(h&&2===h.length?\"  \":\"\")+h+\" \":null)),_=[];return(d||m)&&u&&(s.accounts.forEach((function(e){_.push(r.a.createElement(gn,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:s.threshold,level:i+1,maxAuthorityDepth:l}))})),s.keys.length&&s.keys.forEach((function(e){return _.push(r.a.createElement(nn,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:cn(e.weight,o)}))}))),_.length>0?r.a.createElement(\"tbody\",null,c||b,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",{colSpan:\"3\",className:\"heading-perm\"},r.a.createElement(\"div\",{className:c?\"\":\"table-container\"},r.a.createElement(\"table\",null,_)),u&&0===i&&r.a.createElement(\"div\",{className:\"spacer\"})))):r.a.createElement(\"tbody\",null,b)}}]),t}(r.a.Component);fn.propTypes={account:c.a.ChainAccount.isRequired,accounts:c.a.ChainAccountsList,level:E.a.number.isRequired},fn.defaultProps={level:0};var gn=Object(u.a)(fn),bn=function(e){function t(e){dn(this,t);var a=mn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return hn(t,e),pn(t,[{key:\"componentWillMount\",value:function(){this._updateState(),V.ChainStore.subscribe(this._updateState)}},{key:\"componentWillUnmount\",value:function(){V.ChainStore.unsubscribe(this._updateState)}},{key:\"_updateState\",value:function(){var e=Ga.listToIDs(this.props.required),t=Ga.listToIDs(this.props.available);this.setState({requiredPermissions:Ga.unnest(e,this.props.type),required:e,available:t})}},{key:\"render\",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,s=t.availableKeys,o=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=t.failReason,u=this.state,p=u.requiredPermissions,d=(u.required,u.available),m=u.expanded;d=Object(Ja.a)(d),s=s.toJS(),a&&(d.push(a),s.push(a)),n&&(-1!==d.indexOf(n)&&d.splice(d.indexOf(n),1),-1!==s.indexOf(n)&&s.splice(s.indexOf(n),1));var h=p.reduce((function(e,t){return e+(on(t,d,s)?1:0)}),0),f=p.length,g=h===f,b=g&&!i&&!l,_=g&&i,v=o.get(\"parameters\").get(\"max_authority_depth\"),y=1===p.length,E=y?p[0]:null,w=!y&&h+\" / \"+f,k=p.map((function(t){return r.a.createElement(gn,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:d,availableKeys:s,expanded:e.props.expanded||y,level:0,maxAuthorityDepth:v,hideRoot:y})}));return r.a.createElement(\"div\",{className:\"nested-approval-state\"},r.a.createElement(\"div\",{className:\"root-status\"},b?r.a.createElement(en,{reason:c}):_?r.a.createElement($a,null):r.a.createElement(Xa,null),\" \",E?E.threshold>1&&ln(E,d,s):r.a.createElement(\"span\",null,\"(\",w,\")\"),(!E||E.isMultiSig()||E.isNested())&&r.a.createElement(tn,{onToggle:this.handleExpandToggle,expanded:m}),!m&&p.some((function(e){return rn(v,e,0)}))&&r.a.createElement(Ya,null)),m&&r.a.createElement(\"table\",null,k))}}]),t}(r.a.Component);bn.propTypes={required:c.a.ChainAccountsList,available:c.a.ChainAccountsList},bn.defaultProps={type:\"active\",added:null,removed:null},bn=Object(u.a)(bn);var _n=function(e){function t(){return dn(this,t),mn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hn(t,e),pn(t,[{key:\"render\",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get(\"available_\"+a+\"_approvals\"),s=t.get(\"available_key_approvals\"),o=t.get(\"required_\"+a+\"_approvals\"),i=t.get(\"fail_reason\")||\" \";return r.a.createElement(bn,un({},this.props,{required:o,available:n,availableKeys:s,reviewPeriodTime:t.get(\"review_period_time\"),failReason:i}))}}]),t}(r.a.Component);_n.propTypes={proposal:c.a.ChainObject.isRequired,type:E.a.string.isRequired,globalObject:c.a.ChainObject.isRequired},_n.defaultProps={type:\"active\",added:null,globalObject:\"2.0.0\"};var vn=Object(u.a)(_n),yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},En=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},wn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function kn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Cn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function On(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sn=function(e,t,a){var n=[];e.forEach((function(e){n=n.concat(e.getMissingSigs(t))}));var r=[];return e.forEach((function(e){r=r.concat(e.getMissingKeys(a))})),[n,r]},An=function(e){function t(e){kn(this,t);var a=Cn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return On(t,e),wn(t,[{key:\"onActiveAccount\",value:function(e,t,a,n){var r={};t[n]?(r.key=n,r[a]=null):n?(r[a]=e[n],r.key=null):(r[a]=null,r.key=null),this.setState(r)}},{key:\"_onProposalAction\",value:function(e){var t=this,a=e.toJS(),n=this.state,r=n.active,s=(n.key,n.owner,n.payee||r);if(\"delete\"===this.props.action){var o=Jt.a.new_transaction();o.add_type_operation(\"proposal_delete\",{fee_paying_account:s||this.props.account.get(\"id\"),proposal:a.id,using_owner_authority:!1}),$e.a.process_transaction(o,null,!0)}else{var i={fee_paying_account:s,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]},l=\"approve\"===this.props.action,c=[];[\"active\",\"owner\",\"key\"].forEach((function(e){var n=t.state[e];if(n){var r=-1!==a[\"available_\"+e+\"_approvals\"].indexOf(n);(l&&!r||!l&&r)&&(\"approve\"===t.props.action?(i[e+\"_approvals_to_add\"]=[n],\"key\"===e&&c.push(n)):\"reject\"===t.props.action&&(i[e+\"_approvals_to_remove\"]=[n],\"key\"===e&&c.push(n)))}}));var u=Jt.a.new_transaction();u.add_type_operation(\"proposal_update\",i),$e.a.process_transaction(u,null,!0,c)}this.props.hideModal()}},{key:\"onChangePayee\",value:function(e){var t=V.ChainStore.getAccount(e);t&&this.setState({payee:t.get(\"id\")})}},{key:\"onCancel\",value:function(){this.props.hideModal()}},{key:\"render\",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],s={},i=\"approve\"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach((function(e){(i?e&&!t.get(\"available_\"+a+\"_approvals\").includes(e.get(\"id\")):e&&t.get(\"available_\"+a+\"_approvals\").includes(e.get(\"id\")))&&(s[e.get(\"name\")]=e.get(\"id\"),n.push(e.get(\"name\")))}));var l=[],c={};this.props.keys.length&&this.props.keys.forEach((function(e){var a=o.a.isMyKey(e),n=t.get(\"available_key_approvals\").includes(e);(a&&i&&!n||a&&!i&&n)&&(c[e]=!0,l.push(e))}));var u=o.a.getMyAccounts(),p=[r.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this._onProposalAction.bind(this,t)},W.a.translate(\"proposal.\"+this.props.action)),r.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onCancel.bind(this)},W.a.translate(\"account.perm.cancel\"))];return r.a.createElement(Y.Modal,{visible:this.props.visible,title:W.a.translate(\"modal.proposals.actions.\"+this.props.action),footer:p,onCancel:this.props.hideModal},r.a.createElement(\"div\",{className:\"grid-block vertical\"},r.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},r.a.createElement(\"div\",{className:\"grid-container\"},r.a.createElement(\"div\",{className:\"content-block\",style:{paddingRight:\"20%\"}},r.a.createElement(vn,{expanded:!0,proposal:t.get(\"id\"),type:a,added:i?this.state.key?this.state.key:this.state[a]||null:null,removed:i?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),r.a.createElement(\"div\",{className:\"content-block full-width-content\"},r.a.createElement(\"div\",{className:\"full-width-content form-group\"},r.a.createElement(C.a,{content:\"modal.proposals.pay_with\",component:\"label\"}),r.a.createElement(za.a,{account_names:u,onChange:this.onChangePayee.bind(this),selected:1===u.length?u:null})),\"delete\"!==this.props.action&&(n.length||l.length)?r.a.createElement(\"div\",{className:\"full-width-content form-group\"},r.a.createElement(C.a,{content:\"modal.proposals.approval_\"+(i?\"add\":\"remove\"),component:\"label\"}),r.a.createElement(za.a,{account_names:n.concat(l),onChange:this.onActiveAccount.bind(this,s,c,a)})):null,null)))))}}]),t}(r.a.Component);An.propTypes={accounts:c.a.ChainAccountsList},An=Object(u.a)(An);var xn=function(e){function t(){kn(this,t);var e=Cn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return On(t,e),wn(t,[{key:\"componentWillMount\",value:function(){this._updateState(),V.ChainStore.subscribe(this._updateState)}},{key:\"componentWillUnmount\",value:function(){V.ChainStore.unsubscribe(this._updateState)}},{key:\"_updateState\",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get(\"required_active_approvals\").size?\"active\":\"owner\"),n=Ga.listToIDs(t.get(\"required_\"+a+\"_approvals\")),r=Ga.listToIDs(t.get(\"available_\"+a+\"_approvals\")),s=Ga.listToIDs(t.get(\"available_key_approvals\"));this.setState({requiredPermissions:Ga.unnest(n,a),available:r,availableKeys:s,type:a})}},{key:\"render\",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,s=t.availableKeys,o=t.type,i=Sn(a,n,s),l=En(i,2),c=l[0],u=l[1];return r.a.createElement(An,yn({},this.props,{type:o,accounts:\"approve\"===e?c:n,keys:\"approve\"===e?u:s}))}}]),t}(r.a.Component);xn.propTypes={account:c.a.ChainAccount.isRequired,proposal:c.a.ChainObject.isRequired},xn=Object(u.a)(xn);var jn=function(e){function t(){return kn(this,t),Cn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return On(t,e),wn(t,[{key:\"render\",value:function(){return this.props.account&&this.props.proposal&&this.props.action?r.a.createElement(xn,this.props):null}}]),t}(r.a.Component),Pn=a(614),Nn=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},In=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Mn=V.ChainTypes.operations,Tn=Object.keys(Mn),Bn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.closeJSONModal=function(){e.setState({visibleId:\"\"})},e.state={isModalVisible:!1,modal:{action:null,proposalId:null,accountId:null},visibleId:\"\"},e._proposals=[],e._loading=!1,e.forceUpdate=e.forceUpdate.bind(e),e._isScam=e._isScam.bind(e),e._isUnknown=e._isUnknown.bind(e),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),In(t,[{key:\"componentDidMount\",value:function(){V.ChainStore.subscribe(this.forceUpdate)}},{key:\"_setProposals\",value:function(){this._loading=!0;var e=this.props.account;if(e.get(\"proposals\").size){var t=[];e.get(\"proposals\").forEach((function(a){var n=V.ChainStore.getObject(a);if(n){var r=n.get(\"proposed_transaction\").get(\"operations\");t.push({operations:r,account:e,proposal:n})}})),(t=t.sort((function(e,t){return L.a.sortID(e.proposal.get(\"id\"),t.proposal.get(\"id\"),!0)}))).forEach((function(e){var t=e.proposal.get(\"required_active_approvals\").size?\"active\":\"owner\",a=Ga.listToIDs(e.proposal.get(\"required_\"+t+\"_approvals\"));e.requiredPermissions=Ga.unnest(a,t)})),this._proposals=t,this._loading=!1}}},{key:\"componentWillUnmount\",value:function(){V.ChainStore.unsubscribe(this.forceUpdate)}},{key:\"showModal\",value:function(e){var t=e.action,a=e.proposalId,n=e.accountId;this.setState({isModalVisible:!0,modal:{action:t,proposalId:a,accountId:n}})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1,modal:{action:null,proposalId:null,accountId:null}})}},{key:\"_onApproveModal\",value:function(e,t,a){this.showModal({action:a,proposalId:e,accountId:t})}},{key:\"_canReject\",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:\"_isScam\",value:function(e){var t=this,a=!1,n=[];e.operations.forEach((function(e){6==e.get(0)?(n.push(e.getIn([1,\"active\",\"account_auths\",0,0])),n.push(e.getIn([1,\"owner\",\"account_auths\",0,0]))):n.push(e.getIn([1,\"to\"]))}));var r=e.proposal.get(\"proposer\");return n.push(r),n.forEach((function(e){d.a.isKnownScammer(e)&&(a=!0),t.props.account.get(\"blacklisted_accounts\").some((function(t){return t===e}))&&(a=!0)})),a}},{key:\"_isUnknown\",value:function(e){var t=this,a=!0,n=[];e.operations.forEach((function(e){6==e.get(0)?(n.push(e.getIn([1,\"active\",\"account_auths\",0,0])),n.push(e.getIn([1,\"owner\",\"account_auths\",0,0]))):n.push(e.getIn([1,\"to\"]))}));var r=e.proposal.get(\"proposer\");return n.push(r),n.forEach((function(e){t.props.account.get(\"whitelisted_accounts\").some((function(t){return t===e}))&&(a=!1),o.a.getState().starredAccounts.some((function(t){var a=V.ChainStore.getAccount(t,!1);return!!a&&a.get(\"id\")==e}))&&(a=!1),o.a.getState().accountContacts.some((function(t){var a=V.ChainStore.getAccount(t,!1);return!!a&&a.get(\"id\")==e}))&&(a=!1)})),a}},{key:\"openJSONModal\",value:function(e){this.setState({visibleId:e})}},{key:\"render\",value:function(){var e=this,t=this.props.account;if(!t)return null;(t.get(\"proposals\").size>0&&0==this._proposals.length||this._proposals.length>0&&t!==this._proposals[0].account&&!this._loading)&&this._setProposals();var a=this._proposals.reduce((function(t,a,n){var s=a.proposal.get(\"id\"),i=a.proposal.get(\"proposer\"),l=a.proposal.get(\"expiration_time\"),c=W.a.translate(\"transaction.trxTypes\"),u=a.operations&&a.operations.toJS(),p=u.length>1?W.a.translate(\"transaction.operations\"):c[Tn[u[0]&&u[0][0]]],d=a.operations.map((function(e,t){return r.a.createElement(Wa.b,{key:a.proposal.get(\"id\")+\"_operation_\"+t,expiration:l,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:s,proposer:i,collapsed:!1})})).toArray(),m=e._canReject(a.proposal.toJS()),h=a.proposal.get(\"id\"),f=a.proposal.get(\"required_active_approvals\").size?\"active\":\"owner\";t.push(r.a.createElement(\"tr\",{key:h+\"_id\"},r.a.createElement(\"td\",{colSpan:\"4\",className:\"proposal\"+(0===n?\" first\":\"\")},r.a.createElement(Wa.a,{id:s,expiration:l,openJSONModal:function(){return e.openJSONModal(s)}}),r.a.createElement(Pn.a,{visible:e.state.visibleId===s,operation:u.length>1?u:u[0]&&u[0][1],title:p||\"\",hideModal:e.closeJSONModal}))));var g=Ga.listToIDs(a.proposal.get(\"available_\"+f+\"_approvals\")),b=Ga.listToIDs(a.proposal.get(\"available_key_approvals\")),_=a.requiredPermissions,v=Sn(_,g,b),y=Nn(v,2),E=y[0],w=y[1],k=[];E.length&&E.forEach((function(e){e&&!a.proposal.get(\"available_\"+f+\"_approvals\").includes(e)&&k.push(e)}));var O=[];w.length&&w.forEach((function(e){o.a.isMyKey(e)&&!a.proposal.get(\"available_key_approvals\").includes(e)&&O.push(e)}));var S=k.length+O.length>0,A=e._isScam(a),x=e._isUnknown(a);return t.push(r.a.createElement(\"tr\",{className:\"top-left-align\",key:h+\"_content\"},r.a.createElement(\"td\",null,d),r.a.createElement(\"td\",null,_.map((function(e,t){return r.a.createElement(\"div\",{className:\"list-item\",key:h+\"_approver_\"+t},r.a.createElement(ce.a,{subpage:\"permissions\",account:e.id}))}))),r.a.createElement(\"td\",null,r.a.createElement(vn,{proposal:a.proposal.get(\"id\"),type:f})),r.a.createElement(\"td\",{className:\"approval-buttons\"},A&&r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.propose_scam\")},r.a.createElement(\"div\",{className:\"tooltip has-error scam-error\"},\"SCAM ATTEMPT\")),e.props.hideFishingProposals&&!A&&x&&r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.propose_unknown\")},r.a.createElement(\"div\",{className:\"tooltip has-error scam-error\"},\"UNKNOWN SOURCE\")),!A&&(!x||!e.props.hideFishingProposals)&&r.a.createElement(\"button\",{onClick:S?e._onApproveModal.bind(e,h,a.account.get(\"id\"),\"approve\"):function(){},className:\"button primary hollow\"+(S?\"\":\" hidden\")},r.a.createElement(\"span\",null,r.a.createElement(C.a,{content:\"proposal.approve\"}))),m?r.a.createElement(\"button\",{onClick:e._onApproveModal.bind(e,h,a.account.get(\"id\"),\"reject\"),className:\"button primary hollow\"},r.a.createElement(C.a,{content:\"proposal.reject\"})):null,r.a.createElement(\"button\",{onClick:e._onApproveModal.bind(e,h,a.account.get(\"id\"),\"delete\"),className:\"button primary hollow\"},r.a.createElement(C.a,{content:\"proposal.delete\"}))))),t.push(r.a.createElement(\"tr\",{key:h+\"_separator\"},r.a.createElement(\"td\",{colSpan:\"4\"},r.a.createElement(\"hr\",null)))),t}),[]);return r.a.createElement(\"div\",null,r.a.createElement(\"table\",{className:\"table proposals compact \"+this.props.className},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"proposal.proposals\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"proposal.approvers\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"proposal.status\"})),r.a.createElement(\"th\",null,r.a.createElement(C.a,{content:\"proposal.action\"})))),r.a.createElement(\"tbody\",null,a)),r.a.createElement(jn,{ref:\"modal\",visible:this.state.isModalVisible,hideModal:this.hideModal,showModal:this.showModal,account:this.state&&this.state.modal.accountId,proposal:this.state&&this.state.modal.proposalId,action:this.state&&this.state.modal.action}))}}]),t}(n.Component);Bn.propTypes={account:c.a.ChainAccount.isRequired};var Rn=Object(u.a)(Bn),Dn=a(2321),Fn=a(2197),qn=a(2319),Ln=a(82),Vn=a(40),Un=a(65),Wn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Wn(t,[{key:\"render\",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,s=n.isBid(),o=s?\"value positive\":\"value negative\",i=s?\"value negative\":\"value positive\";return r.a.createElement(C.a,{content:s?\"exchange.buy_description\":\"exchange.sell_description\",baseAsset:L.a.format_number(n[s?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),t.get(\"precision\"),!1),quoteAsset:L.a.format_number(n[s?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),a.get(\"precision\"),!1),baseName:r.a.createElement(ma.a,{noTip:!0,customClass:o,name:a.get(\"symbol\")}),quoteName:r.a.createElement(ma.a,{noTip:!0,customClass:i,name:t.get(\"symbol\")})})}}]),t}(r.a.Component),Jn=a(11),Kn=a.n(Jn),Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Qn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Zn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isCollapsed:e.isCollapsed||!1,isCollapseAnimationCompleted:e.isCollapsed||!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Qn(t,[{key:\"componentDidMount\",value:function(){var e=this,t=Kn.a.findDOMNode(this).querySelector(\".ant-table-tbody\"),a=function(){e.setState({isCollapseAnimationCompleted:e.state.isCollapsed})};t.addEventListener(\"animationend\",a),t.addEventListener(\"webkitAnimationEnd\",a),t.addEventListener(\"oAnimationEnd\",a),t.addEventListener(\"MSAnimationEnd\",a)}},{key:\"render\",value:function(){var e=this;return r.a.createElement(Y.Table,Gn({},this.props,{onHeaderRow:function(t,a){var n={},r=e.props.onHeaderRow;r&&(n=r(t,a));return n.onClick=function(n){var s=n.target.getAttribute(\"class\");if((!s||!s.includes(\"ant-checkbox-input\"))&&(e.setState({isCollapsed:!e.state.isCollapsed}),e.setState({isCollapseAnimationCompleted:!1}),r)){var o=r(t,a);o.onClick&&o.onClick(n)}},n},className:\"collapsible-table \"+(this.state.isCollapsed?\"collapsible-table-collapsed\":\"collapsible-table-uncollapsed\")+\"\\n                \"+(this.state.isCollapseAnimationCompleted?\"collapsible-table-collapsed-animation-completed\":null)}))}}]),t}(r.a.Component),Hn=a(113),Yn=a(197),Xn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function $n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function er(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function tr(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ar=function(e){function t(e){$n(this,t);var a=er(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var n=Un.a.getMarketName(e.base,e.quote).marketName;return a.state={marketName:n},a}return tr(t,e),Xn(t,[{key:\"_checkStats\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!L.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!L.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:\"shouldComponentUpdate\",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketName),this.props.allMarketStats.get(this.state.marketName))||e.base.get(\"id\")!==this.props.base.get(\"id\")||e.quote.get(\"id\")!==this.props.quote.get(\"id\")}},{key:\"componentWillUnmount\",value:function(){this.statsInterval&&this.statsInterval()}}]),t}(r.a.Component),nr=function(e){function t(e){return $n(this,t),er(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return tr(t,e),Xn(t,[{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if(\"value\"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)}},{key:\"render\",value:function(){var e=this.props.allMarketStats,t=this.state.marketName,a=e.get(t),n=a&&a.price?a.price:null;return r.a.createElement(\"span\",{className:F()(\"\",this.props.className)},n?r.a.createElement(le.a,{base_amount:n.base.amount,base_asset:n.base.asset_id,quote_amount:n.quote.amount,quote_asset:n.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):\"n/a\")}}]),t}(ar);nr=Object(N.a)(nr,{propNames:[\"quote\",\"base\"]});var rr=function(e){function t(){return $n(this,t),er(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return tr(t,e),Xn(t,[{key:\"render\",value:function(){return r.a.createElement(nr,this.props)}}]),t}(r.a.Component);rr=Object(p.a)(rr,{listenTo:function(){return[Yn.a]},getProps:function(){return{allMarketStats:Yn.a.getState().allMarketStats}}});var sr=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ir=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function lr(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function cr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ur=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:\"\",areAssetsGrouped:e.viewSettings.get(\"accountOrdersGrouppedByAsset\")},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ir(t,[{key:\"_getFilteredOrders\",value:function(e){var t=this.state.filterValue;return((\"settle\"!==e?this.props.account.get(\"orders\"):this.props.settleOrders)||[]).filter((function(e){var a=V.ChainStore.getObject(e).toJS(),n=V.ChainStore.getAsset(a.sell_price.base.asset_id),r=V.ChainStore.getAsset(a.sell_price.quote.asset_id),s=n.get(\"symbol\").toLowerCase(),o=r.get(\"symbol\").toLowerCase();return s.indexOf(t)>-1||o.indexOf(t)>-1}))}},{key:\"_getDataSource\",value:function(e,t){var a=this,n=[],r=\"settle\"===t;return e.forEach((function(e){var t=null,s=null,o=null,i=null,l=null,c=null;if(r?(t=V.ChainStore.getObject(e).toJS(),s=V.ChainStore.getAsset(t.balance.asset_id),o=V.ChainStore.getAsset(s.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]))):(t=V.ChainStore.getObject(e).toJS(),s=V.ChainStore.getAsset(t.sell_price.base.asset_id),o=V.ChainStore.getAsset(t.sell_price.quote.asset_id)),s&&o){var u,p=(cr(u={},s.get(\"id\"),{precision:s.get(\"precision\")}),cr(u,o.get(\"id\"),{precision:o.get(\"precision\")}),u),d=Un.a.getMarketName(s,o).marketName,m=a.props.marketDirections.get(d),h=m?o.get(\"id\"):s.get(\"id\"),f=m?s.get(\"id\"):o.get(\"id\");if(r){var g=P.a.extractRawFeedPrice(s);i=s.getIn([\"bitasset\",\"current_feed\",\"maximum_short_squeeze_ratio\"]),l=new Vn.d({priceObject:g,market_base:f,sqr:i,assets:p}),c=s.getIn([\"bitasset\",\"options\"])}var b=r?new Vn.j(t,p,f,l,c):new Vn.g(t,p,h),_=V.ChainStore.getAsset(f),v=V.ChainStore.getAsset(h),y=b.isBid(),E={key:t.id,order:b,isBid:y,quote:v,base:_,marketName:d,marketDirection:m,preferredUnit:a.props.settings?a.props.settings.get(\"unit\"):\"1.3.0\",quoteColor:y?\"value positive\":\"value negative\",baseColor:y?\"value negative\":\"value positive\"};r&&(E=or({},E,{settlement_date:t.settlement_date,feed_price:l})),n.push(E)}})),n.sort((function(e,t){return e.order.getPrice()-t.order.getPrice()})),n.sort((function(e,t){return e.marketName>t.marketName?1:e.marketName<t.marketName?-1:e.marketDirection?1:-1})),n}},{key:\"_getColumns\",value:function(e,t,a){var n=this,s=function(e,t){return{onClick:n.onFlip.bind(n,e.marketName)}},o=void 0,i=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,m=void 0,h=void 0,f=void 0,g=\"settle\"===a,b=function(e){return e.order[e.isBid?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0})},_=function(e){return L.a.format_number(e,o.base.get(\"precision\"),!1)},v=function(e){return e.order[e.isBid?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0})},y=function(e){return L.a.format_number(e,o.quote.get(\"precision\"),!1)},E=function(e){return r.a.createElement(rr,{base:e.base.get(\"id\"),quote:e.quote.get(\"id\"),force_direction:e.base.get(\"symbol\"),hide_symbols:!0,hide_asset:!0})};if(e){o=t[0],i=W.a.translate(\"exchange.\"+(g?\"settlement_of\":o.isBid?\"buy\":\"sell\")),l=W.a.translate(\"transaction.for\"),c=_(Object(Fn.a)(t,b)),u=y(Object(Fn.a)(t,v));var k=o.isBid?\"value positive\":\"value negative\",O=o.isBid?\"value negative\":\"value positive\";p=r.a.createElement(ma.a,{noTip:!0,customClass:k,name:o.quote.get(\"symbol\")}),d=r.a.createElement(ma.a,{noTip:!0,customClass:O,name:o.base.get(\"symbol\")}),m=Object(Dn.a)(t,(function(e){var t=e.order.sellPrice().toReal(!0);return e.marketDirection?1/t:t}));var S=Math.min(8,o.order.sellPrice()[o.isBid?\"base\":\"quote\"].precision);m=r.a.createElement(Hn.b,{value:m,minimumFractionDigits:Math.max(2,S),maximumFractionDigits:Math.max(2,S)}),h=E(o);var A=Object(Fn.a)(t,(function(e){return e.order.amountForSale().getAmount()}));f=r.a.createElement(\"div\",null,r.a.createElement(da.b,{hide_asset:!0,amount:A,fromAsset:o.order.amountForSale().asset_id,noDecimals:!0,toAsset:o.preferredUnit}),\" \",r.a.createElement(ma.a,{name:o.preferredUnit}))}return[{key:\"trade\",title:W.a.translate(\"account.trade\"),align:\"center\",render:function(e){return r.a.createElement(w.a,{to:\"/market/\"+e.quote.get(\"symbol\")+\"_\"+e.base.get(\"symbol\"),onClick:function(){return Ln.a.switchMarket()}},r.a.createElement(Y.Icon,{type:\"bar-chart\"}))}},{key:\"orderID\",title:W.a.translate(\"transaction.order_id\"),render:function(e){return\"#\"+e.order.id.substring(4)}}].concat(lr(e?[{key:\"operation\",title:i,render:function(e){return i},onCell:s,className:\"clickable groupColumn\"}].concat(lr(g?[{key:\"quoteAsset\",title:u,render:function(e){return y(v(e))},className:\"clickable groupColumn\"},{key:\"baseName\",title:p,render:function(e){return p},className:\"clickable groupColumn\"}]:[{key:\"baseAsset\",title:c,render:function(e){return _(b(e))},onCell:s,className:\"clickable groupColumn\"},{key:\"baseName\",title:p,render:function(e){return p},onCell:s,className:\"clickable groupColumn\"},{key:\"for\",title:l,render:function(e){return l},onCell:s,className:\"clickable groupColumn\"},{key:\"quoteAsset\",title:u,render:function(e){return y(v(e))},onCell:s,className:\"clickable groupColumn\"},{key:\"quoteName\",title:d,render:function(e){return d},onCell:s,className:\"clickable groupColumn\"}])):[{key:\"description\",title:W.a.translate(\"exchange.description\"),render:function(e){return g?r.a.createElement(C.a,{content:\"exchange.settlement_description\",quoteAsset:L.a.format_number(e.order.for_sale.getAmount({real:!0}),e.quote.get(\"precision\"),!1),quoteName:r.a.createElement(ma.a,{noTip:!0,customClass:e.quoteColor,name:e.quote.get(\"symbol\")})}):r.a.createElement(zn,e)},onCell:s,className:\"clickable\"}]),[{key:\"price\",title:e?r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.average_price\"}),r.a.createElement(\"br\",null),m):W.a.translate(\"exchange.price\"),align:e?\"right\":\"left\",render:function(e){return r.a.createElement(le.a,{base_amount:e.order.sellPrice().base.amount,base_asset:e.order.sellPrice().base.asset_id,quote_amount:e.order.sellPrice().quote.amount,quote_asset:e.order.sellPrice().quote.asset_id,force_direction:e.base.get(\"symbol\"),hide_symbols:!0})},onCell:s,className:\"clickable\"},{key:\"marketPrice\",title:e?r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"exchange.price_market\"}),r.a.createElement(\"br\",null),h):W.a.translate(\"exchange.price_market\"),align:e?\"right\":\"left\",render:E,onCell:s,className:\"clickable\"},g&&!e?{key:\"settlement_date\",title:e?r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"exchange.settlement_date\"}),r.a.createElement(\"br\",null),h):W.a.translate(\"exchange.settlement_date\"),align:e?\"right\":\"left\",render:function(e){return r.a.createElement(\"span\",null,e.settlement_date)},onCell:s,className:\"clickable\"}:{},{key:\"value\",title:e?r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"exchange.value\"}),r.a.createElement(\"br\",null),f):W.a.translate(\"exchange.value\"),align:\"right\",render:function(e){return r.a.createElement(\"div\",null,r.a.createElement(da.b,{hide_asset:!0,amount:e.order.amountForSale().getAmount(),fromAsset:e.order.amountForSale().asset_id,noDecimals:!0,toAsset:e.preferredUnit}),\" \",r.a.createElement(ma.a,{name:e.preferredUnit}))},onCell:s,className:\"clickable\"}])}},{key:\"_renderSettleOrdersTable\",value:function(){var e=this.props.account,t=this.state.filterValue,a=e.get(\"settle_orders\");t&&(a=this._getFilteredOrders.call(this,\"settle\"));var n=this._getDataSource(a,\"settle\"),s={hideOnSinglePage:!0,pageSize:20,showTotal:function(e,t){return W.a.translate(\"utility.total_x_items\",{count:e})}},o=this._getColumns(!1,n,\"settle\");return r.a.createElement(Y.Table,{columns:o,dataSource:n,pagination:s,footer:function(){return r.a.createElement(\"span\",null,\" \")}})}},{key:\"_renderOrdersTable\",value:function(){var e=this,t=this.props.account,a=this.state,n=a.filterValue,s=a.areAssetsGrouped,o=t.get(\"orders\");n&&(o=this._getFilteredOrders.call(this));var i=this._getDataSource(o),l={hideOnSinglePage:!0,pageSize:20,showTotal:function(e,t){return W.a.translate(\"utility.total_x_items\",{count:e})}},c=this.props.isMyAccount?{onChange:function(t,a){e.setState({selectedOrders:t})},selectedRowKeys:this.state.selectedOrders}:null,u=[];if(s){var p=Object(qn.a)(i,(function(e){return e.marketName+\"_\"+(e.marketDirection?e.base.get(\"id\"):e.quote.get(\"id\"))})),d=!0,m=!1,h=void 0;try{for(var f,g=Object.entries(p)[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var b=f.value,_=sr(b,2),v=_[0],y=_[1],E=void 0;y[0].settlement_date&&(E=\"settle\");var w=this._getColumns(s,y,E);u.push(r.a.createElement(\"div\",{className:\"grid-wrapper\",key:v},r.a.createElement(Zn,{columns:w,dataSource:y,rowSelection:c,pagination:l,isCollapsed:!0})))}}catch(e){m=!0,h=e}finally{try{!d&&g.return&&g.return()}finally{if(m)throw h}}}else{var k=this._getColumns(s,i);u.push(r.a.createElement(\"div\",{className:\"grid-wrapper\",key:\"ungroupedTable\"},r.a.createElement(Y.Table,{columns:k,dataSource:i,rowSelection:c,pagination:l,footer:function(){return e.props.children}})))}return u}},{key:\"_cancelLimitOrders\",value:function(e){var t=this;Ln.a.cancelLimitOrders(this.props.account.get(\"id\"),this.state.selectedOrders).then((function(){t.resetSelected()})).catch((function(e){console.log(\"cancel orders error:\",e)}))}},{key:\"onFlip\",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),de.a.changeMarketDirection(t)}},{key:\"setFilterValue\",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:\"resetSelected\",value:function(){this.setState({selectedOrders:[]})}},{key:\"cancelSelected\",value:function(){this._cancelLimitOrders.call(this)}},{key:\"render\",value:function(){var e=this,t=this.props.account,a=this.state.selectedOrders,n=this._renderOrdersTable(),s=this._renderSettleOrdersTable(),o=[n],i=t.get(\"settle_orders\").size;return r.a.createElement(\"div\",{className:\"grid-content no-overflow no-padding\",style:{paddingBottom:15}},r.a.createElement(\"div\",{className:\"header-selector\",style:{display:\"inline-block\",width:\"100%\"}},r.a.createElement(\"div\",{className:\"filter-block\"},r.a.createElement(\"div\",{className:\"filter\"},r.a.createElement(Y.Input,{type:\"text\",placeholder:W.a.translate(\"account.filter_orders\"),onChange:this.setFilterValue.bind(this),addonAfter:r.a.createElement(Y.Icon,{type:\"search\"})})),r.a.createElement(\"div\",{className:\"group-by\"},r.a.createElement(Y.Switch,{onChange:function(t,a){de.a.changeViewSetting({accountOrdersGrouppedByAsset:t}),e.setState({areAssetsGrouped:t})},checked:this.state.areAssetsGrouped}),\"  \",r.a.createElement(C.a,{content:\"account.group_by_asset\"}))),a.length?r.a.createElement(\"span\",{className:\"action-buttons\"},r.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this.cancelSelected.bind(this)},r.a.createElement(C.a,{content:\"account.cancel_orders\"})),\" \",r.a.createElement(Y.Button,{key:\"cancel\",type:\"secondary\",onClick:this.resetSelected.bind(this)},r.a.createElement(C.a,{content:\"account.reset_orders\"}))):null),r.a.createElement(\"div\",null,i>0&&r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(C.a,{content:\"account.market_orders\"})),o),i>0&&r.a.createElement(\"div\",{className:\"grid-wrapper\",key:\"settleGroupedTable\"},r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(C.a,{content:\"account.settle_orders\"})),s))}}]),t}(r.a.Component),pr=ur=Object(p.a)(ur,{listenTo:function(){return[i.a]},getProps:function(){return{marketDirections:i.a.getState().marketDirections,viewSettings:i.a.getState().viewSettings}}}),dr={},mr=6e4;function hr(e){if(!e||e&&!e.get(\"call_orders\",[]).size)return Promise.resolve(null);var t=e.get(\"name\")+JSON.stringify(e.get(\"call_orders\"));return dr[t]?dr[t].result?Promise.resolve(dr[t].result):new Promise((function(e,a){dr[t].queue.push({res:e,rej:a})})):new Promise((function(a,n){dr[t]={queue:[{res:a,rej:n}],result:null},Object(V.FetchChain)(\"getObject\",e.get(\"call_orders\").toArray()).then((function(e){var a=[];e.forEach((function(e){var t=e.getIn([\"call_price\",\"base\",\"asset_id\"]),n=e.getIn([\"call_price\",\"quote\",\"asset_id\"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)})),Object(V.FetchChain)(\"getAsset\",a,6e3).then((function(a){var n={};a.forEach((function(e){n[e.get(\"id\")]=e.toJS()}));var r={};e.forEach((function(e){var t=n[e.getIn([\"call_price\",\"quote\",\"asset_id\"])],a=n[e.getIn([\"call_price\",\"base\",\"asset_id\"])],s=P.a.extractRawFeedPrice(t);if(s.base.asset_id===s.quote.asset_id)r[t.id]={ratio:null};else{var o=new Vn.a({amount:e.get(\"collateral\"),asset_id:a.id,precision:a.precision}),i=new Vn.a({amount:e.get(\"debt\"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new Vn.d({priceObject:P.a.extractRawFeedPrice(t),market_base:P.a.extractRawFeedPrice(t).quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:o.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass=\"danger\":u.ratio<l+.5?u.statusClass=\"warning\":u.statusClass=null,r[t.id]=u}})),dr[t].queue.forEach((function(e){e.res(r)})),dr[t]={result:r},setTimeout((function(){delete dr[t]}),mr)}))})).catch((function(){dr[t].queue.forEach((function(e){e.rej()}))}))}))}var fr=a(784),gr=a(2062),br=a.n(gr),_r=a(2198),vr=a.n(_r),yr=a(2199),Er=a.n(yr),wr=a(119),kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Cr=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Or(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Sr(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ar(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}vr()(br.a.Highcharts),Er()(br.a.Highcharts);var xr=function(e){function t(){return Or(this,t),Sr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ar(t,e),Cr(t,[{key:\"render\",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,s=e.preferredAsset,o=e.history,i=null;if(t&&t.length>0){var l=0;i=t.forEach((function(e){if(e){var t=\"string\"==typeof e?V.ChainStore.getObject(e):e,r=t.get(\"asset_type\"),o=V.ChainStore.getAsset(r);if(o&&s){var i=Number(t.get(\"balance\")),c=Un.a.convertValue(i,s,o,n,a);if(c){var u=L.a.get_asset_precision(s.get(\"precision\"));l+=c/u}}}})),i=t.map((function(e,t){if(!e)return null;var r=\"string\"==typeof e?V.ChainStore.getObject(e):e,o=r.get(\"asset_type\"),i=V.ChainStore.getAsset(o);if(!i)return null;var c=Number(r.get(\"balance\")),u=Un.a.convertValue(c,s,i,n,a);if(!u)return null;var p=u/L.a.get_asset_precision(s.get(\"precision\")),d=p/l*100;if(d<.5)return null;if(p<1)return null;var m=i.get(\"symbol\");return{symbol:m,name:m+\" (\"+(0===l?0:d.toFixed(2))+\"%)\",value:p,color:br.a.Highcharts.getOptions().colors[t]}})).filter((function(e){return!!e}))}i&&1===i.length&&0===i[0].value&&(i=null);var c={chart:{backgroundColor:\"rgba(255, 0, 0, 0)\",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return\"<b>\"+this.name+\"</b>: \"+br.a.Highcharts.numberFormat(this.value,0)+\" \"+s.get(\"symbol\")}}},series:{cursor:\"pointer\",point:{events:{click:function(){var e=\"/asset/\"+this.symbol;o.push(e)}}}}},series:[{type:\"treemap\",levels:[{level:1,layoutAlgorithm:\"sliceAndDice\",dataLabels:{enabled:!0,align:\"center\",verticalAlign:\"middle\"}}],data:i}],title:{text:null}};return r.a.createElement(jr,{accountBalances:i,config:c})}}]),t}(r.a.Component);function jr(e){var t=e.accountBalances,a=e.config;return r.a.createElement(\"div\",{className:\"account-treemap\"},r.a.createElement(\"div\",{className:\"account-treemap--legend\"},t&&t.map((function(e,t){var a=e.name,n=e.symbol,s=e.color;return r.a.createElement(w.a,{key:t,to:\"/asset/\"+n},r.a.createElement(\"div\",{className:\"legend-item\"},r.a.createElement(\"div\",{className:\"legend-square\",style:{backgroundColor:s}}),a))}))),r.a.createElement(br.a,{config:a}))}xr.propTypes={assets:c.a.ChainAssetsList,preferredAsset:c.a.ChainAsset.isRequired},xr.defaultProps={assets:[],preferredAsset:\"1.3.0\"},xr=Object(u.a)(xr);var Pr=function(e){function t(){return Or(this,t),Sr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ar(t,e),Cr(t,[{key:\"render\",value:function(){var e=this.props.balanceObjects.filter((function(e){return!!e})).map((function(e){return e.get(\"asset_type\")}));return r.a.createElement(xr,kr({preferredAsset:this.props.settings.get(\"unit\",\"1.3.0\"),assets:e},this.props))}}]),t}(r.a.Component);Pr.propTypes={balanceObjects:c.a.ChainObjectsList,core_asset:c.a.ChainAsset.isRequired},Pr.defaultProps={balanceObjects:[],core_asset:\"1.3.0\"},Pr=Object(u.a)(Pr);var Nr=function(e){function t(){return Or(this,t),Sr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ar(t,e),Cr(t,[{key:\"render\",value:function(){return r.a.createElement(wr.a,{stores:[i.a,Yn.a],inject:{marketStats:function(){return Yn.a.getState().allMarketStats},settings:function(){return i.a.getState().settings}}},r.a.createElement(Pr,kr({},this.props,{ref:this.props.refCallback})))}}]),t}(r.a.Component),Ir=Object(_e.a)(Nr),Mr=a(591),Tr=a.n(Mr),Br=a(371),Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Dr=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Fr(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function qr(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Lr(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Vr=function(e){function t(e){return Fr(this,t),qr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return Lr(t,e),Dr(t,[{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if(\"value\"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||e.base!==this.props.base}},{key:\"getValue\",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:\"render\",value:function(){var e=this.getValue(),t=0===parseFloat(e)?\"\":parseFloat(e)<0?\"change-down\":\"change-up\",a=r.a.createElement(Hn.b,{style:\"decimal\",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return isNaN(parseFloat(e))?r.a.createElement(\"span\",{className:\"value \"+t},\"-\"):r.a.createElement(\"span\",{className:\"value \"+t},a,\"%\")}}]),t}(ar);Vr.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},Vr=Object(N.a)(Vr,{propNames:[\"quote\",\"base\"],defaultProps:{quote:\"1.3.0\"}});var Ur=function(e){function t(){return Fr(this,t),qr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Lr(t,e),Dr(t,[{key:\"render\",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"refCallback\"]);return r.a.createElement(Vr,Rr({},a,{ref:t}))}}]),t}(r.a.Component);Ur=Object(p.a)(Ur,{listenTo:function(){return[Yn.a]},getProps:function(e){return{marketStats:Yn.a.getState().allMarketStats.get(e.marketId),allMarketStats:Yn.a.getState().allMarketStats}}});var Wr=a(603),zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Jr=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Kr(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Gr(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Qr(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Zr=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{return Un.a.getFinalPrice(a||V.ChainStore.getAsset(\"1.3.0\"),e,t||V.ChainStore.getAsset(\"1.3.0\"),n||Yn.a.getState().allMarketStats,r)}catch(e){console.log(e)}},Hr=function(e){function t(){return Kr(this,t),Gr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Qr(t,e),Jr(t,[{key:\"shouldComponentUpdate\",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if(\"value\"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!L.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!L.a.are_equal_shallow(a,this.state)}},{key:\"render\",value:function(){var e=this.props,t=e.coreAsset,a=e.fromAsset,n=e.toAsset,s=e.allMarketStats,o=e.forceDirection,i=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"coreAsset\",\"fromAsset\",\"toAsset\",\"allMarketStats\",\"forceDirection\"]),l=Zr(n,a,t,s);return 1===l?r.a.createElement(\"span\",null,\"1.00\"):l?r.a.createElement(le.a,zr({force_direction:!!o&&n.get(\"symbol\"),base_amount:l.base.amount,base_asset:l.base.asset_id,quote_amount:l.quote.amount,quote_asset:l.quote.asset_id},i)):r.a.createElement(\"span\",null,\"--\")}}]),t}(Wr.a);Hr.defaultProps={forceDirection:!0},Hr=Object(N.a)(Hr,{propNames:[\"toAsset\",\"fromAsset\",\"coreAsset\"],defaultProps:{toAsset:\"1.3.0\",coreAsset:\"1.3.0\"}});var Yr=function(e){function t(){return Kr(this,t),Gr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Qr(t,e),Jr(t,[{key:\"render\",value:function(){var e=this;return r.a.createElement(wr.a,{stores:[i.a,Yn.a],inject:{toAsset:function(){return e.props.toAsset||i.a.getState().settings.get(\"unit\",\"1.3.0\")},allMarketStats:function(){return Yn.a.getState().allMarketStats}}},r.a.createElement(Hr,zr({},this.props,{ref:this.props.refCallback})))}}]),t}(r.a.Component),Xr=a(56),$r=a.n(Xr),es=a(107),ts=a(155),as=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ns=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function rs(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var ss=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=rs(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,r=(n.state||{}).name,s=void 0===r?t:r;n.setState({name:s===t?a:t})},rs(n,a)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ns(t,[{key:\"componentDidMount\",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:\"componentWillUnmount\",value:function(){this.interval&&clearInterval(this.interval)}},{key:\"render\",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,s=void 0===n?t:n,o=this.props.title;return r.a.createElement(M.a,as({name:s,title:o},a))}}]),t}(n.Component);ss.propTypes={duration:E.a.number.isRequired,offIcon:E.a.string.isRequired,onIcon:E.a.string.isRequired,title:E.a.string.isRequired};var os=ss,is=a(777),ls=a(2086),cs=a(619),us=a(2073),ps=a(613),ds=a(148),ms=a.n(ds),hs=a(593),fs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var gs=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.getInitialState(e),a.onSubmit=a.onSubmit.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),fs(t,[{key:\"componentWillReceiveProps\",value:function(e){e.asset&&this.props.asset&&e.asset.get(\"id\")!==this.props.asset.get(\"id\")&&this.setState(this.getInitialState(e))}},{key:\"getInitialState\",value:function(e){return{amount:0,amountAsset:new Vn.a({amount:0,asset_id:e.asset.get(\"id\"),precision:e.asset.get(\"precision\")})}}},{key:\"onAmountChanged\",value:function(e){var t=e.amount,a=e.asset;this.state.amountAsset.setAmount({real:t}),this.setState({amount:t,asset:a})}},{key:\"onSubmit\",value:function(){var e=this;O.a.reserveAsset(this.state.amountAsset.getAmount(),this.props.asset.get(\"id\"),this.props.account.get(\"id\")).then((function(){e.state.amountAsset.setAmount({sats:0}),e.setState({amount:0})})),this.props.hideModal()}},{key:\"render\",value:function(){var e=this,t=this.props.asset.get(\"id\"),a=this.props.account&&this.props.account.get(\"balances\",[]).size&&this.props.account.getIn([\"balances\",t])?V.ChainStore.getObject(this.props.account.getIn([\"balances\",t])):null;return a?r.a.createElement(Y.Modal,{visible:this.props.visible,onCancel:this.props.hideModal,title:W.a.translate(\"modal.reserve.title\"),footer:[r.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.onSubmit},W.a.translate(\"modal.reserve.submit\")),r.a.createElement(Y.Button,{onClick:this.props.hideModal,key:\"cancel\"},W.a.translate(\"cancel\"))]},r.a.createElement(Y.Alert,{message:W.a.translate(\"modal.reserve.warning_message\"),type:\"warning\",showIcon:!0,style:{marginBottom:\"2em\"}}),r.a.createElement(Y.Form,{layout:\"vertical\"},r.a.createElement(hs.a,{label:\"modal.reserve.amount\",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:r.a.createElement(\"div\",{onClick:function(){e.state.amountAsset.setAmount({sats:a.get(\"balance\")}),e.setState({amount:e.state.amountAsset.getAmount({real:!0})})}},r.a.createElement(Br.a,{balance:this.props.account.getIn([\"balances\",t])})),tabIndex:1}))):null}}]),t}(r.a.Component),bs=gs=Object(N.a)(gs,{propNames:[\"asset\"]}),_s=(a(2045),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}),vs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ys=Y.Select.Option,Es=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={columnSelector:\"default\",isDropDownOpen:!1},a._columnSelectorChange=a._columnSelectorChange.bind(a),a.isColumnChecked=a.isColumnChecked.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),vs(t,[{key:\"_getViewSettingsKey\",value:function(){return\"columns_\"+this.props.viewSettingsKey}},{key:\"_getEnabledColumns\",value:function(){return this.props.viewSettings.get(this._getViewSettingsKey())||{}}},{key:\"_getCustomizableColumns\",value:function(e){var t=this;return e.filter((function(e){return t._isColumnCustomizable(e).customizable}))}},{key:\"modHeader\",value:function(e){var t=this;return this.props.allowCustomization?e.filter((function(e){return!t._isColumnCustomizable(e)||t.isColumnChecked(e)})):e}},{key:\"_columnCheckboxChange\",value:function(e){var t,a,n,r=this._getEnabledColumns();r[e]=!this.isColumnChecked(e),de.a.changeViewSetting((t={},a=this._getViewSettingsKey(),n=r,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))}},{key:\"_isColumnCustomizable\",value:function(e){return e.dataIndex?{customizable:null==e.customizable||e.customizable,default:null==e.customizable||\"boolean\"==typeof e.customizable||e.customizable.default}:{customizable:!1,default:!1}}},{key:\"isColumnChecked\",value:function(e){return\"string\"==typeof e&&(e={dataIndex:e,customizable:!0}),null==this._getEnabledColumns()[e.dataIndex]?this._isColumnCustomizable(e).default:this._getEnabledColumns()[e.dataIndex]}},{key:\"_renderEnabledColumnsSelector\",value:function(){var e=this,t=this.props.header;return r.a.createElement(\"div\",{className:\"customizable-column--selector\"},r.a.createElement(Y.Select,{defaultValue:this.state.columnSelector,value:this.state.columnSelector,onChange:this._columnSelectorChange,dropdownClassName:\"customizable-column--selector--dropdown\",onDropdownVisibleChange:function(t){e.setState({isDropDownOpen:t})}},r.a.createElement(ys,{className:\"customizable-column--selector--option\",value:\"default\"},!this.state.isDropDownOpen&&r.a.createElement(Y.Icon,{type:\"setting\"}),this.state.isDropDownOpen&&W.a.translate(\"customizable_table.customize_the_columns\")),this._getCustomizableColumns(t).map((function(t,a){return r.a.createElement(ys,{key:a,className:\"customizable-column--selector--option\",value:t.dataIndex,disabled:!0},r.a.createElement(Y.Checkbox,{checked:e.isColumnChecked(t),onChange:e._columnCheckboxChange.bind(e,t.dataIndex)},t.title))}))))}},{key:\"_columnSelectorChange\",value:function(){this.setState({columnSelector:\"default\"})}},{key:\"render\",value:function(){var e=this.props,t=e.header,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"header\"]);return t=this.modHeader(t),r.a.createElement(\"div\",null,this.props.allowCustomization&&r.a.createElement(\"div\",{style:{position:\"relative\"}},this._renderEnabledColumnsSelector()),r.a.createElement(Je.a,_s({},a,{header:t})),this.props.children)}}]),t}(r.a.Component);Es.propTypes={viewSettingsKey:E.a.string,viewSettings:E.a.object,allowCustomization:E.a.bool},Es.defaultProps={viewSettingsKey:null,viewSettings:null,allowCustomization:!1};var ws=Es=Object(p.a)(Es,{listenTo:function(){return[i.a]},getProps:function(e){return e.viewSettings?{}:{viewSettings:i.a.getState().viewSettings}}}),ks=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Cs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Os=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var n in a.sortFunctions={byKey:function(e,t){return e.key>t.key},byInCollateral:function(e,t){return this.sortFunctions.byTypedValue(e,t,this._sumCollateralBalances(e.inCollateral),this._sumCollateralBalances(t.inCollateral))},byBalance:function(e,t){return this.sortFunctions.byTypedValue(e,t,Object(da.c)(e.balance).amount,Object(da.c)(t.balance).amount)},byVestingBalance:function(e,t){return this.sortFunctions.byTypedValue(e,t,this._sumVestingBalances(e.inVesting),this._sumVestingBalances(t.inVesting))},byInOrders:function(e,t){return this.sortFunctions.byTypedValue(e,t,e.inOrders,t.inOrders)},byTypedValue:function(e,t,a,n){return a=L.a.convert_satoshi_to_typed(a,e.asset),n=L.a.convert_satoshi_to_typed(n,t.asset),a&&n?a-n:!a&&n?-1:a&&!n?1:this.sortFunctions.byKey(e,t)},byEquivalentPrice:function(e,t){var a=Zr(e.asset,e.adds.preferredAsset,this.props.coreAsset,null,!0),n=Zr(t.asset,t.adds.preferredAsset,this.props.coreAsset,null,!0);return a&&n?a-n:!a&&n?-1:a&&!n?1:this.sortFunctions.byKey(e,t)},totalValue:function(e,t){var a=Object(da.d)(e.value,e.adds.preferredAsset,e.adds.asset,!1),n=Object(da.d)(t.value,t.adds.preferredAsset,t.adds.asset,!1);return a&&n?a-n:!a&&n?-1:a&&!n?1:this.sortFunctions.byKey(e,t)},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];return a&&n?(\"NaN\"!=parseFloat(a)?parseFloat(a):a)-(\"NaN\"!=parseFloat(n)?parseFloat(n):n):!a&&n?-1:a&&!n?1:this.sortFunctions.byKey(e,t)}},a._renderBuy=function(e,t,n,s,o){if(\"BTS\"===e&&o<=1e6)return r.a.createElement(\"span\",null,r.a.createElement(\"a\",{onClick:a._showDepositWithdraw.bind(a,\"bridge_modal\",n,!1)},r.a.createElement(os,{onIcon:\"dollar\",offIcon:\"dollar-green\",title:\"icons.dollar.buy\",duration:1e3,className:\"icon-14px\"})));var i=a._showDepositWithdraw.bind(a,\"bridge_modal\",n,!1),l=r.a.createElement(\"span\",null,r.a.createElement(M.a,{style:{cursor:a.props.isMyAccount?\"pointer\":\"help\"},name:\"dollar\",title:\"icons.dollar.buy\",className:\"icon-14px\",onClick:a.props.isMyAccount?i:null}));return t&&a.props.isMyAccount?l:t&&!a.props.isMyAccount?r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.login_required\")},l):s},a._renderGatewayAction=function(e,t,n,s){var o=\"deposit\"==e?a._showDepositModal.bind(a,n):a._showDepositWithdraw.bind(a,\"withdraw_modal_new\",n,!1),i=\"deposit\"==e?\"icons.\"+e+\".\"+e:\"icons.\"+e,l=r.a.createElement(\"span\",null,r.a.createElement(M.a,{style:{cursor:a.props.isMyAccount?\"pointer\":\"help\"},name:e,title:i,className:\"icon-14x\",onClick:a.props.isMyAccount?o:null}));return t&&a.props.isMyAccount?l:t&&!a.props.isMyAccount?r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.login_required\")},l):s},a.state={isBridgeModalVisible:!1,isSettleModalVisible:!1,isBorrowModalVisible:!1,isDepositModalVisible:!1,isWithdrawModalVisible:!1,isBurnModalVisible:!1,isBridgeModalVisibleBefore:!1,isSettleModalVisibleBefore:!1,isBorrowModalVisibleBefore:!1,isDepositModalVisibleBefore:!1,isWithdrawModalVisibleBefore:!1,isBurnModalVisibleBefore:!1,borrow:null,settleAsset:\"1.3.0\",depositAsset:null,withdrawAsset:null,bridgeAsset:null,allRefsAssigned:!1,portfolioSort:e.viewSettings.get(\"portfolioSort\",\"value\"),portfolioSortDirection:e.viewSettings.get(\"portfolioSortDirection\",\"descend\")},a.changeRefs={},a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a._checkRefAssignments=a._checkRefAssignments.bind(a),a.showSettleModal=a.showSettleModal.bind(a),a.hideSettleModal=a.hideSettleModal.bind(a),a.showDepositModal=a.showDepositModal.bind(a),a.hideDepositModal=a.hideDepositModal.bind(a),a.showWithdrawModal=a.showWithdrawModal.bind(a),a.hideWithdrawModal=a.hideWithdrawModal.bind(a),a.showBorrowModal=a.showBorrowModal.bind(a),a.hideBorrowModal=a.hideBorrowModal.bind(a),a.showBurnModal=a.showBurnModal.bind(a),a.hideBurnModal=a.hideBurnModal.bind(a),a.showBridgeModal=a.showBridgeModal.bind(a),a.hideBridgeModal=a.hideBridgeModal.bind(a),a.toggleSortOrder=a.toggleSortOrder.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ks(t,[{key:\"componentWillMount\",value:function(){this.refCheckInterval=setInterval(this._checkRefAssignments)}},{key:\"componentWillUnmount\",value:function(){clearInterval(this.refCheckInterval)}},{key:\"_checkRefAssignments\",value:function(){var e=this;if(!this.state.allRefsAssigned){var t=[\"changeRefs\"].reduce((function(t,a){return void 0===t?!!Object.keys(e[a]).length:!!Object.keys(e[a]).length&&t}),void 0);t&&(clearInterval(this.refCheckInterval),this.setState({allRefsAssigned:t}))}}},{key:\"shouldComponentUpdate\",value:function(e,t){var a=this;return!L.a.are_equal_shallow(t,this.state)||!L.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!L.a.are_equal_shallow(e.balances,this.props.balances)||!L.a.are_equal_shallow(e.balanceList,this.props.balanceList)||!L.a.are_equal_shallow(e.optionalAssets,this.props.optionalAssets)||e.account!==this.props.account||e.visible!==this.props.visible||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||e.allMarketStats.reduce((function(e,t,n){return L.a.check_market_stats(t,a.props.allMarketStats.get(n))||e}),!1)}},{key:\"showBridgeModal\",value:function(){this.setState({isBridgeModalVisible:!0,isBridgeModalVisibleBefore:!0})}},{key:\"hideBridgeModal\",value:function(){this.setState({isBridgeModalVisible:!1})}},{key:\"showWithdrawModal\",value:function(){this.setState({isWithdrawModalVisible:!0,isWithdrawModalVisibleBefore:!0})}},{key:\"hideWithdrawModal\",value:function(){this.setState({isWithdrawModalVisible:!1})}},{key:\"showBurnModal\",value:function(){this.setState({isBurnModalVisible:!0,isBurnModalVisibleBefore:!0})}},{key:\"hideBurnModal\",value:function(){this.setState({isBurnModalVisible:!1})}},{key:\"showSettleModal\",value:function(){this.setState({isSettleModalVisible:!0,isSettleModalVisibleBefore:!0})}},{key:\"hideSettleModal\",value:function(){this.setState({isSettleModalVisible:!1})}},{key:\"showDepositModal\",value:function(){this.setState({isDepositModalVisible:!0,isDepositModalVisibleBefore:!0})}},{key:\"hideDepositModal\",value:function(){this.setState({isDepositModalVisible:!1})}},{key:\"showBorrowModal\",value:function(e,t,a){this.setState({isBorrowModalVisible:!0,isBorrowModalVisibleBefore:!0,borrow:{quoteAsset:e,backingAsset:t,account:a}})}},{key:\"hideBorrowModal\",value:function(){this.setState({borrow:null,isBorrowModalVisible:!1})}},{key:\"triggerSend\",value:function(e){var t=this;this.setState({send_asset:e},(function(){t.send_modal&&t.send_modal.show()}))}},{key:\"_onSettleAsset\",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.showSettleModal()}},{key:\"_hideAsset\",value:function(e,t){de.a.hideAsset(e,t)}},{key:\"_burnAsset\",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),this.showBurnModal()}},{key:\"_showDepositModal\",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},(function(){a.showDepositModal()}))}},{key:\"_showDepositWithdraw\",value:function(e,t,a,n){var r,s=this;n.preventDefault(),this.setState((Cs(r={},\"bridge_modal\"===e?\"bridgeAsset\":\"deposit_modal\"===e?\"depositAsset\":\"withdrawAsset\",t),Cs(r,\"fiatModal\",a),r),(function(){return\"bridge_modal\"===e?(s.showBridgeModal(),!0):\"deposit_modal\"===e?(s.showDepositModal(),!0):void s.showWithdrawModal()}))}},{key:\"_getSeparator\",value:function(e){return e?r.a.createElement(\"span\",null,\" | \"):null}},{key:\"toggleSortOrder\",value:function(e,t,a){de.a.changeViewSetting({portfolioSortDirection:a.order,portfolioSort:a.columnKey})}},{key:\"getHeader\",value:function(e){var t=this,a=this.props.settings,n=this.state.shownAssets,s=a.get(\"unit\")||this.props.core_asset.get(\"symbol\"),o=a.get(\"showAssetPercent\",!1),i=[{title:r.a.createElement(C.a,{content:\"account.asset\"}),dataIndex:\"asset\",align:\"left\",customizable:!1,sorter:this.sortFunctions.byKey,render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(ue.a,{asset:e.get(\"id\")}))}},{title:r.a.createElement(C.a,{content:\"account.qty\"}),dataIndex:\"balance\",align:\"right\",customizable:!1,sorter:this.sortFunctions.byBalance,render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(Br.a,{balance:e.get(\"id\"),hide_asset:!0}))}},{className:\"column-hide-small\",title:r.a.createElement(C.a,{content:\"account.inOrders\"}),dataIndex:\"inOrders\",align:\"right\",sorter:this.sortFunctions.byInOrders,render:function(e,t){return e?r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(A.a,{amount:e,asset:t.asset.get(\"id\"),hide_asset:!0})):\"--\"}},{className:\"column-hide-small\",title:r.a.createElement(C.a,{content:\"account.inVestingBalances\"}),dataIndex:\"inVesting\",align:\"right\",sorter:this.sortFunctions.byVestingBalance,render:function(e,a){return e&&0!=e.length?r.a.createElement(\"span\",{style:{whiteSpace:\"noWrap\"}},r.a.createElement(A.a,{amount:t._sumVestingBalances(e),asset:a.asset.get(\"id\"),hide_asset:!0})):\"--\"}},{className:\"column-hide-small\",title:r.a.createElement(C.a,{content:\"account.inCollateral\"}),dataIndex:\"inCollateral\",align:\"right\",sorter:this.sortFunctions.byInCollateral,render:function(e,a){return e&&0!=e.length?r.a.createElement(\"span\",{style:{whiteSpace:\"noWrap\"}},r.a.createElement(A.a,{amount:t._sumCollateralBalances(e),asset:a.asset.get(\"id\"),hide_asset:!0})):\"--\"}},{className:\"column-hide-small\",title:r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(C.a,{content:\"exchange.price\"}),\" (\",r.a.createElement(ma.a,{name:s,noTip:!0}),\")\"),dataIndex:\"price\",align:\"right\",sorter:this.sortFunctions.byEquivalentPrice,render:function(e,t){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(Yr,{fromAsset:t.asset.get(\"id\"),pulsate:{reverse:!0,fill:\"forwards\"},hide_symbols:!0}))}},{className:\"column-hide-small\",title:r.a.createElement(C.a,{content:\"account.hour_24_short\"}),dataIndex:\"hour24\",align:\"right\",sorter:this.sortFunctions.changeValue,render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-small\",title:r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(Ra.a,{noLink:!0,string:\"account.eq_value_header\",keys:[{type:\"asset\",value:s,arg:\"asset\"}],noTip:!0})),dataIndex:\"value\",align:\"right\",customizable:!1,sorter:this.sortFunctions.totalValue,defaultSortOrder:\"descend\",render:function(e,t){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},r.a.createElement(da.a,{balance:t.adds.balanceObject.get(\"id\"),satoshis:e,toAsset:s,hide_asset:!0}))}},{title:r.a.createElement(C.a,{content:\"account.percent\"}),dataIndex:\"percent\",align:\"right\",customizable:{default:o},render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:r.a.createElement(C.a,{content:\"header.payments\"}),dataIndex:\"payments\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"exchange.buy\"}),customizable:e.buy?void 0:{default:!1},dataIndex:\"buy\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:e.depositOnlyBTS?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.Tooltip,{title:W.a.translate(\"external_service_provider.expect_more\")},r.a.createElement(C.a,{content:\"modal.deposit.submit\"}),\" \",r.a.createElement(Y.Icon,{type:\"question-circle\"}))):r.a.createElement(C.a,{content:\"modal.deposit.submit\"}),customizable:e.deposit?void 0:{default:!1},dataIndex:\"deposit\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"modal.withdraw.submit\"}),customizable:e.withdraw?void 0:{default:!1},dataIndex:\"withdraw\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"account.trade\"}),dataIndex:\"trade\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"exchange.borrow_short\"}),dataIndex:\"borrow\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"account.settle\"}),dataIndex:\"settle\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"modal.reserve.submit\"}),dataIndex:\"burn\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-medium\",title:r.a.createElement(C.a,{content:\"active\"==n?\"exchange.hide\":\"account.perm.show\"}),dataIndex:\"hide\",align:\"center\",render:function(e){return r.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}}];return i.forEach((function(e){e.dataIndex==t.state.portfolioSort&&(e.defaultSortOrder=t.state.portfolioSortDirection)})),i}},{key:\"_sumCollateralBalances\",value:function(e){if(!e||0==e.length)return 0;var t=0;return e.forEach((function(e){t+=+e.get(\"collateral\")})),t}},{key:\"_sumVestingBalances\",value:function(e){if(!e||0==e.length)return 0;var t=0;return e.forEach((function(e){t+=Object(da.c)(e).amount})),t}},{key:\"_renderBalances\",value:function(e,t,a){var n=this,s=this.props,o=s.coreSymbol,i=s.preferredUnit,l=(s.settings,s.hiddenAssets),c=s.orders,u=function(e,t){var a=e&&e.has(\"bitasset_data_id\"),s=!!(a&&e.getIn([\"bitasset\",\"settlement_fund\"])>0);return{isBitAsset:a,borrowLink:!a||s?null:r.a.createElement(\"a\",{onClick:function(){$r.a.hide(),n.showBorrowModal(e.get(\"id\"),e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),t)}},r.a.createElement(M.a,{name:\"dollar\",title:\"icons.dollar.borrow\",className:\"icon-14px\"}))}},p=[];return e.forEach((function(e){var t=V.ChainStore.getObject(e);if(t){var a=t.get(\"asset_type\"),s=V.ChainStore.getObject(a);if(s){var d,m,h=void 0,f=\"\",g=s.get(\"symbol\"),b=\"1.3.0\"!==s.get(\"id\"),_=i!==o,v=P.a.parseDescription(s.getIn([\"options\",\"description\"])).market;-1===(f=s.get(\"symbol\")).indexOf(\"OPEN.\")||v||(v=\"USD\");var y=v||i;b&&y===f&&(y=o),d=b?r.a.createElement(w.a,{to:\"/market/\"+s.get(\"symbol\")+\"_\"+y,onClick:function(){return Ln.a.switchMarket()}},r.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):_?r.a.createElement(w.a,{to:\"/market/\"+s.get(\"symbol\")+\"_\"+i,onClick:function(){return Ln.a.switchMarket()}},r.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):\"-\",m=r.a.createElement(\"a\",{onClick:n.triggerSend.bind(n,s.get(\"id\"))},r.a.createElement(M.a,{name:\"transfer\",title:\"icons.transfer\",className:\"icon-14px\"}));var E=u(s,n.props.account),k=E.isBitAsset,C=E.borrowLink,O=!l.includes(a),S=!!t.get(\"balance\"),A=[];n.props.account.get(\"vesting_balances\").forEach((function(e){var t=V.ChainStore.getObject(e);t.getIn([\"balance\",\"asset_id\"])===s.get(\"id\")&&+t.getIn([\"balance\",\"amount\"])>0&&A.push(t)}));var x=[];n.props.callOrders.forEach((function(e){var t=V.ChainStore.getObject(e);t.getIn([\"call_price\",\"base\",\"asset_id\"])===s.get(\"id\")&&+t.get(\"collateral\")>0&&x.push(t)}));var j=Object(es.b)(s.get(\"symbol\"),n.props.backedCoins),N=j&&j.depositAllowed||\"BTS\"==s.get(\"symbol\"),I=j&&j.withdrawalAllowed&&S&&0!=t.get(\"balance\"),T=!!n.props.bridgeCoins.get(f),B=s&&s.getIn([\"bitasset\",\"options\"])?s.getIn([\"bitasset\",\"options\"]).toJS():null,R=B&&B.short_backing_asset?V.ChainStore.getAsset(B.short_backing_asset):null,D=L.a.replaceName(s).isBitAsset,F=L.a.replaceName(R).isBitAsset,q=void 0;if(k){var U=s.get(\"bitasset\").get(\"settlement_fund\")>0,z=s.getIn([\"bitasset\",\"is_prediction_market\"]);q=U?\"tooltip.global_settle\":z?\"tooltip.settle_market_prediction\":\"tooltip.settle\",h=z&&!U?r.a.createElement(Y.Icon,{type:\"question-circle\"}):r.a.createElement(\"a\",{onClick:n._onSettleAsset.bind(n,s.get(\"id\"))},r.a.createElement(M.a,{name:\"settle\",title:\"icons.settle\",className:\"icon-14px\"}))}var J=V.ChainStore.getAsset(i),K=s.get(\"symbol\")+\"_\"+i,G=n.props.allMarketStats.get(K);n.changeRefs[s.get(\"symbol\")]=G&&G.change?G.change:0;var Q=Object(da.c)(t).amount+(c[s.get(\"id\")]?c[s.get(\"id\")]:0)+n._sumVestingBalances(A)+n._sumCollateralBalances(x);p.push({key:s.get(\"symbol\"),adds:{balanceObject:t,preferredAsset:J,asset:s},asset:s,balance:t,price:\"dummy\",inOrders:c[s.get(\"id\")],inVesting:A,inCollateral:x,hour24:r.a.createElement(Ur,{base:s.get(\"id\"),quote:i,marketId:K,hide_symbols:!0}),value:Q,percent:S?r.a.createElement(Br.a,{balance:e,asPercentage:!0}):null,payments:m,buy:n._renderBuy(s.get(\"symbol\"),T,g,\"-\",t.get(\"balance\")),deposit:n._renderGatewayAction(\"deposit\",N,g,\"-\"),withdraw:n._renderGatewayAction(\"withdraw\",I,g,\"-\"),trade:d,borrow:k&&C?r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.borrow\",{asset:D?\"bit\"+f:f})},C):k&&!C?r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.borrow_disabled\",{asset:D?\"bit\"+f:f})},r.a.createElement(Y.Icon,{type:\"question-circle\"})):\"-\",settle:k&&R?r.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(q,{asset:D?\"bit\"+f:f,backingAsset:F?\"bit\"+R.get(\"symbol\"):R.get(\"symbol\"),settleDelay:B.force_settlement_delay_sec/3600})},r.a.createElement(\"div\",{className:\"inline-block\"},h)):\"-\",burn:k?null:r.a.createElement(\"a\",{style:{marginRight:0},onClick:n._burnAsset.bind(n,s.get(\"id\"))},r.a.createElement(M.a,{name:\"fire\",className:\"icon-14px\"})),hide:r.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(\"tooltip.\"+(O?\"hide_asset\":\"show_asset\"))},r.a.createElement(\"a\",{style:{marginRight:0},className:O?\"order-cancel\":\"action-plus\",onClick:n._hideAsset.bind(n,a,O)},r.a.createElement(M.a,{name:O?\"cross-circle\":\"plus-circle\",title:O?\"icons.cross_circle.hide_asset\":\"icons.plus_circle.show_asset\",className:\"icon-14px\"})))})}}})),t&&t.filter((function(e){var t=!1;n.props.backedCoins.get(\"OPEN\",[]).forEach((function(a){a&&a.symbol===e&&(t=!0)})),n.props.bridgeCoins.get(e)&&(t=!0);var a=!0;return p.forEach((function(t){t.key===e&&(a=!1)})),a&&t})).forEach((function(e){var t=V.ChainStore.getAsset(e);if(t&&n.props.isMyAccount){var s=!l.includes(t.get(\"id\")),i=t.get(\"symbol\").split(\".\"),c=!!n.props.backedCoins.get(\"OPEN\",[]).find((function(e){return e.backingCoinType===i[1]}))||!!n.props.backedCoins.get(\"RUDEX\",[]).find((function(e){return e.backingCoin===i[1]}))||\"BTS\"==t.get(\"symbol\"),d=!!n.props.bridgeCoins.get(t.get(\"symbol\")),m=\"1.3.0\"!==t.get(\"id\"),h=P.a.parseDescription(t.getIn([\"options\",\"description\"])).market;-1===t.get(\"symbol\").indexOf(\"OPEN.\")||h||(h=\"USD\");var f=h||o,g=m?r.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+f,onClick:function(){return Ln.a.switchMarket()}},r.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):\"-\",b=u(t,n.props.account),_=b.isBitAsset,v=b.borrowLink;(s&&a||!s&&!a)&&p.push({key:t.get(\"symbol\"),asset:t,balance:\"-\",price:\"-\",hour24:\"-\",value:\"-\",percent:\"-\",payments:\"-\",buy:d&&n.props.isMyAccount?r.a.createElement(\"span\",null,r.a.createElement(\"a\",{onClick:n._showDepositWithdraw.bind(n,\"bridge_modal\",e,!1)},r.a.createElement(M.a,{name:\"dollar\",title:\"icons.dollar.buy\",className:\"icon-14px\"}))):\"-\",deposit:c&&n.props.isMyAccount?r.a.createElement(\"span\",null,r.a.createElement(M.a,{style:{cursor:\"pointer\"},name:\"deposit\",title:\"icons.deposit.deposit\",className:\"icon-14x\",onClick:n._showDepositModal.bind(n,t.get(\"symbol\"))})):\"-\",withdraw:\"-\",trade:g,borrow:_?r.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(\"tooltip.borrow\",{asset:t.get(\"symbol\")})},r.a.createElement(\"div\",{className:\"inline-block\"},v)):\"-\",settle:\"-\",burn:\"-\",hide:r.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(\"tooltip.\"+(s?\"hide_asset\":\"show_asset\"))},r.a.createElement(\"a\",{style:{marginRight:0},className:s?\"order-cancel\":\"action-plus\",onClick:n._hideAsset.bind(n,t.get(\"id\"),s)},r.a.createElement(M.a,{name:s?\"cross-circle\":\"plus-circle\",title:s?\"icons.cross_circle.hide_asset\":\"icons.plus_circle.show_asset\",className:\"icon-14px\"})))})}})),p}},{key:\"_renderSendModal\",value:function(){var e=this;return r.a.createElement(is.a,{id:\"send_modal_portfolio\",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get(\"name\"),asset_id:this.state.send_asset||\"1.3.0\"})}},{key:\"_renderBorrowModal\",value:function(){return this.state.borrow&&this.state.borrow.quoteAsset&&this.state.borrow.backingAsset&&this.state.borrow.account&&this.state.isBorrowModalVisibleBefore?r.a.createElement(ja.a,{visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal,hideModal:this.hideBorrowModal,accountObj:this.state.borrow&&this.state.borrow.account,quoteAssetObj:this.state.borrow&&this.state.borrow.quoteAsset,backingAssetObj:this.state.borrow&&this.state.borrow.backingAsset}):null}},{key:\"_renderSettleModal\",value:function(){return r.a.createElement(ls.a,{visible:this.state.isSettleModalVisible,hideModal:this.hideSettleModal,showModal:this.showSettleModal,asset:this.state.settleAsset,account:this.props.account})}},{key:\"render\",value:function(){var e=this.props.bridgeCoins.get(this.state.bridgeAsset)||null,t=this._renderBalances(this.props.balanceList,this.props.optionalAssets,this.props.visible),a={};return t.forEach((function(e){e.buy&&\"-\"!==e.buy&&(a.buy=!0),e.deposit&&\"-\"!==e.deposit&&\"BTS\"==e.key&&ts.a.anyAllowed()&&(a.depositOnlyBTS=\"BTS\"==e.key&&!a.deposit,a.deposit=!0),e.withdraw&&\"-\"!==e.withdraw&&(a.withdraw=!0)})),r.a.createElement(\"div\",null,r.a.createElement(ws,{className:\"table dashboard-table table-hover\",rows:t,header:this.getHeader(a),label:\"utility.total_x_assets\",extraRow:this.props.extraRow,viewSettingsKey:\"portfolioColumns\",allowCustomization:!0,toggleSortOrder:this.toggleSortOrder},this._renderSendModal(),(this.state.isSettleModalVisible||this.state.isSettleModalVisibleBefore)&&this._renderSettleModal(),this._renderBorrowModal(),(this.state.isWithdrawModalVisible||this.state.isWithdrawModalVisibleBefore)&&r.a.createElement(ps.a,{hideModal:this.hideWithdrawModal,visible:this.state.isWithdrawModalVisible,backedCoins:this.props.backedCoins,initialSymbol:this.state.withdrawAsset}),(this.state.isDepositModalVisible||this.state.isDepositModalVisibleBefore)&&r.a.createElement(cs.a,{visible:this.state.isDepositModalVisible,showModal:this.showDepositModal,hideModal:this.hideDepositModal,asset:this.state.depositAsset,account:this.props.account.get(\"name\"),backedCoins:this.props.backedCoins}),(this.state.isBridgeModalVisible||this.state.isBridgeModalVisibleBefore)&&r.a.createElement(us.a,{visible:this.state.isBridgeModalVisible,showModal:this.showBridgeModal,hideModal:this.hideBridgeModal,action:\"deposit\",account:this.props.account.get(\"name\"),sender:this.props.account.get(\"id\"),asset:this.state.bridgeAsset,balances:this.props.balances,bridges:e,isDown:this.props.gatewayDown.get(\"TRADE\")}),(this.state.isBurnModalVisible||this.state.isBurnModalVisibleBefore)&&r.a.createElement(bs,{visible:this.state.isBurnModalVisible,hideModal:this.hideBurnModal,asset:this.state.reserve,account:this.props.account,onClose:function(){ms.a.publish(\"reserve_asset\",\"close\")}})))}}]),t}(r.a.Component);Os=Object(p.a)(Os,{listenTo:function(){return[i.a,ts.a,Yn.a]},getProps:function(){return{settings:i.a.getState().settings,viewSettings:i.a.getState().viewSettings,backedCoins:ts.a.getState().backedCoins,bridgeCoins:ts.a.getState().bridgeCoins,gatewayDown:ts.a.getState().down,allMarketStats:Yn.a.getState().allMarketStats}}});var Ss=Os=Tr()(Os,50,{leading:!1}),As=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},xs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function js(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ps(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ns(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Is=function(e){function t(e){js(this,t);var a=Ps(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={shownAssets:e.viewSettings.get(\"shownAssets\",\"active\"),alwaysShowAssets:[\"BTS\"],hideFishingProposals:!0,question1:!1,question2:!1,question3:!1},a._handleFilterInput=a._handleFilterInput.bind(a),a}return Ns(t,e),xs(t,[{key:\"_handleFilterInput\",value:function(e){this.setState({filterValue:e.target.value})}},{key:\"componentWillMount\",value:function(){this._checkMarginStatus()}},{key:\"_checkMarginStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;hr(t.account).then((function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})}))}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this._checkMarginStatus(e)}},{key:\"shouldComponentUpdate\",value:function(e,t){return!L.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.isMyAccount!==this.props.isMyAccount||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!L.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue||this.state.enabledColumns!==t.enabledColumns}},{key:\"_changeShownAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"active\";this.setState({shownAssets:e}),de.a.changeViewSetting({shownAssets:e})}},{key:\"_toggleHideProposal\",value:function(){this.setState({hideFishingProposals:!this.state.hideFishingProposals})}},{key:\"_toggleQ1\",value:function(){this.setState({question1:!this.state.question1})}},{key:\"_toggleQ2\",value:function(){this.setState({question2:!this.state.question2})}},{key:\"_toggleQ3\",value:function(){this.setState({question3:!this.state.question3})}},{key:\"_showProposals\",value:function(){de.a.changeSetting({setting:\"showProposedTx\",value:!0})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,s=t.settings,o=t.orders,i=this.state.shownAssets;if(!a)return null;var l=s.get(\"unit\")?s.get(\"unit\"):this.props.core_asset.get(\"symbol\"),c=[],u={},p={};V.ChainStore.requestAllDataForAccount(a.toJS().id,\"balance\"),a.toJS&&a.has(\"call_orders\")&&(c=a.get(\"call_orders\").toJS());var d,m,f=a.get(\"balances\"),g=h.a.List(),b=h.a.List();c.forEach((function(e){var t=V.ChainStore.getObject(e);if(t){var a=t.getIn([\"call_price\",\"base\",\"asset_id\"]);u[a]?u[a]+=parseInt(t.get(\"collateral\"),10):u[a]=parseInt(t.get(\"collateral\"),10);var n=t.getIn([\"call_price\",\"quote\",\"asset_id\"]);p[n]?p[n]+=parseInt(t.get(\"debt\"),10):p[n]=parseInt(t.get(\"debt\"),10)}})),f&&(f=f.filter((function(e,t){var a=V.ChainStore.getObject(e);return!(a&&!a.get(\"balance\")&&!o[t])}))).forEach((function(t,a){var r=V.ChainStore.getAsset(a),s=\"\",o=\"\";e.state.filterValue&&(o=e.state.filterValue?String(e.state.filterValue).toLowerCase():\"\",s=r.get(\"symbol\").toLowerCase(),L.a.replaceName(r).isBitAsset&&(s=\"bit\"+s));n.includes(a)&&s.includes(o)?b=b.push(t):s.includes(o)&&(g=g.push(t))}));var _=r.a.createElement(xa.a,{noTip:!0,balances:b,hide_asset:!0}),v=r.a.createElement(xa.a,{noTip:!0,balances:g,hide_asset:!0}),y=r.a.createElement(xa.a,{noTip:!0,balances:h.a.List(),openOrders:o,hide_asset:!0}),E=r.a.createElement(xa.a,{noTip:!0,balances:h.a.List(),debt:p,collateral:u,hide_asset:!0}),w=r.a.createElement(xa.a,{noTip:!0,balances:h.a.List(),debt:p,hide_asset:!0}),k=r.a.createElement(xa.a,{noTip:!0,balances:h.a.List(),collateral:u,hide_asset:!0}),O=r.a.createElement(Ra.a,{noLink:!0,string:\"account.total\",keys:[{type:\"asset\",value:l,arg:\"asset\"}]}),S=r.a.createElement(\"span\",{key:\"portfolio\",className:\"total-value\"},O,\": \",v),A=r.a.createElement(\"span\",{key:\"portfolio\",className:\"total-value\"},O,\": \",_);d=r.a.createElement(Ss,{balanceList:g,optionalAssets:this.state.filterValue?null:this.state.alwaysShowAssets,visible:!0,preferredUnit:l,coreAsset:this.props.core_asset,coreSymbol:this.props.core_asset.get(\"symbol\"),hiddenAssets:n,orders:o,account:this.props.account,isMyAccount:this.props.isMyAccount,balances:this.props.balances,extraRow:S,viewSettings:this.props.viewSettings,callOrders:c}),m=r.a.createElement(Ss,{balanceList:b,optionalAssets:this.state.filterValue?null:this.state.alwaysShowAsset,visible:!1,preferredUnit:l,coreSymbol:this.props.core_asset.get(\"symbol\"),settings:s,hiddenAssets:n,orders:o,account:this.props.account,isMyAccount:this.props.isMyAccount,balances:this.props.balances,extraRow:A,viewSettings:this.props.viewSettings,enabledColumns:this.state.enabledColumns});return r.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},r.a.createElement(\"div\",{className:\"content-block small-12\"},r.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},r.a.createElement(I.b,{defaultActiveTab:0,segmented:!1,setting:\"overviewTab\",className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\"},r.a.createElement(I.a,{title:\"account.portfolio\",subText:v},r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(\"div\",{className:\"filter inline-block\"},r.a.createElement(Ke.a,{value:this.state.filterValue,onChange:this._handleFilterInput})),r.a.createElement(\"div\",{className:\"selector inline-block\",style:{position:\"relative\",top:\"8px\"}},r.a.createElement(\"div\",{className:F()(\"inline-block\",{inactive:\"active\"!=i}),onClick:\"active\"!=i?this._changeShownAssets.bind(this,\"active\"):function(){}},r.a.createElement(C.a,{content:\"account.hide_hidden\"})),b.size?r.a.createElement(\"div\",{className:F()(\"inline-block\",{inactive:\"hidden\"!=i}),onClick:\"hidden\"!=i?this._changeShownAssets.bind(this,\"hidden\"):function(){}},r.a.createElement(C.a,{content:\"account.show_hidden\"})):null,r.a.createElement(\"div\",{className:F()(\"inline-block\",{inactive:\"visual\"!=i}),onClick:\"visual\"!=i?this._changeShownAssets.bind(this,\"visual\"):function(){}},r.a.createElement(C.a,{content:\"account.show_visual\"})))),\"visual\"!=i?\"hidden\"===i&&b.size?m:d:r.a.createElement(Ir,{balanceObjects:g})),r.a.createElement(I.a,{title:\"account.open_orders\",subText:y},r.a.createElement(pr,this.props,r.a.createElement(\"div\",{className:\"total-value\"},r.a.createElement(\"span\",{className:\"text\"},O),r.a.createElement(\"span\",{className:\"value\"},y)))),r.a.createElement(I.a,{title:\"account.collaterals\",subText:r.a.createElement(\"span\",{className:this.state.globalMarginStatus},E)},r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(\"div\",{className:\"generic-bordered-box\"},r.a.createElement(Ua,{preferredUnit:l,className:\"dashboard-table\",callOrders:c,account:a},r.a.createElement(\"tr\",{className:\"total-value\"},r.a.createElement(\"td\",null,O),r.a.createElement(\"td\",null),r.a.createElement(\"td\",null,w),r.a.createElement(\"td\",{className:\"column-hide-medium\"},k),r.a.createElement(\"td\",null),r.a.createElement(\"td\",null,E),r.a.createElement(\"td\",{className:\"column-hide-small\"}),r.a.createElement(\"td\",{className:\"column-hide-small\"}),r.a.createElement(\"td\",{colSpan:\"4\"})))))),r.a.createElement(I.a,{title:\"account.activity\",subText:\" \"},r.a.createElement(xt.a,{accountsList:h.a.fromJS([a.get(\"id\")]),compactView:!1,showMore:!0,fullHeight:!0,limit:100,showFilters:!0,dashboard:!0})),a.get(\"proposals\")&&a.get(\"proposals\").size&&r.a.createElement(I.a,{title:\"explorer.proposals.title\",subText:String(a.get(\"proposals\")?a.get(\"proposals\").size:0)},this.props.settings.get(\"showProposedTx\")&&r.a.createElement(\"div\",{onClick:this._toggleHideProposal.bind(this),style:{cursor:\"pointer\"}},r.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.propose_unhide\"),placement:\"bottom\"},r.a.createElement(Y.Switch,{style:{margin:16},checked:this.state.hideFishingProposals,onChange:this._toggleHideProposal.bind(this)}),r.a.createElement(C.a,{content:\"account.deactivate_suspicious_proposals\"}))),this.props.settings.get(\"showProposedTx\")&&r.a.createElement(Rn,{className:\"dashboard-table\",account:a,hideFishingProposals:this.state.hideFishingProposals}),!this.props.settings.get(\"showProposedTx\")&&r.a.createElement(\"div\",{className:\"padding\"},r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.proposed_transactions.advanced_feature\"}),\":\"),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.proposed_transactions.question1\"}),r.a.createElement(Y.Switch,{style:{margin:16},checked:this.state.question1,onChange:this._toggleQ1.bind(this),checkedChildren:\"Yes\",unCheckedChildren:\"No\"})),this.state.question1&&r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.proposed_transactions.question2\"}),r.a.createElement(Y.Switch,{style:{margin:16},checked:this.state.question2,onChange:this._toggleQ2.bind(this),checkedChildren:\"Yes\",unCheckedChildren:\"No\"})),this.state.question2&&r.a.createElement(\"div\",null,r.a.createElement(C.a,{content:\"account.proposed_transactions.question3\"}),r.a.createElement(Y.Switch,{style:{margin:16},checked:this.state.question3,onChange:this._toggleQ3.bind(this),checkedChildren:\"Yes\",unCheckedChildren:\"No\"})),r.a.createElement(\"br\",null),this.state.question3&&r.a.createElement(\"div\",{style:{marginTop:16,marginBottom:16}},r.a.createElement(C.a,{content:\"account.proposed_transactions.answered_no\"}),r.a.createElement(Y.Button,{style:{marginLeft:16},onClick:this._showProposals.bind(this)},r.a.createElement(C.a,{content:\"account.proposed_transactions.show_me_proposals\"})))))))))}}]),t}(r.a.Component);Is=Object(N.a)(Is,{propNames:[\"core_asset\"]});var Ms=function(e){function t(){return js(this,t),Ps(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ns(t,e),xs(t,[{key:\"render\",value:function(){return r.a.createElement(fr.a,As({},this.props,{wrap:Is}))}}]),t}(r.a.Component),Ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Bs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Rs(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ds(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Fs(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qs=function(e){function t(e){return Rs(this,t),Ds(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return Fs(t,e),Bs(t,[{key:\"componentDidMount\",value:function(){this.props.account&&(s.a.setCurrentAccount.defer(this.props.account.get(\"name\")),d.a.getPossibleFees(this.props.account,\"transfer\"))}},{key:\"componentWillReceiveProps\",value:function(e){if(e.account){var t=e.account.get(\"name\"),a=this.props.account&&this.props.account.get(\"name\");this.props.account&&t===a||(s.a.setCurrentAccount.defer(t),d.a.getPossibleFees(e.account,\"transfer\"))}}},{key:\"componentDidUpdate\",value:function(e){var t=this.props,a=t.currentAccount,n=t.history,r=t.location;if(e.currentAccount!==a&&a){var s=r.pathname.split(\"/\");s[2]=a,n.push(s.join(\"/\"))}}},{key:\"render\",value:function(){var e=this.props,t=e.myActiveAccounts,a=e.searchAccounts,n=e.settings,s=e.wallet_locked,i=e.account,l=e.hiddenAssets;if(!i)return r.a.createElement(f.a,null);var c=this.props.account.get(\"name\"),u={account_name:c,myActiveAccounts:t,searchAccounts:a,settings:n,wallet_locked:s,account:i,isMyAccount:o.a.isMyAccount(i),hiddenAssets:l,contained:!0,balances:i.get(\"balances\",Object(m.List)()).toList(),orders:i.get(\"orders\",Object(m.List)()).toList(),viewSettings:this.props.viewSettings,proxy:i.getIn([\"options\",\"voting_account\"]),history:this.props.history};return r.a.createElement(g.a,null,r.a.createElement(b.a,{path:\"/account/\"+c,exact:!0,render:function(){return r.a.createElement(Ms,u)}}),r.a.createElement(_.a,{from:\"/account/\"+c+\"/overview\",to:\"/account/\"+c}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/assets\",exact:!0,render:function(){return r.a.createElement(R,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/create-asset\",exact:!0,render:function(){return r.a.createElement(re,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/update-asset/:asset\",exact:!0,render:function(){return r.a.createElement(Pe,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/member-stats\",exact:!0,render:function(){return r.a.createElement(Ue,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/vesting\",exact:!0,render:function(){return r.a.createElement(Qe,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/permissions\",exact:!0,render:function(){return r.a.createElement(Pt,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/voting/:tab\",render:function(){return r.a.createElement(Aa,u)}}),r.a.createElement(_.a,{from:\"/account/\"+c+\"/voting\",to:\"/account/\"+c+\"/voting/witnesses\"}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/whitelist\",exact:!0,render:function(){return r.a.createElement(Xt,u)}}),r.a.createElement(b.a,{path:\"/account/\"+c+\"/signedmessages\",exact:!0,render:function(){return r.a.createElement(Ut,u)}}))}}]),t}(r.a.Component);qs.propTypes={account:c.a.ChainAccount.isRequired},qs=Object(u.a)(qs,{show_loader:!0});var Ls=function(e){function t(){return Rs(this,t),Ds(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fs(t,e),Bs(t,[{key:\"render\",value:function(){var e=this.props.match.params.account_name;return r.a.createElement(qs,Ts({},this.props,{account:e}))}}]),t}(r.a.Component);t.default=Object(p.a)(Ls,{listenTo:function(){return[o.a,i.a,l.a]},getProps:function(){return{myActiveAccounts:o.a.getState().myActiveAccounts,searchAccounts:o.a.getState().searchAccounts,currentAccount:o.a.getState().currentAccount||o.a.getState().passwordAccount,settings:i.a.getState().settings,hiddenAssets:i.a.getState().hiddenAssets,wallet_locked:l.a.getState().locked,viewSettings:i.a.getState().viewSettings}}})}}]);"],"mappings":"AAAA","sourceRoot":""}