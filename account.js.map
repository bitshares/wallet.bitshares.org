{"version":3,"file":"account.06162b6fc0fb8fffbb96.js","sources":["webpack:///account.06162b6fc0fb8fffbb96.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[10,4],{1950:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return y}),a.d(t,\"a\",function(){return v});var n=a(0),s=a.n(n),r=a(1),o=a.n(r),i=a(6),l=a.n(i),c=a(27),u=a(23),p=a(25),d=a(11),m=a.n(d),h=a(2265),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function g(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return b(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,s.a.Component),f(t,[{key:\"render\",value:function(){var e=this.props,t=e.isActive,a=e.index,n=e.changeTab,r=e.title,o=e.className,i=e.updatedTab,c=e.disabled,u=e.subText,p=l()({\"is-active\":t},o);return\"string\"==typeof r&&r.indexOf(\".\")>0&&(r=m.a.translate(r)),this.props.collapsed?(\"string\"==typeof u&&(u=u.trim()),s.a.createElement(\"option\",{value:a,\"data-is-link-to\":this.props.isLinkTo},s.a.createElement(\"span\",{className:\"tab-title\"},r,i?\"*\":\"\",u&&\" (\",u&&u,u&&\")\"))):s.a.createElement(\"li\",{className:p,onClick:c?null:n.bind(this,a,this.props.isLinkTo)},s.a.createElement(\"a\",null,s.a.createElement(\"span\",{className:\"tab-title\"},r,i?\"*\":\"\"),u&&s.a.createElement(\"div\",{className:\"tab-subtext\"},u)))}}]),t}();v.propTypes={changeTab:o.a.func,isActive:o.a.bool.isRequired,index:o.a.number.isRequired,className:o.a.string,isLinkTo:o.a.string,subText:o.a.oneOfType([o.a.object,o.a.string])},v.defaultProps={isActive:!1,index:0,className:\"\",isLinkTo:\"\",subText:null};var y=function(e){function t(e){b(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},a._setDimensions=a._setDimensions.bind(a),a}return _(t,s.a.Component),f(t,[{key:\"componentDidMount\",value:function(){this._setDimensions(),window.addEventListener(\"resize\",this._setDimensions,{capture:!1,passive:!0})}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this._setDimensions)}},{key:\"_setDimensions\",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:\"_changeTab\",value:function(e,t){e!==this.state.activeTab&&(\"\"!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.children,n=t.contentClass,r=t.tabsClass,o=t.style,i=t.segmented,c=this.state.width<900&&s.a.Children.count(a)>2,u=null,p=s.a.Children.map(a,function(t,a){if(!t)return null;if(c&&t.props.disabled)return null;var n=a===e.state.activeTab;return n&&(u=t.props.children),s.a.cloneElement(t,{collapsed:c,isActive:n,changeTab:e._changeTab.bind(e),index:a})}).filter(function(e){return null!==e});return u||(u=p[0].props.children),s.a.createElement(\"div\",{className:l()(this.props.actionButtons?\"with-buttons\":\"\",this.props.className)},s.a.createElement(\"div\",{className:\"service-selector\"},s.a.createElement(\"ul\",{style:o,className:l()(\"button-group no-margin\",r,{segmented:i})},c?s.a.createElement(\"li\",{style:{paddingLeft:10,paddingRight:10,minWidth:\"15rem\"}},s.a.createElement(\"select\",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:\"bts-select\",onChange:function(t){var a=parseInt(t.target.value,10);e._changeTab(a,t.target[a].attributes[\"data-is-link-to\"].value)}},p)):p,this.props.actionButtons?s.a.createElement(\"li\",{className:\"tabs-action-buttons\"},this.props.actionButtons):null)),s.a.createElement(\"div\",{className:l()(\"tab-content\",n)},u))}}]),t}();y.propTypes={setting:o.a.string,defaultActiveTab:o.a.number,segmented:o.a.bool},y.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:\"\",style:{}},y=Object(c.a)(y,{listenTo:function(){return[p.a]},getProps:function(){return{viewSettings:p.a.getState().viewSettings}}}),y=Object(h.a)(y)},1951:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),r=a(1978),o=a.n(r),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),i(t,[{key:\"componentDidMount\",value:function(){this.enableAnimation()}},{key:\"resetAnimation\",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:\"enableAnimation\",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:\"componentWillUnmount\",value:function(){clearTimeout(this.timer),this.timer=null}},{key:\"render\",value:function(){return this.props.children?s.a.createElement(o.a,{id:this.props.id,className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):s.a.createElement(this.props.component)}}]),t}();l.defaultProps={component:\"span\",enterTimeout:2e3},t.a=l},1958:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return I}),a.d(t,\"b\",function(){return R});var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=a(350),l=a(561),c=a(41),u=a(49),p=a(15),d=a(10),m=a(1956),h=a.n(m),f=a(11),b=a.n(f),g=a(20),_=a(6),v=a.n(_),y=a(1),E=a.n(y),w=a(1964),k=a(1979),A=a.n(k),C=a(39),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function S(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function x(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function N(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=d.ChainTypes.operations,P={textAlign:\"left\"},T=Object.keys(j);function M(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}var I=function(e){function t(e){S(this,t);var a=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={limit:e.limit,fetchingAccountHistory:!1,headerHeight:85,filter:\"all\",accountHistoryError:!1},a}return N(t,s.a.Component),O(t,[{key:\"componentDidMount\",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;h.a.initialize(e),this._setHeaderHeight()}}},{key:\"_setHeaderHeight\",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:\"shouldComponentUpdate\",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.fetchingAccountHistory!==this.state.fetchingAccountHistory)return!0;for(var a=0;a<e.accountsList.length;++a){var n=e.accountsList[a],s=this.props.accountsList[a];if(n&&s&&n.get(\"history\")!==s.get(\"history\"))return!0}return!1}},{key:\"_onIncreaseLimit\",value:function(){this.setState({limit:this.state.limit+30})}},{key:\"_getHistory\",value:function(e,t,a){var n=[],s=new Set,r=!0,o=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(u){var p=u.get(\"history\");p&&(n=n.concat(p.toJS().filter(function(e){return!s.has(e.id)&&s.add(e.id)})))}}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return t&&(n=n.filter(function(e){return e.op[0]===j[t]})),a&&(n=n.filter(function(e){return a.fields.reduce(function(t,n){switch(n){case\"asset_id\":return t&&e.op[1].amount[n]===a.values[n];default:return t&&e.op[1][n]===a.values[n]}},!0)})),n}},{key:\"_generateCSV\",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(s,r){try{var o=t[s](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n(\"next\",e)},function(e){n(\"throw\",e)});e(i)}(\"next\")})}}(regeneratorRuntime.mark(function e(){var t,a,n,s,r,o,l,c,u,p,m,h,f,b,g,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({fetchingAccountHistory:!0}),t=0,a=150,n=this.props.accountsList[0].get(\"id\"),e.next=5,Object(d.FetchChain)(\"getAccount\",n);case 5:s=e.sent.get(\"name\"),r={};case 7:return e.next=10,A.a.getAccountHistoryES(n,a,t,\"https://wrapper.elasticsearch.bitshares.ws\");case 10:if((o=e.sent).length){e.next=13;break}return e.abrupt(\"break\",21);case 13:return e.next=15,A.a.resolveBlockTimes(o);case 15:return e.next=17,A.a.resolveAssets(o);case 17:o.map(function(e){var t=e.id,a=T[e.op[0]],n=e.op[1];r[t]={timestamp:new Date(e.block_time),type:a,data:n}}),t+=o.length,e.next=7;break;case 21:if(Object.keys(r).length){e.next=23;break}return e.abrupt(\"return\",this.setState({fetchingAccountHistory:!1,accountHistoryError:!0}));case 23:for(r=A.a.groupEntries(r),l=A.a.parseData(r,n,s),c=\"\",u=!0,p=!1,m=void 0,e.prev=29,h=l[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)b=f.value,c+=b.join(\",\")+\"\\n\";e.next=37;break;case 33:e.prev=33,e.t0=e.catch(29),p=!0,m=e.t0;case 37:e.prev=37,e.prev=38,!u&&h.return&&h.return();case 40:if(e.prev=40,!p){e.next=43;break}throw m;case 43:return e.finish(40);case 44:return e.finish(37);case 45:g=new Blob([c],{type:\"text/csv;charset=utf-8\"}),_=new Date,Object(i.saveAs)(g,\"btshist-\"+_.getFullYear()+\"-\"+(\"0\"+(_.getMonth()+1)).slice(-2)+\"-\"+(\"0\"+_.getDate()).slice(-2)+\"-\"+(\"0\"+_.getHours()).slice(-2)+(\"0\"+_.getMinutes()).slice(-2)+\".csv\"),this.setState({fetchingAccountHistory:!1,accountHistoryError:null});case 49:case\"end\":return e.stop()}},e,this,[[29,33,37,45],[38,,40,44]])}));return function(){return e.apply(this,arguments)}}()},{key:\"_onChangeFilter\",value:function(e){this.setState({filter:e.target.value})}},{key:\"render\",value:function(){var e=this.props,t=e.accountsList,a=e.compactView,n=e.filter,r=e.customFilter,i=e.style,c=e.maxHeight,u=this.state,p=u.limit,d=u.headerHeight,m=1===t.length&&t[0]?t[0].get(\"id\"):null,h=this._getHistory(t,this.props.showFilters&&\"all\"!==this.state.filter?this.state.filter:n,r).sort(M),f=h.length;i=i||{width:\"100%\",height:\"100%\"};var _=null;_=[\"all\",\"transfer\",\"limit_order_create\",\"limit_order_cancel\",\"fill_order\",\"account_create\",\"account_update\",\"asset_create\",\"witness_withdraw_pay\",\"vesting_balance_withdraw\"].map(function(e){return s.a.createElement(\"option\",{value:e,key:e},b.a.translate(\"transaction.trxTypes.\"+e))});var y=h.length?h.slice(0,p).map(function(e){return s.a.createElement(l.a,{includeOperationId:!0,operationId:e.id,style:P,key:e.id,op:e.op,result:e.result,txIndex:e.trx_in_block,block:e.block_num,current:m,hideFee:!1,inverted:!1,hideOpLabel:a,fullDate:!0})}):[s.a.createElement(\"tr\",{key:\"no_recent\"},s.a.createElement(\"td\",{colSpan:a?\"2\":\"3\"},s.a.createElement(o.a,{content:\"operation.no_recent\"})))],E=s.a.createElement(\"tr\",{className:\"total-value\",key:\"total_value\"},s.a.createElement(\"td\",{style:{textAlign:\"center\"}},f>0?s.a.createElement(\"span\",null,s.a.createElement(\"a\",{className:\"inline-block\",onClick:this._generateCSV.bind(this),\"data-tip\":b.a.translate(\"transaction.csv_tip\"),\"data-place\":\"bottom\"},s.a.createElement(g.a,{name:\"excel\",title:\"icons.excel\",className:\"icon-14px\"}))):null),s.a.createElement(\"td\",{className:\"column-hide-tiny\"}),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},\" \",this.props.showMore&&f>this.props.limit||p<f?s.a.createElement(\"a\",{onClick:this._onIncreaseLimit.bind(this)},s.a.createElement(g.a,{name:\"chevron-down\",title:\"icons.chevron_down.transactions\",className:\"icon-14px\"})):null),s.a.createElement(\"td\",null));return s.a.createElement(\"div\",{className:\"recent-transactions no-overflow\",style:i},s.a.createElement(\"div\",{className:\"generic-bordered-box\"},this.props.dashboard?null:s.a.createElement(\"div\",{ref:\"header\"},s.a.createElement(\"div\",{className:\"block-content-header\"},s.a.createElement(\"span\",null,this.props.title?this.props.title:s.a.createElement(o.a,{content:\"account.recent\"})))),s.a.createElement(\"div\",{className:\"header-selector\"},s.a.createElement(\"div\",{className:\"selector\"},s.a.createElement(\"div\",{className:v()(\"inline-block\")},this.props.showFilters?s.a.createElement(\"select\",{\"data-place\":\"left\",\"data-tip\":b.a.translate(\"tooltip.filter_ops\"),style:{paddingTop:5,width:\"auto\"},className:\"bts-select no-margin\",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},_):null)),this.state.accountHistoryError&&s.a.createElement(\"div\",{className:\"has-error\",style:{paddingLeft:\"0.75rem\"}},s.a.createElement(o.a,{content:\"account.history_error\"}))),s.a.createElement(\"div\",{className:\"box-content grid-block no-margin\",style:this.props.fullHeight?null:{maxHeight:c-d},ref:\"transactions\"},s.a.createElement(w.a,{withTransition:!0,className:\"table table-striped \"+(a?\"compact\":\"\")+(this.props.dashboard?\" dashboard-table table-hover\":\"\"),header:s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{className:\"column-hide-tiny\",style:P},s.a.createElement(o.a,{content:\"account.transactions.id\"})),s.a.createElement(\"th\",{className:\"column-hide-tiny\",style:P},s.a.createElement(o.a,{content:\"account.transactions.type\"})),s.a.createElement(\"th\",{style:P},s.a.createElement(o.a,{content:\"account.transactions.info\"})),s.a.createElement(\"th\",{style:P},s.a.createElement(o.a,{content:\"account.transactions.fee\"})),s.a.createElement(\"th\",null,s.a.createElement(o.a,{content:\"account.transactions.time\"}))),rows:y,label:\"utility.total_x_operations\",extraRow:E})),this.state.fetchingAccountHistory&&s.a.createElement(C.a,null)))}}]),t}();I.propTypes={accountsList:c.a.ChainAccountsList.isRequired,compactView:E.a.bool,limit:E.a.number,maxHeight:E.a.number,fullHeight:E.a.bool,showFilters:E.a.bool},I.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},I=Object(u.a)(I);var R=function(e){function t(){return S(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,s.a.Component),O(t,[{key:\"render\",value:function(){return s.a.createElement(\"span\",{className:\"wrapper\"},this.props.children(this.props))}}]),t}();R.propTypes={asset:c.a.ChainAsset.isRequired,to:c.a.ChainAccount.isRequired,fromAccount:c.a.ChainAccount.isRequired},R.defaultProps={asset:\"1.3.0\"},R=Object(u.a)(R)},1963:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=a(10),l=a(41),c=a(49),u=a(11),p=a.n(u),d=a(346),m=a(34),h=a(12),f=a.n(h),b=a(6),g=a.n(b),_=a(120),v=a(1),y=a.n(v),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function k(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function A(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){return w(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,s.a.Component),E(t,[{key:\"render\",value:function(){return 0!==this.props.assets.length&&this.props.value?s.a.createElement(d.a,{entries:this.props.assets.map(function(e){return e&&e.get(\"symbol\")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get(\"symbol\")&&(e[t.get(\"symbol\")]=t),e},{}),singleEntry:this.props.assets[0]?s.a.createElement(m.a,{asset:this.props.assets[0].get(\"id\"),amount:0,hide_amount:!0}):null,value:\"\",onChange:this.props.onChange}):null}}]),t}();C.propTypes={value:y.a.string,onChange:y.a.func},C=Object(_.a)(C,{asList:!0});var O=function(e){function t(){return w(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,s.a.Component),E(t,[{key:\"getAsset\",value:function(){return this.props.asset}},{key:\"getError\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=p.a.translate(\"explorer.asset.invalid\",{name:e})),t}},{key:\"getNameType\",value:function(e){return e?i.ChainValidation.is_valid_symbol_error(e,!0)?null:\"symbol\":null}},{key:\"onInputChanged\",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:\"componentDidMount\",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:\"componentWillReceiveProps\",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:\"onFound\",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:\"onAssetSelect\",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get(\"symbol\")))}},{key:\"onAction\",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:\"render\",value:function(){var e=this.props,t=e.disabled,a=e.noLabel,n=this.getError(),r=void 0;t||(this.props.asset?r=this.props.asset.get(\"symbol\"):!n&&this.props.assetInput&&(n=p.a.translate(\"explorer.asset.not_found\",{name:this.props.assetInput})));var i=g()(\"button\",{disabled:!this.props.asset||n||this.props.disableActionButton});return s.a.createElement(\"div\",{className:\"asset-selector\",style:this.props.style},s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"header-area\"},n||a?null:s.a.createElement(\"label\",{className:\"right-label\"},\"  \",s.a.createElement(\"span\",null,r)),s.a.createElement(o.a,{component:\"label\",content:this.props.label})),s.a.createElement(\"div\",{className:\"input-area\"},s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{style:this.props.inputStyle,disabled:this.props.disabled,type:\"text\",value:this.props.assetInput||\"\",placeholder:this.props.placeholder||p.a.translate(\"explorer.assets.symbol\"),ref:\"user_input\",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),s.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},this.props.asset?s.a.createElement(C,{ref:this.props.refCallback,value:this.props.asset.get(\"symbol\"),assets:f.a.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?s.a.createElement(\"button\",{className:i,onClick:this.onAction.bind(this)},s.a.createElement(o.a,{content:this.props.action_label})):null)),s.a.createElement(\"div\",{className:\"error-area\",style:{paddingBottom:\"10px\"}},s.a.createElement(\"span\",{style:{wordBreak:\"break-all\"}},n))))}}]),t}();O.propTypes={label:y.a.string,error:y.a.string,placeholder:y.a.string,onChange:y.a.func,onFound:y.a.func,assetInput:y.a.string,asset:l.a.ChainAsset,tabIndex:y.a.number,disableActionButton:y.a.bool},O.defaultProps={disabled:!1},t.a=Object(c.a)(O)},1964:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),r=a(277),o=a(11),i=a.n(o),l=a(1951),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={page:1,pageSize:e.pageSize},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),c(t,[{key:\"onChange\",value:function(e,t){this.setState({page:e,pageSize:t})}},{key:\"render\",value:function(){var e=this,t=this.state,a=t.page,n=t.pageSize,o=this.props,c=o.header,u=o.rows,p=o.extraRow,d=u.length,m=h(a,n);function h(e,t){for(var a=[],n=(e-1)*t;n<Math.min(d,e*t);n++)a.push(u[n]);return a}return!m.length&&d&&(m=h(1,n)),s.a.createElement(\"div\",{className:\"grid-content\",style:this.props.style},s.a.createElement(\"table\",{className:this.props.className},c?s.a.createElement(\"thead\",null,c):null,this.props.withTransition&&1===a?s.a.createElement(l.a,{component:\"tbody\",transitionName:\"newrow\"},m,p):s.a.createElement(\"tbody\",null,m,p)),d>n?s.a.createElement(r.a,{style:{paddingTop:\"1rem\",paddingBottom:\"1rem\",paddingLeft:this.props.leftPadding||null},total:d,showTotal:function(t){return i.a.translate(e.props.label,{count:t})},pageSize:n,current:a,onChange:this.onChange.bind(this)}):null,this.props.children)}}]),t}();u.defaultProps={rows:[],pageSize:15,label:\"utility.total_x_items\",className:\"table\",extraRow:null,style:{paddingBottom:\"1rem\"}},t.a=u},1966:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return S}),a.d(t,\"a\",function(){return x});var n=a(0),s=a.n(n),r=a(34),o=a(41),i=a(49),l=a(120),c=a(15),u=a(27),p=a(174),d=a(3),m=a.n(d),h=a(11),f=a.n(h),b=a(57),g=a.n(b),_=a(559),v=a(64),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function w(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function k(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function A(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function C(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(e){return k(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return C(t,_[\"a\"]),E(t,[{key:\"componentDidMount\",value:function(){g.a.rebuild()}},{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if(\"value\"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||!c.a.are_equal_shallow(e.pulsate,this.props.pulsate)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:\"getValue\",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,s=e.fullPrecision,r=e.allMarketStats,o=e.coreAsset;return v.a.convertValue(t,a,n,r,o,s)}},{key:\"render\",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,o=e.fullPrecision,i=w(e,[\"amount\",\"toAsset\",\"fromAsset\",\"fullPrecision\"]),l=a.get(\"id\"),u=a.get(\"symbol\");o||(t=c.a.get_asset_amount(t,n));var p=this.getValue();return p||0===p?s.a.createElement(r.a,y({noPrefix:!0,amount:p,asset:l,decimalOffset:-1!==u.indexOf(\"BTC\")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get(\"precision\"):a.get(\"precision\")-2},i)):s.a.createElement(\"div\",{className:\"tooltip inline-block\",\"data-place\":\"bottom\",\"data-tip\":f.a.translate(\"tooltip.no_price\"),style:{fontSize:\"0.9rem\"}},s.a.createElement(m.a,{content:\"account.no_price\"}))}}]),t}();O.defaultProps={fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1},O=Object(l.a)(O,{propNames:[\"toAsset\",\"fromAsset\",\"coreAsset\"],defaultProps:{toAsset:\"1.3.0\",coreAsset:\"1.3.0\"}});var S=function(e){function t(){return k(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,s.a.Component),E(t,[{key:\"render\",value:function(){var e=this.props,t=e.refCallback,a=w(e,[\"refCallback\"]);return s.a.createElement(O,y({},a,{ref:t}))}}]),t}();S=Object(u.a)(S,{listenTo:function(){return[p.a]},getProps:function(){return{allMarketStats:p.a.getState().allMarketStats}}});var x=function(e){function t(){return k(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,s.a.Component),E(t,[{key:\"render\",value:function(){var e=this.props,t=e.balance,a=w(e,[\"balance\"]),n=!!t.getIn([\"balance\",\"amount\"]),r=Number(n?t.getIn([\"balance\",\"amount\"]):t.get(\"balance\")),o=n?t.getIn([\"balance\",\"asset_id\"]):t.get(\"asset_type\");return isNaN(r)?s.a.createElement(\"span\",null,\"--\"):s.a.createElement(S,y({amount:r,fromAsset:o,noDecimals:!0},a))}}]),t}();x.propTypes={balance:o.a.ChainObject.isRequired},x=Object(i.a)(x,{keep_updating:!0})},1974:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),r=a(15),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),o(t,[{key:\"render\",value:function(){var e=this.props,t=e.price,a=e.preFormattedPrice,n=e.quote,o=e.base;if(!t&&!a)return null;var i=a||r.a.price_to_text(t,n,o);return i.full>=1?s.a.createElement(\"span\",null,s.a.createElement(\"span\",{className:\"price-integer\"},i.int,\".\"),i.dec?s.a.createElement(\"span\",{className:\"price-integer\"},i.dec):null,i.trailing?s.a.createElement(\"span\",{className:\"price-decimal\"},i.trailing):null):i.full>=.1?s.a.createElement(\"span\",null,s.a.createElement(\"span\",{className:\"price-decimal\"},i.int,\".\"),i.dec?s.a.createElement(\"span\",{className:\"price-integer\"},i.dec):null,i.trailing?s.a.createElement(\"span\",{className:\"price-decimal\"},i.trailing):null):s.a.createElement(\"span\",null,s.a.createElement(\"span\",{className:\"price-decimal\"},i.int,\".\"),i.dec?s.a.createElement(\"span\",{className:\"price-decimal\"},i.dec):null,i.trailing?s.a.createElement(\"span\",{className:\"price-integer\"},i.trailing):null)}}]),t}();t.a=i},1986:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return v}),a.d(t,\"b\",function(){return g});var n=a(0),s=a.n(n),r=a(120),o=a(6),i=a.n(o),l=a(174),c=a(27),u=a(15),p=a(144),d=a(64),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function h(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function f(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function b(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(e){h(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var n=d.a.getMarketName(e.base,e.quote).marketName;return a.state={marketName:n},a}return b(t,s.a.Component),m(t,[{key:\"_checkStats\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!u.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!u.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:\"shouldComponentUpdate\",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketName),this.props.allMarketStats.get(this.state.marketName))||e.base.get(\"id\")!==this.props.base.get(\"id\")||e.quote.get(\"id\")!==this.props.quote.get(\"id\")}},{key:\"componentWillUnmount\",value:function(){this.statsInterval&&this.statsInterval()}}]),t}(),_=function(e){function t(e){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return b(t,g),m(t,[{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if(\"value\"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)}},{key:\"render\",value:function(){var e=this.props.allMarketStats,t=this.state.marketName,a=e.get(t),n=a&&a.price?a.price:null;return s.a.createElement(\"span\",{className:i()(\"\",this.props.className)},n?s.a.createElement(p.a,{base_amount:n.base.amount,base_asset:n.base.asset_id,quote_amount:n.quote.amount,quote_asset:n.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):\"n/a\")}}]),t}();_=Object(r.a)(_,{propNames:[\"quote\",\"base\"]});var v=function(e){function t(){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,s.a.Component),m(t,[{key:\"render\",value:function(){return s.a.createElement(_,this.props)}}]),t}();v=Object(c.a)(v,{listenTo:function(){return[l.a]},getProps:function(){return{allMarketStats:l.a.getState().allMarketStats}}})},1988:function(e,t,a){\"use strict\";var n=a(1999),s=a(0),r=a.n(s),o=a(1),i=a.n(o),l=a(131),c=a.n(l),u=(a(828),a(829),a(3)),p=a.n(u),d=a(41),m=a(57),h=a.n(m),f=a(49),b=a(34),g=a(15),_=a(6),v=a.n(_),y=a(313),E=a(344),w=a(98),k=a(19),A=a(144),C=a(11),O=a.n(C),S=a(555),x=a(12),N=a.n(x),j=a(10),P=a(20),T=a(16),M=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function I(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function R(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function B(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q=function(e){function t(e){I(this,t);var a=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a._initialState(e),a._onSubmit=a._onSubmit.bind(a),a}return B(t,r.a.Component),M(t,[{key:\"_initialState\",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var a=g.a.get_asset_amount(t.debt,e.quote_asset),n=g.a.get_asset_amount(t.collateral,e.backing_asset),s=isNaN(t.target_collateral_ratio)?0:t.target_collateral_ratio/1e3;return{short_amount:a?a.toString():null,collateral:n?n.toString():null,collateral_ratio:this._getCollateralRatio(a,n),target_collateral_ratio:s,errors:this._getInitialErrors(),isValid:!1,useTargetCollateral:s>0,original_position:{debt:a,collateral:n,target_collateral_ratio:s}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),target_collateral_ratio:0,errors:this._getInitialErrors(),isValid:!1,useTargetCollateral:!1,original_position:{debt:0,collateral:0}}}},{key:\"componentDidUpdate\",value:function(){h.a.rebuild()}},{key:\"componentDidMount\",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:\"shouldComponentUpdate\",value:function(e,t){return!(this.props.visible===e.visible&&g.a.are_equal_shallow(t,this.state)&&N.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get(\"symbol\")!==this.props.backing_asset.get(\"symbol\")&&N.a.is(e.account,this.props.account)&&N.a.is(e.call_orders,this.props.call_orders))}},{key:\"componentWillReceiveProps\",value:function(e){var t=this.state,a=t.short_amount,n=t.collateral,s=t.collateral_ratio;if(e.account!==this.props.account||e.hasCallOrders!==this.props.hasCallOrders||e.quote_asset.get(\"id\")!==this.props.quote_asset.get(\"id\")){var r=this._initialState(e),o=!1;(a||n||s)&&(r.short_amount=a,r.collateral=n,r.collateral_ratio=s,o=!0),this.setState(r),o&&this._validateFields(r)}}},{key:\"_getInitialErrors\",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:\"_getMaintenanceRatio\",value:function(){return this.props.quote_asset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"])/1e3}},{key:\"confirmClicked\",value:function(e){e.preventDefault(),c.a.publish(this.props.modalId,\"close\")}},{key:\"toggleLockedCR\",value:function(e){e.preventDefault(),this.setState({lockedCR:!this.state.lockedCR})}},{key:\"_onBorrowChange\",value:function(e){var t=this._getFeedPrice(),a=e.amount.replace(/,/g,\"\"),n={short_amount:a,collateral:(this.state.collateral_ratio*(a/t)).toFixed(this.props.backing_asset.get(\"precision\")),collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:\"_onCollateralChange\",value:function(e){var t=e.amount.replace(/,/g,\"\"),a=this._getFeedPrice(),s=t/(this.state.short_amount/a),r=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(n.a)(s)?s:this._getInitialCollateralRatio(this.props)};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:\"_onTargetRatioChange\",value:function(e){var t=e.target;new RegExp(/[[:digit:]]/).test(t.value)||(t.value=t.value.replace(/[^0-9.]/g,\"\"));var a=t.value;this.setState({target_collateral_ratio:a})}},{key:\"_onRatioChange\",value:function(e){var t=this._getFeedPrice(),a=e.target;new RegExp(/[[:digit:]]/).test(a.value)||(a.value=a.value.replace(/[^0-9.]/g,\"\"));var n=a.value,s=void 0,r=void 0;this.state.lockedCR?(s=(this.state.collateral*t/n).toFixed(this.props.backing_asset.get(\"precision\")),r=this.state.collateral):(s=this.state.short_amount,r=(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get(\"precision\")));var o={short_amount:s,collateral:r,collateral_ratio:n};this.setState(o),this._validateFields(o),this._setUpdatedPosition(o)}},{key:\"_maximizeCollateral\",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=g.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=Math.floor(Math.min(this.props.backing_balance.get(\"balance\")/g.a.get_asset_precision(this.props.backing_asset)+t-10,this.state.short_amount/this._getFeedPrice()*1e3));this._onCollateralChange(new Object({amount:a.toString()}))}},{key:\"_maximizeDebt\",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=g.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=this.props.backing_balance.get(\"balance\")/g.a.get_asset_precision(this.props.backing_asset)+t-10,n={short_amount:a/this.state.collateral_ratio*this._getFeedPrice(),collateral:a,collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:\"_payDebt\",value:function(){var e=this.props?this._getCurrentPosition(this.props):{debt:0};if(!(e.debt<=0)){var t=g.a.get_asset_amount(Math.max(e.debt-this.props.bitasset_balance.get(\"balance\"),0),this.props.quote_asset);this._onBorrowChange({amount:t.toString()})}}},{key:\"_setUpdatedPosition\",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:\"_validateFields\",value:function(e){var t=this._getInitialErrors(),a=this.state.original_position,n=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0},s=this._getMaintenanceRatio(),r=this._getCollateralRatio(a.debt,a.collateral),o=a.collateral>0&&r<s;parseFloat(e.collateral)-a.collateral>g.a.get_asset_amount(n.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=O.a.translate(\"borrow.errors.collateral\")),o&&e.short_amount>a.debt?t.below_maintenance=O.a.translate(\"borrow.errors.increased_debt_on_margin_call\"):o&&parseFloat(e.collateral_ratio)<=parseFloat(r)?t.below_maintenance=O.a.translate(\"borrow.errors.below_ratio_mcr_update\",{ocr:r.toFixed(4)}):!o&&parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:s)?t.below_maintenance=O.a.translate(\"borrow.errors.below\",{mr:s}):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:s+.5)&&(t.close_maintenance=O.a.translate(\"borrow.errors.close\",{mr:s})),this.setState({errors:t})}},{key:\"_onSubmit\",value:function(e){e.preventDefault(),this.props.hideModal();var t=g.a.get_asset_precision(this.props.quote_asset.get(\"precision\")),a=g.a.get_asset_precision(this.props.backing_asset.get(\"precision\")),n=this._getCurrentPosition(this.props),s=!1;!!(void 0!==this.state.target_collateral_ratio&&this.state.target_collateral_ratio>0&&this.state.useTargetCollateral)&&(s={target_collateral_ratio:parseInt(1e3*this.state.target_collateral_ratio,10)});var r=w.a.new_transaction();s?r.add_type_operation(\"call_order_update\",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get(\"id\"),delta_collateral:{amount:parseInt(this.state.collateral*a-n.collateral,10),asset_id:this.props.backing_asset.get(\"id\")},delta_debt:{amount:parseInt(this.state.short_amount*t-n.debt,10),asset_id:this.props.quote_asset.get(\"id\")},extensions:s}):r.add_type_operation(\"call_order_update\",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get(\"id\"),delta_collateral:{amount:parseInt(this.state.collateral*a-n.collateral,10),asset_id:this.props.backing_asset.get(\"id\")},delta_debt:{amount:parseInt(this.state.short_amount*t-n.debt,10),asset_id:this.props.quote_asset.get(\"id\")}}),k.a.process_transaction(r,null,!0).catch(function(e){}),c.a.publish(this.props.modalId,\"close\")}},{key:\"_getCurrentPosition\",value:function(e){var t={collateral:null,debt:null};return e&&e.hasCallOrders&&e.call_orders&&(t=(t=e.call_orders.filter(function(e){return!!e}).find(function(t){return t.getIn([\"call_price\",\"quote\",\"asset_id\"])===e.quote_asset.get(\"id\")}))?t.toJS():{collateral:null,debt:null}),t}},{key:\"_getFeedPrice\",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/g.a.get_asset_price(this.props.quote_asset.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"quote\",\"amount\"]),this.props.backing_asset,this.props.quote_asset.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"base\",\"amount\"]),this.props.quote_asset):1}},{key:\"_getInitialCollateralRatio\",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:\"_getCollateralRatio\",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:\"_isPredictionMarket\",value:function(e){return e.quote_asset.getIn([\"bitasset\",\"is_prediction_market\"])}},{key:\"_setUseTargetCollateral\",value:function(){this.setState({useTargetCollateral:!this.state.useTargetCollateral})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.quote_asset,n=t.bitasset_balance,s=t.backing_asset,o=t.backing_balance,i=this.state,l=i.short_amount,c=i.collateral,u=i.collateral_ratio,d=i.target_collateral_ratio,m=i.errors,h=i.original_position,f=i.useTargetCollateral,_=g.a.get_asset_precision(this.props.quote_asset.get(\"precision\")),w=g.a.get_asset_precision(this.props.backing_asset.get(\"precision\"));u&&!isNaN(u)&&u>0&&u<1e3||(u=0),n=n?n.toJS():{balance:0,id:null},o=o?o.toJS():{balance:0,id:null};var k=v()(\"form-group\",{\"has-error\":m.collateral_balance}),C=v()(\"form-group\",{\"has-error\":m.below_maintenance},{\"has-warning\":m.close_maintenance}),x=this._getCurrentPosition(this.props),N=o.id?j.ChainStore.getObject(o.id):null,M=(N?N.get(\"balance\"):0)-parseInt(this.state.collateral*w-x.collateral,10),I=r.a.createElement(\"span\",null,r.a.createElement(\"span\",null,r.a.createElement(p.a,{component:\"span\",content:\"transfer.available\"}),\":\",\" \",n.id?r.a.createElement(E.a,{balance:n.id}):r.a.createElement(b.a,{amount:0,asset:a.get(\"id\")})),r.a.createElement(\"a\",{onClick:this._payDebt.bind(this)},r.a.createElement(p.a,{content:\"borrow.pay_max_debt\"})),\"|\",0!=u?r.a.createElement(\"a\",{onClick:this._maximizeDebt.bind(this)},r.a.createElement(p.a,{content:\"borrow.use_max\"})):r.a.createElement(\"span\",{className:\"disabled-link\",\"data-place\":\"left\",\"data-tip\":O.a.translate(\"borrow.maximize_debt_set_ratio_slider\")},r.a.createElement(p.a,{content:\"borrow.use_max\"}))),R=r.a.createElement(\"span\",null,r.a.createElement(\"span\",null,r.a.createElement(p.a,{component:\"span\",content:\"transfer.available\"}),\":\",\" \",o.id?r.a.createElement(b.a,{amount:M,asset:s.get(\"id\")}):r.a.createElement(b.a,{amount:0,asset:s.get(\"id\")})),r.a.createElement(\"a\",{onClick:this._maximizeCollateral.bind(this)},r.a.createElement(p.a,{content:\"borrow.use_max\"}))),B=this._getFeedPrice(),q=this._getMaintenanceRatio(),D=(this.props.quote_asset.getIn([\"bitasset\",\"current_feed\",\"maximum_short_squeeze_ratio\"]),this._isPredictionMarket(this.props)),F=h.collateral>0&&this._getCollateralRatio(h.debt,h.collateral)<q,V=r.a.createElement(\"div\",null,r.a.createElement(\"form\",{className:\"grid-container text-center no-overflow\",noValidate:!0},r.a.createElement(p.a,{component:\"h3\",content:\"borrow.no_valid\",asset_symbol:a.get(\"symbol\")}))),L=[];return!D&&isNaN(B)?L.push(r.a.createElement(T.Button,{onClick:this.props.hideModal},O.a.translate(\"account.perm.cancel\"))):(L.push(r.a.createElement(T.Button,{key:\"submit\",type:\"primary\",onClick:this._onSubmit},O.a.translate(\"borrow.adjust\"))),L.push(r.a.createElement(T.Button,{key:\"cancel\",onClick:function(){e.props.hideModal(),e.setState(e._initialState(e.props))}},O.a.translate(\"wallet.reset\")))),r.a.createElement(T.Modal,{title:O.a.translate(\"borrow.title\",{asset_symbol:a.get(\"symbol\")}),visible:this.props.visible,onCancel:this.props.hideModal,footer:L},!D&&isNaN(B)?V:r.a.createElement(\"div\",null,r.a.createElement(\"form\",{className:\"grid-container small-10 small-offset-1 no-overflow\",noValidate:!0},r.a.createElement(\"div\",{style:{textAlign:\"left\"}},this.props.hide_help?null:r.a.createElement(S.a,{path:\"components/\"+(D?\"BorrowModalPrediction\":\"BorrowModal\"),debt:a.get(\"symbol\"),collateral:s.get(\"symbol\"),borrower:this.props.account.get(\"name\"),mr:q}),F?r.a.createElement(p.a,{component:\"h6\",className:\"has-warning\",content:\"borrow.errors.below_info\"}):null,D?null:r.a.createElement(\"div\",{style:{paddingTop:\"1rem\",paddingBottom:\"1rem\"}},r.a.createElement(\"div\",{className:\"borrow-price-feeds\"},r.a.createElement(\"span\",{className:\"borrow-price-label\"},r.a.createElement(p.a,{content:\"transaction.feed_price\"}),\": \"),r.a.createElement(A.a,{noPopOver:!0,quote_amount:a.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"base\",\"amount\"]),quote_asset:a.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"base\",\"asset_id\"]),base_asset:a.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"quote\",\"asset_id\"]),base_amount:a.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"quote\",\"amount\"])})),r.a.createElement(\"b\",null),r.a.createElement(\"div\",{className:\"borrow-price-final \"+(m.below_maintenance?\"has-error\":m.close_maintenance?\"has-warning\":\"\")},r.a.createElement(\"span\",{className:\"borrow-price-label\"},r.a.createElement(p.a,{content:\"exchange.your_price\"}),\": \"),this.state.newPosition?r.a.createElement(A.a,{noPopOver:!0,quote_amount:q*this.state.short_amount*_,quote_asset:a.get(\"id\"),base_asset:s.get(\"id\"),base_amount:this.state.collateral*w}):null)),r.a.createElement(\"div\",{className:\"form-group\"},r.a.createElement(\"span\",{style:{position:\"absolute\",left:20}},r.a.createElement(P.a,{onClick:this.toggleLockedCR.bind(this),name:this.state.lockedCR?\"unlocked\":\"locked\",size:\"1_5x\",style:{position:\"relative\",top:-10}})),r.a.createElement(y.a,{label:\"transaction.borrow_amount\",amount:l.toString(),onChange:this._onBorrowChange.bind(this),asset:a.get(\"id\"),assets:[a.get(\"id\")],display_balance:I,placeholder:\"0.0\",tabIndex:1})),r.a.createElement(\"div\",{className:k},r.a.createElement(\"span\",{style:{position:\"absolute\",left:20}},r.a.createElement(P.a,{onClick:this.toggleLockedCR.bind(this),name:this.state.lockedCR?\"locked\":\"unlocked\",size:\"1_5x\",style:{position:\"relative\",top:-10}})),r.a.createElement(y.a,{label:\"transaction.collateral\",amount:c.toString(),onChange:this._onCollateralChange.bind(this),asset:s.get(\"id\"),assets:[s.get(\"id\")],display_balance:R,placeholder:\"0.0\",tabIndex:1}),m.collateral_balance?r.a.createElement(\"div\",{className:\"float-left\",style:{paddingTop:5}},m.collateral_balance):null),D?null:r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:C,style:{marginBottom:\"3.5rem\"}},r.a.createElement(p.a,{component:\"label\",content:\"borrow.coll_ratio\"}),r.a.createElement(\"span\",null,r.a.createElement(\"input\",{value:0==u?\"\":u,onChange:this._onRatioChange.bind(this),type:\"text\",style:{width:\"12%\",float:\"right\",marginTop:-10}}),r.a.createElement(\"input\",{style:{width:\"85%\"},min:\"0\",max:\"6\",step:\"0.01\",onChange:this._onRatioChange.bind(this),value:u,type:\"range\"})),m.below_maintenance||m.close_maintenance?r.a.createElement(\"div\",{style:{height:\"1em\",maxWidth:\"85%\"},className:\"float-left\"},m.below_maintenance,m.close_maintenance):null),r.a.createElement(\"div\",{className:\"form-group\",style:{marginBottom:\"3.5rem\"}},r.a.createElement(\"span\",null,r.a.createElement(\"label\",null,r.a.createElement(p.a,{content:\"borrow.target_collateral_ratio\"}),\"  \",r.a.createElement(\"span\",{\"data-place\":\"top\",\"data-html\":!0,\"data-tip\":O.a.translate(\"tooltip.target_collateral_ratio\")},r.a.createElement(P.a,{name:\"question-circle\",title:\"icons.question_circle\"}))),f?r.a.createElement(\"span\",null,r.a.createElement(\"div\",{style:{marginBottom:\"1em\"}},r.a.createElement(T.Checkbox,{onClick:this._setUseTargetCollateral.bind(this),checked:!0},r.a.createElement(p.a,{content:\"borrow.enable_target_collateral_ratio\"}))),r.a.createElement(\"span\",null,r.a.createElement(\"input\",{value:isNaN(d)?\"0\":d,onChange:this._onTargetRatioChange.bind(this),type:\"text\",style:{float:\"right\",marginTop:-10,width:\"12%\"}}),r.a.createElement(\"input\",{style:{width:\"85%\"},min:\"0\",max:\"6\",step:\"0.01\",onChange:this._onTargetRatioChange.bind(this),value:isNaN(d)?\"0\":d,type:\"range\"}))):r.a.createElement(\"div\",{style:{marginBottom:\"1em\"}},r.a.createElement(T.Checkbox,{onClick:this._setUseTargetCollateral.bind(this)},r.a.createElement(p.a,{content:\"borrow.enable_target_collateral_ratio\"}))))))))))}}]),t}();q.propTypes={quote_asset:d.a.ChainAsset.isRequired,bitasset_balance:d.a.ChainObject,backing_asset:d.a.ChainAsset.isRequired,backing_balance:d.a.ChainObject,call_orders:d.a.ChainObjectsList,hasCallOrders:i.a.bool},q=Object(f.a)(q);var D=function(e){function t(){I(this,t);var e=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1,open:!1},e}return B(t,r.a.Component),M(t,[{key:\"show\",value:function(){this.props.showModal()}},{key:\"componentWillMount\",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:\"render\",value:function(){var e=this.props,t=e.quote_asset,a=e.backing_asset,n=e.account,s=n.get(\"balances\").toJS(),o=void 0,i=void 0;if(s)for(var l in s)l===a&&(o=s[l]),l===t&&(i=s[l]);return r.a.createElement(q,{visible:this.props.visible,hideModal:this.props.hideModal,showModal:this.props.showModal,quote_asset:t,call_orders:n.get(\"call_orders\",Object(x.List)()).toList(),hasCallOrders:n.get(\"call_orders\")&&n.get(\"call_orders\").size>0,modalId:this.props.modalId,bitasset_balance:i,backing_balance:o,backing_asset:a,hide_help:this.state.smallScreen,account:n})}}]),t}();t.a=D},2000:function(e,t,a){\"use strict\";(function(e){var n=a(314),s=a(0),r=a.n(s),o=a(131),i=a.n(o),l=(a(828),a(3)),c=a.n(l),u=a(31),p=a(15),d=a(49),m=a(41),h=a(38),f=a(57),b=a.n(f),g=a(11),_=a.n(g),v=a(80),y=a(125),E=a(20),w=a(39),k=a(143),A=a(105),C=a(10),O=a(270),S=a(42),x=a(40),N=a(16),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},P=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function T(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function M(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function I(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(t){function a(e){T(this,a);var t=M(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={toAddress:v.a.getLast(e.walletType),withdrawValue:\"\",amountError:null,symbol:e.asset.get(\"symbol\"),to_withdraw:new u.a({asset_id:e.asset.get(\"id\"),precision:e.asset.get(\"precision\")}),fee_asset_id:\"1.3.0\",feeStatus:{},loading:!1,emptyAddressDeposit:!1},t._validateAddress(t.state.toAddress,e),t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t}return I(a,O[\"a\"]),P(a,[{key:\"componentWillMount\",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillReceiveProps\",value:function(e){e.asset&&this.props.asset&&e.asset.get(\"id\")!==this.props.asset.get(\"id\")&&this.setState({to_withdraw:new u.a({asset_id:e.asset.get(\"id\"),precision:e.asset.get(\"precision\")}),gateFee:e.asset.get(\"gateFee\"),intermediateAccount:e.asset.get(\"intermediateAccount\"),symbol:e.asset.get(\"symbol\"),memo:\"\",withdrawValue:\"\",receive_address:null,toAddress:v.a.getLast(e.walletType)},this._getDepositAddress)}},{key:\"_getDepositAddress\",value:function(){if(this.props.backingCoinType){var e=Object(v.j)({coin:\"open.\"+this.props.backingCoinType.toLowerCase(),account:this.props.account,stateCallback:this.addDepositAddress});e?this.setState({receive_address:e}):Object(v.l)(this._getDepositObject())}}},{key:\"_getDepositObject\",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get(\"name\"),stateCallback:this.addDepositAddress}}},{key:\"requestDepositAddressLoad\",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(v.l)(this._getDepositObject())}},{key:\"addDepositAddress\",value:function(e){e.error&&(\"no_address\"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e,loading:!1})}},{key:\"componentDidUpdate\",value:function(){b.a.rebuild()}},{key:\"onSubmit\",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:\"transfer.errors.pos\"});if(this.props.intermediateAccount){var a=this._getFee(),n=this._getGateFee(),s=this.state.to_withdraw.clone(),r=s.clone(this._getCurrentBalance().get(\"balance\"));s.plus(n),r.lt(s)&&(s=this.state.to_withdraw.clone()),h.a.transfer(this.props.sender.get(\"id\"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+\":\"+this.state.toAddress+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,a.asset_id)}}},{key:\"_updateAmount\",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),a=new u.a({amount:t?t.get(\"balance\"):0,asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});a.asset_id===e.asset_id&&a.minus(e),this.state.to_withdraw.setAmount({sats:a.getAmount()}),this.setState({withdrawValue:a.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var a=[\"1.3.0\",this.state.to_withdraw.asset_id],n={},s=[];a.forEach(function(a){s.push(Object(k.b)({accountID:t.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.backingCoinType.toLowerCase()+\":\"+e.state.toAddress+(e.state.memo?\":\"+e.state.memo:\"\")}}))}),Promise.all(s).then(function(t){a.forEach(function(e,a){n[e]=t[a]}),p.a.are_equal_shallow(e.state.feeStatus,n)||e.setState({feeStatus:n}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(k.b)({accountID:this.props.sender.get(\"id\"),feeID:t,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.backingCoinType.toLowerCase()+\":\"+this.state.toAddress+(this.state.memo?\":\"+this.state.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkFeeStatus)})}},{key:\"_getCurrentBalance\",value:function(){var e=this,t=this.props.balance?[this.props.balance]:this.props.balances;return t?t.find(function(t){return t&&t.get(\"asset_type\")===e.props.asset.get(\"id\")}):null}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.to_withdraw,n=this.props.asset,s=this._getCurrentBalance();if(s&&t){var r=Object(k.a)(a.getAmount({real:!0}),n,this._getFee(),s,this._getGateFee());if(null!==r)return this.state.balanceError!==!r&&this.setState({balanceError:!r}),r}}},{key:\"_getFee\",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus[\"1.3.0\"],a=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&a&&a.hasBalance?a.fee:t?t.fee:e}},{key:\"_onInputAmount\",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error(\"err:\",e)}}},{key:\"_onInputTo\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:\"_onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(v.m)({url:S.g.BASE,walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!a})}).catch(function(e){console.error(\"Error when validating address:\",e)})}},{key:\"_openRegistrarSite\",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,\"_blank\").opener=null}},{key:\"_getGateFee\",value:function(){var e=this.props,t=e.gateFee,a=e.asset;return new u.a({real:parseFloat(t?t.replace(\",\",\"\"):0),asset_id:a.get(\"id\"),precision:a.get(\"precision\")})}},{key:\"_renderWithdraw\",value:function(){var e=this.state.amountError,t=p.a.replaceName(this.props.asset).name,a=1,n=this.props.supportsMemos,s=this._getFee(),o=this._getGateFee(),i=this.state.feeStatus[s.asset_id],l=C.ChainStore.getAsset(s.asset_id),u=i&&!i.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return r.a.createElement(\"div\",null,r.a.createElement(\"p\",null,r.a.createElement(c.a,{content:\"gateway.withdraw_funds\",asset:t,wallet_name:Object(x.l)()})),this._renderCurrentBalance(),r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\"},r.a.createElement(\"label\",{className:\"left-label\"},_.a.translate(\"modal.withdraw.amount\")),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{tabIndex:a++,type:\"number\",min:\"0\",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},r.a.createElement(\"div\",null,t)))),e?r.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},r.a.createElement(c.a,{content:e})):null,this.state.balanceError?r.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},r.a.createElement(c.a,{content:\"transfer.errors.insufficient\"})):null),r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\"},r.a.createElement(\"label\",{className:\"left-label\"},_.a.translate(\"transfer.fee\")),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{type:\"text\",disabled:!0,value:s.getAmount({real:!0})}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},r.a.createElement(\"div\",null,l?r.a.createElement(A.a,{name:l.get(\"symbol\")}):null)))),i&&!i.hasBalance?r.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},r.a.createElement(c.a,{content:\"transfer.errors.insufficient\"})):null),r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\"},r.a.createElement(\"label\",{className:\"left-label\"},_.a.translate(\"gateway.fee\")),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{type:\"text\",disabled:!0,value:o.getAmount({real:!0})}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},r.a.createElement(\"div\",null,r.a.createElement(A.a,{name:this.props.asset.get(\"symbol\")}))))),i&&!i.hasBalance?r.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},r.a.createElement(c.a,{content:\"transfer.errors.insufficient\"})):null),r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\"},r.a.createElement(\"label\",{className:\"left-label\"},_.a.translate(\"modal.withdraw.address\")),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{placeholder:_.a.translate(\"gateway.withdraw_placeholder\",{asset:t}),tabIndex:a++,type:\"text\",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},r.a.createElement(\"div\",{\"data-place\":\"right\",\"data-tip\":_.a.translate(\"tooltip.withdraw_address\",{asset:t})},\"?\")))),!this.state.validAddress&&this.state.toAddress?r.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},r.a.createElement(c.a,{content:\"gateway.valid_address\",coin_type:t})):null),n?r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\"},r.a.createElement(\"label\",{className:\"left-label\"},_.a.translate(\"transfer.memo\")),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"textarea\",{rows:\"3\",value:this.state.memo,tabIndex:a++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?r.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},r.a.createElement(c.a,{content:\"gateway.valid_address\",coin_type:t})):null):null,r.a.createElement(\"div\",{className:\"button-group SimpleTrade__withdraw-row\"},r.a.createElement(\"button\",{tabIndex:a++,className:\"button\"+(u?\" disabled\":\"\"),onClick:this.onSubmit.bind(this),type:\"submit\"},r.a.createElement(c.a,{content:\"gateway.withdraw_now\"}))))}},{key:\"_renderDeposit\",value:function(){var e=this.state,t=e.receive_address,a=e.loading,n=e.emptyAddressDeposit,s=p.a.replaceName(this.props.asset).name,o=t&&\"memo\"in t&&t.memo,i=t&&t.address||\"\",l=1;return r.a.createElement(\"div\",{className:i?\"\":\"no-overflow\"},r.a.createElement(\"p\",null,r.a.createElement(c.a,{unsafe:!0,content:\"gateway.add_funds\",account:this.props.sender.get(\"name\"),wallet_name:Object(x.l)()})),this._renderCurrentBalance(),r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\"},r.a.createElement(\"p\",{style:{marginBottom:10},\"data-place\":\"right\",\"data-tip\":_.a.translate(\"tooltip.deposit_tip\",{asset:s})},r.a.createElement(c.a,{className:\"help-tooltip\",content:\"gateway.deposit_to\",asset:s}),\":\",r.a.createElement(\"label\",{className:\"fz_12 left-label\"},r.a.createElement(c.a,{content:\"gateway.deposit_notice_delay\"}))),i?r.a.createElement(\"label\",null,n?r.a.createElement(c.a,{content:\"gateway.please_generate_address\"}):r.a.createElement(\"span\",{className:\"inline-label\"},r.a.createElement(\"input\",{readOnly:!0,type:\"text\",value:i}),r.a.createElement(y.a,{text:i}),\" \")):r.a.createElement(w.a,{type:\"three-bounce\"}),o?r.a.createElement(\"label\",null,r.a.createElement(\"span\",{className:\"inline-label\"},r.a.createElement(\"input\",{readOnly:!0,type:\"text\",value:_.a.translate(\"transfer.memo\")+\": \"+t.memo}),r.a.createElement(y.a,{text:t.memo}))):null,t&&t.error?r.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},t.error.message):null),r.a.createElement(\"div\",{className:\"button-group SimpleTrade__withdraw-row\"},r.a.createElement(\"button\",{tabIndex:l++,className:\"button spinner-button-circle\",onClick:this.requestDepositAddressLoad.bind(this),type:\"submit\"},a?r.a.createElement(w.a,{type:\"circle\"}):null,r.a.createElement(c.a,{content:\"gateway.generate_new\"}))))}},{key:\"_renderCurrentBalance\",value:function(){var e=p.a.replaceName(this.props.asset).name,t=\"deposit\"===this.props.action,a=this._getCurrentBalance(),n=a?new u.a({asset_id:a.get(\"asset_type\"),precision:this.props.asset.get(\"precision\"),amount:a.get(\"balance\")}):null,s=t?r.a.createElement(\"span\",{style:{border:\"2px solid black\",borderLeft:\"none\"},className:\"form-label\"},e):r.a.createElement(\"button\",{\"data-place\":\"right\",\"data-tip\":_.a.translate(\"tooltip.withdraw_full\"),className:\"button\",style:{border:\"2px solid black\",borderLeft:\"none\"},onClick:this._updateAmount.bind(this,a?parseInt(a.get(\"balance\"),10):0)},r.a.createElement(E.a,{name:\"clippy\",title:\"icons.clippy.withdraw_full\"}));return r.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\",style:{fontSize:\"1rem\"}},r.a.createElement(\"label\",{style:{fontSize:\"1rem\"}},_.a.translate(\"gateway.balance_asset\",{asset:e}),\":\",r.a.createElement(\"span\",{className:\"inline-label\"},r.a.createElement(\"input\",{disabled:!0,style:{color:\"black\",border:\"2px solid black\",padding:10,width:\"100%\"},value:n?n.getAmount({real:!0}):0}),s)))}},{key:\"render\",value:function(){var e=this.props,t=e.asset,a=\"deposit\"===e.action;if(!t)return null;p.a.replaceName(t).name;var n=this.props.isDown?r.a.createElement(\"div\",null,r.a.createElement(c.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable_OPEN\",component:\"p\"})):this.props.isAvailable?a?this._renderDeposit():this._renderWithdraw():r.a.createElement(\"div\",null,r.a.createElement(c.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"p\"}));return r.a.createElement(\"div\",{className:\"SimpleTrade__modal\"},r.a.createElement(\"div\",{className:\"grid-block vertical no-overflow\",style:{zIndex:1002,paddingLeft:\"2rem\",paddingRight:\"2rem\",paddingTop:\"1rem\"}},n))}}]),a}();R.propTypes={balance:m.a.ChainObject,sender:m.a.ChainAccount.isRequired,asset:m.a.ChainAsset.isRequired,coreAsset:m.a.ChainAsset.isRequired,globalObject:m.a.ChainAsset.isRequired},R.defaultProps={coreAsset:\"1.3.0\",globalObject:\"2.0.0\"},R=Object(d.a)(R);var B=function(e){function t(){T(this,t);var e=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return I(t,r.a.Component),P(t,[{key:\"show\",value:function(){var e=this;this.setState({open:!0},function(){i.a.publish(e.props.modalId,\"open\")})}},{key:\"onClose\",value:function(){this.setState({open:!1})}},{key:\"render\",value:function(){var e=\"deposit\"===this.props.action?_.a.translate(\"gateway.deposit\"):_.a.translate(\"modal.withdraw.submit\");return r.a.createElement(N.Modal,{title:e,footer:[],visible:this.props.visible,onCancel:this.props.hideModal,className:\"test\",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.props.visible?r.a.createElement(R,j({},this.props,{open:this.props.visible})):null)}}]),t}();t.a=B}).call(this,a(119).Buffer)},2001:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=a(31),l=a(15),c=a(49),u=a(41),p=a(57),d=a.n(p),m=a(11),h=a.n(m),f=a(80),b=a(558),g=a(125),_=a(20),v=a(39),y=a(42),E=a(346),w=a(27),k=a(25),A=a(23),C=a(556),O=a.n(C),S=a(16),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},N=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function j(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function P(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function T(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=function(e){function t(e){j(this,t);var a=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={receiveAmount:0,depositLimit:0,sendAmount:0,toAddress:f.a.getLast(e.walletType),withdrawValue:\"\",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},a._validateAddress(a.state.toAddress,e),a.deposit_address_cache=new b.a,a}return T(t,s.a.Component),N(t,[{key:\"onClose\",value:function(){this.props.hideModal()}},{key:\"componentWillMount\",value:function(){this._getDepositAddress()}},{key:\"componentDidMount\",value:function(){this._getDepositLimit(),this._estimateOutput()}},{key:\"componentWillReceiveProps\",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:\"shouldComponentUpdate\",value:function(e,t){return e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!l.a.are_equal_shallow(t,this.state)}},{key:\"_getDepositLimit\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({limitLoading:!0}),Object(f.k)(t.inputCoinType,t.outputCoinType).then(function(t){e.setState({depositLimit:t.depositLimit,limitLoading:!1})}).catch(function(t){console.log(\"deposit limit error:\",t),e.setState({depositLimit:null,limitLoading:!1})})}},{key:\"_onAmountChange\",value:function(e,t){var a=new RegExp(/[[:digit:]]/),n=t.target;switch(a.test(n.value)||(n.value=n.value.replace(/[^0-9.]/g,\"\")),\".\"==n.value.charAt(0)&&(n.value=\"0.\"),n.value.charAt(n.value.length)!=n.value.search(\".\")&&n.value.substr(1),n.value=l.a.limitByPrecision(n.value,8),e){case\"input\":this.setState({inputAmount:n.value},this._estimateOutput.bind(this));break;case\"output\":this.setState({outputAmount:n.value},this._estimateInput.bind(this))}}},{key:\"_estimateOutput\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:0,sendAmount:this.state.inputAmount}),this.state.inputAmount&&(this.setState({receiveLoading:!0}),Object(f.c)(this.state.inputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log(\"receive amount err:\",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:\"_estimateInput\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:this.state.outputAmount,sendAmount:0}),this.state.outputAmount&&(this.setState({receiveLoading:!0}),Object(f.b)(this.state.outputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,sendAmount:l.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log(\"send amount err:\",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:\"_getDepositAddress\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.inputCoinType){this.setState({receive_address:null}),Object(f.l)(this._getDepositObject(e))}}},{key:\"_getDepositObject\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{inputCoinType:t.inputCoinType.toLowerCase(),outputCoinType:t.outputCoinType.toLowerCase(),outputAddress:t.sender.get(\"name\"),url:y.b.BASE,stateCallback:function(a){e.addDepositAddress(t.inputCoinType.toLowerCase(),t.outputCoinType.toLowerCase(),t.sender.get(\"name\"),a)}}}},{key:\"addDepositAddress\",value:function(e,t,a,n){this.deposit_address_cache.cacheInputAddress(\"blocktrades\",a,e,t,n.address,n.memo),this.setState({receive_address:n})}},{key:\"componentDidUpdate\",value:function(){d.a.rebuild()}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.m)({walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:a})}).catch(function(e){console.error(\"Error when validating address:\",e)})}},{key:\"_openRegistrarSite\",value:function(e){e.preventDefault(),window.open(k.a.site_registr,\"_blank\").opener=null}},{key:\"_onDropDownSelect\",value:function(e){A.a.changeViewSetting({preferredBridge:e})}},{key:\"onBlockTradesContact\",value:function(){console.log(\"Open New Tab\"),window.open(\"https://www.blocktrades.us/contact\",\"_blank\").focus()}},{key:\"_renderDeposit\",value:function(){var e=l.a.replaceName(this.props.asset),t=e.name,a=e.prefix,n=this.state,r=n.receive_address,i=n.apiError,c=r&&\"memo\"in r&&r.memo,u=r&&r.address||\"\",p=s.a.createElement(\"div\",{className:\"QR\",style:{textAlign:\"center\"}},s.a.createElement(O.a,{size:140,value:u})),d=Object.keys(this.props.bridges.toJS()),m=this.props.inputCoinType.toUpperCase(),f=(a||\"\")+t,b=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),y=f+\"/\"+m,w=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit),k=w?{border:\"1px solid #a94442\"}:null;return s.a.createElement(\"div\",{className:\"modal__body\",style:{paddingTop:0}},s.a.createElement(\"div\",{className:\"container-row\"},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(o.a,{content:\"modal.buy.asset\"})),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{disabled:!0,type:\"text\",value:f}))),s.a.createElement(\"div\",{className:\"container-row\"},s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(o.a,{content:\"modal.buy.bridge\"})),s.a.createElement(\"span\",{\"data-tip\":h.a.translate(\"tooltip.bridge_TRADE\"),className:\"inline-block tooltip\",onClick:this.onBlockTradesContact.bind(this)},\" \",s.a.createElement(_.a,{style:{position:\"relative\",top:0},name:\"question-circle\",title:\"icons.question_circle\"}))),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{disabled:!0,type:\"text\",defaultValue:\"BLOCKTRADES\"}),\" \")),s.a.createElement(\"span\",{style:i?{display:\"none\"}:{display:\"\"}},s.a.createElement(\"div\",{className:\"container-row double-row\"},s.a.createElement(\"div\",{className:\"no-margin no-padding\"},s.a.createElement(\"div\",{className:\"small-6\",style:{paddingRight:10}},s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(o.a,{content:\"transfer.send\"})),w?s.a.createElement(\"div\",{className:\"error-msg inline-block tooltip\",\"data-tip\":h.a.translate(\"tooltip.over_limit\")},s.a.createElement(o.a,{content:\"gateway.over_limit\"}),\" \",s.a.createElement(_.a,{name:\"question-circle\",title:\"icons.question_circle\"})):null),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{style:k,type:\"text\",value:this.state.sendAmount,onInput:this._onAmountChange.bind(this,\"input\")}),s.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},s.a.createElement(E.a,{entries:d,values:d.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:d[0],value:this.props.preferredBridge||d[0],onChange:this._onDropDownSelect,upperCase:!0})))),s.a.createElement(\"div\",{className:\"small-6\",style:{paddingLeft:10}},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(o.a,{content:\"gateway.deposit_limit\"})),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{disabled:!0,type:\"number\",value:this.state.depositLimit&&parseFloat(this.state.depositLimit).toFixed(4)||0}),s.a.createElement(\"div\",{className:\"input-right-symbol\"},m))))),s.a.createElement(\"div\",{className:\"container-row double-row\"},s.a.createElement(\"div\",{className:\"no-margin no-padding\"},s.a.createElement(\"div\",{className:\"small-6\",style:{paddingRight:10}},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(o.a,{content:\"exchange.receive\"})),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{style:k,type:\"text\",value:this.state.receiveAmount,onInput:this._onAmountChange.bind(this,\"output\")}),s.a.createElement(\"div\",{className:\"input-right-symbol\"},f))),s.a.createElement(\"div\",{className:\"small-6\",style:{paddingLeft:10}},s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(o.a,{content:\"exchange.price\"}),\"  \",this.state.receiveLoading?s.a.createElement(o.a,{content:\"footer.loading\"}):\"\")),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{disabled:!0,type:\"number\",value:w?0:b}),s.a.createElement(\"div\",{className:\"input-right-symbol\"},y))))),u?s.a.createElement(\"div\",{className:\"container-row\"},c?null:p,s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"div\",{className:\"copyIcon\"},s.a.createElement(g.a,{text:u,className:\"copyIcon\"})),s.a.createElement(\"div\",null,s.a.createElement(o.a,{component:\"div\",style:{fontSize:\"0.8rem\",fontWeight:\"bold\",paddingBottom:\"0.3rem\"},content:\"gateway.purchase_notice\",inputAsset:m,outputAsset:f}),s.a.createElement(\"div\",{className:\"modal__highlight\"},u))),c?s.a.createElement(\"div\",{className:\"grid-block\",style:{marginTop:\"10px\"}},s.a.createElement(\"div\",{className:\"copyIcon\"},s.a.createElement(g.a,{text:r.memo,className:\"copyIcon\"})),s.a.createElement(\"div\",null,s.a.createElement(o.a,{unsafe:!0,content:\"gateway.purchase_notice_memo\",component:\"div\",style:{fontSize:\"0.8rem\",fontWeight:\"bold\",paddingBottom:\"0.3rem\"}}),s.a.createElement(\"div\",{className:\"modal__highlight\"},r.memo))):null):s.a.createElement(\"div\",{style:{textAlign:\"center\"}},s.a.createElement(v.a,{type:\"three-bounce\"}))))}},{key:\"_renderCurrentBalance\",value:function(){var e=this,t=l.a.replaceName(this.props.asset).name,a=\"deposit\"===this.props.action,n=this.props.balances.find(function(t){return t&&t.get(\"asset_type\")===e.props.asset.get(\"id\")}),r=n?new i.a({asset_id:n.get(\"asset_type\"),precision:this.props.asset.get(\"precision\"),amount:n.get(\"balance\")}):null,o=a?s.a.createElement(\"span\",{style:{border:\"2px solid black\",borderLeft:\"none\"},className:\"form-label\"},t):s.a.createElement(\"button\",{\"data-place\":\"right\",\"data-tip\":h.a.translate(\"tooltip.withdraw_full\"),className:\"button\",style:{border:\"2px solid black\",borderLeft:\"none\"},onClick:this._updateAmount.bind(this,n?parseInt(n.get(\"balance\"),10):0)},s.a.createElement(_.a,{name:\"clippy\",title:\"icons.clippy.withdraw_full\"}));return s.a.createElement(\"div\",{className:\"SimpleTrade__withdraw-row\",style:{fontSize:\"1rem\"}},s.a.createElement(\"label\",{style:{fontSize:\"1rem\"}},h.a.translate(\"gateway.balance_asset\",{asset:t}),\":\",s.a.createElement(\"span\",{className:\"inline-label\"},s.a.createElement(\"input\",{disabled:!0,style:{color:\"black\",border:\"2px solid black\",padding:10,width:\"100%\"},value:r?r.getAmount({real:!0}):0}),o)))}},{key:\"render\",value:function(){return this.props.asset?s.a.createElement(\"div\",{className:\"grid-block vertical no-overflow\"},this.props.isDown?s.a.createElement(\"div\",{style:{textAlign:\"center\"}},s.a.createElement(o.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable_TRADE\",component:\"p\"})):this.props.isAvailable?this._renderDeposit():s.a.createElement(\"div\",{style:{textAlign:\"center\"}},s.a.createElement(o.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"p\"}))):null}}]),t}();M.propTypes={sender:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired},M=Object(c.a)(M);var I=function(e){function t(){return j(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,s.a.Component),N(t,[{key:\"render\",value:function(){var e=this.props,t=e.preferredBridge,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"preferredBridge\"]),n=this.props.bridges.get(this.props.preferredBridge);return n||(t=(n=this.props.bridges.first()).inputCoinType),s.a.createElement(M,x({hideModal:this.props.hideModal},a,{preferredBridge:t},n.toJS()))}}]),t}();I=Object(w.a)(I,{listenTo:function(){return[k.a]},getProps:function(){return{preferredBridge:k.a.getState().viewSettings.get(\"preferredBridge\",\"btc\")}}});var R=function(e){function t(){return j(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,s.a.Component),N(t,[{key:\"render\",value:function(){return this.props.bridges?s.a.createElement(S.Modal,{title:h.a.translate(\"modal.buy.title\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:[s.a.createElement(S.Button,{key:\"cancel\",onClick:this.props.hideModal},h.a.translate(\"modal.close\"))]},s.a.createElement(I,x({},this.props,{open:this.props.visible}))):null}}]),t}();t.a=R},2013:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),r=a(1),o=a.n(r),i=a(2249),l=a(11),c=a.n(l),u=a(1956),p=a.n(u),d=a(15),m=a(3),h=a.n(m),f=a(105),b=a(1977),g=a.n(b),_=a(1951),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function E(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function w(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}((function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,s.a.Component),v(t,[{key:\"render\",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol;return s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(h.a,{content:\"exchange.price\"}),s.a.createElement(\"br\",null),t?s.a.createElement(\"span\",{className:\"header-sub-title\"},\"(\",s.a.createElement(f.a,{name:t}),\"/\",s.a.createElement(f.a,{name:a}),\")\"):null),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(h.a,{content:\"transfer.amount\"}),s.a.createElement(\"br\",null),a?s.a.createElement(\"span\",{className:\"header-sub-title\"},\"(\",s.a.createElement(f.a,{name:a}),\")\"):null),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(h.a,{content:\"transaction.settlement_date\"}),s.a.createElement(\"br\",null),s.a.createElement(\"span\",{style:{visibility:\"hidden\"},className:\"header-sub-title\"},\"d\"))))}}]),t})()).defaultProps={quoteSymbol:null,baseSymbol:null};var k=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,s.a.Component),v(t,[{key:\"render\",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,r=e.showSymbols,o=\"1.3.0\"==t.get(\"id\")?n.getPrice()/(1+n.offset_percent/1e4):n.getPrice()*(1+n.offset_percent/1e4),i=r?\" \"+a.get(\"symbol\"):null;return s.a.createElement(\"tr\",{style:{paddingRight:5}},s.a.createElement(\"td\",{style:{textAlign:\"right\"}},d.a.format_number(o,a.get(\"precision\")),\" \",i),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},d.a.format_number(n[n.isBid()?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),a.get(\"precision\"))),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},d.a.format_number(n[n.isBid()?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),t.get(\"precision\"))),s.a.createElement(\"td\",{style:{textAlign:\"right\",whiteSpace:\"nowrap\"},className:\"tooltip\",\"data-tip\":new Date(n.settlement_date)},c.a.localize(new Date(n.settlement_date),{type:\"date\",format:-1!==g()().toLowerCase().indexOf(\"en-us\")?\"market_history_us\":\"market_history\"})))}}]),t}();k.defaultProps={showSymbols:!1,invert:!1};var A=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,s.a.Component),v(t,[{key:\"shouldComponentUpdate\",value:function(e){return e.currentAccount!==this.props.currentAccount||e.orders!==this.props.orders}},{key:\"render\",value:function(){var e=this.props,t=e.orders,a=e.base,n=e.quote,r=null;if(!(t.size>0&&a&&n))return s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{textAlign:\"center\",lineHeight:4,fontStyle:\"italic\"},colSpan:\"5\"},s.a.createElement(h.a,{content:\"account.no_orders\"}))));var o=0;return r=t.sort(function(e,t){return e.isBefore(t)?-1:1}).map(function(e){return Date.now()<e.settlement_date?s.a.createElement(k,{key:o++,order:e,base:a,quote:n}):null}).toArray(),s.a.createElement(_.a,{ref:\"contentTransition\",component:\"tbody\",transitionName:\"newrow\"},r)}}]),t}();A.defaultProps={base:{},quote:{},orders:{},quoteSymbol:\"\",baseSymbol:\"\"},A.propTypes={base:o.a.object.isRequired,quote:o.a.object.isRequired,orders:o.a.object.isRequired,quoteSymbol:o.a.string.isRequired,baseSymbol:o.a.string.isRequired};var C=A,O=a(1974),S=a(23),x=a(20),N=a(10),j=a(31),P=a(1966),T=a(1986),M=a(144),I=a(57),R=a.n(I);a.d(t,\"b\",function(){return W}),a.d(t,\"c\",function(){return z}),a.d(t,\"a\",function(){return J});var B=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function F(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function V(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L={textAlign:\"left\"},U={textAlign:\"right\"},z=function(e){function t(){return D(this,t),F(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,s.a.Component),B(t,[{key:\"render\",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol,n=e.dashboard,r=e.isMyAccount,o=e.leftAlign;return n?s.a.createElement(\"tr\",null,r?s.a.createElement(\"th\",{id:\"cancelAllOrders\",style:{cursor:\"pointer\"}},s.a.createElement(h.a,{content:\"wallet.cancel\"})):null,s.a.createElement(\"th\",null,s.a.createElement(h.a,{content:\"account.trade\"})),s.a.createElement(\"th\",{style:o},s.a.createElement(h.a,{content:\"transaction.order_id\"})),s.a.createElement(\"th\",{style:o,colSpan:\"4\"},s.a.createElement(h.a,{content:\"exchange.description\"})),s.a.createElement(\"th\",{style:o},s.a.createElement(h.a,{content:\"exchange.price\"})),s.a.createElement(\"th\",{style:o},s.a.createElement(h.a,{content:\"exchange.price_market\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(h.a,{content:\"exchange.value\"}))):s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:o||U},s.a.createElement(h.a,{className:\"header-sub-title\",content:\"exchange.price\"})),s.a.createElement(\"th\",{style:o||U},t?s.a.createElement(\"span\",{className:\"header-sub-title\"},s.a.createElement(f.a,{dataPlace:\"top\",name:a})):null),s.a.createElement(\"th\",{style:o||U},t?s.a.createElement(\"span\",{className:\"header-sub-title\"},s.a.createElement(f.a,{dataPlace:\"top\",name:t})):null),s.a.createElement(\"th\",{style:o||U},s.a.createElement(h.a,{className:\"header-sub-title\",content:\"transaction.expiration\"})),s.a.createElement(\"th\",{style:{width:\"6%\"}})))}}]),t}();z.defaultProps={quoteSymbol:null,baseSymbol:null};var W=function(e){function t(){return D(this,t),F(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,s.a.Component),B(t,[{key:\"shouldComponentUpdate\",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:\"render\",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,r=e.showSymbols,o=e.dashboard,l=e.isMyAccount,u=e.settings,p=n.isBid(),m=n.isCall(),b=m?\"orderHistoryCall\":p?\"orderHistoryBid\":\"orderHistoryAsk\",g=r?s.a.createElement(\"span\",null,\" \"+t.get(\"symbol\")+\"/\"+a.get(\"symbol\")):null,_=r?\" \"+t.get(\"symbol\"):null,v=r?\" \"+a.get(\"symbol\"):null,y=u?u.get(\"unit\"):\"1.3.0\",E=p?\"value positive\":\"value negative\",w=p?\"value negative\":\"value positive\";return o?s.a.createElement(\"tr\",{key:n.id,className:\"clickable\"},l?s.a.createElement(\"td\",{className:\"text-center\"},m?null:s.a.createElement(\"span\",{style:{marginRight:0},className:\"order-cancel\"},s.a.createElement(\"input\",{type:\"checkbox\",className:\"orderCancel\",onChange:this.props.onCheckCancel}))):null,s.a.createElement(\"td\",null,s.a.createElement(i.a,{to:\"/market/\"+a.get(\"symbol\")+\"_\"+t.get(\"symbol\")},s.a.createElement(x.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"}))),s.a.createElement(\"td\",{style:L},\"#\",n.id.substring(4)),s.a.createElement(\"td\",{colSpan:\"4\",style:L,onClick:this.props.onFlip},p?s.a.createElement(h.a,{content:\"exchange.buy_description\",baseAsset:d.a.format_number(n[p?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),t.get(\"precision\"),!1),quoteAsset:d.a.format_number(n[p?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),a.get(\"precision\"),!1),baseName:s.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get(\"symbol\")}),quoteName:s.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get(\"symbol\")})}):s.a.createElement(h.a,{content:\"exchange.sell_description\",baseAsset:d.a.format_number(n[p?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),t.get(\"precision\"),!1),quoteAsset:d.a.format_number(n[p?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),a.get(\"precision\"),!1),baseName:s.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get(\"symbol\")}),quoteName:s.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get(\"symbol\")})})),s.a.createElement(\"td\",{style:L,onClick:this.props.onFlip},s.a.createElement(M.a,{base_amount:n.sellPrice().base.amount,base_asset:n.sellPrice().base.asset_id,quote_amount:n.sellPrice().quote.amount,quote_asset:n.sellPrice().quote.asset_id,force_direction:t.get(\"symbol\"),hide_symbols:!0})),s.a.createElement(\"td\",{style:L,onClick:this.props.onFlip},s.a.createElement(T.a,{base:t.get(\"id\"),quote:a.get(\"id\"),force_direction:t.get(\"symbol\"),hide_symbols:!0,hide_asset:!0})),s.a.createElement(\"td\",{style:{textAlign:\"right\"},onClick:this.props.onFlip},s.a.createElement(P.b,{hide_asset:!0,amount:n.amountForSale().getAmount(),fromAsset:n.amountForSale().asset_id,noDecimals:!0,toAsset:y}),\" \",s.a.createElement(f.a,{name:y}))):s.a.createElement(\"tr\",{key:n.id},s.a.createElement(\"td\",{className:b,style:{paddingLeft:10}},s.a.createElement(O.a,{price:n.getPrice(),base:t,quote:a}),g),s.a.createElement(\"td\",null,d.a.format_number(n[p?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),a.get(\"precision\")),\" \",v),s.a.createElement(\"td\",null,d.a.format_number(n[p?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),t.get(\"precision\")),\" \",_),s.a.createElement(\"td\",{style:{width:\"25%\",textAlign:\"right\",whiteSpace:\"nowrap\"},className:\"tooltip\",\"data-tip\":n.expiration.toLocaleString()},m?null:c.a.localize(new Date(n.expiration),{type:\"date\",format:\"short_custom\"})),s.a.createElement(\"td\",{className:\"text-center\",style:{width:\"6%\"}},m?null:s.a.createElement(\"a\",{style:{marginRight:0},className:\"order-cancel\",onClick:this.props.onCancel},s.a.createElement(x.a,{name:\"cross-circle\",title:\"icons.cross_circle.cancel_order\",className:\"icon-14px\"}))))}}]),t}();W.defaultProps={showSymbols:!1};var J=function(e){function t(e){D(this,t);var a=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.activeTab,rowCount:20,showAll:!1},a._getOrders=a._getOrders.bind(a),a}return V(t,s.a.Component),B(t,[{key:\"shouldComponentUpdate\",value:function(e,t){if(e.activeTab!==this.state.activeTab&&this._changeTab(e.activeTab),this.props.hideScrollbars&&t.showAll!=this.state.showAll){var a=this.refs.container;t.showAll?(p.a.initialize(a),p.a.update(a)):p.a.destroy(a),this.refs.contentTransition&&this.refs.contentTransition.resetAnimation(),a&&(a.scrollTop=0)}return e.baseSymbol!==this.props.baseSymbol||e.quoteSymbol!==this.props.quoteSymbol||e.className!==this.props.className||e.activeTab!==this.props.activeTab||t.activeTab!==this.state.activeTab||t.showAll!==this.state.showAll||e.currentAccount!==this.props.currentAccount}},{key:\"componentDidMount\",value:function(){if(!this.props.hideScrollbars){var e=this.refs.container;e&&p.a.initialize(e)}}},{key:\"componentDidUpdate\",value:function(){if(!this.props.hideScrollbars||this.props.hideScrollbars&&this.state.showAll){var e=this.refs.container;e&&p.a.update(e)}}},{key:\"componentWillReceiveProps\",value:function(e){var t=this.refs.container;e.hideScrollbars!==this.props.hideScrollbars&&e.hideScrollbars&&p.a.destroy(t),e.hideScrollbars===this.props.hideScrollbars||e.hideScrollbars||(p.a.initialize(t),this.refs.contentTransition.resetAnimation(),t&&(t.scrollTop=0),p.a.update(t))}},{key:\"_onSetShowAll\",value:function(){this.setState({showAll:!this.state.showAll}),this.state.showAll&&(this.refs.container.scrollTop=0)}},{key:\"_getOrders\",value:function(){var e,t=this.props,a=t.currentAccount,n=t.base,s=t.quote,r=t.feedPrice,o=a.get(\"orders\"),i=a.get(\"call_orders\"),l=n.get(\"id\"),c=s.get(\"id\"),u=(q(e={},n.get(\"id\"),{precision:n.get(\"precision\")}),q(e,s.get(\"id\"),{precision:s.get(\"precision\")}),e),p=o.toArray().map(function(e){var t=N.ChainStore.getObject(e);if(!t)return null;var a=t.getIn([\"sell_price\",\"base\",\"asset_id\"]),n=t.getIn([\"sell_price\",\"quote\",\"asset_id\"]);return a===l&&n===c||a===c&&n===l?new j.f(t.toJS(),u,s.get(\"id\")):void 0}).filter(function(e){return!!e}),d=i.toArray().map(function(e){try{var t=N.ChainStore.getObject(e);if(!t)return null;var a=t.getIn([\"call_price\",\"base\",\"asset_id\"]),n=t.getIn([\"call_price\",\"quote\",\"asset_id\"]);if(a===l&&n===c||a===c&&n===l)return r?new j.b(t.toJS(),u,s.get(\"id\"),r):null}catch(e){return null}}).filter(function(e){return!!e}).filter(function(e){try{return e.isMarginCalled()}catch(e){return!1}});return p.concat(d)}},{key:\"_changeTab\",value:function(e){S.a.changeViewSetting({ordersTab:e}),this.setState({activeTab:e});var t=this.refs.container;t.scrollTop=0,p.a.update(t),setTimeout(R.a.rebuild,1e3)}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.base,n=t.quote,r=t.quoteSymbol,o=t.baseSymbol,i=t.settleOrders,l=this.state,c=l.activeTab,u=l.showAll,p=l.rowCount;if(!a||!n)return null;var d=void 0,m=void 0;a.get(\"bitasset_data_id\")&&i.size,n.get(\"bitasset_data_id\")&&i.size;if(!c||\"my_orders\"==c){var b=this._getOrders(),g=s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{textAlign:\"center\",lineHeight:4,fontStyle:\"italic\"},colSpan:\"5\"},s.a.createElement(h.a,{content:\"account.no_orders\"}))),v=b.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var r=t.getPrice();return s.a.createElement(W,{price:r,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),y=b.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var r=t.getPrice();return s.a.createElement(W,{price:r,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),E=[];y.length&&(E=E.concat(y)),v.length&&(E=E.concat(v)),E.sort(function(e,t){return e.props.price-t.props.price});var w=E.length;u||E.splice(p,E.length),d=s.a.createElement(_.a,{ref:\"contentTransition\",component:\"tbody\",transitionName:\"newrow\"},E.length?E:g),m=w>11?s.a.createElement(\"div\",{className:\"orderbook-showall\"},s.a.createElement(\"a\",{onClick:this._onSetShowAll.bind(this)},s.a.createElement(h.a,{content:u?\"exchange.hide\":\"exchange.show_all_orders\",rowcount:w}))):null}if(c&&\"open_settlement\"==c){var k=i.length;k>0&&(u||i.splice(p,i.length)),d=s.a.createElement(C,{key:\"settle_orders\",orders:i,base:a,quote:n,baseSymbol:o,quoteSymbol:r}),m=k>11?s.a.createElement(\"div\",{className:\"orderbook-showall\"},s.a.createElement(\"a\",{onClick:this._onSetShowAll.bind(this)},s.a.createElement(h.a,{content:u?\"exchange.hide\":\"exchange.show_all_orders\",rowcount:k}))):null}return s.a.createElement(\"div\",{style:this.props.style,key:\"open_orders\",className:this.props.className},s.a.createElement(\"div\",{className:this.props.innerClass,style:this.props.innerStyle},this.props.noHeader?null:s.a.createElement(\"div\",{style:this.props.headerStyle,className:\"exchange-content-header\"},\"my_orders\"==c?s.a.createElement(h.a,{content:\"exchange.my_orders\"}):null,\"open_settlement\"==c?s.a.createElement(h.a,{content:\"exchange.settle_orders\"}):null),s.a.createElement(\"div\",{className:\"grid-block shrink left-orderbook-header market-right-padding-only\"},s.a.createElement(\"table\",{className:\"table order-table text-right fixed-table market-right-padding\"},\"my_orders\"==c?s.a.createElement(z,{type:\"sell\",baseSymbol:o,quoteSymbol:r}):s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(h.a,{className:\"header-sub-title\",content:\"exchange.price\"})),s.a.createElement(\"th\",null,s.a.createElement(\"span\",{className:\"header-sub-title\"},s.a.createElement(f.a,{dataPlace:\"top\",name:r}))),s.a.createElement(\"th\",null,s.a.createElement(\"span\",{className:\"header-sub-title\"},s.a.createElement(f.a,{dataPlace:\"top\",name:o}))),s.a.createElement(\"th\",null,s.a.createElement(h.a,{className:\"header-sub-title\",content:\"explorer.block.date\"})))))),s.a.createElement(\"div\",{className:\"table-container grid-block market-right-padding-only no-overflow\",ref:\"container\",style:{overflow:\"hidden\",minHeight:this.props.tinyScreen?0:260,maxHeight:260,lineHeight:\"13px\"}},s.a.createElement(\"table\",{className:\"table order-table table-highlight-hover table-hover no-stripes text-right fixed-table market-right-padding\"},d)),m))}}]),t}();J.defaultProps={base:{},quote:{},orders:{},quoteSymbol:\"\",baseSymbol:\"\"},J.propTypes={base:o.a.object.isRequired,quote:o.a.object.isRequired,orders:o.a.object.isRequired,quoteSymbol:o.a.string.isRequired,baseSymbol:o.a.string.isRequired}},2128:function(e,t,a){\"use strict\";(function(e){var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=a(41),l=a(49),c=a(15),u=a(11),p=a.n(u),d=a(234),m=a(192),h=a(313),f=a(16),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var g=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={amount:e.amount,to:e.to,to_id:null,memo:\"\"},t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.a.Component),b(a,[{key:\"onAmountChanged\",value:function(e){var t=e.amount;this.setState({amount:t})}},{key:\"onToAccountChanged\",value:function(e){var t=e?{to:e.get(\"name\"),to_id:e.get(\"id\")}:{to_id:null};this.setState(t)}},{key:\"onToChanged\",value:function(e){this.setState({to:e,to_id:null})}},{key:\"onSubmit\",value:function(){this.props.hideModal();var t=this.props.asset_to_issue,a=c.a.get_asset_precision(t.get(\"precision\")),n=this.state.amount.toString().replace(/,/g,\"\");n*=a,d.a.issue_asset(this.state.to_id,t.get(\"issuer\"),t.get(\"id\"),n,this.state.memo?new e(this.state.memo,\"utf-8\"):this.state.memo).catch(function(e){console.log(\"issue error caught here:\",e),f.Notification.error({message:p.a.translate(\"notifications.asset_issue_failure\")})}),this.setState({amount:0,to:\"\",to_id:null,memo:\"\"})}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value})}},{key:\"render\",value:function(){var e=this.props.asset_to_issue.get(\"id\"),t=1,a=[s.a.createElement(f.Button,{type:\"primary\",key:\"submit\",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),disabled:!this.state.to_id||!this.state.amount},p.a.translate(\"modal.issue.submit\")),s.a.createElement(f.Button,{key:\"cancel\",onClick:this.props.hideModal},p.a.translate(\"cancel\"))];return s.a.createElement(f.Modal,{title:p.a.translate(\"modal.issue.submit\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:a},s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container \"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(m.a,{label:\"modal.issue.to\",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(h.a,{label:\"modal.issue.amount\",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"label\",null,s.a.createElement(o.a,{component:\"span\",content:\"transfer.memo\"}),\" \",\"(\",s.a.createElement(o.a,{content:\"transfer.optional\"}),\")\"),s.a.createElement(\"textarea\",{rows:\"3\",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})))))}}]),a}();g.propTypes={asset_to_issue:i.a.ChainAsset.isRequired},t.a=Object(l.a)(g)}).call(this,a(119).Buffer)},2129:function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg==\"},2255:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),r=a(38),o=a(22),i=a(25),l=a(104),c=a(41),u=a(49),p=a(27),d=a(94),m=a(12),h=a.n(m),f=a(564),b=a(2266),g=a(2250),_=a(2262),v=a(314),y=a(1),E=a.n(y),w=a(2249),k=a(3),A=a.n(k),C=a(449),O=a(557),S=a(34),x=a(39),N=a(2128),j=a(345),P=a(120),T=a(1950),M=a(20),I=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isIssueAssetModalVisible:!1,create:{symbol:\"\",name:\"\",description:\"\",max_supply:1e15,precision:4},issue:{amount:0,to:\"\",to_id:\"\",asset_id:\"\",symbol:\"\"},errors:{symbol:null},isValid:!1,searchTerm:\"\"},a._searchAccounts=Object(v.a)(a._searchAccounts,150),a.showIssueAssetModal=a.showIssueAssetModal.bind(a),a.hideIssueAssetModal=a.hideIssueAssetModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),I(t,[{key:\"showIssueAssetModal\",value:function(){this.setState({isIssueAssetModalVisible:!0})}},{key:\"hideIssueAssetModal\",value:function(){this.setState({isIssueAssetModalVisible:!1})}},{key:\"_checkAssets\",value:function(e,t){if(!this.props.account.get(\"assets\").size){var a=e.sort(function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0}).last();0===e.size||t?(C.a.getAssetList.defer(\"A\",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(C.a.getAssetList.defer(a.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:\"componentWillReceiveProps\",value:function(e){this._checkAssets(e.assets)}},{key:\"componentWillMount\",value:function(){this._checkAssets(this.props.assets,!0)}},{key:\"_onIssueInput\",value:function(e,t){var a=t.target.id,n=this.state.issue;if(\"to\"===a){this._searchAccounts(t.target.value),n.to=t.target.value;var s=this.props.searchAccounts.findEntry(function(e){return e===t.target.value});n.to_id=s?s[0]:null}else n[e]=t.target.value;this.setState({issue:n})}},{key:\"_searchAccounts\",value:function(e){r.a.accountSearch(e)}},{key:\"_issueButtonClick\",value:function(e,t,a){a.preventDefault();var n=this.state.issue;n.asset_id=e,n.symbol=t,this.setState({issue:n}),this.showIssueAssetModal()}},{key:\"_editButtonClick\",value:function(e,t,a){a.preventDefault(),this.props.history.push(\"/account/\"+t+\"/update-asset/\"+e)}},{key:\"_createButtonClick\",value:function(e){this.props.history.push(\"/account/\"+e+\"/create-asset\")}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.account_name,r=t.assets,o=t.assetsList,i=!0;if(!a)return s.a.createElement(x.a,{type:\"circle\"});if(a.notFound&&(i=!1),!i)return s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"h5\",null,s.a.createElement(A.a,{component:\"h5\",content:\"account.errors.not_found\",name:n})));o.length&&(r=r.clear(),o.forEach(function(e){e&&(r=r.set(e.get(\"id\"),e.toJS()))}));var l=r.filter(function(e){return e.issuer===a.get(\"id\")}).sort(function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)}).map(function(t){var a=j.a.parseDescription(t.options.description),r=a.short_name?a.short_name:a.main;r.length>100&&(r=r.substr(0,100)+\"...\");var o=e.props.getDynamicObject(t.dynamic_asset_data_id);return s.a.createElement(\"tr\",{key:t.symbol},s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(w.a,{to:\"/asset/\"+t.symbol},t.symbol)),s.a.createElement(\"td\",{style:{textAlign:\"left\"}},\"bitasset\"in t?t.bitasset.is_prediction_market?s.a.createElement(A.a,{content:\"account.user_issued_assets.pm\"}):s.a.createElement(A.a,{content:\"account.user_issued_assets.mpa\"}):\"User Issued Asset\"),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},o?s.a.createElement(S.a,{hide_asset:!0,amount:parseInt(o.get(\"current_supply\"),10),asset:t.id}):null),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},s.a.createElement(S.a,{hide_asset:!0,amount:parseInt(t.options.max_supply,10),asset:t.id})),s.a.createElement(\"td\",null,t.bitasset_data_id?null:s.a.createElement(\"a\",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol)},s.a.createElement(M.a,{name:\"cross-circle\",className:\"rotate45\"}))),s.a.createElement(\"td\",null,s.a.createElement(\"a\",{onClick:e._editButtonClick.bind(e,t.symbol,n)},s.a.createElement(M.a,{name:\"dashboard\"}))))}).toArray();return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{segmented:!1,setting:\"issuedAssetsTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},s.a.createElement(T.a,{title:\"account.user_issued_assets.issued_assets\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"table\",{className:\"table dashboard-table\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.symbol\"})),s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"explorer.asset.summary.asset_type\"})),s.a.createElement(A.a,{component:\"th\",content:\"markets.supply\",style:{textAlign:\"right\"}}),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.max_supply\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"transaction.trxTypes.asset_issue\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"transaction.trxTypes.asset_update\"})))),s.a.createElement(\"tbody\",null,l))),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"button\",{className:\"button\",onClick:this._createButtonClick.bind(this,n)},s.a.createElement(A.a,{content:\"transaction.trxTypes.asset_create\"})))))),s.a.createElement(N.a,{visible:this.state.isIssueAssetModalVisible,hideModal:this.hideIssueAssetModal,showModal:this.showIssueAssetModal,asset_to_issue:this.state.issue.asset_id})))}}]),t}();R.defaultProps={symbol:\"\",name:\"\",description:\"\",max_supply:0,precision:0},R.propTypes={symbol:E.a.string.isRequired},R=Object(P.a)(R,{propNames:[\"assetsList\"],asList:!0,withDynamic:!0});var B=Object(p.a)(R,{listenTo:function(){return[O.a]},getProps:function(e){var t=Object(m.Map)(),a=Object(m.List)();return e.account.get(\"assets\",[]).size?e.account.get(\"assets\",[]).forEach(function(e){a=a.push(e)}):t=O.a.getState().assets,{assets:t,assetsList:a}}}),q=a(6),D=a.n(q),F=a(555),V=a(15),L=a(10),U=a(11),z=a.n(U),W=a(1963),J=a(155),K=a.n(J),G=a(313),H=a(171),Z=a.n(H),Q=a(143),Y=a(16),X=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function $(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ee(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function te(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ae=new K.a(Z.a.GRAPHENE_MAX_SHARE_SUPPLY),ne=function(e){function t(e){$(this,t);var a=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={backingAsset:e.backingAsset.get(\"symbol\"),error:null},a}return te(t,s.a.Component),X(t,[{key:\"_onInputBackingAsset\",value:function(e){this.props.disableBackingAssetChange?this.props.disabledBackingAssetChangeCallback():this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:\"_onFoundBackingAsset\",value:function(e){if(e){var t=e.get(\"bitasset\")&&L.ChainStore.getAsset(e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"])),a=t&&t.get(\"bitasset\")&&L.ChainStore.getAsset(t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]));a&&\"1.3.0\"!==a?(this.setState({error:z.a.translate(\"account.user_issued_assets.error_too_deep\")}),this.props.onUpdate(\"invalid\",!0)):e.getIn([\"bitasset\",\"is_prediction_market\"])?(this.setState({error:z.a.translate(\"account.user_issued_assets.error_invalid\")}),this.props.onUpdate(\"invalid\",!0)):this.props.isPredictionMarket&&e.get(\"precision\")!==parseInt(this.props.assetPrecision,10)?(this.setState({error:z.a.translate(\"account.user_issued_assets.error_precision\",{asset:this.props.assetSymbol})}),this.props.onUpdate(\"invalid\",!0)):(this.props.onUpdate(\"short_backing_asset\",e.get(\"id\")),this.props.onUpdate(\"invalid\",!1))}else this.props.onUpdate(\"invalid\",!0)}},{key:\"render\",value:function(){var e=this.props.bitasset_opts,t=this.state.error;return s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.feed_lifetime_sec\"}),s.a.createElement(\"input\",{type:\"number\",value:e.feed_lifetime_sec/60,onChange:this.props.onUpdate.bind(this,\"feed_lifetime_sec\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.minimum_feeds\"}),s.a.createElement(\"input\",{type:\"number\",value:e.minimum_feeds,onChange:this.props.onUpdate.bind(this,\"minimum_feeds\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.force_settlement_delay_sec\"}),s.a.createElement(\"input\",{type:\"number\",value:e.force_settlement_delay_sec/60,onChange:this.props.onUpdate.bind(this,\"force_settlement_delay_sec\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.force_settlement_offset_percent\"}),s.a.createElement(\"input\",{type:\"number\",value:e.force_settlement_offset_percent/Z.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,\"force_settlement_offset_percent\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.maximum_force_settlement_volume\"}),s.a.createElement(\"input\",{type:\"number\",value:e.maximum_force_settlement_volume/Z.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,\"maximum_force_settlement_volume\")})),s.a.createElement(\"div\",{className:\"grid-block no-margin small-12\"},s.a.createElement(W.a,{label:\"account.user_issued_assets.backing\",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundBackingAsset.bind(this)}),t?s.a.createElement(\"div\",{className:\"content-block has-error\"},t):null))}}]),t}();ne.propTypes={backingAsset:c.a.ChainAsset.isRequired,isUpdate:E.a.bool},ne.defaultProps={isUpdate:!1},ne=Object(u.a)(ne);var se=function(e){function t(e){$(this,t);var a=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a}return te(t,s.a.Component),X(t,[{key:\"resetState\",value:function(e){V.a.get_asset_precision(4),V.a.get_asset_precision(e.core.get(\"precision\"));var t=this._getPermissions({isBitAsset:!1}),a=t.flagBooleans,n=t.permissionBooleans;L.ChainStore.getAsset(\"1.3.0\").get(\"symbol\");return{update:{symbol:\"\",precision:4,max_supply:1e5,max_market_fee:0,market_fee_percent:0,description:{main:\"\"}},errors:{max_supply:null},isValid:!0,flagBooleans:a,permissionBooleans:n,isBitAsset:!1,is_prediction_market:!1,core_exchange_rate:{quote:{asset_id:null,amount:1},base:{asset_id:\"1.3.0\",amount:1}},bitasset_opts:{feed_lifetime_sec:86400,minimum_feeds:7,force_settlement_delay_sec:86400,force_settlement_offset_percent:1*Z.a.GRAPHENE_1_PERCENT,maximum_force_settlement_volume:20*Z.a.GRAPHENE_1_PERCENT,short_backing_asset:\"1.3.0\"},marketInput:\"\"}}},{key:\"_getPermissions\",value:function(e){return{flagBooleans:j.a.getFlagBooleans(0,e.isBitAsset),permissionBooleans:j.a.getFlagBooleans(\"all\",e.isBitAsset)}}},{key:\"_createAsset\",value:function(e){e.preventDefault();var t=this.state,a=t.update,n=t.flagBooleans,s=t.permissionBooleans,r=t.core_exchange_rate,o=t.isBitAsset,i=t.is_prediction_market,l=t.bitasset_opts,c=this.props.account,u=j.a.getFlags(n,o),p=j.a.getPermissions(s,o);this.state.marketInput!==a.description.market&&(a.description.market=\"\");var d=JSON.stringify(a.description);C.a.createAsset(c.get(\"id\"),a,u,p,r,o,i,l,d).then(function(e){console.log(\"... AssetActions.createAsset(account_id, update)\",c.get(\"id\"),a,u,p)})}},{key:\"_hasChanged\",value:function(){return!V.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:\"_reset\",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:\"_forcePositive\",value:function(e){return parseFloat(e)<0?\"0\":e}},{key:\"_onUpdateDescription\",value:function(e,t){var a=this.state.update,n=!0;switch(e){case\"condition\":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case\"short_name\":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case\"market\":a.description[e]=t;break;case\"visible\":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:\"onChangeBitAssetOpts\",value:function(e,t){var a=this.state,n=a.bitasset_opts,s=a.errors;switch(e){case\"force_settlement_offset_percent\":case\"maximum_force_settlement_volume\":n[e]=parseFloat(t.target.value)*Z.a.GRAPHENE_1_PERCENT;break;case\"minimum_feeds\":n[e]=parseInt(t.target.value,10);break;case\"feed_lifetime_sec\":case\"force_settlement_delay_sec\":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case\"short_backing_asset\":n[e]=t;break;case\"invalid\":s.invalid_bitasset=t;break;default:n[e]=t.target.value}var r=!s.symbol&&!s.max_supply&&!s.invalid_bitasset;this.setState({isValid:r,errors:s})}},{key:\"_onUpdateInput\",value:function(e,t){var a=this.state,n=a.update,s=a.errors,r=!1,o=V.a.get_asset_precision(this.state.update.precision),i=t.target,l=i.selectionStart,c=i.value;switch(e){case\"market_fee_percent\":n[e]=this._forcePositive(i.value);break;case\"max_market_fee\":if(new K.a(c).times(o).gt(ae))return s.max_market_fee=\"The number you tried to enter is too large\",this.setState({errors:s});i.value=V.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case\"precision\":n[e]=this._forcePositive(i.value);break;case\"max_supply\":r=!0,new RegExp(/[[:digit:]]/).test(i.value)||(i.value=i.value.replace(/[^0-9.]/g,\"\")),\".\"==i.value.charAt(0)&&(i.value=\"0.\"),i.value.charAt(i.value.length)!=i.value.search(\".\")&&i.value.substr(1),i.value=V.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case\"symbol\":r=!0;var u=i.value.toUpperCase(),p=new RegExp(\"^[.A-Z0-9]+$\");if(\"\"!==u&&!p.test(u))break;L.ChainStore.getAsset(u),n[e]=this._forcePositive(u);break;default:n[e]=i.value}this.setState({update:n},function(){if(r){var t=l-(c.length-n[e].length);i.setSelectionRange(t,t)}}),this._validateEditFields(n)}},{key:\"_validateEditFields\",value:function(e){var t=this.state.errors;t.max_supply=null,t.symbol=L.ChainValidation.is_valid_symbol_error(e.symbol),L.ChainStore.getAsset(e.symbol)&&(t.symbol=z.a.translate(\"account.user_issued_assets.exists\"));try{t.max_supply=e.max_supply<=0?z.a.translate(\"account.user_issued_assets.max_positive\"):new K.a(e.max_supply).times(Math.pow(10,e.precision)).gt(ae)?z.a.translate(\"account.user_issued_assets.too_large\"):null}catch(e){console.log(\"err:\",e),t.max_supply=z.a.translate(\"account.user_issued_assets.too_large\")}var a=!t.symbol&&!t.max_supply&&!t.invalid_bitasset;this.setState({isValid:a,errors:t})}},{key:\"_onFlagChange\",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:\"_onPermissionChange\",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:\"_onInputCoreAsset\",value:function(e,t){\"quote\"===e?this.setState({quoteAssetInput:t}):\"base\"===e&&this.setState({baseAssetInput:t})}},{key:\"_onFoundCoreAsset\",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get(\"id\"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:\"_onInputMarket\",value:function(e){this.setState({marketInput:e})}},{key:\"_onFoundMarketAsset\",value:function(e){e&&this._onUpdateDescription(\"market\",e.get(\"symbol\"))}},{key:\"_onCoreRateChange\",value:function(e,t){var a=void 0,n=void 0;if(\"quote\"===e)a=V.a.limitByPrecision(t.target.value,this.state.update.precision),n=null;else{if(!(t&&\"amount\"in t))return;a=\"\"==t.amount?\"0\":V.a.limitByPrecision(t.amount.toString().replace(/,/g,\"\"),this.props.core.get(\"precision\")),n=t.asset.get(\"id\")}this.state.core_exchange_rate[e]={amount:a,asset_id:n},this.forceUpdate()}},{key:\"_onToggleBitAsset\",value:function(){this.state.update;this.state.isBitAsset=!this.state.isBitAsset,this.state.isBitAsset||(this.state.is_prediction_market=!1);var e=this._getPermissions(this.state),t=e.flagBooleans,a=e.permissionBooleans;this.state.flagBooleans=t,this.state.permissionBooleans=a,this.forceUpdate()}},{key:\"_onTogglePM\",value:function(){this.state.is_prediction_market=!this.state.is_prediction_market,this.state.update.precision=this.props.core.get(\"precision\"),this.state.core_exchange_rate.base.asset_id=this.props.core.get(\"id\"),this.forceUpdate()}},{key:\"render\",value:function(){var e=this.props,t=e.globalObject,a=e.core,n=this.state,r=n.errors,o=n.isValid,i=n.update,l=n.flagBooleans,c=n.permissionBooleans,u=n.core_exchange_rate,p=n.is_prediction_market,d=n.isBitAsset,m=n.bitasset_opts,h=i.symbol.length,f=\"N/A\";3===h?f=s.a.createElement(S.a,{amount:Object(Q.c)(\"asset_create\",[\"symbol3\"],t),asset:\"1.3.0\"}):4===h?f=s.a.createElement(S.a,{amount:Object(Q.c)(\"asset_create\",[\"symbol4\"],t),asset:\"1.3.0\"}):h>4&&(f=s.a.createElement(S.a,{amount:Object(Q.c)(\"asset_create\",[\"long_symbol\"],t),asset:\"1.3.0\"}));var b=[],g=function(e,t,a){return s.a.createElement(\"table\",{key:\"table_\"+e,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+e}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:a,onChange:t})))))};for(var _ in c)c[_]&&\"charge_market_fee\"!==_&&b.push(g(_,this._onFlagChange.bind(this,_),l[_]));b.push(g(\"visible\",this._onUpdateDescription.bind(this,\"visible\"),!i.description.visible&&!1===i.description.visible));var v=[];for(var y in c)v.push(s.a.createElement(\"table\",{key:\"table_\"+y,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+y}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:c[y],onChange:this._onPermissionChange.bind(this,y)}))))));var E=s.a.createElement(\"div\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this._reset.bind(this),value:z.a.translate(\"account.perm.reset\")},s.a.createElement(A.a,{content:\"account.perm.reset\"})),s.a.createElement(\"button\",{className:D()(\"button\",{disabled:!o}),onClick:this._createAsset.bind(this)},s.a.createElement(A.a,{content:\"header.create_asset\"})));return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(\"div\",{className:\"tabs-header\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"header.create_asset\"}))),s.a.createElement(T.b,{setting:\"createAssetTab\",className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",contentClass:\"grid-block shrink small-vertical medium-horizontal padding\",segmented:!1,actionButtons:E},s.a.createElement(T.a,{title:\"account.user_issued_assets.primary\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.symbol\"}),s.a.createElement(\"input\",{type:\"text\",value:i.symbol,onChange:this._onUpdateInput.bind(this,\"symbol\")})),r.symbol?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.symbol):null,s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.max_supply\"}),\" \",i.symbol?s.a.createElement(\"span\",null,\"(\",i.symbol,\")\"):null,s.a.createElement(\"input\",{type:\"text\",value:i.max_supply,onChange:this._onUpdateInput.bind(this,\"max_supply\")})),r.max_supply?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.max_supply):null,s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.decimals\"}),s.a.createElement(\"input\",{min:\"0\",max:\"8\",step:\"1\",type:\"range\",value:i.precision,onChange:this._onUpdateInput.bind(this,\"precision\")})),s.a.createElement(\"p\",null,i.precision),s.a.createElement(\"div\",{style:{marginBottom:10},className:\"txtlabel cancel\"},s.a.createElement(A.a,{content:\"account.user_issued_assets.precision_warning\"})),s.a.createElement(\"table\",{className:\"table\",style:{width:\"inherit\"}},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.mpa\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:d,onChange:this._onToggleBitAsset.bind(this)}))))),d?s.a.createElement(\"table\",{className:\"table\",style:{width:\"inherit\"}},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.pm\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:p,onChange:this._onTogglePM.bind(this)}))))):null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.core_exchange_rate\"}),s.a.createElement(\"label\",null,s.a.createElement(\"div\",{className:\"grid-block no-margin\"},r.quote_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.quote_asset):null,r.base_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.base_asset):null,s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(\"div\",{className:\"amount-selector\",style:{width:\"100%\",paddingRight:\"10px\"}},s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.quote\"}),s.a.createElement(\"div\",{className:\"inline-label\"},s.a.createElement(\"input\",{type:\"text\",placeholder:\"0.0\",onChange:this._onCoreRateChange.bind(this,\"quote\"),value:u.quote.amount})))),s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(G.a,{label:\"account.user_issued_assets.base\",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,\"base\"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"}}))),s.a.createElement(\"div\",null,s.a.createElement(\"h5\",null,s.a.createElement(A.a,{content:\"exchange.price\"}),s.a.createElement(\"span\",null,\":\",\" \",V.a.format_number(V.a.get_asset_price(u.quote.amount*V.a.get_asset_precision(i.precision),{precision:i.precision},u.base.amount*V.a.get_asset_precision(a),a),2+(parseInt(i.precision,10)||8))),s.a.createElement(\"span\",null,\" \",i.symbol,\"/\",a.get(\"symbol\"))))),s.a.createElement(\"div\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_1\",component:\"label\",className:\"has-error\"}),s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_2\",component:\"p\"})),s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",f))),s.a.createElement(T.a,{title:\"account.user_issued_assets.description\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.description\"}),s.a.createElement(\"label\",null,s.a.createElement(\"textarea\",{style:{height:\"7rem\"},rows:\"1\",value:i.description.main,onChange:this._onUpdateDescription.bind(this,\"main\")})),s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.short\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.short_name,onChange:this._onUpdateDescription.bind(this,\"short_name\")})),s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.market\"}),s.a.createElement(W.a,{label:\"account.user_issued_assets.name\",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundMarketAsset.bind(this)}),p?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.condition\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,\"condition\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.expiry\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"date\",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,\"expiry\")}))):null)),d?s.a.createElement(T.a,{title:\"account.user_issued_assets.bitasset_opts\"},s.a.createElement(ne,{bitasset_opts:m,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:m.short_backing_asset,assetPrecision:i.precision,assetSymbol:i.symbol,isPredictionMarket:p})):null,s.a.createElement(T.a,{title:\"account.permissions\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"div\",{style:{maxWidth:800}},s.a.createElement(F.a,{path:\"components/AccountAssetCreate\",section:\"permissions\"})),v)),s.a.createElement(T.a,{title:\"account.user_issued_assets.flags\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"div\",{style:{maxWidth:800}},s.a.createElement(F.a,{path:\"components/AccountAssetCreate\",section:\"flags\"})),c.charge_market_fee?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.market_fee\"}),s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.charge_market_fee\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:l.charge_market_fee,onChange:this._onFlagChange.bind(this,\"charge_market_fee\")}))))),s.a.createElement(\"div\",{className:D()({disabled:!l.charge_market_fee})},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.market_fee\"}),\" \",\"(%)\",s.a.createElement(\"input\",{type:\"number\",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,\"market_fee_percent\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.max_market_fee\"}),\" \",\"(\",i.symbol,\")\",s.a.createElement(\"input\",{type:\"number\",value:i.max_market_fee,onChange:this._onUpdateInput.bind(this,\"max_market_fee\")})),r.max_market_fee?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.max_market_fee):null)):null,s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.flags\"})),b))))))}}]),t}();se.propTypes={core:c.a.ChainAsset.isRequired,globalObject:c.a.ChainObject.isRequired},se.defaultProps={globalObject:\"2.0.0\",core:\"1.3.0\"},se=Object(u.a)(se);var re=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),re(t,[{key:\"getFee\",value:function(){return Object(Q.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:\"render\",value:function(){var e=this.props,t=e.opType,a=e.options,n=e.globalObject;if(!t||!a||!n)return null;var r=Object(Q.c)(t,a,n);return s.a.createElement(S.a,{amount:r,asset:\"1.3.0\"})}}]),t}();oe.propTypes={globalObject:c.a.ChainObject.isRequired,opType:E.a.string,options:E.a.array},oe.defaultProps={globalObject:\"2.0.0\",options:[]};var ie=Object(u.a)(oe),le=a(144),ce=a(142),ue=a(168),pe=a(192),de=a(23),me=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var he=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={listType:e.assetWhiteListType,accountTable:-1===e.assetWhiteListType.indexOf(\"market\"),listTypes:[\"whitelist_authorities\",\"blacklist_authorities\",\"whitelist_markets\",\"blacklist_markets\"],assetInput:null,asset_id:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),me(t,[{key:\"renderAccountTables\",value:function(){var e=this,t=this.state.listType;return this.props.whiteListEnabled?s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"explorer.account.title\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.perm.remove_text\"})))),s.a.createElement(\"tbody\",null,this.props[t].map(function(a){return s.a.createElement(\"tr\",{key:a},s.a.createElement(\"td\",null,s.a.createElement(ce.a,{account:a})),s.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,t,\"remove\",a)},s.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))}))),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(pe.a,{label:\"account.whitelist.\"+t,accountName:this.props.authority_name,account:this.props.authority_name,onChange:this.props.onAccountNameChanged.bind(this,\"authority_name\"),onAccountChanged:this.props.onAccountChanged.bind(this,\"new_authority_id\"),error:null,tabIndex:1,action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,t,\"add\",this.props.new_authority_id)}))):s.a.createElement(\"div\",null,s.a.createElement(A.a,{className:\"txtlabel cancel\",component:\"p\",content:\"explorer.asset.whitelist.enable_flag\"}))}},{key:\"_onAssetChange\",value:function(e){this.setState({assetInput:e})}},{key:\"_onAssetFound\",value:function(e){this.setState({asset_id:e?e.get(\"id\"):null})}},{key:\"renderMarketTable\",value:function(){var e=this,t=this.state.listType;return s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"explorer.asset.title\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.perm.remove_text\"})))),s.a.createElement(\"tbody\",null,this.props[t].map(function(a){return s.a.createElement(\"tr\",{key:a},s.a.createElement(\"td\",null,s.a.createElement(ue.a,{asset:a})),s.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,t,\"remove\",a)},s.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))}))),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(W.a,{label:\"explorer.asset.whitelist.\"+t,onChange:this._onAssetChange.bind(this),asset:this.state.assetInput,assetInput:this.state.assetInput,tabIndex:1,style:{width:\"100%\"},onFound:this._onAssetFound.bind(this),action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,t,\"add\",this.state.asset_id)})))}},{key:\"_onSwitchType\",value:function(e){this.setState({listType:e,accountTable:-1===e.indexOf(\"market\")}),de.a.changeViewSetting({assetWhiteListType:e})}},{key:\"render\",value:function(){var e=this,t=this.state.accountTable,a=this.state.listTypes.indexOf(this.state.listType);return s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"header-selector\",style:{paddingBottom:\"2rem\"}},s.a.createElement(\"div\",{className:\"selector\"},this.state.listTypes.map(function(t,n){return s.a.createElement(\"div\",{key:t,className:D()(\"inline-block\",{inactive:a!==n}),onClick:e._onSwitchType.bind(e,t)},s.a.createElement(A.a,{content:\"explorer.asset.whitelist.\"+t}))}))),t?this.renderAccountTables():this.renderMarketTable(),this.props.children))}}]),t}(),fe=Object(p.a)(he,{listenTo:function(){return[i.a]},getProps:function(){return{assetWhiteListType:i.a.getState().viewSettings.get(\"assetWhiteListType\",\"whitelist_authorities\")}}}),be=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ge=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={producer_name:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),be(t,[{key:\"onAccountChanged\",value:function(e){this.setState({new_producer_id:e?e.get(\"id\"):null})}},{key:\"onAccountNameChanged\",value:function(e){this.setState({producer_name:e})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.witnessFed,n=t.committeeFed;return a||n?s.a.createElement(\"div\",{className:\"grid-content small-12 large-8 large-offset-2\"},s.a.createElement(A.a,{component:\"p\",content:\"account.user_issued_assets.feed_not_allowed_1\",className:\"has-error\"}),s.a.createElement(A.a,{component:\"p\",content:\"account.user_issued_assets.feed_not_allowed_2\"})):s.a.createElement(\"div\",{className:\"grid-content small-12 large-8 large-offset-2\"},s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null),s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"explorer.account.title\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.perm.remove_text\"})))),s.a.createElement(\"tbody\",null,this.props.producers.map(function(t,a){return s.a.createElement(\"tr\",{key:t},s.a.createElement(\"td\",{style:{textAlign:\"left\"}},\"#\",a+1),s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(ce.a,{account:t})),s.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,\"remove\",t)},s.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))}))),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(pe.a,{label:\"account.user_issued_assets.add_feed\",accountName:this.state.producer_name,account:this.state.producer_name,onChange:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),error:null,tabIndex:1,action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,\"add\",this.state.new_producer_id)})))}}]),t}(),_e=a(131),ve=a.n(_e),ye=a(2265),Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},we=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ce(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Oe(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Se=new K.a(Z.a.GRAPHENE_MAX_SHARE_SUPPLY),xe=function(){Y.Notification.error({message:z.a.translate(\"account.user_issued_assets.invalid_backing_asset_change\")})},Ne=function(e){function t(e){Ae(this,t);var a=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a.showAssetUpdateConfirmationModal=a.showAssetUpdateConfirmationModal.bind(a),a.hideAssetUpdateConfirmationModal=a.hideAssetUpdateConfirmationModal.bind(a),a}return Oe(t,s.a.Component),we(t,[{key:\"_openConfirm\",value:function(){this.showAssetUpdateConfirmationModal()}},{key:\"_cancelConfirm\",value:function(){this.hideAssetUpdateConfirmationModal()}},{key:\"resetState\",value:function(e){var t=e.asset.toJS(),a=void 0!==t.bitasset_data_id,n=V.a.get_asset_precision(t.precision),s=V.a.get_asset_precision(e.core.get(\"precision\")),r=new K.a(t.options.max_market_fee).div(n).toString(),o=new K.a(t.options.max_supply).div(n).toString(),i=t.options.core_exchange_rate;i.quote.amount=i.quote.asset_id===t.id?new K.a(i.quote.amount).div(n).toString():new K.a(i.quote.amount).div(s).toString(),i.base.amount=i.base.asset_id===t.id?new K.a(i.base.amount).div(n).toString():new K.a(i.base.amount).div(s).toString();var l=j.a.getFlagBooleans(t.options.flags,a),c=j.a.getFlagBooleans(t.options.issuer_permissions,a);t.options.market_fee_percent/=100;var u=L.ChainStore.getAsset(i.quote.asset_id).get(\"symbol\"),p=L.ChainStore.getAsset(i.base.asset_id).get(\"symbol\");return{isAssetUpdateConfirmationModalVisible:!1,update:{max_supply:o,max_market_fee:r,market_fee_percent:t.options.market_fee_percent,description:j.a.parseDescription(t.options.description)},core_exchange_rate:i,issuer:t.issuer,new_issuer_account_id:null,new_funder_account:e.account.get(\"id\"),asset_to_update:t.id,errors:{max_supply:null},new_authority_id:null,authority_name:null,isValid:!0,flagBooleans:l,permissionBooleans:c,isBitAsset:a,coreRateQuoteAssetName:u,quoteAssetInput:u,coreRateBaseAssetName:p,baseAssetInput:p,claimFeesAmount:0,bitasset_opts:a?t.bitasset.options:null,original_bitasset_opts:a?e.asset.getIn([\"bitasset\",\"options\"]).toJS():null,marketInput:\"\",whitelist_authorities:e.asset.getIn([\"options\",\"whitelist_authorities\"]),blacklist_authorities:e.asset.getIn([\"options\",\"blacklist_authorities\"]),whitelist_markets:e.asset.getIn([\"options\",\"whitelist_markets\"]),blacklist_markets:e.asset.getIn([\"options\",\"blacklist_markets\"]),maxFeedProducers:e.globalObject.getIn([\"parameters\",\"maximum_asset_feed_publishers\"]),feedProducers:a?e.asset.getIn([\"bitasset\",\"feeds\"],[]).map(function(e){return e.first()}):null,originalFeedProducers:a?e.asset.getIn([\"bitasset\",\"feeds\"],[]).map(function(e){return e.first()}):null}}},{key:\"hideAssetUpdateConfirmationModal\",value:function(){this.setState({isAssetUpdateConfirmationModalVisible:!1})}},{key:\"showAssetUpdateConfirmationModal\",value:function(){this.setState({isAssetUpdateConfirmationModalVisible:!0})}},{key:\"assetChanged\",value:function(){var e=this.state,t=this.resetState(this.props);return JSON.stringify(e.update)!==JSON.stringify(t.update)||JSON.stringify(e.core_exchange_rate)!==JSON.stringify(t.core_exchange_rate)||null!==e.new_issuer_account_id&&e.new_issuer_account_id!==e.issuer||JSON.stringify(e.flagBooleans)!==JSON.stringify(t.flagBooleans)||JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)||JSON.stringify(e.whitelist_authorities)!==JSON.stringify(t.whitelist_authorities)||JSON.stringify(e.blacklist_authorities)!==JSON.stringify(t.blacklist_authorities)||JSON.stringify(e.whitelist_markets)!==JSON.stringify(t.whitelist_markets)||JSON.stringify(e.blacklist_markets)!==JSON.stringify(t.blacklist_markets)}},{key:\"tabChanged\",value:function(e){var t=this.tabsChanged();return!!t[e]&&t[e]}},{key:\"tabsChanged\",value:function(){var e=this.state,t=this.resetState(this.props),a=[];return e.update.max_supply===t.update.max_supply&&e.core_exchange_rate.base.amount===t.core_exchange_rate.base.amount&&e.core_exchange_rate.quote.amount===t.core_exchange_rate.quote.amount||(a[0]=!0),JSON.stringify(e.whitelist_authorities)===JSON.stringify(t.whitelist_authorities)&&JSON.stringify(e.blacklist_authorities)===JSON.stringify(t.blacklist_authorities)&&JSON.stringify(e.whitelist_markets)===JSON.stringify(t.whitelist_markets)&&JSON.stringify(e.blacklist_markets)===JSON.stringify(t.blacklist_markets)||(a[1]=!0),e.update.description.main===t.update.description.main&&e.update.description.short_name===t.update.description.short_name&&e.update.description.market===t.update.description.market||(a[2]=!0),JSON.stringify(e.bitasset_opts)!==JSON.stringify(t.original_bitasset_opts)&&(a[3]=!0),JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)&&(a[4]=!0),JSON.stringify(e.flagBooleans)===JSON.stringify(t.flagBooleans)&&e.update.market_fee_percent===t.update.market_fee_percent&&e.update.max_market_fee===t.update.max_market_fee||(a[5]=!0),JSON.stringify(e.feedProducers)!==JSON.stringify(t.originalFeedProducers)&&(a[6]=!0),a}},{key:\"pageChanged\",value:function(){var e=this.state,t=e.isBitAsset,a=e.bitasset_opts,n=e.original_bitasset_opts,s=e.feedProducers,r=e.originalFeedProducers;return this.assetChanged()||t&&(JSON.stringify(a)!==JSON.stringify(n)||!V.a.are_equal_shallow(s.toJS(),r.toJS()))}},{key:\"_updateAsset\",value:function(e){var t=this;e.preventDefault(),this.hideAssetUpdateConfirmationModal();var a=this.state,n=a.update,s=a.issuer,r=a.new_issuer_account_id,o=a.core_exchange_rate,i=a.flagBooleans,l=a.permissionBooleans,c=a.isBitAsset,u=a.bitasset_opts,p=a.original_bitasset_opts,d=a.feedProducers,m=a.originalFeedProducers,h=j.a.getFlags(i);128&this.props.asset.getIn([\"options\",\"flags\"])&&!(128&this.props.asset.getIn([\"options\",\"issuer_permissions\"]))&&(h+=128);var f=j.a.getPermissions(l,c);this.state.marketInput!==n.description.market&&(n.description.market=\"\");var b=JSON.stringify(n.description),g={whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets},_=c?d.toJS():null,v=c?m.toJS():null;C.a.updateAsset(s,r,n,o,this.props.asset,h,f,c,u,p,b,g,_,v,this.assetChanged()).then(function(){console.log(\"... AssetActions.updateAsset(account_id, update)\",s,r,t.props.asset.get(\"id\"),n),setTimeout(function(){L.ChainStore.getAsset(t.props.asset.get(\"id\")),t.setState(t.resetState(t.props))},3e3)})}},{key:\"_reset\",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:\"_forcePositive\",value:function(e){return parseFloat(e)<0?\"0\":e}},{key:\"_onUpdateDescription\",value:function(e,t){var a=this.state.update,n=!0;switch(e){case\"condition\":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case\"short_name\":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case\"market\":a.description[e]=t;break;case\"visible\":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:\"onChangeBitAssetOpts\",value:function(e,t){var a=this.state.bitasset_opts;switch(e){case\"force_settlement_offset_percent\":case\"maximum_force_settlement_volume\":a[e]=parseFloat(t.target.value)*Z.a.GRAPHENE_1_PERCENT;break;case\"feed_lifetime_sec\":case\"force_settlement_delay_sec\":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),a[e]=parseInt(60*parseFloat(t.target.value),10);break;case\"short_backing_asset\":a[e]=t;break;case\"minimum_feeds\":a[e]=parseInt(t.target.value,10)}this.forceUpdate()}},{key:\"_onUpdateInput\",value:function(e,t){var a=this.state.update,n=!0,s=V.a.get_asset_precision(this.props.asset.get(\"precision\"));switch(e){case\"market_fee_percent\":a[e]=this._forcePositive(t.target.value);break;case\"max_market_fee\":var r=t.amount.replace(/,/g,\"\");if(new K.a(r).times(s).gt(Se))return n=!1,this.setState({errors:{max_market_fee:\"The number you tried to enter is too large\"}});a[e]=V.a.limitByPrecision(r,this.props.asset.get(\"precision\"));break;case\"max_supply\":var o=t.amount.replace(/,/g,\"\");a[e]=V.a.limitByPrecision(o,this.props.asset.get(\"precision\"));break;default:a[e]=t.target.value}n&&(this.setState({update:a}),this._validateEditFields(a))}},{key:\"_validateEditFields\",value:function(e){var t=e.core_exchange_rate,a=e.feedProducers?e.feedProducers:this.state.feedProducers,n=this.state.flagBooleans,s=this.props,r=s.asset,o=s.core,i={max_supply:null,quote_asset:null,base_asset:null,max_feed_producer:null,conflict_producer:null,invalid_market_pair:null},l=this.props.asset.get(\"precision\");try{i.max_supply=e.max_supply<=0?z.a.translate(\"account.user_issued_assets.max_positive\"):new K.a(parseInt(e.max_supply,10)).times(Math.pow(10,l)).gt(Se)?z.a.translate(\"account.user_issued_assets.too_large\"):null}catch(e){console.log(\"err:\",e),i.max_supply=z.a.translate(\"account.user_issued_assets.too_large\")}t&&(t.quote.asset_id!==r.get(\"id\")&&t.base.asset_id!==r.get(\"id\")&&(i.quote_asset=z.a.translate(\"account.user_issued_assets.need_asset\",{name:r.get(\"symbol\")})),t.quote.asset_id!==o.get(\"id\")&&t.base.asset_id!==o.get(\"id\")&&(i.base_asset=z.a.translate(\"account.user_issued_assets.need_asset\",{name:o.get(\"symbol\")}))),a&&a.size>this.state.maxFeedProducers&&(i.max_feed_producer=z.a.translate(\"account.user_issued_assets.too_many_feed\",{max:this.state.maxFeedProducers})),n.committee_fed_asset&&n.witness_fed_asset&&(i.conflict_producer=z.a.translate(\"account.user_issued_assets.conflict_feed\")),this.state.marketInput==this.props.asset.get(\"symbol\")&&(i.invalid_market_pair=z.a.translate(\"account.user_issued_assets.invalid_market_pair\"));var c=!(i.invalid_market_pair||i.max_supply||i.base_asset||i.quote_asset||i.max_feed_producer||i.conflict_producer);this.setState({isValid:c,errors:i})}},{key:\"_onCoreRateChange\",value:function(e,t){t.amount=\"\"==t.amount?\"0\":t.amount.replace(/,/g,\"\"),t.amount=V.a.limitByPrecision(t.amount,t.asset.get(\"precision\")),this.state.core_exchange_rate[e]={amount:t.amount,asset_id:t.asset.get(\"id\")},this.forceUpdate()}},{key:\"onAccountChanged\",value:function(e,t){this.setState(ke({},e,t?t.get(\"id\"):null))}},{key:\"onAccountNameChanged\",value:function(e,t){this.setState(ke({},e,t))}},{key:\"_onInputCoreAsset\",value:function(e,t){\"quote\"===e?this.setState({quoteAssetInput:t}):\"base\"===e&&this.setState({baseAssetInput:t})}},{key:\"_onFoundCoreAsset\",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get(\"id\"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:\"_onInputMarket\",value:function(e){this.setState({marketInput:e})}},{key:\"_onFoundMarketAsset\",value:function(e){e&&this._onUpdateDescription(\"market\",e.get(\"symbol\"))}},{key:\"_onFlagChange\",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t}),this._validateEditFields({})}},{key:\"_getCurrentSupply\",value:function(){var e=this.props,t=e.asset,a=e.getDynamicObject;return a&&a(t.get(\"dynamic_asset_data_id\")).get(\"current_supply\")}},{key:\"_onPermissionChange\",value:function(e){var t=this.state,a=t.isBitAsset,n=t.permissionBooleans,s=!j.a.getFlagBooleans(this.props.asset.getIn([\"options\",\"issuer_permissions\"]),a)[e];if(this._getCurrentSupply()>0&&s)Y.Notification.error({message:z.a.translate(\"account.user_issued_assets.invalid_permissions_change\")});else{var r=n;r[e]=!r[e],this.setState({permissionBooleans:r})}}},{key:\"_onClaimInput\",value:function(e){this.setState({claimFeesAmount:e.amount})}},{key:\"onChangeList\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"add\",a=arguments[2],n=this.state[e];\"add\"!==t||n.includes(a)?\"remove\"===t&&n.includes(a)&&(n=n.remove(n.indexOf(a))):n=n.push(a),this.setState(ke({},e,n))}},{key:\"onChangeFeedProducerList\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"add\",t=arguments[1],a=this.state.feedProducers;\"add\"!==e||a.includes(t)?\"remove\"===e&&a.includes(t)&&(a=a.remove(a.indexOf(t))):a=a.push(t),this.setState({feedProducers:a}),this._validateEditFields({feedProducers:a})}},{key:\"render\",value:function(){var e,t=this,a=this.props.asset,n=this.state,r=n.errors,o=n.isValid,i=n.update,l=n.core_exchange_rate,c=n.flagBooleans,u=n.permissionBooleans,p=(n.claimFeesAmount,n.isBitAsset),d=n.bitasset_opts,m=a.get(\"symbol\");e=s.a.createElement(ie,{opType:\"asset_update\"});var h=L.ChainStore.getAsset(l.quote.asset_id),f=V.a.get_asset_precision(h.get(\"precision\")),b=L.ChainStore.getAsset(l.base.asset_id),g=V.a.get_asset_precision(b.get(\"precision\")),_=parseFloat(l.quote.amount)*f,v=parseFloat(l.base.amount)*g,y=j.a.getFlagBooleans(a.getIn([\"options\",\"issuer_permissions\"]),void 0!==a.get(\"bitasset\")),E=[],w=function(e,t,a){return s.a.createElement(\"table\",{key:\"table_\"+e,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+e}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:a,onChange:t})))))};for(var k in y)y[k]&&\"charge_market_fee\"!==k&&E.push(w(k,this._onFlagChange.bind(this,k),c[k]));E.push(w(\"visible\",this._onUpdateDescription.bind(this,\"visible\"),!i.description.visible&&!1===i.description.visible));var C=[];for(var O in y)C.push(s.a.createElement(\"table\",{key:\"table_\"+O,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+O}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:u[O],onChange:this._onPermissionChange.bind(this,O)}))))));var S=0;this.tabsChanged().forEach(function(){S++});var x=s.a.createElement(\"div\",null,s.a.createElement(\"button\",{className:D()(\"button\",{disabled:!o||!this.pageChanged()}),style:{width:\"9rem\"},onClick:S>1?this._openConfirm.bind(this):this._updateAsset.bind(this)},S>1?s.a.createElement(A.a,{content:\"account.perm.save_all\"}):s.a.createElement(A.a,{content:\"account.perm.save\"})),s.a.createElement(\"button\",{className:D()(\"button primary hollow\",{disabled:!this.pageChanged()}),onClick:this._reset.bind(this)},s.a.createElement(A.a,{content:\"account.perm.reset\"}))),N=!1;\"1.3.0\"!==h.get(\"id\")&&\"1.3.0\"!==b.get(\"id\")||h.get(\"id\")!==a.get(\"id\")&&b.get(\"id\")!==a.get(\"id\")||(N=!0);var P=a.getIn([\"bitasset\",\"is_prediction_market\"]),M=j.a.parseDescription(this.props.asset.toJS().options.description);return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(\"div\",{className:\"tabs-header\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"header.update_asset\"}),\":\",\" \",m)),s.a.createElement(T.b,{setting:\"updateAssetTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"grid-block padding-top shrink small-vertical medium-horizontal\",segmented:!1,actionButtons:x,onChangeTab:function(e){t.setState({activeTab:e})}},s.a.createElement(T.a,{title:\"account.user_issued_assets.primary\",updatedTab:this.tabChanged(0)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.precision\"}),s.a.createElement(\"span\",null,\": \",a.get(\"precision\"))),s.a.createElement(\"br\",null),s.a.createElement(\"label\",null,s.a.createElement(G.a,{label:\"account.user_issued_assets.max_supply\",amount:i.max_supply,onChange:this._onUpdateInput.bind(this,\"max_supply\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1})),r.max_supply?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.max_supply):null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.core_exchange_rate\"}),s.a.createElement(\"label\",null,s.a.createElement(\"div\",{className:\"grid-block no-margin\"},N?null:s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(W.a,{label:\"account.user_issued_assets.quote_name\",onChange:this._onInputCoreAsset.bind(this,\"quote\"),asset:this.state.quoteAssetInput,assetInput:this.state.quoteAssetInput,tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundCoreAsset.bind(this,\"quote\")})),N?null:s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(W.a,{label:\"account.user_issued_assets.base_name\",onChange:this._onInputCoreAsset.bind(this,\"base\"),asset:this.state.baseAssetInput,assetInput:this.state.baseAssetInput,tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"},onFound:this._onFoundCoreAsset.bind(this,\"base\")})),r.quote_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.quote_asset):null,r.base_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.base_asset):null,s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(G.a,{label:\"account.user_issued_assets.quote\",amount:l.quote.amount,onChange:this._onCoreRateChange.bind(this,\"quote\"),asset:l.quote.asset_id,assets:[l.quote.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"}})),s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(G.a,{label:\"account.user_issued_assets.base\",amount:l.base.amount,onChange:this._onCoreRateChange.bind(this,\"base\"),asset:l.base.asset_id,assets:[l.base.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"}}))),s.a.createElement(\"div\",null,s.a.createElement(\"h5\",null,s.a.createElement(A.a,{content:\"exchange.price\"}),\":\",\" \",s.a.createElement(le.a,{style:{fontWeight:\"bold\"},quote_amount:_,quote_asset:l.quote.asset_id,base_asset:l.base.asset_id,base_amount:v})))),s.a.createElement(\"div\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_1\",component:\"label\",className:\"has-error\"}),s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_2\",component:\"p\"})),s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),s.a.createElement(T.a,{title:\"account.whitelist.title\",updatedTab:this.tabChanged(1)},s.a.createElement(fe,{whiteListEnabled:c.white_list,whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets,new_authority_id:this.state.new_authority_id,authority_name:this.state.authority_name,onAccountNameChanged:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),onChangeList:this.onChangeList.bind(this)},s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),s.a.createElement(T.a,{title:\"account.user_issued_assets.description\",updatedTab:this.tabChanged(2)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(\"textarea\",{style:{height:\"7rem\"},rows:\"1\",value:i.description.main||\"\",onChange:this._onUpdateDescription.bind(this,\"main\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.short\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.short_name||\"\",onChange:this._onUpdateDescription.bind(this,\"short_name\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.market\"}),s.a.createElement(W.a,{label:\"account.user_issued_assets.name\",onChange:this._onInputMarket.bind(this),placeholder:M.market,asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:\"100%\",paddingRight:\"10px\",paddingBottom:\"20px\"},onFound:this._onFoundMarketAsset.bind(this)}),r.invalid_market_pair?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.invalid_market_pair):null,P?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.condition\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,\"condition\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.expiry\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"date\",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,\"expiry\")}))):null,s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),p?s.a.createElement(T.a,{title:\"account.user_issued_assets.bitasset_opts\",updatedTab:this.tabChanged(3)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(ne,{bitasset_opts:d,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:d.short_backing_asset,assetPrecision:a.get(\"precision\"),assetSymbol:a.get(\"symbol\"),disableBackingAssetChange:this._getCurrentSupply()>0,disabledBackingAssetChangeCallback:xe}),s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))):null,s.a.createElement(T.a,{title:\"account.permissions\",updatedTab:this.tabChanged(4)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(F.a,{path:\"components/AccountAssetCreate\",section:\"permissions\"}),s.a.createElement(\"p\",{className:\"grid-content has-error\"},s.a.createElement(A.a,{content:\"account.user_issued_assets.perm_warning\"})),C,s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),s.a.createElement(T.a,{title:\"account.user_issued_assets.flags\",updatedTab:this.tabChanged(5)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(F.a,{path:\"components/AccountAssetCreate\",section:\"flags\"}),y.charge_market_fee?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.market_fee\"}),s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.charge_market_fee\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:c.charge_market_fee,onChange:this._onFlagChange.bind(this,\"charge_market_fee\")}))))),s.a.createElement(\"div\",{className:D()({disabled:!c.charge_market_fee})},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.market_fee\"}),\" \",\"(%)\",s.a.createElement(\"input\",{type:\"number\",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,\"market_fee_percent\")})),s.a.createElement(\"label\",null,s.a.createElement(G.a,{label:\"account.user_issued_assets.max_market_fee\",amount:i.max_market_fee,onChange:this._onUpdateInput.bind(this,\"max_market_fee\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1})),r.max_market_fee?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.max_market_fee):null)):null,s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.flags\"})),E,s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e),r.conflict_producer?s.a.createElement(\"p\",{className:\"grid-content has-error\"},r.conflict_producer):null)),p?s.a.createElement(T.a,{title:\"account.user_issued_assets.feed_producers\",updatedTab:this.tabChanged(6)},s.a.createElement(ge,{asset:this.props.asset,account:this.props.account,witnessFed:c.witness_fed_asset,committeeFed:c.committee_fed_asset,producers:this.state.feedProducers,onChangeList:this.onChangeFeedProducerList.bind(this)}),r.max_feed_producer?s.a.createElement(\"p\",{className:\"grid-content has-error large-8 large-offset-2\",style:{marginTop:\"20px\"}},r.max_feed_producer):null):null))),s.a.createElement(je,Ee({visible:this.state.isAssetUpdateConfirmationModalVisible,hideModal:this.hideAssetUpdateConfirmationModal,showModal:this.showAssetUpdateConfirmationModal,tabsChanged:this.tabsChanged(),_cancelConfirm:this._cancelConfirm.bind(this),_updateAsset:this._updateAsset.bind(this)},this.props)))}}]),t}();Ne.propTypes={globalObject:c.a.ChainObject.isRequired},Ne.defaultProps={globalObject:\"2.0.0\"},Ne=Object(u.a)(Ne),Ne=Object(P.a)(Ne,{propNames:[\"asset\",\"core\"],defaultProps:{core:\"1.3.0\"},withDynamic:!0});var je=function(e){function t(){Ae(this,t);var e=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Oe(t,s.a.Component),we(t,[{key:\"show\",value:function(){var e=this;this.setState({open:!0},function(){ve.a.publish(e.props.modalId,\"open\")})}},{key:\"onClose\",value:function(){this.setState({open:!1})}},{key:\"render\",value:function(){var e=this.props.tabsChanged,t=[s.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.props._updateAsset},z.a.translate(\"global.confirm\")),s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.props.hideModal},z.a.translate(\"global.cancel\"))];return s.a.createElement(Y.Modal,{visible:this.props.visible,footer:t,onCancel:this.props.hideModal,title:z.a.translate(\"account.confirm_asset_modal.header\")},s.a.createElement(A.a,{content:\"account.confirm_asset_modal.are_you_sure\",component:\"div\",style:{paddingBottom:\"1rem\"}}),s.a.createElement(\"div\",null,s.a.createElement(\"ul\",null,e[0]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.primary\"})):null,e[1]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.whitelist.title\"})):null,e[2]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.description\"})):null,e[3]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.bitasset_opts\"})):null,e[4]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.permissions\"})):null,e[5]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.flags\"})):null,e[6]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.feed_producers\"})):null)))}}]),t}(),Pe=function(e){function t(){return Ae(this,t),Ce(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Oe(t,s.a.Component),we(t,[{key:\"render\",value:function(){var e=this.props.match.params.asset;return s.a.createElement(Ne,Ee({asset:e},this.props))}}]),t}(),Te=Object(ye.a)(Pe),Me=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Me(t,[{key:\"render\",value:function(){var e=this.props.stat_object.toJS();return s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.fees_paid\"}),\" \"),s.a.createElement(\"td\",null,s.a.createElement(S.a,{amount:parseFloat(e.lifetime_fees_paid),asset:\"1.3.0\"}))))}}]),t}();Ie.propTypes={stat_object:c.a.ChainObject.isRequired};var Re=Object(u.a)(Ie),Be=a(560),qe=a(40),De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fe=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ve(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Le(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ue(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ze=function(e){function t(){return Ve(this,t),Le(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ue(t,s.a.Component),Fe(t,[{key:\"render\",value:function(){var e=this.props.dprops;return s.a.createElement(F.a,De({},this.props,{path:\"components/AccountMembership\",section:\"fee-division\",nextMaintenanceTime:{time:e.get(\"next_maintenance_time\")}}))}}]),t}();ze.propTypes={dprops:c.a.ChainObject.isRequired},ze.defaultProps={dprops:\"2.1.0\"},ze=Object(u.a)(ze);var We=function(e){function t(){return Ve(this,t),Le(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ue(t,s.a.Component),Fe(t,[{key:\"upgradeAccount\",value:function(e,t,a){a.preventDefault(),r.a.upgradeAccount(e,t)}},{key:\"componentWillMount\",value:function(){d.a.getFinalFeeAsset(this.props.account,\"account_upgrade\")}},{key:\"render\",value:function(){var e=this.props,t=e.gprops,a=e.core_asset,n=this.props.account.toJS(),r=L.ChainStore.getAccount(n.lifetime_referrer,!1);r&&(n.lifetime_referrer_name=r.get(\"name\"));var o=L.ChainStore.getAccount(n.referrer,!1);o&&(n.referrer_name=o.get(\"name\"));var i=L.ChainStore.getAccount(n.registrar,!1);i&&(n.registrar_name=i.get(\"name\"));var l=n.name,c=n.network_fee_percentage/100,u=n.lifetime_referrer_fee_percentage/100,p=100-c-u,d=p*n.referrer_rewards_percentage/1e4,m=100-d-u-c,h=t.getIn([\"parameters\",\"current_fees\",\"parameters\",8,1,\"membership_lifetime_fee\"])*t.getIn([\"parameters\",\"current_fees\",\"scale\"])/1e4,f=L.ChainStore.getAccountMemberStatus(this.props.account),b=\"account.member.\"+f,g=null;\"annual\"===f&&(g=s.a.createElement(\"span\",null,\"(\",s.a.createElement(A.a,{content:\"account.member.expires\"}),\" \",s.a.createElement(Be.a,{time:n.membership_expiration_date}),\")\"));var _=n.membership_expiration_date;return\"1969-12-31T23:59:59\"===_?_=\"Never\":\"1970-01-01T00:00:00\"===_&&(_=\"N/A\"),s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{segmented:!1,setting:\"membershipTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},s.a.createElement(T.a,{title:\"account.member.membership\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:b}),\" \",g),\"lifetime\"===f?null:s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"large-6 medium-8\"},s.a.createElement(F.a,{path:\"components/AccountMembership\",section:\"lifetime\",feesCashback:100-c,price:{amount:h,asset:a}}),s.a.createElement(\"div\",{className:\"button no-margin\",onClick:this.upgradeAccount.bind(this,n.id,!0)},s.a.createElement(A.a,{content:\"account.member.upgrade_lifetime\"})),\" \",\"   \",null),s.a.createElement(\"br\",null),s.a.createElement(\"hr\",null)),s.a.createElement(\"div\",{className:\"content-block no-margin\"},s.a.createElement(\"div\",{className:\"no-margin grid-block vertical large-horizontal\"},s.a.createElement(\"div\",{className:\"no-margin grid-block large-5\"},s.a.createElement(\"div\",{className:\"grid-content\"},\"lifetime\"===f?s.a.createElement(\"div\",null,s.a.createElement(\"h4\",null,s.a.createElement(A.a,{content:\"account.member.referral_link\"})),s.a.createElement(A.a,{content:\"account.member.referral_text\",wallet_name:Object(qe.l)()}),\":\",s.a.createElement(\"h5\",null,Object(qe.m)()+\"/?r=\"+n.name)):null,s.a.createElement(\"h4\",null,s.a.createElement(A.a,{content:\"account.member.fee_allocation\"})),s.a.createElement(\"table\",{className:\"table key-value-table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.network_percentage\"})),s.a.createElement(\"td\",null,c,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.lifetime_referrer\"}),\" \",\"  (\",s.a.createElement(w.a,{to:\"account/\"+n.lifetime_referrer_name},n.lifetime_referrer_name),\")\"),s.a.createElement(\"td\",null,u,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.registrar\"}),\" \",\"  (\",s.a.createElement(w.a,{to:\"account/\"+n.registrar_name},n.registrar_name),\")\"),s.a.createElement(\"td\",null,m,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.referrer\"}),\" \",\"  (\",s.a.createElement(w.a,{to:\"account/\"+n.referrer_name},n.referrer_name),\")\"),s.a.createElement(\"td\",null,d,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.membership_expiration\"}),\" \"),s.a.createElement(\"td\",null,_)))),s.a.createElement(\"h4\",{style:{paddingTop:\"1rem\"}},s.a.createElement(A.a,{content:\"account.member.fees_cashback\"})),s.a.createElement(\"table\",{className:\"table key-value-table\"},s.a.createElement(Re,{stat_object:n.statistics})))),s.a.createElement(\"div\",{className:\"grid-block large-7\"},s.a.createElement(\"div\",{className:\"grid-content\"},s.a.createElement(ze,{account:l,networkFee:c,referrerFee:d,registrarFee:m,lifetimeFee:u,referrerTotalFee:p,maintenanceInterval:t.getIn([\"parameters\",\"maintenance_interval\"]),vestingThreshold:{amount:t.getIn([\"parameters\",\"cashback_vesting_threshold\"]),asset:a},vestingPeriod:t.getIn([\"parameters\",\"cashback_vesting_period_seconds\"])/60/60/24}))))))))))}}]),t}();We.propTypes={account:c.a.ChainAccount.isRequired,gprops:c.a.ChainObject.isRequired,core_asset:c.a.ChainAsset.isRequired},We.defaultProps={gprops:\"2.0.0\",core_asset:\"1.3.0\"};var Je=We=Object(u.a)(We),Ke=a(66),Ge=a(14),He=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ze(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Qe(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ye(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xe=function(e){function t(){return Ze(this,t),Qe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ye(t,s.a.Component),He(t,[{key:\"_onClaim\",value:function(e,t){var a=this;t.preventDefault(),Ke.a.claimVestingBalance(this.props.account.id,this.props.vb,e).then(function(){\"function\"==typeof a.props.handleChanged&&a.props.handleChanged()})}},{key:\"render\",value:function(){var e=this.props.vb;if(!this.props.vb)return null;var t=void 0,a=void 0,n=void 0,r=void 0,o=void 0;return e&&(o=e.balance.amount,t=L.ChainStore.getAsset(e.balance.asset_id),n=e.policy[1].coin_seconds_earned,r=0===(a=e.policy[1].vesting_seconds)?1:n/(a*o)),t&&o?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h5\",content:\"account.vesting.balance_number\",id:e.id}),s.a.createElement(\"table\",{className:\"table key-value-table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.cashback\"})),s.a.createElement(\"td\",null,s.a.createElement(S.a,{amount:e.balance.amount,asset:e.balance.asset_id}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.earned\"})),s.a.createElement(\"td\",null,V.a.format_number(V.a.get_asset_amount(n/86400,t),0),\" \",s.a.createElement(A.a,{content:\"account.member.coindays\"}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.required\"})),s.a.createElement(\"td\",null,V.a.format_number(V.a.get_asset_amount(e.balance.amount*a/86400,t),0),\" \",s.a.createElement(A.a,{content:\"account.member.coindays\"}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.remaining\"})),s.a.createElement(\"td\",null,V.a.format_number(a*(1-r)/86400||0,2),\" days\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.available\"})),s.a.createElement(\"td\",null,V.a.format_number(100*r,2),\"% /\",\" \",s.a.createElement(S.a,{amount:r*e.balance.amount,asset:t.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\",style:{textAlign:\"right\"}},s.a.createElement(\"button\",{onClick:this._onClaim.bind(this,!1),className:\"button\"},s.a.createElement(A.a,{content:\"account.member.claim\"}))))))):null}}]),t}(),$e=function(e){function t(){Ze(this,t);var e=Qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={vbs:null},e}return Ye(t,s.a.Component),He(t,[{key:\"componentWillMount\",value:function(){this.retrieveVestingBalances.call(this,this.props.account.get(\"id\"))}},{key:\"componentWillUpdate\",value:function(e){var t=e.account.get(\"id\");t!==this.props.account.get(\"id\")&&this.retrieveVestingBalances.call(this,t)}},{key:\"retrieveVestingBalances\",value:function(e){var t=this;e=e||this.props.account.get(\"id\"),Ge.Apis.instance().db_api().exec(\"get_vesting_balances\",[e]).then(function(e){t.setState({vbs:e})}).catch(function(e){console.log(\"error:\",e)})}},{key:\"render\",value:function(){var e=this,t=this.state.vbs;if(!t||!this.props.account||!this.props.account.get(\"vesting_balances\"))return null;var a=this.props.account.toJS(),n=t.map(function(t){if(t.balance.amount)return s.a.createElement(Xe,{key:t.id,vb:t,account:a,handleChanged:e.retrieveVestingBalances.bind(e)})}).filter(function(e){return!!e});return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{segmented:!1,setting:\"vestingTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},s.a.createElement(T.a,{title:\"account.vesting.title\"},s.a.createElement(A.a,{content:\"account.vesting.explain\",component:\"p\"}),n.length?n:s.a.createElement(\"h4\",{style:{paddingTop:\"1rem\"}},s.a.createElement(A.a,{content:\"account.vesting.no_balances\"})))))))}}]),t}();$e.VestingBalance=Xe;var et=$e,tt=a(234),at=a(349),nt=a(44),st=a(19),rt=a(97),ot=a(556),it=a.n(ot),lt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ct=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a._getInitialState(),a.onPasswordEnter=a.onPasswordEnter.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.onCancel=a.onCancel.bind(a),a.onClose=a.onClose.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),lt(t,[{key:\"_getInitialState\",value:function(){return{isShowQrcode:!1,keyString:null}}},{key:\"onCancel\",value:function(){this.props.hideModal(),this.onClose()}},{key:\"onClose\",value:function(){this.refs.password_input&&(this.refs.password_input.value=\"\"),this.setState(this._getInitialState())}},{key:\"onPasswordEnter\",value:function(e){e.preventDefault();var t=this.refs.password_input.value,a=this.props.keyValue;if(null!=t&&\"\"!=t){if(void 0!==a&&null!=a&&\"\"!=a){var n=L.Aes.fromSeed(t).encryptToHex(a);this.setState({isShowQrcode:!0,keyString:n})}}else this.setState({isShowQrcode:!0,keyString:a})}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&this.onPasswordEnter(e)}},{key:\"render\",value:function(){var e=this,t=null;this.state.isShowQrcode&&(t={textAlign:\"center\"});var a=[];return this.state.isShowQrcode||a.push(s.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.onPasswordEnter},z.a.translate(\"modal.ok\"))),a.push(s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onCancel},z.a.translate(\"cancel\"))),s.a.createElement(Y.Modal,{visible:this.props.visible,onCancel:this.onCancel,footer:a},s.a.createElement(\"div\",{className:\"text-center\"},s.a.createElement(\"div\",{style:{margin:\"1.5rem 0\"}},s.a.createElement(A.a,{component:\"h4\",content:\"modal.qrcode.title\"})),s.a.createElement(\"form\",{className:\"full-width\",style:{margin:\"0 3.5rem\"},onSubmit:this.onPasswordEnter,noValidate:!0},s.a.createElement(\"div\",{className:\"form-group\"},this.state.isShowQrcode?s.a.createElement(\"section\",{style:t},s.a.createElement(\"span\",{style:{background:\"#fff\",padding:\".75rem\",display:\"inline-block\"}},s.a.createElement(it.a,{size:256,value:this.state.keyString}))):s.a.createElement(\"section\",null,s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(A.a,{unsafe:!0,content:\"modal.qrcode.input_message\"})),s.a.createElement(\"input\",{name:\"password\",type:\"text\",onFocus:function(){e.refs.password_input.setAttribute(\"type\",\"password\")},ref:\"password_input\",autoComplete:\"off\",onKeyDown:this.onKeyDown}))))))}}]),t}();ct.propTypes={modalId:E.a.string.isRequired,keyValue:E.a.string},ct.defaultProps={modalId:\"qr_code_password_modal\"};var ut=ct,pt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var dt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e.showQrModal=e.showQrModal.bind(e),e.hideQrModal=e.hideQrModal.bind(e),e.onClose=e.onClose.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n[\"Component\"]),pt(t,[{key:\"_getInitialState\",value:function(){return{isModalVisible:!1,isQrModalVisible:!1,wif:null}}},{key:\"reset\",value:function(){this.setState(this._getInitialState())}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideQrModal\",value:function(){this.setState({isQrModalVisible:!1})}},{key:\"showQrModal\",value:function(){this.setState({isQrModalVisible:!0})}},{key:\"render\",value:function(){var e=\"key_view_modal\"+this.props.pubkey,t=rt.a.getState().keys;if(!t.has(this.props.pubkey))return s.a.createElement(\"span\",null,this.props.children);var n=t.get(this.props.pubkey),r=[s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onClose},z.a.translate(\"transfer.close\"))];return s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:this.onOpen.bind(this)},this.props.children),s.a.createElement(Y.Modal,{visible:this.state.isModalVisible,title:z.a.translate(\"account.perm.key_viewer\"),ref:e,id:e,onCancel:this.onClose,footer:r},s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.public\"})),this.props.pubkey),s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.private\"})),s.a.createElement(\"div\",null,this.state.wif?s.a.createElement(\"span\",null,s.a.createElement(\"p\",{style:{fontWeight:600}},this.state.wif),s.a.createElement(\"div\",{className:\"button-group\"},s.a.createElement(\"div\",{className:\"button\",onClick:this.onHide.bind(this)},\"hide\"),s.a.createElement(\"div\",{className:\"clickable\",onClick:this.showQrModal},s.a.createElement(\"img\",{style:{height:50},src:a(2129)})))):s.a.createElement(\"span\",null,s.a.createElement(\"div\",{className:\"button\",onClick:this.onShow.bind(this)},s.a.createElement(A.a,{content:\"account.perm.show\"}))))),s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.brain\"})),null==n.brainkey_sequence?\"Non-deterministic\":n.brainkey_sequence),s.a.createElement(\"br\",null),n.import_account_names&&n.import_account_names.length?s.a.createElement(\"div\",{className:\"grid-block grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.from\"})),n.import_account_names.join(\", \"),s.a.createElement(\"br\",null)):null))),s.a.createElement(ut,{showModal:this.showQrModal,hideModal:this.hideQrModal,visible:this.state.isQrModalVisible,keyValue:this.state.wif}))}},{key:\"onOpen\",value:function(){this.showModal()}},{key:\"onClose\",value:function(){this.reset(),this.hideModal()}},{key:\"onShow\",value:function(){var e=this;nt.a.unlock().then(function(){var t=st.a.getPrivateKey(e.props.pubkey);e.setState({wif:t.toWif()})}).catch(function(){})}},{key:\"onHide\",value:function(){this.setState({wif:null})}}]),t}();dt.propTypes={pubkey:E.a.string.isRequired};var mt=dt,ht=a(204),ft=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function bt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function gt(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _t(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vt=function(e){function t(){return bt(this,t),gt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _t(t,s.a.Component),ft(t,[{key:\"shouldComponentUpdate\",value:function(e){return!V.a.are_equal_shallow(e,this.props)}},{key:\"_lookUpPubKeyForAddress\",value:function(e){return ht.a.getState().addresses.get(e)}},{key:\"render\",value:function(){var e=void 0,t=void 0,a=void 0,n=\"_accounts\",r=this.props.pubkey,o=rt.a.getState().keys,i=!1;return this.props.account?(e=this.props.account.get(\"name\"),t=this.props.account.get(\"id\"),a=s.a.createElement(w.a,{to:\"/account/\"+e+\"/permissions\"},e)):r?(e=t=r,a=s.a.createElement(mt,{pubkey:r},r),n=\"_keys\",i=o.has(r)):this.props.address&&(r=this._lookUpPubKeyForAddress(this.props.address),t=this.props.address,a=r?s.a.createElement(mt,{pubkey:r},r):this.props.address,n=\"_addresses\",i=o.has(r)),s.a.createElement(\"tr\",{key:e},s.a.createElement(\"td\",null,this.props.account?s.a.createElement(at.a,{size:{height:30,width:30},account:e}):r?s.a.createElement(\"div\",{className:\"account-image\"},s.a.createElement(mt,{pubkey:r},s.a.createElement(M.a,{name:\"key\",title:\"icons.key\",size:\"4x\"}))):null),s.a.createElement(\"td\",{className:(i?\"my-key\":\"\")+\" pub-key\"},a),s.a.createElement(\"td\",null,this.props.weights[t]),s.a.createElement(\"td\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this.props.onRemoveItem.bind(this,t,n)},s.a.createElement(A.a,{content:\"account.votes.remove_witness\"}))))}}]),t}();vt.propTypes={account:E.a.object,pubkey:E.a.string,address:E.a.string,onRemoveItem:E.a.func.isRequired,weights:E.a.object};var yt=function(e){function t(e){bt(this,t);var a=gt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:\"\",weight_input:\"\",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return _t(t,s.a.Component),ft(t,[{key:\"onItemChange\",value:function(e){this.setState({item_name_input:e})}},{key:\"onItemAccountChange\",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;\"string\"==typeof a?this.setState({error:a}):a.then(function(e){return t.setState({error:e})})}}},{key:\"onWeightChanged\",value:function(e){var t=e.target.value.trim();this.setState({weight_input:parseInt(t)})}},{key:\"onAddItem\",value:function(e){if(e){this.setState({selected_item:null,item_name_input:\"\",weight_input:\"\",error:null});var t=\"string\"==typeof e?e:e.get(\"id\");this.props.onAddItem(t,this.state.weight_input)}}},{key:\"onWeightKeyDown\",value:function(e){13===e.keyCode&&this.state.weight_input&&this.state.selected_item&&this.onAddItem(this.state.selected_item)}},{key:\"render\",value:function(){var e=this,t=0,a=this.props.accounts.filter(function(e){return!!e}).sort(function(e,t){return e.get(\"name\")>t.get(\"name\")?1:e.get(\"name\")<t.get(\"name\")?-1:0}).map(function(a){return s.a.createElement(vt,{key:t++,account:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),n=this.props.keys.map(function(a){return s.a.createElement(vt,{key:t++,pubkey:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),r=this.props.addresses.map(function(a){return s.a.createElement(vt,{key:t++,address:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),o=this.state.error;!o&&this.state.selected_item&&-1!==this.props.accounts.indexOf(this.state.selected_item)&&(o=z.a.translate(\"account.perm.warning3\")),!o&&this.state.item_name_input&&-1!==this.props.keys.indexOf(this.state.item_name_input)&&(o=z.a.translate(\"account.perm.warning4\"));var i=[\"10%\",\"70%\",\"30%\",\"10%\"];return s.a.createElement(\"div\",null,s.a.createElement(pe.a,{label:this.props.label,error:o,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:\"account.votes.add_witness\",tabIndex:this.props.tabIndex,allowPubKey:!0,disableActionButton:!this.state.weight_input,allowUppercase:!0},s.a.createElement(\"input\",{value:this.state.weight_input,onChange:this.onWeightChanged.bind(this),className:\"weight-input\",type:\"number\",autoComplete:\"off\",placeholder:z.a.translate(\"account.perm.weight\"),onKeyDown:this.onWeightKeyDown.bind(this),tabIndex:this.props.tabIndex+1})),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{width:i[0]}}),s.a.createElement(\"th\",{style:{width:i[1]}},s.a.createElement(A.a,{content:\"account.perm.acct_or_key\"})),s.a.createElement(\"th\",{style:{width:i[2]}},s.a.createElement(A.a,{content:\"account.perm.weight\"})),s.a.createElement(\"th\",{style:{width:i[3]}},s.a.createElement(A.a,{content:\"account.perm.action\"})))),s.a.createElement(\"tbody\",null,a,n,r))))}}]),t}();yt.propTypes={accounts:c.a.ChainObjectsList,onAddItem:E.a.func.isRequired,onRemoveItem:E.a.func.isRequired,validateAccount:E.a.func,label:E.a.string.isRequired,placeholder:E.a.string,tabIndex:E.a.number,weights:E.a.object};var Et=Object(u.a)(yt,{autosubscribe:!1}),wt=a(333),kt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var At=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={validPassword:!1,pass:null,generatedPassword:\"P\"+L.key.get_random_key().toWif().toString()},e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),kt(t,[{key:\"onSubmit\",value:function(){}},{key:\"onPasswordChange\",value:function(e){var t=e.valid,a=this.props.account.get(\"name\"),n=t?st.a.generateKeyFromPassword(a,\"active\",e.value).pubKey:null,s=t?st.a.generateKeyFromPassword(a,\"owner\",e.value).pubKey:null,r=t?st.a.generateKeyFromPassword(a,\"memo\",e.value).pubKey:null;this.setState({validPassword:e.valid,pass:e.value}),this.props.onSetPasswordKeys({active:n,owner:s,memo:r})}},{key:\"checkKeyUse\",value:function(e,t){return!!e&&(\"memo\"===t?e===this.props.memoKey:this.props[t+\"Keys\"].reduce(function(t,a){return a===e||t},!1))}},{key:\"_onUseKey\",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.props[\"active\"===e?\"onRemoveActive\":\"onRemoveOwner\"](this.props[e],\"_keys\");else if(this.props[e]){var t={active:this.props.account.getIn([\"active\",\"weight_threshold\"]),owner:this.props.account.getIn([\"owner\",\"weight_threshold\"])};console.log(\"key\",this.props[e],\"weights\",t,\"weight of role:\",t[e]),this.props[\"active\"===e?\"onAddActive\":\"owner\"===e?\"onAddOwner\":\"onSetMemo\"](this.props[e],t[e])}}},{key:\"render\",value:function(){var e=this.checkKeyUse(this.props.active&&this.props.active,\"active\"),t=this.checkKeyUse(this.props.owner&&this.props.owner,\"owner\"),a=this.checkKeyUse(this.props.memo&&this.props.memo,\"memo\"),n=z.a.translate(\"account.perm.use_text\"),r=z.a.translate(\"account.perm.remove_text\");return s.a.createElement(\"div\",null,s.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},s.a.createElement(A.a,{content:\"account.perm.password_model_1\"})),s.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},s.a.createElement(A.a,{content:\"wallet.password_model_1\"})),s.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},s.a.createElement(A.a,{unsafe:!0,content:\"wallet.password_model_2\"})),s.a.createElement(\"div\",{className:\"divider\"}),s.a.createElement(\"form\",{style:{maxWidth:\"40rem\"},onSubmit:this.onSubmit.bind(this),noValidate:!0},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(A.a,{content:\"wallet.generated\"})),s.a.createElement(\"p\",null,this.state.generatedPassword),s.a.createElement(\"p\",{style:{fontWeight:\"bold\"}},s.a.createElement(A.a,{content:\"account.perm.password_model_2\"})),s.a.createElement(wt.a,{ref:\"password\",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,passwordLength:12,checkStrength:!0})),s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",{className:e?\"in-use\":\"\"},s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.perm.new_active\"}),\":\"),s.a.createElement(\"td\",null,this.props.active),s.a.createElement(\"td\",{className:\"text-right\"},s.a.createElement(\"div\",{className:\"button\",onClick:this._onUseKey.bind(this,\"active\",e)},e?r:n))),s.a.createElement(\"tr\",{className:t?\"in-use\":\"\"},s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.perm.new_owner\"}),\":\"),s.a.createElement(\"td\",null,this.props.owner),s.a.createElement(\"td\",{className:\"text-right\"},s.a.createElement(\"div\",{className:\"button\",onClick:this._onUseKey.bind(this,\"owner\",t)},t?r:n))),s.a.createElement(\"tr\",{className:a?\"in-use\":\"\"},s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.perm.new_memo\"}),\":\"),s.a.createElement(\"td\",null,this.props.memo),s.a.createElement(\"td\",{className:\"text-right\"},s.a.createElement(\"div\",{className:\"button\",style:{visibility:a?\"hidden\":\"\"},onClick:this._onUseKey.bind(this,\"memo\",a)},n))))),a?s.a.createElement(\"p\",{style:{maxWidth:\"800px\",paddingTop:10},className:\"has-error\"},s.a.createElement(A.a,{content:\"account.perm.memo_warning\"})):null)}}]),t}(),Ct=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ot=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ct(t,[{key:\"isValidPubKey\",value:function(e){return!!L.PublicKey.fromPublicKeyString(e)}},{key:\"onInputChanged\",value:function(e){var t=e.target.value.trim();this.props.onChange(t)}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:\"onAction\",value:function(e){e.preventDefault(),this.props.onAction&&this.state.valid&&!this.props.disableActionButton&&this.props.onAction(e)}},{key:\"render\",value:function(){var e=this.props.error;e||!this.props.value||this.isValidPubKey(this.props.value)||(e=\"Not a valid public key\");var t=D()(\"button\",{disabled:e||this.props.disableActionButton}),a=rt.a.getState().keys,n=this.isValidPubKey(this.props.value)&&a.has(this.props.value);return s.a.createElement(\"div\",{className:\"pubkey-input no-overflow\"},s.a.createElement(\"div\",{className:\"content-area\"},s.a.createElement(\"div\",{className:\"header-area\"},!e&&this.props.value&&this.isValidPubKey(this.props.value)?s.a.createElement(\"label\",{className:\"right-label\"},s.a.createElement(A.a,{content:\"account.perm.valid_pub\"})):null,s.a.createElement(A.a,{className:\"left-label\",component:\"label\",content:this.props.label})),s.a.createElement(\"div\",{className:\"input-area\"},s.a.createElement(\"span\",{className:\"inline-label\"},s.a.createElement(\"div\",{className:\"account-image\"},s.a.createElement(mt,{pubkey:this.props.value},s.a.createElement(M.a,{name:\"key\",title:\"icons.key\",size:\"4x\"}))),s.a.createElement(\"input\",{type:\"text\",className:n?\"my-key\":\"\",value:this.props.value,placeholder:this.props.placeholder||counterpart.translate(\"account.public_key\"),ref:\"user_input\",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),this.props.onAction?s.a.createElement(\"button\",{className:t,onClick:this.onAction.bind(this)},s.a.createElement(A.a,{content:this.props.action_label})):null)),s.a.createElement(\"div\",{className:\"error-area has-error\"},s.a.createElement(\"span\",null,e))))}}]),t}();Ot.propTypes={label:E.a.string.isRequired,value:E.a.string,error:E.a.string,placeholder:E.a.string,onChange:E.a.func,onAction:E.a.func,tabIndex:E.a.number,disableActionButton:E.a.bool};var St=Ot,xt=a(1958),Nt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var jt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Nt(t,[{key:\"componentWillMount\",value:function(){this.updateAccountData(this.props.account),d.a.getFinalFeeAsset(this.props.account,\"account_update\")}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this.updateAccountData(e.account)}},{key:\"permissionsFromImmutableObj\",value:function(e){var t=e.get(\"weight_threshold\"),a=e.get(\"account_auths\"),n=e.get(\"key_auths\"),s=e.get(\"address_auths\"),r=a.map(function(e){return e.get(0)}),o=n.map(function(e){return e.get(0)}),i=s.map(function(e){return e.get(0)}),l=a.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},{});return l=n.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},l),{threshold:t,accounts:r,keys:o,addresses:i,weights:l=s.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},l)}}},{key:\"permissionsToJson\",value:function(e,t,a,n,s){var r={weight_threshold:e};return r.account_auths=t.sort(V.a.sortID).map(function(e){return[e,s[e]]}).toJS(),r.key_auths=a.sort(V.a.sortID).map(function(e){return[e,s[e]]}).toJS(),r.address_auths=n.sort(V.a.sortID).map(function(e){return[e,s[e]]}).toJS(),r}},{key:\"updateAccountData\",value:function(e){var t=this.permissionsFromImmutableObj(e.get(\"active\")),a=this.permissionsFromImmutableObj(e.get(\"owner\")),n=e.get(\"options\").get(\"memo_key\"),s={active_accounts:t.accounts,active_keys:t.keys,active_addresses:t.addresses,owner_accounts:a.accounts,owner_keys:a.keys,owner_addresses:a.addresses,active_weights:t.weights,owner_weights:a.weights,active_threshold:t.threshold,owner_threshold:a.threshold,memo_key:n,prev_active_accounts:t.accounts,prev_active_keys:t.keys,prev_active_addresses:t.addresses,prev_owner_accounts:a.accounts,prev_owner_keys:a.keys,prev_owner_addresses:a.addresses,prev_active_weights:t.weights,prev_owner_weights:a.weights,prev_active_threshold:t.threshold,prev_owner_threshold:a.threshold,prev_memo_key:n};this.setState(s)}},{key:\"isChanged\",value:function(){var e=this.state;return e.active_accounts!==e.prev_active_accounts||e.active_keys!==e.prev_active_keys||e.active_addresses!==e.prev_active_addresses||e.owner_accounts!==e.prev_owner_accounts||e.owner_keys!==e.prev_owner_keys||e.owner_addresses!==e.prev_owner_addresses||e.active_threshold!==e.prev_active_threshold||e.owner_threshold!==e.prev_owner_threshold||e.memo_key!==e.prev_memo_key}},{key:\"didChange\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;if(\"memo\"===e)return t.memo_key!==t.prev_memo_key;var a=!1;return[\"_keys\",\"_active_addresses\",\"_accounts\",\"_threshold\"].forEach(function(n){var s=e+n;t[s]!==t[\"prev_\"+s]&&(a=!0)}),a}},{key:\"onPublish\",value:function(){var e=this.state,t=this.props.account.toJS();t.fee={amount:0,asset_id:d.a.getFinalFeeAsset(t.id,\"account_update\")};var a={account:t.id};if(this.didChange(\"active\")&&(a.active=this.permissionsToJson(e.active_threshold,e.active_accounts,e.active_keys,e.active_addresses,e.active_weights)),this.didChange(\"owner\")&&(a.owner=this.permissionsToJson(e.owner_threshold,e.owner_accounts,e.owner_keys,e.owner_addresses,e.owner_weights)),this.didChange(\"owner\")&&0===e.owner_keys.size&&0===e.owner_addresses.size&&1===e.owner_accounts.size&&e.owner_accounts.first()===t.id)return Y.Notification.warning({message:z.a.translate(\"notifications.account_permissions_update_warning\")});e.memo_key&&this.didChange(\"memo\")&&this.isValidPubKey(e.memo_key)&&(a.new_options=this.props.account.get(\"options\").toJS(),a.new_options.memo_key=e.memo_key),tt.a.updateAccount(a)}},{key:\"isValidPubKey\",value:function(e){return!!L.PublicKey.fromPublicKeyString(e)}},{key:\"onReset\",value:function(){var e=this.state;this.setState({active_accounts:e.prev_active_accounts,active_keys:e.prev_active_keys,active_addresses:e.prev_active_addresses,owner_accounts:e.prev_owner_accounts,owner_keys:e.prev_owner_keys,owner_addresses:e.prev_owner_addresses,active_weights:e.prev_active_weights,owner_weights:e.prev_owner_weights,active_threshold:e.prev_active_threshold,owner_threshold:e.prev_owner_threshold,memo_key:e.prev_memo_key})}},{key:\"onAddItem\",value:function(e,t,a){var n={},s=e+(V.a.is_object_id(t)?\"_accounts\":\"_keys\");n[s]=this.state[s].push(t),this.state[e+\"_weights\"][t]=a,this.setState(n)}},{key:\"onRemoveItem\",value:function(e,t,a){console.log(\"onRemoveItem\",e,t,a);var n={},s=e+a;n[s]=this.state[s].filter(function(e){return e!==t}),this.setState(n)}},{key:\"onThresholdChanged\",value:function(e,t){var a=parseInt(t.target.value.trim()),n={};n[e]=a,this.setState(n)}},{key:\"validateAccount\",value:function(e,t){return null}},{key:\"sumUpWeights\",value:function(e,t,a,n){var s=e.reduce(function(e,t){return e+n[t]},0);return s=t.reduce(function(e,t){return e+n[t]},s),a.reduce(function(e,t){return e+n[t]},s)}},{key:\"onMemoKeyChanged\",value:function(e){this.setState({memo_key:e})}},{key:\"onSetPasswordKeys\",value:function(e){var t={};(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[\"active\",\"owner\",\"memo\"]).forEach(function(a){t[\"password_\"+a]=e[a]}),this.setState(t)}},{key:\"render\",value:function(){var e=void 0,t=void 0,a=this.state,n=a.active_accounts,r=a.active_keys,o=a.active_addresses,i=a.active_weights,l=this.state,c=l.owner_accounts,u=l.owner_keys,p=l.owner_addresses,d=l.owner_weights,m=this.state.active_threshold>0?this.state.active_threshold:0,f=this.sumUpWeights(n,r,o,i);this.didChange(\"active\")&&f<m&&(e=z.a.translate(\"account.perm.warning1\",{weights_total:f,threshold:m})),m=this.state.owner_threshold>0?this.state.owner_threshold:0,f=this.sumUpWeights(c,u,p,d),this.didChange(\"owner\")&&f<m&&(t=z.a.translate(\"account.perm.warning2\",{weights_total:f,threshold:m}));var b=\"button\"+(!e&&!t&&this.isChanged()&&this.isValidPubKey(this.state.memo_key)?\"\":\" disabled\"),g=\"button\"+(this.isChanged()?\"\":\" disabled\"),_=h.a.Set();return _=_.add(this.props.account.get(\"id\")),s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{defaultActiveTab:1,segmented:!1,setting:\"permissionsTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\",actionButtons:s.a.createElement(\"div\",{className:\"action-buttons\"},s.a.createElement(\"button\",{className:g,onClick:this.onReset,tabIndex:8},s.a.createElement(A.a,{content:\"account.perm.reset\"})),s.a.createElement(\"button\",{className:b,onClick:this.onPublish,tabIndex:9},s.a.createElement(A.a,{content:\"account.perm.publish\"})))},s.a.createElement(T.a,{title:\"account.perm.active\"},s.a.createElement(F.a,{path:\"components/AccountPermActive\"}),s.a.createElement(\"form\",{className:\"threshold\"},s.a.createElement(\"label\",{className:\"horizontal\"},s.a.createElement(A.a,{content:\"account.perm.threshold\"}),\" \",\"   \",s.a.createElement(\"input\",{type:\"number\",placeholder:\"0\",size:\"5\",value:this.state.active_threshold,onChange:this.onThresholdChanged.bind(this,\"active_threshold\"),autoComplete:\"off\",tabIndex:1}))),s.a.createElement(Et,{label:\"account.perm.add_permission_label\",accounts:n,keys:r,weights:i,addresses:o,validateAccount:this.validateAccount.bind(this,\"active\"),onAddItem:this.onAddItem.bind(this,\"active\"),onRemoveItem:this.onRemoveItem.bind(this,\"active\"),placeholder:z.a.translate(\"account.perm.account_name_or_key\"),tabIndex:2}),s.a.createElement(\"br\",null),e?s.a.createElement(\"div\",{className:\"content-block has-error\"},e):null),s.a.createElement(T.a,{title:\"account.perm.owner\"},s.a.createElement(F.a,{path:\"components/AccountPermOwner\"}),s.a.createElement(\"form\",{className:\"threshold\"},s.a.createElement(\"label\",{className:\"horizontal\"},s.a.createElement(A.a,{content:\"account.perm.threshold\"}),\" \",\"   \",s.a.createElement(\"input\",{type:\"number\",placeholder:\"0\",size:\"5\",value:this.state.owner_threshold,onChange:this.onThresholdChanged.bind(this,\"owner_threshold\"),autoComplete:\"off\",tabIndex:4}))),s.a.createElement(Et,{label:\"account.perm.add_permission_label\",accounts:c,keys:u,weights:d,addresses:p,validateAccount:this.validateAccount.bind(this,\"owner\"),onAddItem:this.onAddItem.bind(this,\"owner\"),onRemoveItem:this.onRemoveItem.bind(this,\"owner\"),placeholder:z.a.translate(\"account.perm.account_name_or_key\"),tabIndex:5}),s.a.createElement(\"br\",null),t?s.a.createElement(\"div\",{className:\"content-block has-error\"},t):null),s.a.createElement(T.a,{title:\"account.perm.memo_key\"},s.a.createElement(F.a,{style:{maxWidth:\"800px\"},path:\"components/AccountPermMemo\"}),s.a.createElement(St,{ref:\"memo_key\",value:this.state.memo_key,label:\"account.perm.memo_public_key\",placeholder:\"Public Key\",onChange:this.onMemoKeyChanged.bind(this),tabIndex:7})),s.a.createElement(T.a,{title:\"account.perm.password_model\"},s.a.createElement(At,{active:this.state.password_active,owner:this.state.password_owner,memo:this.state.password_memo,onSetPasswordKeys:this.onSetPasswordKeys.bind(this),account:this.props.account,activeKeys:this.state.active_keys,ownerKeys:this.state.owner_keys,memoKey:this.state.memo_key,onAddActive:this.onAddItem.bind(this,\"active\"),onRemoveActive:this.onRemoveItem.bind(this,\"active\"),onAddOwner:this.onAddItem.bind(this,\"owner\"),onRemoveOwner:this.onRemoveItem.bind(this,\"owner\"),onSetMemo:this.onMemoKeyChanged.bind(this)}))),s.a.createElement(\"div\",{className:\"tab-content\",style:{padding:10}},s.a.createElement(\"div\",{className:\"divider\"}),s.a.createElement(xt.a,{accountsList:_,limit:25,compactView:!1,filter:\"account_update\",style:{paddingBottom:\"2rem\"}})))))}}]),t}(),Pt=a(26),Tt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Mt=\"-----BEGIN BITSHARES SIGNED MESSAGE-----\",It=\"-----END BITSHARES SIGNED MESSAGE-----\",Rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return Tt(e,[{key:\"parseMessage\",value:function(e){var t=void 0,a=void 0,n=void 0,s=void 0;try{t=(a=(t=e.split(Mt)[1]).split(\"-----BEGIN META-----\"))[0].replace(/^\\n|\\n$/g,\"\"),a=(n=a[1].split(\"-----BEGIN SIGNATURE-----\"))[0].trim(),n=n[1].split(It)[0].trim(),s=t+\"\\n\"+a}catch(e){throw new Error(z.a.translate(\"account.signedmessages.invalidformat\"))}var r=void 0,o=void 0,i=void 0,l=void 0;if(a)try{r=(r=a.split(\"account=\"))[1].split(\"\\n\")[0].trim(),o=(o=a.split(\"memokey=\"))[1].split(\"\\n\")[0].trim(),i=(i=a.split(\"block=\"))[1].split(\"\\n\")[0].trim(),l=(l=a.split(\"timestamp=\"))[1].split(\"\\n\")[0].trim()}catch(e){throw new Error(z.a.translate(\"account.signedmessages.invalidformat\"))}return{content:t,meta:{account:r,key:o,block:i,timestamp:l},signed:s,signature:n}}},{key:\"verifyMemo\",value:function(e){var t=void 0;if(t=\"string\"==typeof e||e instanceof String?this.parseMessage(e):e,null==L.ChainStore.getAccount(t.meta.account))throw new Error(z.a.translate(\"account.signedmessages.invaliduser\"));var a=!1;try{a=L.Signature.fromHex(t.signature).verifyBuffer(t.signed,L.PublicKey.fromPublicKeyString(t.meta.key))}catch(e){throw new Error(z.a.translate(\"account.signedmessages.errorverifying\"))}if(!a)throw new Error(z.a.translate(\"account.signedmessages.invalidsignature\"));return t}},{key:\"signMessage\",value:function(e,t){return new Promise(function(a,n){nt.a.unlock().then(function(){try{var s=e.get(\"options\").get(\"memo_key\");/111111111111111111111/.test(s)&&(s=null);var r=void 0;if(t&&s&&!(r=st.a.getPrivateKey(s)))throw new Error(z.a.translate(\"account.signedmessages.invalidkey\"));var o=L.ChainStore.getObject(\"2.1.0\").get(\"last_irreversible_block_num\"),i=new Date,l=\"account=\"+e.get(\"name\")+\"\\nmemokey=\"+s+\"\\nblock=\"+o+\"\\ntimestamp=\"+i.toUTCString(),c=t+\"\\n\"+l;setTimeout(function(){try{var e=L.Signature.signBuffer(c,r,s),o=Mt+\"\\n\"+t+\"\\n-----BEGIN META-----\\n\"+l+\"\\n-----BEGIN SIGNATURE-----\\n\"+e.toHex()+\"\\n\"+It;a(o)}catch(e){n(e)}},0)}catch(e){n(e)}}).catch(function(e){n(e)})})}}]),e}(),Bt=Pt.a.createActions(Rt),qt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Dt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={message:a.props.message,messageParsed:null,showRawMessage:!1,noVerification:a.props.noVerification,verified:null,notification:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),qt(t,[{key:\"_verifyMessage\",value:function(e){var t=this;this.setState({message:e,messageParsed:null,verified:null});var a=null;try{a=Bt.parseMessage(e),this.setState({verified:null,messageParsed:a}),this.state.noVerification||(this.setState({verified:null,notification:z.a.translate(\"account.signedmessages.verifying\")}),setTimeout(function(){try{Bt.verifyMemo(a),t.setState({verified:!0,notification:\"\"})}catch(e){t._warning(e.message),t.setState({verified:!1})}},0))}catch(e){this._warning(e.message)}}},{key:\"componentWillMount\",value:function(){this._verifyMessage(this.state.message)}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.message;void 0!=t&&null!=t&&t==this.state.message||this._verifyMessage(t)}},{key:\"_warning\",value:function(e){this.setState({notification:e})}},{key:\"_toggleRawMessage\",value:function(){this.setState({showRawMessage:!this.state.showRawMessage})}},{key:\"render\",value:function(){var e=void 0,t=void 0;null!=this.state.messageParsed&&(null==this.state.verified?(t=\"#FFF\",e=\"Unverified message from \"+this.state.messageParsed.meta.account):this.state.verified?(t=\"#FFF\",e=\"Verified message from \"+this.state.messageParsed.meta.account):(t=\"#F00\",e=\"Refuted message, indicated sender \"+this.state.messageParsed.meta.account));var a=null!=this.props.message&&\"\"!=this.props.message,n=this.state.notification&&\"\"!=this.state.notification;return s.a.createElement(\"div\",{style:{color:\"gray\",margin:\"10px 10px\"}},null!=this.state.messageParsed&&s.a.createElement(\"fieldset\",{style:{borderColor:t}},s.a.createElement(\"legend\",{style:{color:\"white\",weight:\"bold\"}},e),s.a.createElement(\"pre\",{style:{position:\"relative\",width:\"100%\",display:\"table\"}},this.state.messageParsed.content,n&&s.a.createElement(\"div\",{style:{textAlign:\"center\",display:\"table-cell\",verticalAlign:\"middle\",position:\"absolute\",width:\"calc(100% - 30px)\",height:\"calc(100% + 15px)\",top:\"0px\",right:\"30px\",backgroundColor:\"rgba(50,50,50,0.5)\"},id:\"overlay\"},this.state.notification)),s.a.createElement(\"span\",{style:{fontSize:\"small\",float:\"right\"}},\"Signed on \",this.state.messageParsed.meta.timestamp,\" \",\" \",s.a.createElement(\"button\",{className:\"button\",type:\"button\",style:{fontSize:\"small\",float:\"right\",padding:\"0px 0px\",background:\"#777\"},onClick:this._toggleRawMessage.bind(this)},\"🔍\")),this.state.showRawMessage&&s.a.createElement(\"br\",null),this.state.showRawMessage&&s.a.createElement(\"br\",null),this.state.showRawMessage&&s.a.createElement(\"div\",{style:{overflow:\"auto\",width:\"calc(100%)\",maxWidth:\"1000px\"}},s.a.createElement(\"pre\",null,this.state.message))),a&&null==this.state.messageParsed&&s.a.createElement(\"fieldset\",{style:{borderColor:\"#F00\"}},s.a.createElement(\"legend\",{style:{color:\"red\",weight:\"bold\"},className:\"error\"},\"Error while parsing message, please check syntax from message below\"),s.a.createElement(\"pre\",null,this.props.message)))}}]),t}();Dt.defaultProps={noVerification:!1};var Ft=Dt,Vt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Lt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tabsm_memo_key:a.props.account.get(\"options\").get(\"memo_key\"),tabsm_popup:\"\",tabsm_message_text:\"\",tabsm_message_signed:\"\",tabvm_popup:\"\",tabvm_message_signed:\"\",tabvm_verified:null,tabvm_message_signed_and_verified:null,tabvm_flag_verifyonchange:!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Vt(t,[{key:\"_tabSMSignAction\",value:function(e){var t=this;e.preventDefault();try{var a=this.props.account.get(\"options\").get(\"memo_key\");if(this.state.tabsm_memo_key!==a)throw Error(z.a.translate(\"account.signedmessages.keymismatch\"));this.state.tabsm_message_text&&(this._tabSMPopMessage(z.a.translate(\"account.signedmessages.signing\"),0),Bt.signMessage(this.props.account,this.state.tabsm_message_text).then(function(e){t.setState({tabsm_message_signed:e,tabsm_popup:\"\"})}).catch(function(e){t._tabSMPopMessage(e.message),t.setState({tabsm_message_signed:null})}))}catch(e){this._tabSMPopMessage(e.message),this.setState({tabsm_message_signed:null})}}},{key:\"_tabSMHandleChange\",value:function(e){this.setState({tabsm_message_text:e.target.value})}},{key:\"_tabSMHandleChangeKey\",value:function(e){this.setState({tabsm_memo_key:e})}},{key:\"_tabSMCopyToClipBoard\",value:function(e){if(\"\"!==e.target.value){e.target.focus(),e.target.select();try{var t=document.execCommand(\"copy\");this._tabSMPopMessage(t?z.a.translate(\"account.signedmessages.copysuccessful\"):z.a.translate(\"account.signedmessages.copyunsuccessful\"))}catch(e){this._tabSMPopMessage(z.a.translate(\"account.signedmessages.copyunsuccessful\"))}}}},{key:\"_tabSMPopMessage\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabsm_popup:e}),\"\"!==e&&a>0&&setTimeout(function(){t.setState({tabsm_popup:\"\"})},a)}},{key:\"_tabVMAction\",value:function(e){var t=this;e.preventDefault(),this.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1}),this.state.tabvm_message_signed&&(this._tabVMPopMessage(z.a.translate(\"account.signedmessages.verifying\"),0),setTimeout(function(){try{var e=Bt.verifyMemo(t.state.tabvm_message_signed);t.setState({tabvm_message_signed_and_verified:e,tabvm_verified:!0,tabvm_popup:\"\"})}catch(e){t._tabVMPopMessage(e.message),t.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1})}},0))}},{key:\"_tabVMHandleChange\",value:function(e){this.setState({tabvm_message_signed:e.target.value,tabvm_verified:!1,tabvm_message_signed_and_verified:null}),this.state.tabvm_flag_verifyonchange&&this._tabVMAction(e)}},{key:\"_tabVMPopMessage\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabvm_popup:e}),\"\"!==e&&a>0&&setTimeout(function(){t.setState({tabvm_popup:\"\"})},a)}},{key:\"_tabVMToggleVerifyOnChange\",value:function(){this.setState({tabvm_flag_verifyonchange:!this.state.tabvm_flag_verifyonchange})}},{key:\"render\",value:function(){return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",setting:\"accountSignedMessagesTab\",contentClass:\"grid-content shrink small-vertical medium-horizontal padding\",segmented:!1},s.a.createElement(T.a,{title:\"account.signedmessages.signmessage\"},s.a.createElement(\"div\",{className:\"grid-content\",style:{overflowX:\"hidden\"}},s.a.createElement(\"div\",{className:\"content-block no-margin\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.signedmessages.signmessage\"}))),s.a.createElement(St,{ref:\"memo_key\",value:this.state.tabsm_memo_key,label:\"account.perm.memo_public_key\",placeholder:\"Public Key\",tabIndex:7,onChange:this._tabSMHandleChangeKey.bind(this),disableActionButton:!0}),s.a.createElement(\"br\",null),s.a.createElement(\"textarea\",{rows:\"10\",value:this.state.tabsm_message_text,onChange:this._tabSMHandleChange.bind(this),placeholder:z.a.translate(\"account.signedmessages.entermessage\")}),s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this._tabSMSignAction.bind(this)},s.a.createElement(A.a,{content:\"account.signedmessages.sign\"})),s.a.createElement(\"div\",{style:{color:\"gray\"}},this.state.tabsm_popup)),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"textarea\",{rows:\"14\",value:this.state.tabsm_message_signed,style:{editable:!1},placeholder:z.a.translate(\"account.signedmessages.automaticcreation\"),onClick:this._tabSMCopyToClipBoard.bind(this)}))),s.a.createElement(T.a,{title:\"account.signedmessages.verifymessage\"},s.a.createElement(\"div\",{className:\"grid-content\",style:{overflowX:\"hidden\"}},s.a.createElement(\"div\",{className:\"content-block no-margin\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.signedmessages.verifymessage\"})),s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"0.1em\",marginBottom:\"0.5em\"}},s.a.createElement(\"table\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(\"label\",{style:{marginBottom:0,marginRight:\"0.5rem\"}},s.a.createElement(A.a,{content:\"account.signedmessages.verifyonchange\"}))),s.a.createElement(\"td\",null,s.a.createElement(Y.Switch,{checked:this.state.tabvm_flag_verifyonchange,onChange:this._tabVMToggleVerifyOnChange.bind(this)})))))),s.a.createElement(\"textarea\",{rows:\"10\",value:this.state.tabvm_message_signed,onChange:this._tabVMHandleChange.bind(this),placeholder:z.a.translate(\"account.signedmessages.entermessage\")}),s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this._tabVMAction.bind(this)},s.a.createElement(A.a,{content:\"account.signedmessages.verify\"})),s.a.createElement(\"text\",{style:{color:\"gray\"}},this.state.tabvm_popup),null!==this.state.tabvm_verified&&s.a.createElement(\"div\",{style:{float:\"right\"}},\"Message is:\",s.a.createElement(\"div\",{style:{backgroundColor:this.state.tabvm_verified?\"green\":\"red\"}},s.a.createElement(\"label\",null,this.state.tabvm_verified?\"verified\":\"not verified\"))),(this.state.tabvm_verified&&null!==this.state.tabvm_message_signed_and_verified||this.state.tabvm_flag_verifyonchange)&&s.a.createElement(\"div\",null,s.a.createElement(\"br\",null),s.a.createElement(Ft,{message:this.state.tabvm_message_signed})))))))))}}]),t}();Lt.propTypes={account:c.a.ChainAccount.isRequired};var Ut=Lt=Object(u.a)(Lt),zt=a(248),Wt=a.n(zt),Jt=a(98),Kt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Gt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ht(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Zt(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Qt=function(e){function t(){return Gt(this,t),Ht(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zt(t,s.a.Component),Kt(t,[{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.onRemove;return s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,this.props.index),s.a.createElement(\"td\",null,t.get(\"id\")),s.a.createElement(\"td\",null,s.a.createElement(ce.a,{account:t.get(\"id\")})),a?s.a.createElement(\"td\",null,s.a.createElement(\"button\",{onClick:a.bind(this,t.get(\"id\")),className:\"button outline\"},\"Remove\")):null)}}]),t}();Qt.propTypes={account:c.a.ChainAccount.isRequired},Qt.defaultProps={tempComponent:\"tr\"},Qt=Object(u.a)(Qt);var Yt=function(e){function t(){return Gt(this,t),Ht(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zt(t,s.a.Component),Kt(t,[{key:\"_onRemove\",value:function(e,t,a){if(t){var n=this.props.getCurrentState(t),s=Jt.a.new_transaction();s.add_type_operation(\"account_whitelist\",{fee:{amount:0,asset_id:\"1.3.0\"},authorizing_account:this.props.account.get(\"id\"),account_to_list:t,new_listing:n-Wt.a.account_listing[e]}),st.a.process_transaction(s,null,!0)}}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.removeButton,n=t.white,r=t.list.map(function(t,r){return s.a.createElement(Qt,{key:t,onRemove:a?e._onRemove.bind(e,n?\"white_listed\":\"black_listed\"):null,account:t,index:r+1})}).toArray(),o=!0;return r.length||(o=!1,r.push(s.a.createElement(\"tr\",{key:\"empty\"},s.a.createElement(\"td\",{style:{padding:\"1rem 0\"},colSpan:a?4:3},s.a.createElement(A.a,{content:this.props.emptyText,account:this.props.account.get(\"name\")}))))),s.a.createElement(\"table\",{className:\"table compact dashboard-table\"},o?s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,\"#\"),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.id\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.name\"})),a?s.a.createElement(\"th\",null):null)):null,s.a.createElement(\"tbody\",null,r))}}]),t}(),Xt=function(e){function t(){Gt(this,t);var e=Ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={accountName:\"\",accountToList:null},e}return Zt(t,s.a.Component),Kt(t,[{key:\"_getCurrentState\",value:function(e){var t=this.props.account,a=t.get(\"whitelisted_accounts\")||h.a.List(),n=t.get(\"blacklisted_accounts\")||h.a.List(),s=Wt.a.account_listing.no_listing;return a.includes(e)&&(s+=Wt.a.account_listing.white_listed),n.includes(e)&&(s+=Wt.a.account_listing.black_listed),s}},{key:\"_onAdd\",value:function(e,t){var a=this.state.accountToList,n=this.props.account,s=this._getCurrentState(a);if(a){var r=Jt.a.new_transaction();r.add_type_operation(\"account_whitelist\",{fee:{amount:0,asset_id:\"1.3.0\"},authorizing_account:n.get(\"id\"),account_to_list:a,new_listing:s+Wt.a.account_listing[e]}),st.a.process_transaction(r,null,!0)}}},{key:\"_onAccountFound\",value:function(e){console.log(\"accountFound:\",e),this.setState({accountName:e?e.get(\"name\"):null,accountToList:e?e.get(\"id\"):null})}},{key:\"_onAccountChanged\",value:function(e){console.log(\"account changed:\",e),this.setState({accountName:e,accountToList:null})}},{key:\"render\",value:function(){var e=this.props.account,t=this.state.accountName;return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",setting:\"whitelistTab\",contentClass:\"grid-content shrink small-vertical medium-horizontal no-padding\",segmented:!1},s.a.createElement(T.a,{title:\"account.whitelist.title\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Yt,{emptyText:\"account.whitelist.empty\",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get(\"whitelisted_accounts\")||h.a.List(),removeButton:!0,white:!0})),e.get(\"whitelisted_accounts\")?null:s.a.createElement(\"p\",{className:\"has-error\"},\"Please note, whitelisting is not working yet due to unresolved backend issue.\"),s.a.createElement(\"div\",{style:{padding:\"2rem 0\"}},s.a.createElement(pe.a,{label:\"account.whitelist.add\",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,\"white_listed\"),action_label:\"account.perm.confirm_add\",white:!1,typeahead:!0})))),s.a.createElement(T.a,{title:\"account.whitelist.black\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Yt,{emptyText:\"account.whitelist.empty_black\",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get(\"blacklisted_accounts\"),removeButton:!0})),s.a.createElement(\"div\",{style:{padding:\"2rem 1rem\"}},s.a.createElement(pe.a,{label:\"account.whitelist.add_black\",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,\"black_listed\"),action_label:\"account.perm.confirm_add\",typeahead:!0})))),s.a.createElement(T.a,{title:\"account.whitelist.white_by\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Yt,{emptyText:\"account.whitelist.empty_white_by\",account:e,list:e.get(\"whitelisting_accounts\")})))),s.a.createElement(T.a,{title:\"account.whitelist.black_by\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Yt,{emptyText:\"account.whitelist.empty_black_by\",account:e,list:e.get(\"blacklisting_accounts\")}))))))))}}]),t}(),$t=a(1966),ea=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ta=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ea(t,[{key:\"onApprove\",value:function(){var e=[],t=[];this.props.vote_ids.has(this.props.worker.get(\"vote_against\"))&&t.push(this.props.worker.get(\"vote_against\")),this.props.vote_ids.has(this.props.worker.get(\"vote_for\"))||e.push(this.props.worker.get(\"vote_for\")),this.props.onChangeVotes(e,t)}},{key:\"onReject\",value:function(){var e=[];this.props.vote_ids.has(this.props.worker.get(\"vote_against\"))&&e.push(this.props.worker.get(\"vote_against\")),this.props.vote_ids.has(this.props.worker.get(\"vote_for\"))&&e.push(this.props.worker.get(\"vote_for\")),this.props.onChangeVotes([],e)}},{key:\"render\",value:function(){var e=this.props.rank,t=this.props.worker.toJS(),a=t.total_votes_for-t.total_votes_against,n=!!this.props.vote_ids.has(t.vote_for)||!this.props.vote_ids.has(t.vote_against)&&null,r=0;t.daily_pay<this.props.rest?r=100:this.props.rest>0&&(r=this.props.rest/t.daily_pay*100);var o=z.a.localize(new Date(t.work_begin_date+\"Z\"),{type:\"date\",format:\"short_custom\"}),i=z.a.localize(new Date(t.work_end_date+\"Z\"),{type:\"date\",format:\"short_custom\"}),l=new Date,c=new Date(t.work_end_date+\"Z\")<=l,u=new Date(t.work_begin_date+\"Z\")<=l,p=!c&&a<this.props.voteThreshold||!u;return s.a.createElement(\"tr\",{className:n?\"\":\"unsupported\"},c?null:s.a.createElement(\"td\",{style:{textAlign:\"right\",paddingRight:10,paddingLeft:0}},e),s.a.createElement(\"td\",{className:\"worker-id\",style:{textAlign:\"left\"}},t.id),s.a.createElement(\"td\",{className:\"worker-name\",style:{textAlign:\"left\"}},s.a.createElement(\"div\",{className:\"inline-block\",style:{paddingRight:5,position:\"relative\",top:-1}},s.a.createElement(\"a\",{style:{visibility:t.url&&-1!==t.url.indexOf(\".\")?\"visible\":\"hidden\"},href:t.url,target:\"_blank\",rel:\"noopener noreferrer\"},s.a.createElement(M.a,{name:\"share\",title:\"icons.share\"}))),s.a.createElement(\"div\",{className:\"inline-block\"},t.name,s.a.createElement(\"br\",null),s.a.createElement(ce.a,{account:t.worker_account}))),s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(S.a,{amount:a,asset:\"1.3.0\",decimalOffset:5,hide_asset:!0})),p?s.a.createElement(\"td\",{style:{textAlign:\"right\"}},s.a.createElement(S.a,{amount:Math.max(0,this.props.voteThreshold-a),asset:\"1.3.0\",hide_asset:!0,decimalOffset:5})):null,s.a.createElement(\"td\",null,o,\" - \",i),c||p?null:s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},V.a.format_number(r,2),\"%\"),s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement($t.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:this.props.preferredUnit,amount:t.daily_pay})),c||p?null:s.a.createElement(\"td\",{style:{textAlign:\"right\"}},this.props.rest<=0?\"0.00\":s.a.createElement($t.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:this.props.preferredUnit,amount:this.props.rest})),s.a.createElement(\"td\",{className:\"clickable\",onClick:this.props.proxy?function(){}:this[n?\"onReject\":\"onApprove\"].bind(this)},this.props.proxy?s.a.createElement(M.a,{name:\"locked\",title:\"icons.locked.action\"}):s.a.createElement(M.a,{name:n?\"checkmark-circle\":\"minus-circle\",title:n?\"icons.checkmark_circle.approved\":\"icons.minus_circle.disapproved\"})))}}]),t}();ta.propTypes={worker:c.a.ChainObject.isRequired,onAddVote:E.a.func,onRemoveVote:E.a.func,vote_ids:E.a.object},ta.defaultProps={tempComponent:\"tr\"};var aa=Object(u.a)(ta),na=a(331),sa=a.n(na),ra=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function oa(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ia(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function la(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ca(e,t){var a=\"\",n=0,s=void 0;return\"witness\"===e?s=L.ChainStore.getWitnessById(t.get(\"id\")):\"committee\"===e&&(s=L.ChainStore.getCommitteeMemberById(t.get(\"id\"))),a=s?s.get(\"url\"):a,{url:a=sa()(a,{whiteList:[],stripIgnoreTag:!0}),votes:n=s?s.get(\"total_votes\"):n,id:s.get(\"id\")}}var ua=function(e){function t(){return oa(this,t),ia(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return la(t,s.a.Component),ra(t,[{key:\"shouldComponentUpdate\",value:function(e){return e.account!==this.props.account||e.action!==this.props.action||e.isActive!==this.props.isActive||e.idx!==this.props.idx||e.proxy!==this.props.proxy}},{key:\"onAction\",value:function(e){this.props.onAction(e)}},{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.type,n=e.action,r=e.isActive,o=t.get(\"id\"),i=ca(a,t),l=i.url,c=i.votes,u=l&&l.length>0&&-1===l.indexOf(\"http\")?\"http://\"+l:l,p=\"remove\"===n;return s.a.createElement(\"tr\",{className:p?\"\":\"unsupported\"},s.a.createElement(\"td\",{style:{textAlign:\"right\"}},this.props.idx+1),s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(ce.a,{account:t.get(\"id\")})),s.a.createElement(\"td\",null,u&&-1!==u.indexOf(\".\")?s.a.createElement(\"a\",{href:u,target:\"_blank\",rel:\"noopener noreferrer\"},s.a.createElement(M.a,{name:\"share\",title:\"icons.share\"})):null),s.a.createElement(\"td\",null,s.a.createElement(S.a,{amount:c,asset:\"1.3.0\",decimalOffset:5,hide_asset:!0})),s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.votes.\"+(r?\"active_short\":\"inactive\")})),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"settings.\"+(p?\"yes\":\"no\")})),s.a.createElement(\"td\",{className:this.props.proxy?\"\":\"clickable\",onClick:this.props.proxy?function(){}:this.onAction.bind(this,o)},this.props.proxy?s.a.createElement(M.a,{name:\"locked\",title:\"icons.locked.action\"}):s.a.createElement(M.a,{name:p?\"checkmark-circle\":\"minus-circle\",title:p?\"icons.checkmark_circle.yes\":\"icons.minus_circle.no\"})))}}]),t}();ua.propTypes={account:E.a.object.isRequired,onAction:E.a.func.isRequired};var pa=function(e){function t(e){oa(this,t);var a=ia(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:\"\",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return la(t,s.a.Component),ra(t,[{key:\"onItemChange\",value:function(e){this.setState({item_name_input:e})}},{key:\"onItemAccountChange\",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;\"string\"==typeof a?this.setState({error:a}):a.then(function(e){return t.setState({error:e})})}}},{key:\"onAddItem\",value:function(e){if(e){this.setState({selected_item:null,item_name_input:\"\",error:null}),this.props.onAddItem(e.get(\"id\"))}}},{key:\"render\",value:function(){var e=this;if(!this.props.items)return null;var t=this.props.items.filter(function(e){return!!e}).sort(function(t,a){var n=ca(e.props.type,t).votes,s=ca(e.props.type,a).votes;return n!==s?parseInt(s,10)-parseInt(n,10):t.get(\"name\")>a.get(\"name\")?1:t.get(\"name\")<a.get(\"name\")?-1:0}).map(function(t,a){var n=e.props.supported&&e.props.supported.includes(t.get(\"id\"))?\"remove\":\"add\",r=e.props.active.includes(ca(e.props.type,t).id);return s.a.createElement(ua,{idx:a,key:t.get(\"name\"),account:t,type:e.props.type,onAction:\"add\"===n?e.props.onAddItem:e.props.onRemoveItem,isSelected:-1!==e.props.items.indexOf(t),action:n,isActive:r,proxy:e.props.proxy})}),a=this.state.error;!a&&this.state.selected_item&&-1!==this.props.items.indexOf(this.state.selected_item)&&(a=z.a.translate(\"account.votes.already\"));var n=[\"10%\",\"20%\",\"40%\",\"20%\",\"10%\"];return s.a.createElement(\"div\",null,this.props.withSelector?s.a.createElement(pe.a,{style:{maxWidth:\"600px\"},label:this.props.label,error:a,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:\"account.votes.add_witness\",tabIndex:this.props.tabIndex}):null,this.props.title&&t.length?s.a.createElement(\"h4\",null,this.props.title):null,t.length?s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{textAlign:\"right\"}},\"#\"),s.a.createElement(\"th\",{style:{textAlign:\"left\",maxWidth:n[1]}},s.a.createElement(A.a,{content:\"account.votes.name\"})),s.a.createElement(\"th\",{style:{maxWidth:n[2]}},s.a.createElement(A.a,{content:\"account.votes.about\"})),s.a.createElement(\"th\",{style:{maxWidth:n[3]}},s.a.createElement(A.a,{content:\"account.votes.votes\"})),s.a.createElement(\"th\",{style:{maxWidth:n[4]}},s.a.createElement(A.a,{content:\"account.votes.status.title\"})),s.a.createElement(\"th\",{style:{maxWidth:n[0]}},s.a.createElement(A.a,{content:\"account.votes.supported\"})),s.a.createElement(\"th\",{style:{maxWidth:n[5]}},s.a.createElement(A.a,{content:\"account.votes.toggle\"})))),s.a.createElement(\"tbody\",null,t)):null)}}]),t}();pa.propTypes={items:c.a.ChainObjectsList,onAddItem:E.a.func.isRequired,onRemoveItem:E.a.func.isRequired,validateAccount:E.a.func,label:E.a.string.isRequired,placeholder:E.a.string,tabIndex:E.a.number,action:E.a.string,withSelector:E.a.bool},pa.defaultProps={action:\"remove\",withSelector:!0,autosubscribe:!1};var da=Object(u.a)(pa),ma=a(105),ha=a(2130),fa=a.n(ha),ba=[\"1.14.114\",\"1.14.107\"],ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),va=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ya=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRemoveProxy=function(){a.publish(null)};var n=e.proxy.get(\"id\"),s=e.proxy.get(\"name\");return a.state={proxy_account_id:\"1.2.5\"===n?\"\":n,prev_proxy_account_id:\"1.2.5\"===n?\"\":n,current_proxy_input:\"1.2.5\"===n?\"\":s,witnesses:null,committee:null,vote_ids:h.a.Set(),proxy_vote_ids:h.a.Set(),lastBudgetObject:e.initialBudget.get(\"id\"),workerTableIndex:e.viewSettings.get(\"workerTableIndex\",1),all_witnesses:h.a.List(),all_committee:h.a.List(),hideLegacyProposals:!0},a.onProxyAccountFound=a.onProxyAccountFound.bind(a),a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a._getVoteObjects=a._getVoteObjects.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),va(t,[{key:\"componentWillMount\",value:function(){d.a.getFinalFeeAsset(this.props.account,\"account_update\"),L.ChainStore.fetchAllWorkers(),this.getBudgetObject()}},{key:\"componentDidMount\",value:function(){this.updateAccountData(this.props),this._getVoteObjects(),this._getVoteObjects(\"committee\")}},{key:\"componentWillReceiveProps\",value:function(e){if(e.account!==this.props.account){var t=e.proxy.get(\"id\"),a={proxy_account_id:\"1.2.5\"===t?\"\":t};this.setState({prev_proxy_account_id:a.proxy_account_id}),this.updateAccountData(e,a)}this.getBudgetObject()}},{key:\"updateAccountData\",value:function(e){var t=this,a=e.account,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state).proxy_account_id,s=L.ChainStore.getAccount(n),r=a.get(\"options\"),o=s?s.get(\"options\"):null,i=s?s.get(\"name\"):\"\";\"1.2.5\"===n&&(n=\"\",i=\"\");var l=r.get(\"votes\").toArray(),c=h.a.Set(l);L.ChainStore.getObjectsByVoteIds(l);var u=null,p=h.a.Set([]);if(\"1.2.5\"!==n&&o){var d=o.get(\"votes\").toArray();p=h.a.Set(d),L.ChainStore.getObjectsByVoteIds(d),u=Object(L.FetchChainObjects)(L.ChainStore.getObjectByVoteID,d,1e4)}Promise.all([Object(L.FetchChainObjects)(L.ChainStore.getObjectByVoteID,l,1e4),u]).then(function(e){var a=_a(e,2),s=a[0],r=a[1];function o(e){var t=new h.a.List,a=new h.a.List,n=new h.a.Set;return e.forEach(function(e){var n=e.get(\"committee_member_account\");n?a=a.push(n):(n=e.get(\"worker_account\"))||(n=e.get(\"witness_account\"))&&(t=t.push(n))}),{witnesses:t,committee:a,workers:n}}var l=o(s),u=l.witnesses,d=l.committee,m=l.workers,f=o(r||[]),b=f.witnesses,g=f.committee,_=f.workers,v={proxy_account_id:n,current_proxy_input:i,witnesses:u,committee:d,workers:m,proxy_witnesses:b,proxy_committee:g,proxy_workers:_,vote_ids:c,proxy_vote_ids:p,prev_witnesses:u,prev_committee:d,prev_workers:m,prev_vote_ids:c};t.setState(v)})}},{key:\"isChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.proxy_account_id!==e.prev_proxy_account_id||e.witnesses!==e.prev_witnesses||e.committee!==e.prev_committee||!h.a.is(e.vote_ids,e.prev_vote_ids)}},{key:\"_getVoteObjects\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"witnesses\",a=arguments[1],n=this.state[\"all_\"+t],s=\"witnesses\"===t,r=void 0;if(a)r=parseInt(a[a.length-1].split(\".\")[2],10);else{a=[];var o=this.props.globalObject.get(s?\"active_witnesses\":\"active_committee_members\").sort(function(e,t){return parseInt(e.split(\".\")[2],10)-parseInt(t.split(\".\")[2],10)}).last()||\"1.\"+(s?\"6\":\"5\")+\".1\";r=parseInt(o.split(\".\")[2],10);for(var i=1;i<=r+10;i++)a.push(\"1.\"+(s?\"6\":\"5\")+\".\"+i)}Object(L.FetchChainObjects)(L.ChainStore.getObject,a,5e3,{}).then(function(o){if(e.state[\"all_\"+t]=n.concat(h.a.List(o.filter(function(e){return!!e}).map(function(e){return e.get(s?\"witness_account\":\"committee_member_account\")}))),o[o.length-1]){a=[];for(var i=r+11;i<=r+20;i++)a.push(\"1.\"+(s?\"6\":\"5\")+\".\"+i);return e._getVoteObjects(t,a)}e.forceUpdate()})}},{key:\"onPublish\",value:function(){this.publish(this.state.proxy_account_id)}},{key:\"publish\",value:function(e){var t=this,a=this.props.account.toJS(),n={account:a.id},s={memo_key:a.options.memo_key};s.voting_account=e||\"1.2.5\",s.num_witness=this.state.witnesses.size,s.num_committee=this.state.committee.size,n.new_options=s,n.fee={amount:0,asset_id:d.a.getFinalFeeAsset(a.id,\"account_update\")};var r=this.state.vote_ids,o=this._getWorkerArray(),i=new Date;function l(e,t){return e.includes(t)&&(e=e.delete(t)),e}o.forEach(function(e){e&&(new Date(e.get(\"work_end_date\"))<=i&&(r=l(r,e.get(\"vote_for\"))),r=l(r,e.get(\"vote_against\")))}),Object(L.FetchChainObjects)(L.ChainStore.getWitnessById,this.state.witnesses.toArray(),4e3).then(function(e){var a=e.map(function(e){return e.get(\"vote_id\")});return Promise.all([Promise.resolve(a),Object(L.FetchChainObjects)(L.ChainStore.getCommitteeMemberById,t.state.committee.toArray(),4e3)])}).then(function(e){n.new_options.votes=e[0].concat(e[1].map(function(e){return e.get(\"vote_id\")})).concat(r.filter(function(e){return\"2\"===e.split(\":\")[0]}).toArray()).sort(function(e,t){var a=e.split(\":\"),n=t.split(\":\");return parseInt(a[1],10)-parseInt(n[1],10)}),tt.a.updateAccount(n)})}},{key:\"onReset\",value:function(){var e=this,t=this.state;this.refs.voting_proxy&&this.refs.voting_proxy.refs.bound_component&&this.refs.voting_proxy.refs.bound_component.onResetProxy(),this.setState({proxy_account_id:t.prev_proxy_account_id,current_proxy_input:t.prev_proxy_input,witnesses:t.prev_witnesses,committee:t.prev_committee,workers:t.prev_workers,vote_ids:t.prev_vote_ids},function(){e.updateAccountData(e.props)})}},{key:\"onAddItem\",value:function(e,t){var a={};a[e]=this.state[e].push(t),this.setState(a)}},{key:\"onRemoveItem\",value:function(e,t){var a={};a[e]=this.state[e].filter(function(e){return e!==t}),this.setState(a)}},{key:\"onChangeVotes\",value:function(e,t){var a={};a.vote_ids=this.state.vote_ids,e.length&&e.forEach(function(e){a.vote_ids=a.vote_ids.add(e)}),t&&t.forEach(function(e){a.vote_ids=a.vote_ids.delete(e)}),this.setState(a)}},{key:\"validateAccount\",value:function(e,t){return t?\"witnesses\"===e?Object(L.FetchChainObjects)(L.ChainStore.getWitnessById,[t.get(\"id\")],3e3).then(function(e){return e[0]?null:\"Not a witness\"}):\"committee\"===e?Object(L.FetchChainObjects)(L.ChainStore.getCommitteeMemberById,[t.get(\"id\")],3e3).then(function(e){return e[0]?null:\"Not a committee member\"}):null:null}},{key:\"onProxyChange\",value:function(e){var t=L.ChainStore.getAccount(e);(!t||t&&t.get(\"id\")!==this.state.proxy_account_id)&&this.setState({proxy_account_id:\"\",proxy_witnesses:h.a.Set(),proxy_committee:h.a.Set(),proxy_workers:h.a.Set()}),this.setState({current_proxy_input:e})}},{key:\"onProxyAccountFound\",value:function(e){var t=this,a=e?e.get(\"id\"):\"\";this.state.proxy_account_id!==a&&this.setState({proxy_account_id:a},function(){t.updateAccountData(t.props)})}},{key:\"onClearProxy\",value:function(){this.setState({proxy_account_id:\"\"})}},{key:\"_getTotalVotes\",value:function(e){return parseInt(e.get(\"total_votes_for\"),10)-parseInt(e.get(\"total_votes_against\"),10)}},{key:\"getBudgetObject\",value:function(){var e=this,t=this.state.lastBudgetObject,a=void 0;a=L.ChainStore.getObject(t);var n=parseInt(t.split(\".\")[2],10);if(a){var s=a.get(\"time\");/Z$/.test(s)||(s+=\"Z\");var r=new Date,o=n+Math.floor((r-new Date(s).getTime())/1e3/60/60)-1;if(n>=o)return;var l=\"2.13.\"+Math.max(n,o),c=parseInt(l.split(\".\")[2],10);Object(L.FetchChainObjects)(L.ChainStore.getObject,[l],void 0,{}).then(function(t){null===_a(t,1)[0]?e.setState({lastBudgetObject:\"2.13.\"+(c-1)},e.getBudgetObject):(i.a.setLastBudgetObject(l),e.setState({lastBudgetObject:l}))})}else{var u=\"2.13.\"+(n-1);Object(L.FetchChainObjects)(L.ChainStore.getObject,[u],void 0,{}).then(function(t){null===_a(t,1)[0]?e.setState({lastBudgetObject:\"2.13.\"+(n-2)},e.getBudgetObject):(i.a.setLastBudgetObject(u),e.setState({lastBudgetObject:u}))})}}},{key:\"_getWorkerArray\",value:function(){var e=[];return L.ChainStore.workers.forEach(function(t){var a=L.ChainStore.getObject(t,!1,!1);a&&e.push(a)}),e}},{key:\"_setWorkerTableIndex\",value:function(e){this.setState({workerTableIndex:e})}},{key:\"render\",value:function(){var e=this,t=this.state,a=t.workerTableIndex,n=!!t.prev_proxy_account_id,r=this.props.settings.get(\"unit\")||\"1.3.0\",o=!!this.state.proxy_account_id,i=D()(\"button\",{disabled:!this.isChanged()}),l=this.props.globalObject,c=void 0;this.state.lastBudgetObject&&(c=L.ChainStore.getObject(this.state.lastBudgetObject));var u=0,p=l?parseInt(l.getIn([\"parameters\",\"worker_budget_per_day\"]),10):0;c&&(p=Math.min(24*c.getIn([\"record\",\"worker_budget\"]),p),u=Math.min(24*c.getIn([\"record\",\"worker_budget\"]),p));var d=new Date,m=this._getWorkerArray(),h=0,f=function(t,a){if(!e.state.hideLegacyProposals)return!0;var n=a.some(function(e){var a=fa.a.compareTwoStrings(t.get(\"name\"),e.get(\"name\"))>.8,n=e.get(\"id\")===t.get(\"id\"),s=e.get(\"id\").substr(5,e.get(\"id\").length)>t.get(\"id\").substr(5,e.get(\"id\").length);return a&&!n&&s}),s=new Date,r=t.get(\"total_votes_for\")-t.get(\"total_votes_against\")<2e12,o=new Date(t.get(\"work_begin_date\")+\"Z\")<=new Date(s.setMonth(s.getMonth()-2)),i=ba.includes(t.get(\"id\"));return!((!!n||o)&&r||i)},b=m.filter(function(e){return!!e&&(new Date(e.get(\"work_end_date\")+\"Z\")>d&&new Date(e.get(\"work_begin_date\")+\"Z\")<=d)});b=b.filter(function(e){return f(e,b)}).sort(function(t,a){return e._getTotalVotes(a)-e._getTotalVotes(t)}).map(function(t,a){var n=parseInt(t.get(\"daily_pay\"),10);p-=n;var i=t.get(\"total_votes_for\")-t.get(\"total_votes_against\");return p<=0&&!h&&(h=i),h&&i<h?null:s.a.createElement(aa,{preferredUnit:r,rest:p+n,rank:a+1,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[o?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:o,voteThreshold:h})}).filter(function(e){return!!e});var g=m.filter(function(e){if(!e)return!1;var t=e.get(\"total_votes_for\")-e.get(\"total_votes_against\");return new Date(e.get(\"work_end_date\")+\"Z\")>d&&t<h||new Date(e.get(\"work_begin_date\")+\"Z\")>d});g=g.filter(function(e){return f(e,g)}).sort(function(t,a){return e._getTotalVotes(a)-e._getTotalVotes(t)}).map(function(t,a){return s.a.createElement(aa,{preferredUnit:r,rest:0,rank:a+1,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[o?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:o,voteThreshold:h})});var _=m.filter(function(e){return!!e&&new Date(e.get(\"work_end_date\")+\"Z\")<=d}).sort(function(t,a){return e._getTotalVotes(a)-e._getTotalVotes(t)}).map(function(t,a){return s.a.createElement(aa,{preferredUnit:r,rest:0,rank:a+1,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[o?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:o,voteThreshold:h})}),v=s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:D()(i,{success:this.isChanged()}),onClick:this.onPublish,tabIndex:4},s.a.createElement(A.a,{content:\"account.votes.publish\"})),s.a.createElement(\"button\",{className:\"button \"+i,onClick:this.onReset,tabIndex:8},s.a.createElement(A.a,{content:\"account.perm.reset\"})),n&&s.a.createElement(\"button\",{className:\"button\",onClick:this.onRemoveProxy,tabIndex:9},s.a.createElement(A.a,{content:\"account.perm.remove_proxy\"}))),y=s.a.createElement(pe.a,{style:{width:\"50%\",maxWidth:250,marginBottom:10},account:this.state.current_proxy_input,accountName:this.state.current_proxy_input,onChange:this.onProxyChange.bind(this),onAccountChanged:this.onProxyAccountFound,tabIndex:1,placeholder:z.a.translate(\"account.votes.set_proxy\"),tooltip:z.a.translate(this.state.proxy_account_id?\"tooltip.proxy_remove\":\"tooltip.proxy_search\"),hideImage:!0},s.a.createElement(\"span\",{style:{paddingLeft:5,position:\"relative\",top:9,display:o?\"\":\"none\"}},s.a.createElement(M.a,{name:\"locked\",size:\"1x\"})),s.a.createElement(\"span\",{style:{paddingLeft:5,position:\"relative\",top:9,display:o?\"none\":\"\"}},s.a.createElement(w.a,{to:\"/help/voting\"},s.a.createElement(M.a,{name:\"question-circle\",title:\"icons.question_circle\",size:\"1x\"})))),E=2===a,k=s.a.createElement(\"div\",{className:\"inline-block\",style:{float:\"right\",visibility:this.isChanged()?\"visible\":\"hidden\",color:\"red\",padding:\"0.85rem\",fontSize:\"0.9rem\"}},s.a.createElement(A.a,{content:\"account.votes.save_finish\"})),C=s.a.createElement(\"div\",{className:\"inline-block\",style:{marginLeft:\"0.5em\"},\"data-tip\":z.a.translate(\"tooltip.legacy_explanation\"),onClick:function(){e.setState({hideLegacyProposals:!e.state.hideLegacyProposals})}},s.a.createElement(Y.Switch,{style:{marginRight:6},checked:this.state.hideLegacyProposals}),s.a.createElement(A.a,{content:\"account.votes.hide_legacy_proposals\"}));return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{setting:\"votingTab\",className:\"account-tabs\",defaultActiveTab:1,segmented:!1,actionButtons:k,tabsClass:\"account-overview no-padding bordered-header content-block\"},s.a.createElement(T.a,{title:\"explorer.witnesses.title\"},s.a.createElement(\"div\",{className:D()(\"content-block\")},s.a.createElement(\"div\",{className:\"header-selector\"},y,s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"-2.5rem\"}},v)),s.a.createElement(da,{type:\"witness\",label:\"account.votes.add_witness_label\",items:this.state.all_witnesses,validateAccount:this.validateAccount.bind(this,\"witnesses\"),onAddItem:this.onAddItem.bind(this,\"witnesses\"),onRemoveItem:this.onRemoveItem.bind(this,\"witnesses\"),tabIndex:o?-1:2,supported:this.state[o?\"proxy_witnesses\":\"witnesses\"],withSelector:!1,active:l.get(\"active_witnesses\"),proxy:this.state.proxy_account_id}))),s.a.createElement(T.a,{title:\"explorer.committee_members.title\"},s.a.createElement(\"div\",{className:D()(\"content-block\")},s.a.createElement(\"div\",{className:\"header-selector\"},y,s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"-2.5rem\"}},v)),s.a.createElement(da,{type:\"committee\",label:\"account.votes.add_committee_label\",items:this.state.all_committee,validateAccount:this.validateAccount.bind(this,\"committee\"),onAddItem:this.onAddItem.bind(this,\"committee\"),onRemoveItem:this.onRemoveItem.bind(this,\"committee\"),tabIndex:o?-1:3,supported:this.state[o?\"proxy_committee\":\"committee\"],withSelector:!1,active:l.get(\"active_committee_members\"),proxy:this.state.proxy_account_id}))),s.a.createElement(T.a,{title:\"account.votes.workers_short\"},s.a.createElement(\"div\",{className:\"header-selector\"},s.a.createElement(\"div\",{style:{float:\"right\"}},s.a.createElement(w.a,{to:\"/create-worker\"},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(A.a,{content:\"account.votes.create_worker\"})))),s.a.createElement(\"div\",{className:\"selector\"},s.a.createElement(\"div\",{style:{paddingLeft:10},className:D()(\"inline-block\",{inactive:0!==a}),onClick:this._setWorkerTableIndex.bind(this,0)},z.a.translate(\"account.votes.new\",{count:g.length})),s.a.createElement(\"div\",{className:D()(\"inline-block\",{inactive:1!==a}),onClick:this._setWorkerTableIndex.bind(this,1)},z.a.translate(\"account.votes.active\",{count:b.length})),_.length?s.a.createElement(\"div\",{className:D()(\"inline-block\",{inactive:!E}),onClick:E?function(){}:this._setWorkerTableIndex.bind(this,2)},s.a.createElement(A.a,{content:\"account.votes.expired\"})):null,s.a.createElement(\"div\",{className:\"inline-block\"},C)),s.a.createElement(\"div\",{style:{marginTop:\"2rem\"}},y,s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"-2.5rem\"}},v))),s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},2===a?null:0===a?s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null),s.a.createElement(\"th\",{colSpan:\"3\",style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.votes.threshold\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(S.a,{decimalOffset:5,hide_asset:!0,amount:h,asset:\"1.3.0\"})),s.a.createElement(\"th\",{colSpan:\"3\"})),s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{border:\"none\",backgroundColor:\"transparent\"}}))):s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null),s.a.createElement(\"th\",{colSpan:\"4\",style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.votes.total_budget\"}),\" \",\"(\",s.a.createElement(ma.a,{name:r}),\")\"),s.a.createElement(\"th\",{colSpan:\"2\",className:\"hide-column-small\"}),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},l?s.a.createElement($t.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:r,amount:u}):null),s.a.createElement(\"th\",{className:\"hide-column-small\"})),s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{border:\"none\",backgroundColor:\"transparent\"}}))),s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,2===a?null:s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.votes.line\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.id\"})),s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.description\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(A.a,{content:\"account.votes.total_votes\"})),0===a?s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.votes.missing\"})):null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"explorer.workers.period\"})),2===a||0===a?null:s.a.createElement(\"th\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(A.a,{content:\"account.votes.funding\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(A.a,{content:\"account.votes.daily_pay\"}),s.a.createElement(\"div\",{style:{paddingTop:5,fontSize:\"0.8rem\"}},\"(\",s.a.createElement(ma.a,{name:r}),\")\")),2===a||0===a?null:s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"explorer.witnesses.budget\"}),s.a.createElement(\"div\",{style:{paddingTop:5,fontSize:\"0.8rem\"}},\"(\",s.a.createElement(ma.a,{name:r}),\")\")),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.votes.toggle\"})))),s.a.createElement(\"tbody\",null,0===a?g:1===a?b:_)))))))}}]),t}();ya.propTypes={initialBudget:c.a.ChainObject.isRequired,globalObject:c.a.ChainObject.isRequired,proxy:c.a.ChainAccount.isRequired},ya.defaultProps={globalObject:\"2.0.0\"},ya=Object(u.a)(ya);var Ea=function(e){return s.a.createElement(ya,ga({},e,{initialBudget:i.a.getLastBudgetObject()}))},wa=a(563),ka=a(1988),Aa=a(36),Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Oa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xa(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Na(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function ja(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pa={textAlign:\"right\"},Ta={textAlign:\"left\"},Ma=function(e){function t(){xa(this,t);var e=Na(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isBorrowModalVisible:!1},e}return ja(t,s.a.Component),Oa(t,[{key:\"showBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!0})}},{key:\"hideBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!1})}},{key:\"_onUpdatePosition\",value:function(e){e.preventDefault();var t=\"cp_modal_\"+this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"]);this.refs[t].show()}},{key:\"_onClosePosition\",value:function(e){e.preventDefault();var t=Jt.a.new_transaction();t.add_type_operation(\"call_order_update\",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get(\"borrower\"),delta_collateral:{amount:-this.props.object.get(\"collateral\"),asset_id:this.props.object.getIn([\"call_price\",\"base\",\"asset_id\"])},delta_debt:{amount:-this.props.object.get(\"debt\"),asset_id:this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"])}}),st.a.process_transaction(t,null,!0)}},{key:\"_getBalance\",value:function(){var e=this.props.account,t=this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"]),a=e.get(\"balances\"),n=0;return a&&a.forEach(function(e,a){if(a==t){var s=L.ChainStore.getObject(e);n=s.get(\"balance\")}}),n}},{key:\"_getFeedPrice\",value:function(){return this.props?1/V.a.get_asset_price(this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"quote\",\"amount\"]),this.props.collateralAsset,this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"base\",\"amount\"]),this.props.debtAsset):1}},{key:\"_getCollateralRatio\",value:function(){var e=this.props.object.toJS();return V.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(V.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:\"_getMR\",value:function(){return this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"])/1e3}},{key:\"_getStatusClass\",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?\"danger\":e<t+.5?\"warning\":\"\"}},{key:\"_getCRTip\",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&\"\"!==e?\"danger\"===e?z.a.translate(\"tooltip.cr_danger\",{mr:t}):\"warning\"===e?z.a.translate(\"tooltip.cr_warning\",{mr:t}):null:null}},{key:\"render\",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object.toJS(),r=this._getCollateralRatio(),o=V.a.get_asset_amount(n.debt,this.props.debtAsset),i=this._getBalance(),l=this._getStatusClass();return s.a.createElement(\"tr\",{className:\"margin-row\"},s.a.createElement(\"td\",{style:Ta},s.a.createElement(w.a,{to:\"/asset/\"+t.get(\"symbol\")},s.a.createElement(ma.a,{noTip:!0,name:t.get(\"symbol\")}))),s.a.createElement(\"td\",{style:Pa},s.a.createElement(S.a,{amount:i,asset:n.call_price.quote.asset_id,hide_asset:!0})),s.a.createElement(\"td\",{style:Pa},s.a.createElement(S.a,{amount:n.debt,asset:n.call_price.quote.asset_id,hide_asset:!0})),s.a.createElement(\"td\",{style:Pa,className:\"column-hide-medium\"},s.a.createElement(S.a,{decimalOffset:5,amount:n.collateral,asset:n.call_price.base.asset_id})),s.a.createElement(\"td\",{\"data-place\":\"bottom\",\"data-tip\":this._getCRTip(),className:\"center-content \"+l},V.a.format_number(r,2)),s.a.createElement(\"td\",{style:Pa},s.a.createElement(wa.a,{noTip:!0,balances:Object(m.List)(),debt:Sa({},t.get(\"id\"),n.debt),collateral:Sa({},a.get(\"id\"),parseInt(n.collateral,10)),hide_asset:!0})),s.a.createElement(\"td\",{style:Pa,className:\"column-hide-small\"},s.a.createElement(le.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_symbols:!0})),s.a.createElement(\"td\",{style:Pa,className:\"column-hide-small\"},s.a.createElement(le.a,{base_amount:t.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"base\",\"amount\"]),base_asset:n.call_price.quote.asset_id,quote_amount:t.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"quote\",\"amount\"]),quote_asset:n.call_price.base.asset_id,hide_symbols:!0})),s.a.createElement(\"td\",{className:\"center-content column-hide-small\",style:Ta},s.a.createElement(le.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_value:!0})),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},s.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+a.get(\"symbol\")},s.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\",style:{marginRight:5}}))),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{\"data-place\":\"left\",\"data-tip\":z.a.translate(\"tooltip.update_position\"),style:{paddingBottom:5}},s.a.createElement(\"a\",{onClick:this._onUpdatePosition.bind(this)},s.a.createElement(M.a,{name:\"adjust\",title:\"icons.adjust\",className:\"icon-14px rotate90\"})))),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{\"data-place\":\"left\",\"data-tip\":z.a.translate(\"tooltip.close_position\",{amount:o,asset:t.get(\"symbol\")}),style:{paddingBottom:5}},s.a.createElement(\"a\",{onClick:this._onClosePosition.bind(this)},s.a.createElement(M.a,{name:\"cross-circle\",title:\"icons.cross_circle.close_position\",className:\"icon-14px\"}))),t?s.a.createElement(ka.a,{visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal.bind(this),hideModal:this.hideBorrowModal.bind(this),ref:\"cp_modal_\"+n.call_price.quote.asset_id,modalId:\"cp_modal_\"+n.call_price.quote.asset_id,quote_asset:n.call_price.quote.asset_id,backing_asset:t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),account:this.props.account}):null))}}]),t}();Ma.propTypes={debtAsset:c.a.ChainAsset.isRequired,collateralAsset:c.a.ChainAsset.isRequired},Ma.defaultProps={tempComponent:\"tr\"},Ma=Object(u.a)(Ma);var Ia=function(e){function t(){return xa(this,t),Na(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ja(t,s.a.Component),Oa(t,[{key:\"render\",value:function(){var e=this.props,t=e.object,a=e.account,n=t.getIn([\"call_price\",\"quote\",\"asset_id\"]),r=t.getIn([\"call_price\",\"base\",\"asset_id\"]);return s.a.createElement(Ma,Ca({debtAsset:n,collateralAsset:r,account:a},this.props))}}]),t}();Ia.propTypes={object:c.a.ChainObject.isRequired},Ia=Object(u.a)(Ia);var Ra=function(e){function t(){xa(this,t);var e=Na(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isBorrowModalVisible:!1},e}return ja(t,s.a.Component),Oa(t,[{key:\"showBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!0})}},{key:\"hideBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!1})}},{key:\"_onUpdatePosition\",value:function(e){e.preventDefault();var t=\"cp_modal_\"+this.props.debtAsset.get(\"id\");this.refs[t].show()}},{key:\"_getFeedPrice\",value:function(){return this.props?1/V.a.get_asset_price(this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"quote\",\"amount\"]),this.props.collateralAsset,this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"settlement_price\",\"base\",\"amount\"]),this.props.debtAsset):1}},{key:\"render\",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.account,r=t.get(\"id\"),o=n.get(\"balances\"),i=0;return o&&o.forEach(function(e,t){if(t==r){var a=L.ChainStore.getObject(e);i=a.get(\"balance\")}}),s.a.createElement(\"tr\",{className:\"margin-row\"},s.a.createElement(\"td\",{style:Ta},s.a.createElement(w.a,{to:\"/asset/\"+t.get(\"symbol\")},s.a.createElement(ma.a,{noTip:!0,name:t.get(\"symbol\")}))),s.a.createElement(\"td\",{style:Pa},s.a.createElement(S.a,{amount:i,asset:t.get(\"id\"),hide_asset:!0})),s.a.createElement(\"td\",{style:Pa},s.a.createElement(S.a,{amount:0,asset:t.get(\"id\"),hide_asset:!0})),s.a.createElement(\"td\",{style:Pa,className:\"column-hide-medium\"},s.a.createElement(S.a,{decimalOffset:5,amount:0,asset:a.get(\"id\")})),s.a.createElement(\"td\",null),s.a.createElement(\"td\",{style:Pa}),s.a.createElement(\"td\",{style:Pa,className:\"column-hide-small\"}),s.a.createElement(\"td\",{style:Pa,className:\"column-hide-small\"}),s.a.createElement(\"td\",{className:\"center-content column-hide-small\",style:Ta}),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},s.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+a.get(\"symbol\")},s.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\",style:{marginRight:5}}))),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{\"data-place\":\"left\",\"data-tip\":z.a.translate(\"tooltip.update_position\"),style:{paddingBottom:5}},s.a.createElement(\"a\",{onClick:this._onUpdatePosition.bind(this)},s.a.createElement(M.a,{name:\"adjust\",title:\"icons.adjust\",className:\"icon-14px rotate90\"})))),s.a.createElement(\"td\",null,t?s.a.createElement(ka.a,{ref:\"cp_modal_\"+t.get(\"id\"),visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal.bind(this),hideModal:this.hideBorrowModal.bind(this),modalId:\"cp_modal_\"+t.get(\"id\"),quote_asset:t.get(\"id\"),backing_asset:t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),account:this.props.account}):null))}}]),t}();Ra.propTypes={debtAsset:c.a.ChainAsset.isRequired,collateralAsset:c.a.ChainAsset.isRequired},Ra.defaultProps={tempComponent:\"tr\"},Ra=Object(u.a)(Ra);var Ba=function(e){function t(){return xa(this,t),Na(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ja(t,s.a.Component),Oa(t,[{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.callOrders,r=t.bitAssets;if(n=n.filter(function(e){return!!e}),!(r=r.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=r.findIndex(function(t){return t&&t.get(\"id\")===e.getIn([\"call_price\",\"quote\",\"asset_id\"])});-1!==t&&r.splice(t,1)}}),!r.length)return null;var o=r.map(function(t){return s.a.createElement(Ra,Ca({key:t.get(\"id\"),debtAsset:t.get(\"id\"),collateralAsset:t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),account:a},e.props))});return s.a.createElement(\"tbody\",null,o)}}]),t}();Ba.propTypes={callOrders:c.a.ChainObjectsList},Ba=Object(u.a)(Ba),Ba=Object(P.a)(Ba,{propNames:[\"bitAssets\"],defaultProps:{bitAssets:[\"1.3.103\",\"1.3.113\",\"1.3.120\",\"1.3.121\",\"1.3.958\",\"1.3.1325\",\"1.3.1362\",\"1.3.105\",\"1.3.106\"]},asList:!0});var qa=function(e){var t=e.callOrders,a=e.account,n=e.className,r=e.children,o=e.preferredUnit;return s.a.createElement(\"table\",{className:\"table table-hover \"+n},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:Ta},s.a.createElement(A.a,{content:\"explorer.asset.title\"})),s.a.createElement(\"th\",{style:Pa},s.a.createElement(A.a,{content:\"exchange.balance\"})),s.a.createElement(\"th\",{style:Pa},s.a.createElement(A.a,{content:\"transaction.borrow_amount\"})),s.a.createElement(\"th\",{style:Pa,className:\"column-hide-medium\"},s.a.createElement(A.a,{content:\"transaction.collateral\"})),s.a.createElement(\"th\",null,s.a.createElement(\"div\",{className:\"tooltip inline-block\",\"data-place\":\"top\",\"data-tip\":z.a.translate(\"tooltip.coll_ratio\")},s.a.createElement(A.a,{content:\"borrow.coll_ratio\"}))),s.a.createElement(\"th\",null,s.a.createElement(Aa.a,{noLink:!0,string:\"account.total\",keys:[{type:\"asset\",value:o,arg:\"asset\"}]})),s.a.createElement(\"th\",{style:Pa,className:\"column-hide-small\"},s.a.createElement(\"div\",{className:\"tooltip inline-block\",\"data-place\":\"top\",\"data-tip\":z.a.translate(\"tooltip.call_price\")},s.a.createElement(A.a,{content:\"exchange.call\"}))),s.a.createElement(\"th\",{style:Pa,className:\"column-hide-small\"},s.a.createElement(A.a,{content:\"exchange.price\"})),s.a.createElement(\"th\",{className:\"column-hide-small\",style:Ta},s.a.createElement(A.a,{content:\"explorer.assets.units\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"exchange.market\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"borrow.adjust_short\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"transfer.close\"})))),s.a.createElement(\"tbody\",null,t.sort(function(e,t){return e.split(\".\")[2]-t.split(\".\")[2]}).map(function(e){return s.a.createElement(Ia,{key:e,object:e,account:a})})),s.a.createElement(Ba,{account:a,callOrders:h.a.List(t)}),s.a.createElement(\"tbody\",null,r))},Da=a(408),Fa=a(152),Va=a(572),La={AccountPermission:function(e,t,a){var n=this;this.id=e.get(\"id\"),this.weight=t,this.threshold=e.getIn([a,\"weight_threshold\"]),this.accounts=[],this.keys=e.getIn([a,\"key_auths\"]).map(function(e){return new function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}}(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var s=n._sumWeights(e);return n.isMultiSig()&&(s+=n.sumKeys(t)),s},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get(\"id\"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var s=L.ChainStore.getAccount(e.id);s&&s.getIn([t,\"account_auths\"]).size&&s.getIn([t,\"account_auths\"]).forEach(function(s){var r=L.ChainStore.getAccount(s.get(0));r&&e.accounts.push(a.unravel(new a.AccountPermission(r,s.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var s=L.ChainStore.getAccount(e),r=a.unravel(new a.AccountPermission(s,null,t),t);n.push(r)}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},Ua=a(57),za=a.n(Ua),Wa=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ja=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Wa(t,[{key:\"componentDidMount\",value:function(){za.a.rebuild()}},{key:\"render\",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,r=e.content;return s.a.createElement(\"span\",{className:\"tooltip \"+t,\"data-html\":!0,\"data-tip\":n||z.a.translate(r)},a)}}]),t}(),Ka=function(){return s.a.createElement(Ja,{className:\"error appended\",content:\"explorer.proposals.authority_depth_warning\"},\"/!\\\\\")},Ga=function(){return s.a.createElement(Ja,{className:\"error appended\",content:\"explorer.proposals.children_authority_depth_warning\"},\"/!\\\\\")},Ha=function(){return s.a.createElement(Ja,{className:\"warning\",content:\"explorer.proposals.pending_approval\"},s.a.createElement(A.a,{content:\"explorer.proposals.pending\"}))},Za=function(){return s.a.createElement(Ja,{className:\"warning\",content:\"explorer.proposals.pending_review\"},s.a.createElement(A.a,{content:\"explorer.proposals.review\"}))},Qa=function(){return s.a.createElement(Ja,{className:\"error\",content:\"explorer.proposals.failed_execute\"},s.a.createElement(A.a,{content:\"explorer.proposals.failed\"}))},Ya=function(e){var t=e.onToggle,a=e.expanded;return s.a.createElement(\"a\",{className:\"expand-button\",onClick:t},\"[\",a?\"-\":\"+\",\"]\")},Xa=function(e){return e.approved?s.a.createElement(M.a,{name:\"checkmark-circle\",size:\"1x\",className:\"success\",title:\"icons.checkmark_circle.operation_succeed\"}):s.a.createElement(M.a,{name:\"cross-circle\",size:\"1x\",className:\"error\",title:\"icons.cross_circle.operation_failed\"})},$a=function(e){var t=e.available,a=e.permission,n=e.weight,r=e.level;return s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\"},s.a.createElement(Xa,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*r),\"...\"),s.a.createElement(\"td\",null,n)))},en=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some(function(a){return e(t,a,n+1)})},tn=function(e,t,a){return e.accounts.reduce(function(e,n){return e+(an(n,t,a)?n.weight:0)},0)+e.keys.reduce(function(e,t){return e+(t.isAvailable(a)?t.weight:0)},0)},an=function(e,t,a){return e.isNested()||e.isMultiSig()?tn(e,t,a)>=e.threshold:e.isAvailable(t)},nn=function(e,t,a){return e&&e.threshold>10?V.a.get_percentage(e.getStatus(t,a),e.threshold)+\" / 100%\":e.getStatus(t,a)+\" / \"+e.threshold},sn=function(e,t){return t&&t>10?V.a.get_percentage(e,t):e},rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},on=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ln(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function cn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function un(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pn=function(e){function t(e){ln(this,t);var a=cn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return un(t,s.a.Component),on(t,[{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,r=e.permission,o=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=an(r,a,n),d=r.isNested(),m=r.isMultiSig(),h=sn(r.weight,o)||1,f=nn(r,a,n),b=i>=l,g=d||m?s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\"},s.a.createElement(Xa,{approved:p}),s.a.createElement(ce.a,{subpage:\"permissions\",account:t.get(\"id\")})),s.a.createElement(\"td\",null,u?s.a.createElement(\"span\",{className:p?\"success-text\":\"\"},h):h&&(h&&2===h.length?\"  \":\"\")+h+\" \",s.a.createElement(Ya,{onToggle:this.handleExpandToggle,expanded:u}),u&&s.a.createElement(\"span\",{className:\"appended\"},\"(\",f,\")\"),b?s.a.createElement(Ka,null):en(l,r,i)&&!u&&s.a.createElement(Ga,null))):s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\"},s.a.createElement(Xa,{approved:p}),s.a.createElement(ce.a,{subpage:\"permissions\",account:t.get(\"id\")})),s.a.createElement(\"td\",null,!d&&h?(h&&2===h.length?\"  \":\"\")+h+\" \":null)),_=[];return(d||m)&&u&&(r.accounts.forEach(function(e){_.push(s.a.createElement(dn,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:r.threshold,level:i+1,maxAuthorityDepth:l}))}),r.keys.length&&r.keys.forEach(function(e){return _.push(s.a.createElement($a,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:sn(e.weight,o)}))})),_.length>0?s.a.createElement(\"tbody\",null,c||g,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"3\",className:\"heading-perm\"},s.a.createElement(\"div\",{className:c?\"\":\"table-container\"},s.a.createElement(\"table\",null,_)),u&&0===i&&s.a.createElement(\"div\",{className:\"spacer\"})))):s.a.createElement(\"tbody\",null,g)}}]),t}();pn.propTypes={account:c.a.ChainAccount.isRequired,accounts:c.a.ChainAccountsList,level:E.a.number.isRequired},pn.defaultProps={level:0};var dn=Object(u.a)(pn),mn=function(e){function t(e){ln(this,t);var a=cn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return un(t,s.a.Component),on(t,[{key:\"componentWillMount\",value:function(){this._updateState(),L.ChainStore.subscribe(this._updateState)}},{key:\"componentWillUnmount\",value:function(){L.ChainStore.unsubscribe(this._updateState)}},{key:\"_updateState\",value:function(){var e=La.listToIDs(this.props.required),t=La.listToIDs(this.props.available);this.setState({requiredPermissions:La.unnest(e,this.props.type),required:e,available:t})}},{key:\"render\",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,r=t.availableKeys,o=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=this.state,u=c.requiredPermissions,p=(c.required,c.available),d=c.expanded;p=Object(Va.a)(p),r=r.toJS(),a&&(p.push(a),r.push(a)),n&&(-1!==p.indexOf(n)&&p.splice(p.indexOf(n),1),-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1));var m=u.reduce(function(e,t){return e+(an(t,p,r)?1:0)},0),h=u.length,f=m===h,b=f&&!i&&!l,g=f&&i,_=o.get(\"parameters\").get(\"max_authority_depth\"),v=1===u.length,y=v?u[0]:null,E=!v&&m+\" / \"+h,w=u.map(function(t){return s.a.createElement(dn,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:p,availableKeys:r,expanded:e.props.expanded||v,level:0,maxAuthorityDepth:_,hideRoot:v})});return s.a.createElement(\"div\",{className:\"nested-approval-state\"},s.a.createElement(\"div\",{className:\"root-status\"},b?s.a.createElement(Qa,null):g?s.a.createElement(Za,null):s.a.createElement(Ha,null),\" \",y?y.threshold>1&&nn(y,p,r):s.a.createElement(\"span\",null,\"(\",E,\")\"),(!y||y.isMultiSig()||y.isNested())&&s.a.createElement(Ya,{onToggle:this.handleExpandToggle,expanded:d}),!d&&u.some(function(e){return en(_,e,0)})&&s.a.createElement(Ga,null)),d&&s.a.createElement(\"table\",null,w))}}]),t}();mn.propTypes={required:c.a.ChainAccountsList,available:c.a.ChainAccountsList},mn.defaultProps={type:\"active\",added:null,removed:null},mn=Object(u.a)(mn);var hn=function(e){function t(){return ln(this,t),cn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return un(t,s.a.Component),on(t,[{key:\"render\",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get(\"available_\"+a+\"_approvals\"),r=t.get(\"available_key_approvals\"),o=t.get(\"required_\"+a+\"_approvals\");return s.a.createElement(mn,rn({},this.props,{required:o,available:n,availableKeys:r,reviewPeriodTime:t.get(\"review_period_time\")}))}}]),t}();hn.propTypes={proposal:c.a.ChainObject.isRequired,type:E.a.string.isRequired,globalObject:c.a.ChainObject.isRequired},hn.defaultProps={type:\"active\",added:null,globalObject:\"2.0.0\"};var fn=Object(u.a)(hn),bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},gn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),_n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function vn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function yn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function En(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wn=function(e,t,a){var n=[];e.forEach(function(e){n=n.concat(e.getMissingSigs(t))});var s=[];return e.forEach(function(e){s=s.concat(e.getMissingKeys(a))}),[n,s]},kn=function(e){function t(e){vn(this,t);var a=yn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return En(t,s.a.Component),_n(t,[{key:\"onActiveAccount\",value:function(e,t,a,n){var s={};t[n]?(s.key=n,s[a]=null):n?(s[a]=e[n],s.key=null):(s[a]=null,s.key=null),this.setState(s)}},{key:\"_onProposalAction\",value:function(e){var t=this,a=e.toJS(),n=this.state,s=n.active,r=(n.key,n.owner,n.payee||s);if(\"delete\"===this.props.action){var o=Jt.a.new_transaction();o.add_type_operation(\"proposal_delete\",{fee_paying_account:r||this.props.account.get(\"id\"),proposal:a.id,using_owner_authority:!1}),st.a.process_transaction(o,null,!0)}else{var i={fee_paying_account:r,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]},l=\"approve\"===this.props.action,c=[];[\"active\",\"owner\",\"key\"].forEach(function(e){var n=t.state[e];if(n){var s=-1!==a[\"available_\"+e+\"_approvals\"].indexOf(n);(l&&!s||!l&&s)&&(\"approve\"===t.props.action?(i[e+\"_approvals_to_add\"]=[n],\"key\"===e&&c.push(n)):\"reject\"===t.props.action&&(i[e+\"_approvals_to_remove\"]=[n],\"key\"===e&&c.push(n)))}});var u=Jt.a.new_transaction();u.add_type_operation(\"proposal_update\",i),st.a.process_transaction(u,null,!0,c)}this.props.hideModal()}},{key:\"onChangePayee\",value:function(e){var t=L.ChainStore.getAccount(e);t&&this.setState({payee:t.get(\"id\")})}},{key:\"onCancel\",value:function(){this.props.hideModal()}},{key:\"render\",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],r={},i=\"approve\"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(i?e&&!t.get(\"available_\"+a+\"_approvals\").includes(e.get(\"id\")):e&&t.get(\"available_\"+a+\"_approvals\").includes(e.get(\"id\")))&&(r[e.get(\"name\")]=e.get(\"id\"),n.push(e.get(\"name\")))});var l=[],c={};this.props.keys.length&&this.props.keys.forEach(function(e){var a=o.a.isMyKey(e),n=t.get(\"available_key_approvals\").includes(e);(a&&i&&!n||a&&!i&&n)&&(c[e]=!0,l.push(e))});var u=o.a.getMyAccounts(),p=[s.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this._onProposalAction.bind(this,t)},z.a.translate(\"proposal.\"+this.props.action)),s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onCancel.bind(this)},z.a.translate(\"account.perm.cancel\"))];return s.a.createElement(Y.Modal,{visible:this.props.visible,title:z.a.translate(\"modal.proposals.actions.\"+this.props.action),footer:p,onCancel:this.props.hideModal},s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\",style:{paddingRight:\"20%\"}},s.a.createElement(fn,{expanded:!0,proposal:t.get(\"id\"),type:a,added:i?this.state.key?this.state.key:this.state[a]||null:null,removed:i?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),s.a.createElement(\"div\",{className:\"content-block full-width-content\"},s.a.createElement(\"div\",{className:\"full-width-content form-group\"},s.a.createElement(A.a,{content:\"modal.proposals.pay_with\",component:\"label\"}),s.a.createElement(Fa.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),\"delete\"!==this.props.action&&(n.length||l.length)?s.a.createElement(\"div\",{className:\"full-width-content form-group\"},s.a.createElement(A.a,{content:\"modal.proposals.approval_\"+(i?\"add\":\"remove\"),component:\"label\"}),s.a.createElement(Fa.a,{account_names:n.concat(l),onChange:this.onActiveAccount.bind(this,r,c,a)})):null,null)))))}}]),t}();kn.propTypes={accounts:c.a.ChainAccountsList},kn=Object(u.a)(kn);var An=function(e){function t(){vn(this,t);var e=yn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return En(t,s.a.Component),_n(t,[{key:\"componentWillMount\",value:function(){this._updateState(),L.ChainStore.subscribe(this._updateState)}},{key:\"componentWillUnmount\",value:function(){L.ChainStore.unsubscribe(this._updateState)}},{key:\"_updateState\",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get(\"required_active_approvals\").size?\"active\":\"owner\"),n=La.listToIDs(t.get(\"required_\"+a+\"_approvals\")),s=La.listToIDs(t.get(\"available_\"+a+\"_approvals\")),r=La.listToIDs(t.get(\"available_key_approvals\"));this.setState({requiredPermissions:La.unnest(n,a),available:s,availableKeys:r,type:a})}},{key:\"render\",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,r=t.availableKeys,o=t.type,i=wn(a,n,r),l=gn(i,2),c=l[0],u=l[1];return s.a.createElement(kn,bn({},this.props,{type:o,accounts:\"approve\"===e?c:n,keys:\"approve\"===e?u:r}))}}]),t}();An.propTypes={account:c.a.ChainAccount.isRequired,proposal:c.a.ChainObject.isRequired},An=Object(u.a)(An);var Cn=function(e){function t(){return vn(this,t),yn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return En(t,s.a.Component),_n(t,[{key:\"render\",value:function(){return this.props.account&&this.props.proposal&&this.props.action?s.a.createElement(An,this.props):null}}]),t}(),On=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),Sn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var xn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isModalVisible:!1,modal:{action:null,proposalId:null,accountId:null}},e.forceUpdate=e.forceUpdate.bind(e),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n[\"Component\"]),Sn(t,[{key:\"componentDidMount\",value:function(){L.ChainStore.subscribe(this.forceUpdate)}},{key:\"componentWillUnmount\",value:function(){L.ChainStore.unsubscribe(this.forceUpdate)}},{key:\"showModal\",value:function(e){var t=e.action,a=e.proposalId,n=e.accountId;this.setState({isModalVisible:!0,modal:{action:t,proposalId:a,accountId:n}})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1,modal:{action:null,proposalId:null,accountId:null}})}},{key:\"_onApproveModal\",value:function(e,t,a){this.showModal({action:a,proposalId:e,accountId:t})}},{key:\"_canReject\",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:\"render\",value:function(){var e=this,t=this.props.account;if(!t)return null;var a=[];t.get(\"proposals\").size&&t.get(\"proposals\").forEach(function(e){var n=L.ChainStore.getObject(e);if(n){var s=n.get(\"proposed_transaction\").get(\"operations\");a.push({operations:s,account:t,proposal:n})}});var n=a.sort(function(e,t){return V.a.sortID(e.proposal.get(\"id\"),t.proposal.get(\"id\"),!0)}).reduce(function(t,a,n){var r=!1,i=a.proposal.get(\"id\"),l=a.proposal.get(\"proposer\"),c=a.proposal.get(\"expiration_time\"),u=a.operations.map(function(e,t){return\"1.2.153124\"===e.getIn([1,\"to\"])&&(r=!0),s.a.createElement(Da.b,{key:a.proposal.get(\"id\")+\"_operation_\"+t,expiration:c,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:i,proposer:l})}).toArray(),p=e._canReject(a.proposal.toJS()),d=a.proposal.get(\"id\"),m=a.proposal.get(\"required_active_approvals\").size?\"active\":\"owner\";t.push(s.a.createElement(\"tr\",{key:d+\"_id\"},s.a.createElement(\"td\",{colSpan:\"4\",className:\"proposal\"+(0===n?\" first\":\"\")},s.a.createElement(Da.a,{id:i,expiration:c}))));var h=La.listToIDs(a.proposal.get(\"available_\"+m+\"_approvals\")),f=La.listToIDs(a.proposal.get(\"available_key_approvals\")),b=La.listToIDs(a.proposal.get(\"required_\"+m+\"_approvals\")),g=La.unnest(b,m),_=wn(g,h,f),v=On(_,2),y=v[0],E=v[1],w=[];y.length&&y.forEach(function(e){e&&!a.proposal.get(\"available_\"+m+\"_approvals\").includes(e)&&w.push(e)});var k=[];E.length&&E.forEach(function(e){o.a.isMyKey(e)&&!a.proposal.get(\"available_key_approvals\").includes(e)&&k.push(e)});var C=w.length+k.length>0;return t.push(s.a.createElement(\"tr\",{className:\"top-left-align\",key:d+\"_content\"},s.a.createElement(\"td\",null,u),s.a.createElement(\"td\",null,g.map(function(e,t){return s.a.createElement(\"div\",{className:\"list-item\",key:d+\"_approver_\"+t},s.a.createElement(ce.a,{subpage:\"permissions\",account:e.id}))})),s.a.createElement(\"td\",null,s.a.createElement(fn,{proposal:a.proposal.get(\"id\"),type:m})),s.a.createElement(\"td\",{className:\"approval-buttons\"},r?s.a.createElement(\"div\",{\"data-tip\":z.a.translate(\"tooltip.propose_scam\"),className:\"tooltip has-error scam-error\"},\"SCAM\"):s.a.createElement(\"button\",{onClick:C?e._onApproveModal.bind(e,d,a.account.get(\"id\"),\"approve\"):function(){},className:\"button primary hollow\"+(C?\"\":\" hidden\")},s.a.createElement(\"span\",null,s.a.createElement(A.a,{content:\"proposal.approve\"}))),p?s.a.createElement(\"button\",{onClick:e._onApproveModal.bind(e,d,a.account.get(\"id\"),\"reject\"),className:\"button primary hollow\"},s.a.createElement(A.a,{content:\"proposal.reject\"})):null,s.a.createElement(\"button\",{onClick:e._onApproveModal.bind(e,d,a.account.get(\"id\"),\"delete\"),className:\"button primary hollow\"},s.a.createElement(A.a,{content:\"proposal.delete\"}))))),t.push(s.a.createElement(\"tr\",{key:d+\"_separator\"},s.a.createElement(\"td\",{colSpan:\"4\"},s.a.createElement(\"hr\",null)))),t},[]);return s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table proposals compact \"+this.props.className},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.proposals\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.approvers\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.status\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.action\"})))),s.a.createElement(\"tbody\",null,n)),s.a.createElement(Cn,{ref:\"modal\",visible:this.state.isModalVisible,hideModal:this.hideModal,showModal:this.showModal,account:this.state&&this.state.modal.accountId,proposal:this.state&&this.state.modal.proposalId,action:this.state&&this.state.modal.action}))}}]),t}();xn.propTypes={account:c.a.ChainAccount.isRequired};var Nn=Object(u.a)(xn),jn=a(2013),Pn=a(87),Tn=a(31),Mn=a(64),In=a(1964),Rn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Bn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var qn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:\"\"},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Rn(t,[{key:\"componentDidMount\",value:function(){var e=document.getElementById(\"cancelAllOrders\");e&&e.addEventListener(\"click\",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(\".orderCancel\").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:\"_getFilteredOrders\",value:function(){var e=this.state.filterValue;return(this.props.account.get(\"orders\")||[]).filter(function(t){var a=L.ChainStore.getObject(t).toJS(),n=L.ChainStore.getAsset(a.sell_price.base.asset_id),s=L.ChainStore.getAsset(a.sell_price.quote.asset_id),r=n.get(\"symbol\").toLowerCase(),o=s.get(\"symbol\").toLowerCase();return r.indexOf(e)>-1||o.indexOf(e)>-1})}},{key:\"_cancelLimitOrder\",value:function(e,t){t.preventDefault(),Pn.a.cancelLimitOrder(this.props.account.get(\"id\"),e,!1).catch(function(e){console.log(\"cancel order error:\",e)})}},{key:\"_cancelLimitOrders\",value:function(e){var t=this;Pn.a.cancelLimitOrders(this.props.account.get(\"id\"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log(\"cancel orders error:\",e)})}},{key:\"onFlip\",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),de.a.changeMarketDirection(t)}},{key:\"onCheckCancel\",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:\"setFilterValue\",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:\"resetSelected\",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(\".orderCancel\").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:\"cancelSelected\",value:function(){this._cancelLimitOrders.call(this)}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,r=this.state,o=r.filterValue,i=r.selectedOrders,l=z.a.translate(\"account.perm.cancel\"),c={},u={};if(!a.get(\"orders\"))return null;var p=a.get(\"orders\"),d=p.size;o&&(p=this._getFilteredOrders.call(this)),p.forEach(function(t){var a=L.ChainStore.getObject(t).toJS(),r=L.ChainStore.getAsset(a.sell_price.base.asset_id),o=L.ChainStore.getAsset(a.sell_price.quote.asset_id);if(r&&o){var i,p=(Bn(i={},r.get(\"id\"),{precision:r.get(\"precision\")}),Bn(i,o.get(\"id\"),{precision:o.get(\"precision\")}),i),d=Mn.a.getMarketName(r,o).marketName,m=n.get(d);c[d]||(c[d]=m?{base:{id:r.get(\"id\"),symbol:r.get(\"symbol\"),precision:r.get(\"precision\")},quote:{id:o.get(\"id\"),symbol:o.get(\"symbol\"),precision:o.get(\"precision\")}}:{base:{id:o.get(\"id\"),symbol:o.get(\"symbol\"),precision:o.get(\"precision\")},quote:{id:r.get(\"id\"),symbol:r.get(\"symbol\"),precision:r.get(\"precision\")}});var h=new Tn.f(a,p,c[d].quote.id),f=L.ChainStore.getAsset(c[d].base.id),b=L.ChainStore.getAsset(c[d].quote.id);u[d]||(u[d]=[]),u[d].push(s.a.createElement(jn.b,{ref:c[d].base.symbol,key:a.id,order:h,base:f,quote:b,cancel_text:l,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,a.id),price:h.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,d),onCheckCancel:e.onCheckCancel.bind(e,a.id)}))}});var m=[];for(var h in u)u[h].length&&(m=m.concat(u[h].sort(function(e,t){return e.props.price-t.props.price})));return s.a.createElement(\"div\",{className:\"grid-content no-overflow no-padding\",style:{paddingBottom:15}},s.a.createElement(\"div\",{className:\"header-selector\"},p&&d?s.a.createElement(\"input\",{type:\"text\",placeholder:z.a.translate(\"account.filter_orders\"),style:{display:\"inline-block\",maxWidth:\"50%\",marginRight:\"1em\",marginBottom:\"0\"},onChange:this.setFilterValue.bind(this)}):null,i.length?s.a.createElement(\"button\",{className:\"button\",onClick:this.resetSelected.bind(this)},s.a.createElement(A.a,{content:\"account.reset_orders\"})):null,i.length?s.a.createElement(\"button\",{className:\"button\",onClick:this.cancelSelected.bind(this)},s.a.createElement(A.a,{content:\"account.submit_orders\"})):null),s.a.createElement(In.a,{pageSize:20,className:\"table table-striped dashboard-table table-hover\",header:s.a.createElement(jn.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),rows:m,extraRow:this.props.children}))}}]),t}(),Dn=qn=Object(p.a)(qn,{listenTo:function(){return[i.a]},getProps:function(){return{marketDirections:i.a.getState().marketDirections}}}),Fn={},Vn=6e4;var Ln=a(743),Un=a(1987),zn=a.n(Un),Wn=a(2131),Jn=a.n(Wn),Kn=a(2132),Gn=a.n(Kn),Hn=a(114),Zn=a(174),Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Yn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Xn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function $n(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function es(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Jn()(zn.a.Highcharts),Gn()(zn.a.Highcharts);var ts=function(e){function t(){return Xn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return es(t,s.a.Component),Yn(t,[{key:\"render\",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,r=e.preferredAsset,o=null;if(t&&t.length>0){var i=0;o=t.forEach(function(e){if(e){var t=\"string\"==typeof e?L.ChainStore.getObject(e):e,s=t.get(\"asset_type\"),o=L.ChainStore.getAsset(s);if(o&&r){var l=Number(t.get(\"balance\")),c=Mn.a.convertValue(l,r,o,n,a);if(c){var u=V.a.get_asset_precision(r.get(\"precision\"));i+=c/u}}}}),o=t.map(function(e,t){if(!e)return null;var s=\"string\"==typeof e?L.ChainStore.getObject(e):e,o=s.get(\"asset_type\"),l=L.ChainStore.getAsset(o);if(!l)return null;var c=Number(s.get(\"balance\")),u=Mn.a.convertValue(c,r,l,n,a);if(!u)return null;var p=u/V.a.get_asset_precision(r.get(\"precision\")),d=p/i*100;return d<.5?null:p>=1?{name:l.get(\"symbol\")+\" (\"+(0===i?0:d.toFixed(2))+\"%)\",value:p,color:zn.a.Highcharts.getOptions().colors[t]}:null}).filter(function(e){return!!e})}o&&1===o.length&&0===o[0].value&&(o=null);var l={chart:{backgroundColor:\"rgba(255, 0, 0, 0)\",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return\"<b>\"+this.name+\"</b>: \"+zn.a.Highcharts.numberFormat(this.value,0)+\" \"+r.get(\"symbol\")}}}},series:[{type:\"treemap\",levels:[{level:1,layoutAlgorithm:\"sliceAndDice\",dataLabels:{enabled:!0,align:\"center\",verticalAlign:\"middle\"}}],data:o}],title:{text:null}};return s.a.createElement(\"div\",{className:\"account-treemap\"},s.a.createElement(zn.a,{config:l}))}}]),t}();ts.propTypes={assets:c.a.ChainAssetsList,preferredAsset:c.a.ChainAsset.isRequired},ts.defaultProps={assets:[],preferredAsset:\"1.3.0\"},ts=Object(u.a)(ts);var as=function(e){function t(){return Xn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return es(t,s.a.Component),Yn(t,[{key:\"render\",value:function(){var e=this.props.balanceObjects.filter(function(e){return!!e}).map(function(e){return e.get(\"asset_type\")});return s.a.createElement(ts,Qn({preferredAsset:this.props.settings.get(\"unit\",\"1.3.0\"),assets:e},this.props))}}]),t}();as.propTypes={balanceObjects:c.a.ChainObjectsList,core_asset:c.a.ChainAsset.isRequired},as.defaultProps={balanceObjects:[],core_asset:\"1.3.0\"},as=Object(u.a)(as);var ns=function(e){function t(){return Xn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return es(t,s.a.Component),Yn(t,[{key:\"render\",value:function(){return s.a.createElement(Hn.a,{stores:[i.a,Zn.a],inject:{marketStats:function(){return Zn.a.getState().allMarketStats},settings:function(){return i.a.getState().settings}}},s.a.createElement(as,Qn({},this.props,{ref:this.props.refCallback})))}}]),t}(),ss=a(1998),rs=a.n(ss),os=a(344),is=a(106),ls=a(1986),cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},us=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ps(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ds(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function ms(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hs=function(e){function t(e){return ps(this,t),ds(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return ms(t,ls[\"b\"]),us(t,[{key:\"componentDidMount\",value:function(){za.a.rebuild()}},{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if(\"value\"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||e.base!==this.props.base}},{key:\"getValue\",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:\"render\",value:function(){var e=this.getValue(),t=0===parseFloat(e)?\"\":parseFloat(e)<0?\"change-down\":\"change-up\",a=s.a.createElement(is.b,{style:\"decimal\",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return s.a.createElement(\"span\",{className:\"value \"+t},a,\"%\")}}]),t}();hs.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},hs=Object(P.a)(hs,{propNames:[\"quote\",\"base\"],defaultProps:{quote:\"1.3.0\"}});var fs=function(e){function t(){return ps(this,t),ds(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ms(t,s.a.Component),us(t,[{key:\"render\",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"refCallback\"]);return s.a.createElement(hs,cs({},a,{ref:t}))}}]),t}();fs=Object(p.a)(fs,{listenTo:function(){return[Zn.a]},getProps:function(e){return{marketStats:Zn.a.getState().allMarketStats.get(e.marketId),allMarketStats:Zn.a.getState().allMarketStats}}});var bs=a(559),gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function vs(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ys(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Es(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ws=function(e){function t(){return vs(this,t),ys(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Es(t,bs[\"a\"]),_s(t,[{key:\"shouldComponentUpdate\",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if(\"value\"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!V.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!V.a.are_equal_shallow(a,this.state)}},{key:\"getFinalPrice\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.coreAsset,n=t.fromAsset,s=t.toAsset,r=t.allMarketStats;return Mn.a.getFinalPrice(a,n,s,r,e)}},{key:\"render\",value:function(){var e=this.props,t=e.toAsset,a=e.forceDirection,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"toAsset\",\"forceDirection\"]),r=this.getFinalPrice();return 1===r?s.a.createElement(\"span\",null,\"1.00\"):r?s.a.createElement(le.a,gs({force_direction:!!a&&t.get(\"symbol\"),base_amount:r.base.amount,base_asset:r.base.asset_id,quote_amount:r.quote.amount,quote_asset:r.quote.asset_id},n)):s.a.createElement(\"span\",null,\"--\")}}]),t}();ws.defaultProps={forceDirection:!0},ws=Object(P.a)(ws,{propNames:[\"toAsset\",\"fromAsset\",\"coreAsset\"],defaultProps:{toAsset:\"1.3.0\",coreAsset:\"1.3.0\"}});var ks=function(e){function t(){return vs(this,t),ys(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Es(t,s.a.Component),_s(t,[{key:\"render\",value:function(){var e=this;return s.a.createElement(Hn.a,{stores:[i.a,Zn.a],inject:{toAsset:function(){return e.props.toAsset||i.a.getState().settings.get(\"unit\",\"1.3.0\")},allMarketStats:function(){return Zn.a.getState().allMarketStats}}},s.a.createElement(ws,gs({},this.props,{ref:this.props.refCallback})))}}]),t}(),As=a(126),Cs=a(180),Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ss=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function xs(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var Ns=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=xs(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,s=(n.state||{}).name,r=void 0===s?t:s;n.setState({name:r===t?a:t})},xs(n,a)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n[\"Component\"]),Ss(t,[{key:\"componentDidMount\",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:\"componentWillUnmount\",value:function(){this.interval&&clearInterval(this.interval)}},{key:\"render\",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,r=void 0===n?t:n,o=this.props.title;return s.a.createElement(M.a,Os({name:r,title:o},a))}}]),t}();Ns.propTypes={duration:E.a.number.isRequired,offIcon:E.a.string.isRequired,onIcon:E.a.string.isRequired,title:E.a.string.isRequired};var js=Ns,Ps=a(573),Ts=(a(828),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());var Ms=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ts(t,[{key:\"render\",value:function(){var e=this.props,t=e.base,a=e.quote;if(t.get(\"id\")===a.get(\"id\"))return null;var n=a.get(\"symbol\")+\"_\"+t.get(\"symbol\"),r=s.a.createElement(\"span\",null,s.a.createElement(ma.a,{name:a.get(\"symbol\")}),\" /\",\" \",s.a.createElement(ma.a,{name:t.get(\"symbol\")}));return s.a.createElement(w.a,{to:\"/market/\"+n},r)}}]),t}(),Is=Ms=Object(P.a)(Ms,{propNames:[\"quote\",\"base\"],defaultProps:{base:\"1.3.0\"}}),Rs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function qs(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var Ds=function(e){return function(e){var t=Object(P.a)(e,{propNames:[\"shortBackingAsset\"]});return Object(P.a)(function(e){return s.a.createElement(t,Bs({},e,{shortBackingAsset:e.asset.getIn([\"bitasset\",\"options\",\"short_backing_asset\"])}))})}(function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return t=n=qs(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={worthLessSettlement:void 0},qs(n,t)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n.PureComponent),Rs(a,[{key:\"updateFlag\",value:function(){var e=this,t=this.props,a=t.asset,n=t.shortBackingAsset,s=a.get(\"id\"),r=n.get(\"id\"),o=Ge.Apis.instance().db_api().exec(\"get_order_book\",[r,s,1]).then(function(e){return 0===e.bids.length?0:Number(e.bids[0].price)}),i=a.getIn([\"bitasset\",\"current_feed\",\"settlement_price\"]),l=new Tn.h({base:new Tn.a({asset_id:r,amount:i.getIn([\"quote\",\"amount\"]),preicision:n.get(\"precision\")}),quote:new Tn.a({asset_id:s,amount:i.getIn([\"base\",\"amount\"]),precision:a.get(\"precision\")})}).toReal();o.then(function(t){return e.setState({worthLessSettlement:t>l})})}},{key:\"componentWillMount\",value:function(){this.updateFlag()}},{key:\"componentDidUpdate\",value:function(){this.updateFlag()}},{key:\"render\",value:function(){var t=this.props,a=this.state.worthLessSettlement;return s.a.createElement(e,Bs({},t,{worthLessSettlement:a}))}}]),a}())},Fs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Vs(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ls(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Us(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var zs=Ds(function(e){var t=e.worthLessSettlement,a=e.asset,n=e.shortBackingAsset;switch(t){case!0:return s.a.createElement(Aa.a,{string:\"exchange.worth_less_settlement_warning\",keys:[{value:s.a.createElement(Is,{base:a.get(\"id\"),quote:n.get(\"id\")}),arg:\"market_link\"}]});case void 0:return s.a.createElement(A.a,{content:\"exchange.checking_for_worth_less_settlement\"});default:return null}}),Ws=function(e){function t(){Vs(this,t);var e=Ls(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e.onSubmit=e.onSubmit.bind(e),e}return Us(t,s.a.Component),Fs(t,[{key:\"onAmountChanged\",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:\"onSubmit\",value:function(e){e.preventDefault(),this.props.hideModal();var t=V.a.get_asset_precision(this.props.asset.get(\"precision\")),a=this.state.amount.replace(/,/g,\"\");a*=t;var n=Jt.a.new_transaction();return n.add_type_operation(\"asset_settle\",{fee:{amount:0,asset_id:0},account:this.props.account.get(\"id\"),amount:{amount:a,asset_id:this.props.asset.get(\"id\")}}),st.a.process_transaction(n,null,!0).then(function(e){return!0}).catch(function(e){return console.error(\"asset settle error: \",e),!1})}},{key:\"render\",value:function(){var e=this.props,t=e.asset,a=e.account,n=this.state.amount;if(!t)return null;var r=t.get(\"id\"),o=a.get(\"balances\"),i=null,l=0;o&&o.forEach(function(e){var t=L.ChainStore.getObject(e);if(!t.get(\"balance\"))return null;t.get(\"asset_type\")===r&&(i=e,l=t.get(\"balance\"))});var c=V.a.get_asset_precision(t.get(\"precision\")),u=n?n.replace(/,/g,\"\"):0,p=(parseFloat(u)>0&&(parseFloat(u),parseFloat(l)),s.a.createElement(\"span\",null,s.a.createElement(A.a,{content:\"exchange.balance\"}),\": \",i?s.a.createElement(os.a,{balance:i}):\"0 \"+t.get(\"symbol\"))),d=[s.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmit},z.a.translate(\"modal.settle.submit\")),s.a.createElement(Y.Button,{key:\"close\",onClick:this.props.hideModal},z.a.translate(\"modal.close\"))];return s.a.createElement(Y.Modal,{title:z.a.translate(\"modal.settle.title\",{asset:t.get(\"symbol\")}),visible:this.props.visible,id:this.props.modalId,footer:d,onCancel:this.props.hideModal,overlay:!0,ref:\"settlement_modal\"},s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(zs,{asset:r}),s.a.createElement(\"div\",{className:\"grid-container \"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(G.a,{label:\"modal.settle.amount\",amount:n,onChange:this.onAmountChanged.bind(this),display_balance:p,asset:r,assets:[r],tabIndex:1}))))))}}]),t}();Ws.propTypes={asset:c.a.ChainAsset.isRequired,account:c.a.ChainAccount.isRequired},Ws=Object(u.a)(Ws);var Js=function(e){function t(){return Vs(this,t),Ls(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Us(t,s.a.Component),Fs(t,[{key:\"render\",value:function(){return s.a.createElement(Ws,this.props)}}]),t}(),Ks=a(577),Gs=(a(2e3),a(2001)),Hs=a(574),Zs=a(270),Qs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ys(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Xs(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function $s(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var er=function(e){function t(){return Ys(this,t),Xs(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return $s(t,s.a.Component),Qs(t,[{key:\"shouldComponentUpdate\",value:function(e){return!V.a.are_equal_shallow(e.assets,this.props.assets)||e.value!==this.props.value||e.scroll_length!==this.props.scroll_length}},{key:\"render\",value:function(){return this.props.assets.length?s.a.createElement(Y.Select,{showSearch:!0,style:this.props.style||{},value:this.props.value,onChange:this.props.onChange},this.props.assets.filter(function(e){return e&&e.get}).map(function(e){return s.a.createElement(Y.Select.Option,{key:e.get(\"symbol\")},e.get(\"symbol\"))})):null}}]),t}();er.propTypes={value:E.a.string,onChange:E.a.func,scroll_length:E.a.number},er=Object(P.a)(er,{asList:!0});var tr=function(e){function t(){return Ys(this,t),Xs(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return $s(t,Zs[\"a\"]),Qs(t,[{key:\"componentDidMount\",value:function(){this.onAssetChange(this.props.asset)}},{key:\"formatAmount\",value:function(e){return e||(e=\"\"),\"number\"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,\"\")}},{key:\"_onChange\",value:function(e){this.props.onChange&&this.props.onChange({amount:this.getNumericEventValue(e),asset:this.props.asset})}},{key:\"onAssetChange\",value:function(e){this.props.onChange&&this.props.onChange({amount:this.props.amount,asset:e})}},{key:\"render\",value:function(){var e=this.props.error?z.a.translate(this.props.error):this.formatAmount(this.props.amount),t=s.a.createElement(\"div\",{className:\"amount-selector-field--label\"},z.a.translate(this.props.label).toUpperCase(),\":\",s.a.createElement(\"div\",{className:\"amount-selector-field--balance\"},this.props.display_balance)),a=null;return this.props.isPrice&&(a=s.a.createElement(\"div\",null,this.props.asset.get(\"symbol\"),\"/\",this.props.base)),s.a.createElement(Y.Form.Item,{label:t,style:this.props.style,className:\"amount-selector-field\"},s.a.createElement(Y.Input.Group,{compact:!0},s.a.createElement(Y.Input,{style:{width:this.props.isPrice?\"100%\":\"calc(100% - 130px)\"},disabled:this.props.disabled,value:e||\"\",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,onPaste:this.props.onPaste||this.onPaste.bind(this),onKeyPress:this.onKeyPress.bind(this),addonAfter:a}),this.props.isPrice?null:s.a.createElement(er,{style:{width:\"130px\"},value:this.props.asset.get(\"symbol\"),assets:h.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)})))}}]),t}();tr.propTypes={label:E.a.string,assets:E.a.array,amount:E.a.any,placeholder:E.a.string,onChange:E.a.func,tabIndex:E.a.number,error:E.a.string,scroll_length:E.a.number},tr.defaultProps={disabled:!1,tabIndex:0};var ar=tr=Object(P.a)(tr),nr=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var sr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.getInitialState(e),a.onSubmit=a.onSubmit.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),nr(t,[{key:\"componentWillReceiveProps\",value:function(e){e.asset&&this.props.asset&&e.asset.get(\"id\")!==this.props.asset.get(\"id\")&&this.setState(this.getInitialState(e))}},{key:\"getInitialState\",value:function(e){return{amount:0,amountAsset:new Tn.a({amount:0,asset_id:e.asset.get(\"id\"),precision:e.asset.get(\"precision\")})}}},{key:\"onAmountChanged\",value:function(e){var t=e.amount,a=e.asset;this.state.amountAsset.setAmount({real:t}),this.setState({amount:t,asset:a})}},{key:\"onSubmit\",value:function(){var e=this;C.a.reserveAsset(this.state.amountAsset.getAmount(),this.props.asset.get(\"id\"),this.props.account.get(\"id\")).then(function(){e.state.amountAsset.setAmount({sats:0}),e.setState({amount:0})}),this.props.hideModal()}},{key:\"render\",value:function(){var e=this,t=this.props.asset.get(\"id\"),a=this.props.account&&this.props.account.get(\"balances\",[]).size&&this.props.account.getIn([\"balances\",t])?L.ChainStore.getObject(this.props.account.getIn([\"balances\",t])):null;return a?s.a.createElement(Y.Modal,{visible:this.props.visible,onCancel:this.props.hideModal,title:z.a.translate(\"modal.reserve.title\"),footer:[s.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.onSubmit},z.a.translate(\"modal.reserve.submit\")),s.a.createElement(Y.Button,{onClick:this.props.hideModal,key:\"cancel\"},z.a.translate(\"cancel\"))]},s.a.createElement(Y.Form,{layout:\"vertical\"},s.a.createElement(ar,{label:\"modal.reserve.amount\",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:s.a.createElement(\"div\",{onClick:function(){e.state.amountAsset.setAmount({sats:a.get(\"balance\")}),e.setState({amount:e.state.amountAsset.getAmount({real:!0})})}},s.a.createElement(os.a,{balance:this.props.account.getIn([\"balances\",t])})),tabIndex:1}))):null}}]),t}(),rr=sr=Object(P.a)(sr,{propNames:[\"asset\"]}),or=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ir(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var lr=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var a in e.sortFunctions={qty:function(e,t,a){return Number(this.qtyRefs[e.key])<Number(this.qtyRefs[t.key])?this.props.sortDirection||a?-1:1:Number(this.qtyRefs[e.key])>Number(this.qtyRefs[t.key])?this.props.sortDirection||a?1:-1:void 0},alphabetic:function(e,t,a){return e.key>t.key?this.props.sortDirection||a?1:-1:e.key<t.key?this.props.sortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];return a&&n?this.props.sortDirection?a-n:n-a:null===a&&null!==n?1:null!==a&&null===n?-1:this.sortFunctions.alphabetic(e,t,!0)},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];return a&&n?this.props.sortDirection?a-n:n-a:!a&&n?1:a&&!n?-1:this.sortFunctions.alphabetic(e,t,!0)},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var s=\"NaN\"!=parseFloat(a)?parseFloat(a):a,r=\"NaN\"!=parseFloat(n)?parseFloat(n):n;return void 0===this.props.sortDirection||this.props.sortDirection?s-r:r-s}}},e._renderBuy=function(t,a,n,r,o){return\"BTS\"===t&&o<=1e5?s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:e._showDepositWithdraw.bind(e,\"bridge_modal\",n,!1)},s.a.createElement(js,{onIcon:\"dollar\",offIcon:\"dollar-green\",title:\"icons.dollar.buy\",duration:1e3,className:\"icon-14px\"}))):a&&e.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:e._showDepositWithdraw.bind(e,\"bridge_modal\",n,!1)},s.a.createElement(M.a,{name:\"dollar\",title:\"icons.dollar.buy\",className:\"icon-14px\"}))):r},e.state={isBridgeModalVisible:!1,isSettleModalVisible:!1,isBorrowModalVisible:!1,isDepositModalVisible:!1,isWithdrawModalVisible:!1,isBurnModalVisible:!1,borrow:null,settleAsset:\"1.3.0\",depositAsset:null,withdrawAsset:null,bridgeAsset:null,allRefsAssigned:!1},e.qtyRefs={},e.priceRefs={},e.valueRefs={},e.changeRefs={},e.sortFunctions)e.sortFunctions[a]=e.sortFunctions[a].bind(e);return e._checkRefAssignments=e._checkRefAssignments.bind(e),e.showSettleModal=e.showSettleModal.bind(e),e.hideSettleModal=e.hideSettleModal.bind(e),e.showDepositModal=e.showDepositModal.bind(e),e.hideDepositModal=e.hideDepositModal.bind(e),e.showWithdrawModal=e.showWithdrawModal.bind(e),e.hideWithdrawModal=e.hideWithdrawModal.bind(e),e.showBorrowModal=e.showBorrowModal.bind(e),e.hideBorrowModal=e.hideBorrowModal.bind(e),e.showBurnModal=e.showBurnModal.bind(e),e.hideBurnModal=e.hideBurnModal.bind(e),e.showBridgeModal=e.showBridgeModal.bind(e),e.hideBridgeModal=e.hideBridgeModal.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),or(t,[{key:\"componentWillMount\",value:function(){this.refCheckInterval=setInterval(this._checkRefAssignments)}},{key:\"componentWillUnmount\",value:function(){clearInterval(this.refCheckInterval)}},{key:\"_checkRefAssignments\",value:function(){var e=this;if(!this.state.allRefsAssigned){var t=[\"qtyRefs\",\"priceRefs\",\"valueRefs\",\"changeRefs\"].reduce(function(t,a){return void 0===t?!!Object.keys(e[a]).length:!!Object.keys(e[a]).length&&t},void 0);t&&(clearInterval(this.refCheckInterval),this.setState({allRefsAssigned:t}))}}},{key:\"shouldComponentUpdate\",value:function(e,t){var a=this;return!V.a.are_equal_shallow(t,this.state)||!V.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!V.a.are_equal_shallow(e.balances,this.props.balances)||!V.a.are_equal_shallow(e.balanceList,this.props.balanceList)||!V.a.are_equal_shallow(e.optionalAssets,this.props.optionalAssets)||e.account!==this.props.account||e.visible!==this.props.visible||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||e.sortDirection!==this.props.sortDirection||e.sortKey!==this.props.sortKey||e.allMarketStats.reduce(function(e,t,n){return V.a.check_market_stats(t,a.props.allMarketStats.get(n))||e},!1)}},{key:\"showBridgeModal\",value:function(){this.setState({isBridgeModalVisible:!0})}},{key:\"hideBridgeModal\",value:function(){this.setState({isBridgeModalVisible:!1})}},{key:\"showWithdrawModal\",value:function(){this.setState({isWithdrawModalVisible:!0})}},{key:\"hideWithdrawModal\",value:function(){this.setState({isWithdrawModalVisible:!1})}},{key:\"showBurnModal\",value:function(){this.setState({isBurnModalVisible:!0})}},{key:\"hideBurnModal\",value:function(){this.setState({isBurnModalVisible:!1})}},{key:\"showSettleModal\",value:function(){this.setState({isSettleModalVisible:!0})}},{key:\"hideSettleModal\",value:function(){this.setState({isSettleModalVisible:!1})}},{key:\"showDepositModal\",value:function(){this.setState({isDepositModalVisible:!0})}},{key:\"hideDepositModal\",value:function(){this.setState({isDepositModalVisible:!1})}},{key:\"showBorrowModal\",value:function(e,t,a){this.setState({isBorrowModalVisible:!0,borrow:{quoteAsset:e,backingAsset:t,account:a}})}},{key:\"hideBorrowModal\",value:function(){this.setState({borrow:null,isBorrowModalVisible:!1})}},{key:\"triggerSend\",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:\"_onSettleAsset\",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.showSettleModal()}},{key:\"_hideAsset\",value:function(e,t){de.a.hideAsset(e,t)}},{key:\"_burnAsset\",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),this.showBurnModal()}},{key:\"_showDepositModal\",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.showDepositModal()})}},{key:\"_showDepositWithdraw\",value:function(e,t,a,n){var s,r=this;n.preventDefault(),this.setState((ir(s={},\"bridge_modal\"===e?\"bridgeAsset\":\"deposit_modal\"===e?\"depositAsset\":\"withdrawAsset\",t),ir(s,\"fiatModal\",a),s),function(){return\"bridge_modal\"===e?(r.showBridgeModal(),!0):\"deposit_modal\"===e?(r.showDepositModal(),!0):void r.showWithdrawModal()})}},{key:\"_getSeparator\",value:function(e){return e?s.a.createElement(\"span\",null,\" | \"):null}},{key:\"_renderBalances\",value:function(e,t,a){var n=this,r=this.props,o=r.coreSymbol,i=r.preferredUnit,l=r.settings,c=r.hiddenAssets,u=r.orders,p=l.get(\"showAssetPercent\",!1),d=function(e,t){var a=e&&e.has(\"bitasset_data_id\"),r=\"cp_modal_\"+e.get(\"id\");return{isBitAsset:a,borrowModal:a?s.a.createElement(ka.a,{ref:r,modalId:\"borrow_modal_\"+e.get(\"id\"),quote_asset:e.get(\"id\"),backing_asset:e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),account:t}):null,borrowLink:a?s.a.createElement(\"a\",{onClick:function(){za.a.hide(),n.showBorrowModal(e.get(\"id\"),e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),t)}},s.a.createElement(M.a,{name:\"dollar\",title:\"icons.dollar.borrow\",className:\"icon-14px\"})):null}},m=[];return e.forEach(function(e){var t=L.ChainStore.getObject(e);if(t){var a=t.get(\"asset_type\"),r=L.ChainStore.getObject(a);if(r){var l,h,f,b=\"\",g=r.get(\"symbol\"),_=\"1.3.0\"!==r.get(\"id\"),v=i!==o,y=j.a.parseDescription(r.getIn([\"options\",\"description\"])).market;-1===(b=r.get(\"symbol\")).indexOf(\"OPEN.\")||y||(y=\"USD\");var E=y||i;_&&E===b&&(E=o),l=_?s.a.createElement(w.a,{to:\"/market/\"+r.get(\"symbol\")+\"_\"+E},s.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):v?s.a.createElement(w.a,{to:\"/market/\"+r.get(\"symbol\")+\"_\"+i},s.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):\"-\",f=s.a.createElement(\"a\",{onClick:n.triggerSend.bind(n,r.get(\"id\"))},s.a.createElement(M.a,{name:\"transfer\",title:\"icons.transfer\",className:\"icon-14px\"}));var k=d(r,n.props.account),A=k.isBitAsset,C=(k.borrowModal,k.borrowLink);h=s.a.createElement(\"a\",{onClick:n._onSettleAsset.bind(n,r.get(\"id\"))},s.a.createElement(M.a,{name:\"settle\",title:\"icons.settle\",className:\"icon-14px\"}));var O=!c.includes(a),S=!!t.get(\"balance\"),x=!!u[a],N=Object(As.b)(r.get(\"symbol\"),n.props.backedCoins),P=N&&N.depositAllowed||\"BTS\"==r.get(\"symbol\"),T=N&&N.withdrawalAllowed&&S&&0!=t.get(\"balance\"),I=!!n.props.bridgeCoins.get(b),R=t.get(\"balance\");n.qtyRefs[r.get(\"symbol\")]=V.a.get_asset_amount(R,r);var B=r&&r.getIn([\"bitasset\",\"options\"])?r.getIn([\"bitasset\",\"options\"]).toJS():null,q=B&&B.short_backing_asset?L.ChainStore.getAsset(B.short_backing_asset):null,D=V.a.replaceName(r).isBitAsset,F=V.a.replaceName(q).isBitAsset,U=L.ChainStore.getAsset(i);n.valueRefs[r.get(\"symbol\")]=S&&U?Mn.a.convertValue(R,U,r,n.props.allMarketStats,n.props.coreAsset,!0):null,n.priceRefs[r.get(\"symbol\")]=U?Mn.a.getFinalPrice(n.props.coreAsset,r,U,n.props.allMarketStats,!0):null;var W=r.get(\"symbol\")+\"_\"+i,J=n.props.allMarketStats.get(W);n.changeRefs[r.get(\"symbol\")]=J&&J.change?J.change:0,m.push(s.a.createElement(\"tr\",{key:r.get(\"symbol\"),style:{maxWidth:\"100rem\"}},s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(ue.a,{asset:r.get(\"id\")})),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},S||x?s.a.createElement(os.a,{balance:e,hide_asset:!0}):null),s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"column-hide-small\"},s.a.createElement(ks,{fromAsset:r.get(\"id\"),pulsate:{reverse:!0,fill:\"forwards\"},hide_symbols:!0})),s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"column-hide-small\"},s.a.createElement(fs,{base:r.get(\"id\"),quote:i,marketId:W,hide_symbols:!0})),s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"column-hide-small\"},S||x?s.a.createElement($t.a,{balance:e,toAsset:i,hide_asset:!0}):null),p?s.a.createElement(\"td\",{style:{textAlign:\"right\"}},S?s.a.createElement(os.a,{balance:e,asPercentage:!0}):null):null,s.a.createElement(\"td\",null,f),s.a.createElement(\"td\",null,n._renderBuy(r.get(\"symbol\"),I,g,\"-\",t.get(\"balance\"))),s.a.createElement(\"td\",null,P&&n.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(M.a,{style:{cursor:\"pointer\"},name:\"deposit\",title:\"icons.deposit.deposit\",className:\"icon-14x\",onClick:n._showDepositModal.bind(n,g)})):\"-\"),s.a.createElement(\"td\",null,T&&n.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(\"a\",{className:T?\"\":\"disabled\",onClick:T?n._showDepositWithdraw.bind(n,\"withdraw_modal_new\",g,!1):function(){}},s.a.createElement(M.a,{name:\"withdraw\",title:\"icons.withdraw\",className:\"icon-14px\"}))):\"-\"),s.a.createElement(\"td\",null,l),s.a.createElement(\"td\",null,A?s.a.createElement(\"div\",{className:\"inline-block\",\"data-place\":\"bottom\",\"data-tip\":z.a.translate(\"tooltip.borrow\",{asset:b})},C):\"-\"),s.a.createElement(\"td\",null,A&&q?s.a.createElement(\"div\",{className:\"inline-block\",\"data-place\":\"bottom\",\"data-tip\":z.a.translate(\"tooltip.settle\",{asset:D?\"bit\"+b:b,backingAsset:F?\"bit\"+q.get(\"symbol\"):q.get(\"symbol\"),settleDelay:B.force_settlement_delay_sec/3600})},h):\"-\"),s.a.createElement(\"td\",{style:{textAlign:\"center\"},className:\"column-hide-small\"},A?null:s.a.createElement(\"a\",{style:{marginRight:0},onClick:n._burnAsset.bind(n,r.get(\"id\"))},s.a.createElement(M.a,{name:\"fire\",className:\"icon-14px\"}))),s.a.createElement(\"td\",{style:{textAlign:\"center\"},className:\"column-hide-small\",\"data-place\":\"bottom\",\"data-tip\":z.a.translate(\"tooltip.\"+(O?\"hide_asset\":\"show_asset\"))},s.a.createElement(\"a\",{style:{marginRight:0},className:O?\"order-cancel\":\"action-plus\",onClick:n._hideAsset.bind(n,a,O)},s.a.createElement(M.a,{name:O?\"cross-circle\":\"plus-circle\",title:O?\"icons.cross_circle.hide_asset\":\"icons.plus_circle.show_asset\",className:\"icon-14px\"})))))}}}),t&&t.filter(function(e){var t=!1;n.props.backedCoins.get(\"OPEN\",[]).forEach(function(a){a&&a.symbol===e&&(t=!0)}),n.props.bridgeCoins.get(e)&&(t=!0);var a=!0;return m.forEach(function(t){t.key===e&&(a=!1)}),a&&t}).forEach(function(e){var t=L.ChainStore.getAsset(e);if(t&&n.props.isMyAccount){var r=!c.includes(t.get(\"id\")),i=t.get(\"symbol\").split(\".\"),l=!!n.props.backedCoins.get(\"OPEN\",[]).find(function(e){return e.backingCoinType===i[1]})||!!n.props.backedCoins.get(\"RUDEX\",[]).find(function(e){return e.backingCoin===i[1]})||\"BTS\"==t.get(\"symbol\"),u=!!n.props.bridgeCoins.get(t.get(\"symbol\")),p=\"1.3.0\"!==t.get(\"id\"),h=j.a.parseDescription(t.getIn([\"options\",\"description\"])).market;-1===t.get(\"symbol\").indexOf(\"OPEN.\")||h||(h=\"USD\");var f=h||o,b=p?s.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+f},s.a.createElement(M.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):\"-\",g=d(t,n.props.account),_=g.isBitAsset,v=g.borrowLink;(r&&a||!r&&!a)&&m.push(s.a.createElement(\"tr\",{key:t.get(\"symbol\"),style:{maxWidth:\"100rem\"}},s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(ue.a,{asset:t.get(\"id\")})),s.a.createElement(\"td\",null,\"-\"),s.a.createElement(\"td\",{className:\"column-hide-small\"},\"-\"),s.a.createElement(\"td\",{className:\"column-hide-small\"},\"-\"),s.a.createElement(\"td\",{className:\"column-hide-small\"},\"-\"),s.a.createElement(\"td\",null,\"-\"),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},u&&n.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:n._showDepositWithdraw.bind(n,\"bridge_modal\",e,!1)},s.a.createElement(M.a,{name:\"dollar\",title:\"icons.dollar.buy\",className:\"icon-14px\"}))):\"-\"),s.a.createElement(\"td\",null,l&&n.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(M.a,{style:{cursor:\"pointer\"},name:\"deposit\",title:\"icons.deposit.deposit\",className:\"icon-14x\",onClick:n._showDepositModal.bind(n,t.get(\"symbol\"))})):\"-\"),s.a.createElement(\"td\",null,\"-\"),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},b),s.a.createElement(\"td\",null,_?s.a.createElement(\"div\",{className:\"inline-block\",\"data-place\":\"bottom\",\"data-tip\":z.a.translate(\"tooltip.borrow\",{asset:t.get(\"symbol\")})},v):\"-\"),s.a.createElement(\"td\",null,\"-\"),s.a.createElement(\"td\",{style:{textAlign:\"center\"},className:\"column-hide-small\",\"data-place\":\"bottom\",\"data-tip\":z.a.translate(\"tooltip.\"+(r?\"hide_asset\":\"show_asset\"))},s.a.createElement(\"a\",{style:{marginRight:0},className:r?\"order-cancel\":\"action-plus\",onClick:n._hideAsset.bind(n,t.get(\"id\"),r)},s.a.createElement(M.a,{name:r?\"cross-circle\":\"plus-circle\",title:r?\"icons.cross_circle.hide_asset\":\"icons.plus_circle.show_asset\",className:\"icon-14px\"})))))}}),m.sort(this.sortFunctions[this.props.sortKey]),m}},{key:\"_renderSendModal\",value:function(){var e=this;return s.a.createElement(Ps.a,{id:\"send_modal_portfolio\",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get(\"name\"),asset_id:this.state.send_asset||\"1.3.0\"})}},{key:\"_renderBorrowModal\",value:function(){return this.state.borrow&&this.state.borrow.quoteAsset&&this.state.borrow.backingAsset&&this.state.borrow.account?(console.log(\"render borrow modal\"),s.a.createElement(ka.a,{visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal,hideModal:this.hideBorrowModal,account:this.state.borrow&&this.state.borrow.account,quote_asset:this.state.borrow&&this.state.borrow.quoteAsset,backing_asset:this.state.borrow&&this.state.borrow.backingAsset})):null}},{key:\"_renderSettleModal\",value:function(){return s.a.createElement(Js,{visible:this.state.isSettleModalVisible,hideModal:this.hideSettleModal,showModal:this.showSettleModal,asset:this.state.settleAsset,account:this.props.account.get(\"name\")})}},{key:\"render\",value:function(){var e=this,t=(this.props.backedCoins.get(\"OPEN\",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset)||null);return s.a.createElement(\"div\",null,s.a.createElement(In.a,{style:{padding:0},className:\"table dashboard-table table-hover\",rows:this._renderBalances(this.props.balanceList,this.props.optionalAssets,this.props.visible),header:this.props.header,pageSize:20,label:\"utility.total_x_assets\",extraRow:this.props.extraRow,leftPadding:\"1.5rem\"},this._renderSendModal(),this._renderSettleModal(),this._renderBorrowModal(),s.a.createElement(Hs.a,{hideModal:this.hideWithdrawModal,visible:this.state.isWithdrawModalVisible,backedCoins:this.props.backedCoins,initialSymbol:this.state.withdrawAsset}),s.a.createElement(Ks.a,{visible:this.state.isDepositModalVisible,showModal:this.showDepositModal,hideModal:this.hideDepositModal,asset:this.state.depositAsset,account:this.props.account.get(\"name\"),backedCoins:this.props.backedCoins}),s.a.createElement(Gs.a,{visible:this.state.isBridgeModalVisible,showModal:this.showBridgeModal,hideModal:this.hideBridgeModal,action:\"deposit\",account:this.props.account.get(\"name\"),sender:this.props.account.get(\"id\"),asset:this.state.bridgeAsset,balances:this.props.balances,bridges:t,isDown:this.props.gatewayDown.get(\"TRADE\")}),s.a.createElement(rr,{visible:this.state.isBurnModalVisible,hideModal:this.hideBurnModal,asset:this.state.reserve,account:this.props.account,onClose:function(){ve.a.publish(\"reserve_asset\",\"close\")}})))}}]),t}();lr=Object(p.a)(lr,{listenTo:function(){return[i.a,Cs.a,Zn.a]},getProps:function(){return{settings:i.a.getState().settings,viewSettings:i.a.getState().viewSettings,backedCoins:Cs.a.getState().backedCoins,bridgeCoins:Cs.a.getState().bridgeCoins,gatewayDown:Cs.a.getState().down,allMarketStats:Zn.a.getState().allMarketStats}}});var cr=lr=rs()(lr,50,{leading:!1}),ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pr=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function dr(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function mr(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function hr(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fr=function(e){function t(e){dr(this,t);var a=mr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={sortKey:e.viewSettings.get(\"portfolioSort\",\"totalValue\"),sortDirection:e.viewSettings.get(\"portfolioSortDirection\",!0),shownAssets:e.viewSettings.get(\"shownAssets\",\"active\"),alwaysShowAssets:[\"BTS\"]},a._handleFilterInput=a._handleFilterInput.bind(a),a}return hr(t,s.a.Component),pr(t,[{key:\"_handleFilterInput\",value:function(e){e.preventDefault(),this.setState({filterValue:e.target.value})}},{key:\"componentWillMount\",value:function(){this._checkMarginStatus()}},{key:\"_checkMarginStatus\",value:function(){var e=this;(function(e){if(!e||e&&!e.get(\"call_orders\",[]).size)return Promise.resolve(null);var t=e.get(\"name\")+JSON.stringify(e.get(\"call_orders\"));return Fn[t]?Fn[t].result?Promise.resolve(Fn[t].result):new Promise(function(e,a){Fn[t].queue.push({res:e,rej:a})}):new Promise(function(a,n){Fn[t]={queue:[{res:a,rej:n}],result:null},Object(L.FetchChain)(\"getObject\",e.get(\"call_orders\").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn([\"call_price\",\"base\",\"asset_id\"]),n=e.getIn([\"call_price\",\"quote\",\"asset_id\"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(L.FetchChain)(\"getAsset\",a,6e3).then(function(a){var n={};a.forEach(function(e){n[e.get(\"id\")]=e.toJS()});var s={};e.forEach(function(e){var t=n[e.getIn([\"call_price\",\"quote\",\"asset_id\"])],a=n[e.getIn([\"call_price\",\"base\",\"asset_id\"])],r=t.bitasset.current_feed.settlement_price;if(r.base.asset_id===r.quote.asset_id)s[t.id]={ratio:null};else{var o=new Tn.a({amount:e.get(\"collateral\"),asset_id:a.id,precision:a.precision}),i=new Tn.a({amount:e.get(\"debt\"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new Tn.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:o.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass=\"danger\":u.ratio<l+.5?u.statusClass=\"warning\":u.statusClass=null,s[t.id]=u}}),Fn[t].queue.forEach(function(e){e.res(s)}),Fn[t]={result:s},setTimeout(function(){delete Fn[t]},Vn)})}).catch(function(){Fn[t].queue.forEach(function(e){e.rej()})})})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this._checkMarginStatus(e)}},{key:\"shouldComponentUpdate\",value:function(e,t){return!V.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!V.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue}},{key:\"_changeShownAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"active\";this.setState({shownAssets:e}),de.a.changeViewSetting({shownAssets:e})}},{key:\"_toggleSortOrder\",value:function(e){this.state.sortKey===e?(de.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(de.a.changeViewSetting({portfolioSort:e}),this.setState({sortDirection:!1,sortKey:e}))}},{key:\"getHeader\",value:function(){var e=this.props.settings,t=this.state.shownAssets,a=e.get(\"unit\")||this.props.core_asset.get(\"symbol\"),n=e.get(\"showAssetPercent\",!1);return s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{textAlign:\"left\"},className:D()(\"clickable is-sortable\",{\"is-active\":\"alphabetic\"===this.state.sortKey}),onClick:this._toggleSortOrder.bind(this,\"alphabetic\")},s.a.createElement(A.a,{component:\"span\",content:\"account.asset\"})),s.a.createElement(\"th\",{onClick:this._toggleSortOrder.bind(this,\"qty\"),className:D()(\"clickable is-sortable\",{\"is-active\":\"qty\"===this.state.sortKey}),style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.qty\"})),s.a.createElement(\"th\",{onClick:this._toggleSortOrder.bind(this,\"priceValue\"),className:D()(\"column-hide-small clickable is-sortable\",{\"is-active\":\"priceValue\"===this.state.sortKey}),style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"exchange.price\"}),\" (\",s.a.createElement(ma.a,{name:a,noTip:!0}),\")\"),s.a.createElement(\"th\",{onClick:this._toggleSortOrder.bind(this,\"changeValue\"),className:D()(\"column-hide-small clickable is-sortable\",{\"is-active\":\"changeValue\"===this.state.sortKey}),style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.hour_24_short\"})),s.a.createElement(\"th\",{onClick:this._toggleSortOrder.bind(this,\"totalValue\"),style:{textAlign:\"right\"},className:D()(\"column-hide-small clickable is-sortable\",{\"is-active\":\"totalValue\"===this.state.sortKey})},s.a.createElement(Aa.a,{noLink:!0,string:\"account.eq_value_header\",keys:[{type:\"asset\",value:a,arg:\"asset\"}],noTip:!0})),n?s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{component:\"span\",content:\"account.percent\"})):null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"header.payments\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"exchange.buy\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"modal.deposit.submit\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"modal.withdraw.submit\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.trade\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"exchange.borrow_short\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.settle\"})),s.a.createElement(\"th\",{className:\"column-hide-small\"},s.a.createElement(A.a,{content:\"modal.reserve.submit\"})),s.a.createElement(\"th\",{className:\"column-hide-small\"},s.a.createElement(A.a,{content:\"active\"==t?\"exchange.hide\":\"account.perm.show\"})))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,r=t.settings,o=t.orders,i=this.state.shownAssets;if(!a)return null;var l=r.get(\"unit\")||this.props.core_asset.get(\"symbol\"),c=[],u={},p={};a.toJS&&a.has(\"call_orders\")&&(c=a.get(\"call_orders\").toJS());var d,m,f=a.get(\"balances\"),b=h.a.List(),g=h.a.List();c.forEach(function(e){var t=L.ChainStore.getObject(e);if(t){var a=t.getIn([\"call_price\",\"base\",\"asset_id\"]);u[a]?u[a]+=parseInt(t.get(\"collateral\"),10):u[a]=parseInt(t.get(\"collateral\"),10);var n=t.getIn([\"call_price\",\"quote\",\"asset_id\"]);p[n]?p[n]+=parseInt(t.get(\"debt\"),10):p[n]=parseInt(t.get(\"debt\"),10)}}),f&&(f=f.filter(function(e,t){var a=L.ChainStore.getObject(e);return!(a&&!a.get(\"balance\")&&!o[t])})).forEach(function(t,a){var s=L.ChainStore.getAsset(a),r=\"\",o=\"\";e.state.filterValue&&(o=e.state.filterValue?String(e.state.filterValue).toLowerCase():\"\",r=s.get(\"symbol\").toLowerCase(),V.a.replaceName(s).isBitAsset&&(r=\"bit\"+r));n.includes(a)&&r.includes(o)?g=g.push(t):r.includes(o)&&(b=b.push(t))});var _=s.a.createElement(wa.a,{noTip:!0,balances:g,hide_asset:!0}),v=s.a.createElement(wa.a,{noTip:!0,balances:b,hide_asset:!0}),y=s.a.createElement(wa.a,{noTip:!0,balances:h.a.List(),openOrders:o,hide_asset:!0}),E=s.a.createElement(wa.a,{noTip:!0,balances:h.a.List(),debt:p,collateral:u,hide_asset:!0}),w=s.a.createElement(wa.a,{noTip:!0,balances:h.a.List(),debt:p,hide_asset:!0}),k=s.a.createElement(wa.a,{noTip:!0,balances:h.a.List(),collateral:u,hide_asset:!0}),C=s.a.createElement(Aa.a,{noLink:!0,string:\"account.total\",keys:[{type:\"asset\",value:l,arg:\"asset\"}]}),O=s.a.createElement(\"tr\",{key:\"portfolio\",className:\"total-value\"},s.a.createElement(\"td\",{colSpan:\"2\",style:{textAlign:\"left\"}},C),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},v),s.a.createElement(\"td\",{colSpan:\"9\"})),S=s.a.createElement(\"tr\",{key:\"portfolio\",className:\"total-value\"},s.a.createElement(\"td\",{colSpan:\"2\",style:{textAlign:\"left\"}},C),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},_),s.a.createElement(\"td\",{colSpan:\"9\"}));d=s.a.createElement(cr,{balanceList:b,optionalAssets:this.state.filterValue?null:this.state.alwaysShowAssets,visible:!0,preferredUnit:l,coreAsset:this.props.core_asset,coreSymbol:this.props.core_asset.get(\"symbol\"),hiddenAssets:n,orders:o,account:this.props.account,sortKey:this.state.sortKey,sortDirection:this.state.sortDirection,isMyAccount:this.props.isMyAccount,balances:this.props.balances,header:this.getHeader(),extraRow:O}),m=s.a.createElement(cr,{balanceList:g,optionalAssets:this.state.filterValue?null:this.state.alwaysShowAsset,visible:!1,preferredUnit:l,coreSymbol:this.props.core_asset.get(\"symbol\"),settings:r,hiddenAssets:n,orders:o,account:this.props.account,sortKey:this.state.sortKey,sortDirection:this.state.sortDirection,isMyAccount:this.props.isMyAccount,balances:this.props.balances,header:this.getHeader(),extraRow:S});return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(T.b,{defaultActiveTab:0,segmented:!1,setting:\"overviewTab\",className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\"},s.a.createElement(T.a,{title:\"account.portfolio\",subText:v},s.a.createElement(\"div\",{className:\"header-selector\"},s.a.createElement(\"div\",{className:\"filter inline-block\"},s.a.createElement(\"input\",{type:\"text\",placeholder:\"Filter\",onChange:this._handleFilterInput})),s.a.createElement(\"div\",{className:\"selector inline-block\"},s.a.createElement(\"div\",{className:D()(\"inline-block\",{inactive:\"active\"!=i}),onClick:\"active\"!=i?this._changeShownAssets.bind(this,\"active\"):function(){}},s.a.createElement(A.a,{content:\"account.hide_hidden\"})),g.size?s.a.createElement(\"div\",{className:D()(\"inline-block\",{inactive:\"hidden\"!=i}),onClick:\"hidden\"!=i?this._changeShownAssets.bind(this,\"hidden\"):function(){}},s.a.createElement(A.a,{content:\"account.show_hidden\"})):null,s.a.createElement(\"div\",{className:D()(\"inline-block\",{inactive:\"visual\"!=i}),onClick:\"visual\"!=i?this._changeShownAssets.bind(this,\"visual\"):function(){}},s.a.createElement(A.a,{content:\"account.show_visual\"})))),\"visual\"!=i?\"hidden\"===i&&g.size?m:d:s.a.createElement(ns,{balanceObjects:b})),s.a.createElement(T.a,{title:\"account.open_orders\",subText:y},s.a.createElement(Dn,this.props,s.a.createElement(\"tr\",{className:\"total-value\"},s.a.createElement(\"td\",{colSpan:\"8\",style:{textAlign:\"right\"}},C),s.a.createElement(\"td\",{colSpan:\"1\",style:{textAlign:\"right\"}},y),this.props.isMyAccount?s.a.createElement(\"td\",null):null))),s.a.createElement(T.a,{title:\"account.collaterals\",subText:s.a.createElement(\"span\",{className:this.state.globalMarginStatus},E)},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"generic-bordered-box\"},s.a.createElement(qa,{preferredUnit:l,className:\"dashboard-table\",callOrders:c,account:a},s.a.createElement(\"tr\",{className:\"total-value\"},s.a.createElement(\"td\",null,C),s.a.createElement(\"td\",null),s.a.createElement(\"td\",null,w),s.a.createElement(\"td\",{className:\"column-hide-medium\"},k),s.a.createElement(\"td\",null),s.a.createElement(\"td\",null,E),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{colSpan:\"4\"})))))),s.a.createElement(T.a,{title:\"account.activity\",subText:\" \"},s.a.createElement(xt.a,{accountsList:h.a.fromJS([a.get(\"id\")]),compactView:!1,showMore:!0,fullHeight:!0,limit:100,showFilters:!0,dashboard:!0})),a.get(\"proposals\")&&a.get(\"proposals\").size?s.a.createElement(T.a,{title:\"explorer.proposals.title\",subText:String(a.get(\"proposals\")?a.get(\"proposals\").size:0)},s.a.createElement(Nn,{className:\"dashboard-table\",account:a.get(\"id\")})):null))))}}]),t}();fr=Object(P.a)(fr,{propNames:[\"core_asset\"]});var br=function(e){function t(){return dr(this,t),mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hr(t,s.a.Component),pr(t,[{key:\"render\",value:function(){return s.a.createElement(Ln.a,ur({},this.props,{wrap:fr}))}}]),t}(),gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function vr(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function yr(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Er(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wr=function(e){function t(){return vr(this,t),yr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Er(t,s.a.Component),_r(t,[{key:\"componentDidMount\",value:function(){this.props.account&&(r.a.setCurrentAccount.defer(this.props.account.get(\"name\")),d.a.getPossibleFees(this.props.account,\"transfer\"))}},{key:\"componentWillReceiveProps\",value:function(e){if(e.account){var t=e.account.get(\"name\"),a=this.props.account&&this.props.account.get(\"name\");this.props.account&&t===a||(r.a.setCurrentAccount.defer(t),d.a.getPossibleFees(e.account,\"transfer\"))}}},{key:\"render\",value:function(){var e=this.props,t=e.myActiveAccounts,a=e.searchAccounts,n=e.settings,r=e.wallet_locked,i=e.account,l=e.hiddenAssets;if(!i)return s.a.createElement(f.a,null);var c=this.props.account.get(\"name\"),u={account_name:c,myActiveAccounts:t,searchAccounts:a,settings:n,wallet_locked:r,account:i,isMyAccount:o.a.isMyAccount(i),hiddenAssets:l,contained:!0,balances:i.get(\"balances\",Object(m.List)()).toList(),orders:i.get(\"orders\",Object(m.List)()).toList(),viewSettings:this.props.viewSettings,proxy:i.getIn([\"options\",\"voting_account\"]),history:this.props.history};return s.a.createElement(\"div\",{className:\"grid-block page-layout\"},s.a.createElement(\"div\",{className:\"grid-block no-padding\"},s.a.createElement(b.a,null,s.a.createElement(g.a,{path:\"/account/\"+c,exact:!0,render:function(){return s.a.createElement(br,u)}}),s.a.createElement(_.a,{from:\"/account/\"+c+\"/overview\",to:\"/account/\"+c}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/assets\",exact:!0,render:function(){return s.a.createElement(B,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/create-asset\",exact:!0,render:function(){return s.a.createElement(se,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/update-asset/:asset\",exact:!0,render:function(){return s.a.createElement(Te,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/member-stats\",exact:!0,render:function(){return s.a.createElement(Je,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/vesting\",exact:!0,render:function(){return s.a.createElement(et,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/permissions\",exact:!0,render:function(){return s.a.createElement(jt,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/voting\",exact:!0,render:function(){return s.a.createElement(Ea,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/whitelist\",exact:!0,render:function(){return s.a.createElement(Xt,u)}}),s.a.createElement(g.a,{path:\"/account/\"+c+\"/signedmessages\",exact:!0,render:function(){return s.a.createElement(Ut,u)}}))))}}]),t}();wr.propTypes={account:c.a.ChainAccount.isRequired},wr=Object(u.a)(wr,{show_loader:!0});var kr=function(e){function t(){return vr(this,t),yr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Er(t,s.a.Component),_r(t,[{key:\"render\",value:function(){var e=this.props.match.params.account_name;return s.a.createElement(wr,gr({},this.props,{account:e}))}}]),t}();t.default=Object(p.a)(kr,{listenTo:function(){return[o.a,i.a,l.a]},getProps:function(){return{myActiveAccounts:o.a.getState().myActiveAccounts,searchAccounts:o.a.getState().searchAccounts,settings:i.a.getState().settings,hiddenAssets:i.a.getState().hiddenAssets,wallet_locked:l.a.getState().locked,viewSettings:i.a.getState().viewSettings}}})}}]);"],"mappings":"AAAA","sourceRoot":""}